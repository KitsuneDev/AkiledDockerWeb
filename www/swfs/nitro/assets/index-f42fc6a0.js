import{u as i,v as t,w as l,x as yi,y as Oi,z as Sm,D as _r,H as Ai,J as V,K as Sn,L as Ln,N as Nm,O as Tm,Q as ct,U as vm,V as ki,W as wm,X as au,Y as Pt,Z as Rm,_ as xm,$ as ym,a0 as sr,a1 as or,a2 as Pi,a3 as Ys,a4 as iu,a5 as lu,a6 as cu,a7 as Om,a8 as Am,a9 as uu,aa as km,ab as Pm,ac as du,ad as Bo,ae as mu,af as Dm,ag as Mm,ah as gu,ai as li,aj as Lm,ak as Um,al as Fm,am as Gm,an as Bm,ao as Di,ap as Mi,aq as Vm,ar as Hm,as as Wm,at as jm,au as gl,av as qm,aw as Ym,ax as Ta,ay as va,az as wa,aA as zm}from"./vendor-56d266b8.js";import{N as is,a as un,H as zs,M as xe,T as pr,R as te,b as tt,A as ms,c as cr,G as $m,d as Q,D as Km,C as ir,e as Xm,f as He,g as Qm,h as Vo,i as en,j as gn,k as Li,l as Ho,E as Jm,m as pl,n as wr,o as Ms,p as pt,F as Uo,q as Ls,S as $s,r as ys,s as Zm,t as pu,u as Us,v as eg,w as tg,x as rg,y as Wo,z as kr,B as cn,O as hu,V as Rt,I as Ra,P as fs,J as Ut,K as Mr,U as ng,L as sg,Q as xa,W as fu,X as hn,Y as og,Z as ag,_ as ig,$ as lg,a0 as cg,a1 as ug,a2 as dg,a3 as mg,a4 as gg,a5 as pg,a6 as hg,a7 as fg,a8 as Iu,a9 as Ig,aa as Eg,ab as _g,ac as Cg,ad as bg,ae as Sg,af as Ng,ag as Tg,ah as vg,ai as wg,aj as Rg,ak as xg,al as yg,am as Og,an as ci,ao as Ag,ap as Eu,aq as kg,ar as Pg,as as Dg,at as Mg,au as Lg,av as Ug,aw as Fg,ax as Gg,ay as Bg,az as Vg,aA as Hg,aB as Wg,aC as jg,aD as _u,aE as qg,aF as Yg,aG as zg,aH as hl,aI as $g,aJ as Kg,aK as Xg,aL as oa,aM as Qg,aN as Jg,aO as Cu,aP as Zg,aQ as ep,aR as jo,aS as qt,aT as Ts,aU as bu,aV as Su,aW as tp,aX as rp,aY as np,aZ as sp,a_ as op,a$ as ap,b0 as ip,b1 as lp,b2 as Ui,b3 as As,b4 as Nu,b5 as fl,b6 as cp,b7 as up,b8 as dp,b9 as mp,ba as gp,bb as pp,bc as hp,bd as fp,be as Ip,bf as Ep,bg as _p,bh as Cp,bi as bp,bj as Sp,bk as Np,bl as Tp,bm as vp,bn as wp,bo as Rp,bp as xp,bq as yp,br as Op,bs as Ap,bt as kp,bu as Pp,bv as Dp,bw as Mp,bx as Lp,by as Up,bz as Fp,bA as Tu,bB as ui,bC as Gp,bD as vu,bE as Bp,bF as Vp,bG as Hp,bH as Wp,bI as jp,bJ as qp,bK as Yp,bL as zp,bM as $p,bN as Kp,bO as Xp,bP as Qp,bQ as Jp,bR as Zp,bS as eh,bT as th,bU as rh,bV as nh,bW as sh,bX as oh,bY as ah,bZ as ih,b_ as lh,b$ as ch,c0 as uh,c1 as dh,c2 as mh,c3 as gh,c4 as ph,c5 as hh,c6 as fh,c7 as Ih,c8 as Eh,c9 as _h,ca as wu,cb as Ru,cc as qo,cd as Ch,ce as bh,cf as Fs,cg as xu,ch as nt,ci as Sh,cj as Nh,ck as Th,cl as vh,cm as wh,cn as Rh,co as xh,cp as yh,cq as Oh,cr as Ah,cs as kh,ct as ya,cu as Ph,cv as Dh,cw as Mh,cx as Lh,cy as Uh,cz as Fh,cA as Il,cB as Gh,cC as Bh,cD as Wn,cE as Vh,cF as Hh,cG as hr,cH as ft,cI as Wh,cJ as jh,cK as qh,cL as io,cM as Fr,cN as we,cO as Yh,cP as Mt,cQ as zh,cR as $h,cS as Kh,cT as Xh,cU as Qh,cV as Jh,cW as Zh,cX as ef,cY as tf,cZ as rf,c_ as nf,c$ as sf,d0 as of,d1 as af,d2 as lf,d3 as cf,d4 as uf,d5 as di,d6 as df,d7 as mf,d8 as gf,d9 as yu,da as pf,db as hf,dc as El,dd as ff,de as If,df as Ef,dg as _f,dh as mi,di as Cf,dj as bf,dk as Sf,dl as Nf,dm as lo,dn as _l,dp as Tf,dq as vf,dr as wf,ds as Rf,dt as Ou,du as xf,dv as Au,dw as yf,dx as ku,dy as Of,dz as Af,dA as kf,dB as Pf,dC as Cl,dD as vr,dE as Pu,dF as gi,dG as Qr,dH as bl,dI as Sl,dJ as It,dK as vn,dL as Df,dM as Mf,dN as Lf,dO as Uf,dP as Oa,dQ as Ff,dR as Nl,dS as Tl,dT as Gf,dU as Aa,dV as ka,dW as Bf,dX as Du,dY as Vf,dZ as co,d_ as Hf,d$ as Mu,e0 as Wf,e1 as jf,e2 as qf,e3 as Yf,e4 as zf,e5 as $f,e6 as Kf,e7 as Xf,e8 as Pa,e9 as Qf,ea as Jf,eb as Zf,ec as eI,ed as tI,ee as rI,ef as Lu,eg as nI,eh as sI,ei as oI,ej as aI,ek as iI,el as ks,em as lI,en as cI,eo as uI,ep as dI,eq as vl,er as mI,es as gI,et as pI,eu as hI,ev as fI,ew as II,ex as wl,ey as EI,ez as _I,eA as CI,eB as bI,eC as SI,eD as NI,eE as TI,eF as vI,eG as wI,eH as RI,eI as Uu,eJ as xI,eK as yI,eL as OI,eM as AI,eN as kI,eO as Fu,eP as PI,eQ as DI,eR as MI,eS as LI,eT as UI,eU as FI,eV as GI,eW as BI,eX as VI,eY as HI,eZ as WI,e_ as jI,e$ as qI,f0 as YI,f1 as zI,f2 as $I,f3 as KI,f4 as Fi,f5 as Ks,f6 as XI,f7 as Da,f8 as QI,f9 as Rl,fa as JI,fb as ZI,fc as Xt,fd as eE,fe as tE,ff as rE,fg as nE,fh as sE,fi as oE,fj as aE,fk as iE,fl as lE,fm as cE,fn as uE,fo as dE,fp as mE,fq as gE,fr as pE,fs as hE,ft as Gu,fu as xl,fv as Bu,fw as fE,fx as IE,fy as EE,fz as _E,fA as CE,fB as bE,fC as SE,fD as NE,fE as TE,fF as Vr,fG as vE,fH as wE,fI as RE,fJ as xE,fK as yE,fL as OE,fM as AE,fN as kE,fO as PE,fP as DE,fQ as ME,fR as LE,fS as UE,fT as FE,fU as GE,fV as BE,fW as VE,fX as HE,fY as yl,fZ as WE,f_ as jE,f$ as qE,g0 as YE,g1 as zE,g2 as $E,g3 as uo,g4 as Ol,g5 as KE,g6 as XE,g7 as mo,g8 as Vu,g9 as QE,ga as Ma,gb as JE,gc as ZE,gd as e_,ge as Hu,gf as t_,gg as r_,gh as n_,gi as s_,gj as o_,gk as a_,gl as i_,gm as l_,gn as c_,go as u_,gp as d_,gq as m_,gr as g_,gs as Is,gt as p_,gu as Al,gv as h_,gw as f_,gx as I_,gy as Wu,gz as E_,gA as __,gB as C_,gC as b_,gD as S_,gE as N_,gF as T_,gG as v_,gH as w_,gI as R_,gJ as x_,gK as y_,gL as ju,gM as O_,gN as qu,gO as A_,gP as k_,gQ as P_,gR as D_,gS as ln,gT as La,gU as M_,gV as kl,gW as L_,gX as U_,gY as Gi,gZ as Yu,g_ as Lr,g$ as F_,h0 as G_,h1 as B_,h2 as zu,h3 as $u,h4 as V_,h5 as H_,h6 as W_,h7 as Ku,h8 as j_,h9 as q_,ha as Y_,hb as z_,hc as $_,hd as K_,he as X_,hf as Q_,hg as J_,hh as Z_,hi as eC,hj as tC,hk as go,hl as mt,hm as rC,hn as Ua,ho as Pl,hp as nC,hq as sC,hr as oC,hs as aC,ht as iC,hu as lC,hv as cC,hw as uC,hx as dC,hy as mC,hz as gC,hA as pC,hB as hC,hC as fC,hD as Dl,hE as $r,hF as po}from"./nitro-renderer-0af3579c.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function _e(){return is.instance}function _t(o){_e().addLinkEventTracker(o)}function Nt(){return _e().avatar}function Ml(o){return Nt().structureData.getPalette(o)}function Ll(o){return Nt().structureData.getSetType(o)}function Ps(){return _e().cameraManager}function IC(){return _e().core}function EC(){return IC().configuration}function ee(o){o=o.startsWith("event:")?o.substring(6):o,_e().createLinkEvent(o)}function Gs(){var o;return(o=_e())==null?void 0:o.communication}function K(o,e=null){return un.getValue(o,e)}function pi(){var o;return(o=Gs())==null?void 0:o.connection}function Xu(){return _e().localization}const Xn=o=>{!o||!o.length||(o.startsWith("http")?zs.openWebPage(o):ee(o))};function Ct(o){_e().removeLinkEventTracker(o)}function q(){return _e().roomEngine}let Fa=!1,ho=0,fo=0;const Io=(o,e=1)=>{const r=o.clientX,n=o.clientY;let a=o.type;switch(a===xe.MOUSE_CLICK&&(ho&&(fo=1,ho>=Date.now()-300&&fo++),ho=Date.now(),fo===2&&(Fa||(a=xe.DOUBLE_CLICK),fo=0,ho=null)),a){case xe.MOUSE_CLICK:break;case xe.DOUBLE_CLICK:break;case xe.MOUSE_MOVE:Fa=!0;break;case xe.MOUSE_DOWN:Fa=!1;break;case xe.MOUSE_UP:break;case xe.RIGHT_CLICK:break;default:return}q().dispatchMouseEvent(e,r,n,a,o.altKey,o.ctrlKey||o.metaKey,o.shiftKey,!1)};let Ga=!1,Eo=0,_o=0;const Co=(o,e=1,r=!1,n=!1,a=!1,s=!1)=>{let c=0,u=0;o.touches[0]?(c=o.touches[0].clientX,u=o.touches[0].clientY):o.changedTouches[0]&&(c=o.changedTouches[0].clientX,u=o.changedTouches[0].clientY);let m=o.type;switch(r&&(m=pr.TOUCH_LONG),(m===xe.MOUSE_CLICK||m===pr.TOUCH_END)&&(m=xe.MOUSE_CLICK,Eo&&(_o=1,Eo>=Date.now()-300&&_o++),Eo=Date.now(),_o===2&&(Ga||(m=xe.DOUBLE_CLICK),_o=0,Eo=null)),m){case xe.MOUSE_CLICK:break;case xe.DOUBLE_CLICK:break;case pr.TOUCH_START:m=xe.MOUSE_DOWN,Ga=!1;break;case pr.TOUCH_MOVE:m=xe.MOUSE_MOVE,Ga=!0;break;case pr.TOUCH_END:m=xe.MOUSE_UP;break;case pr.TOUCH_LONG:m=xe.MOUSE_DOWN_LONG;break;default:return}m===pr.TOUCH_START&&q().dispatchMouseEvent(e,c,u,m,n,a,s,!1),q().dispatchMouseEvent(e,c,u,m,n,a,s,!1)};function Wt(o){if(!o||!o.model)return!1;const e=H().userId,r=o.model.getValue(te.FURNITURE_OWNER_ID);return e===r}function Bs(o,e,r){return o?o.isRoomOwner||o.controllerLevel>=tt.GUEST||H().isModerator||Wt(q().getRoomObject(o.roomId,e,r)):!1}function Qn(){return _e().roomSessionManager}function jn(o,e=null){Qn().createSession(o,e)}function _C(){const o=Jn();return o?o.model.getValue(te.FIGURE_CAN_STAND_UP):ms.POSTURE_STAND}function Ba(){const o=Jn();if(!o)return!1;const r=o.model.getValue(te.FIGURE_EFFECT);return!(r===29||r===30||r===185)}function H(){return _e().sessionDataManager}function fr(){return K("hc.disabled",!1)?cr.VIP:H().clubLevel}class nr{}nr.OKAY=0;nr.MISSING_OFFER=1;nr.FURNI_LIMIT_REACHED=2;nr.NOT_IN_ROOM=3;nr.NOT_ROOM_OWNER=4;nr.GUILD_ROOM=5;nr.VISITORS_IN_ROOM=6;class CC{constructor(e,r,n){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._depth=r,this._parent=n,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return this._children.length===0}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}const Qu=class{constructor(o,e,r,n,a,s=-1){this._pageId=o,this._layoutCode=e,this._localization=r,this._offers=n,this._acceptSeasonCurrencyAsCredits=a;for(const c of n)c.page=this;s===-1?this._mode=Qu.MODE_NORMAL:this._mode=s}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}};let Bi=Qu;Bi.MODE_NORMAL=0;class ut{}ut.DUCKET_INFO="ducket_info";ut.CREDITS="credits";ut.AVATAR_EFFECTS="avatar_effects";ut.HC_MEMBERSHIP="hc_membership";ut.CLUB_GIFTS="club_gifts";ut.LIMITED_SOLD="limited_sold";ut.PET_ACCESSORIES="pet_accessories";ut.TRAX_SONGS="trax_songs";ut.NEW_ADDITIONS="new_additions";ut.QUEST_SHELL="quest_shell";ut.QUEST_SNOWFLAKES="quest_snowflakes";ut.VAL_QUESTS="val_quests";ut.GUILD_CUSTOM_FURNI="guild_custom_furni";ut.GIFT_SHOP="gift_shop";ut.HORSE_STYLES="horse_styles";ut.HORSE_SHOE="horse_shoe";ut.SET_EASTER="set_easter";ut.ECOTRON_TRANSFORM="ecotron_transform";ut.LOYALTY_INFO="loyalty_info";ut.ROOM_BUNDLES="room_bundles";ut.ROOM_BUNDLES_MOBILE="room_bundles_mobile";ut.HABBO_CLUB_DESKTOP="habbo_club_desktop";ut.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";class bC{constructor(e,r){this.breed=e,this.palettes=r}}class Be{}Be.NONE=0;Be.CONFIRM=1;Be.PURCHASE=2;Be.NO_CREDITS=3;Be.NO_POINTS=4;Be.SOLD_OUT=5;Be.FAILED=6;class xr{}xr.NORMAL="NORMAL";xr.BUILDER="BUILDERS_CLUB";const SC=o=>"",NC=o=>"",Ul=(o,e)=>{const r=o.get(e),n=[];if(r&&r.length)for(const a of r)a.isVisible&&n.push(a);return n},Ju=(o,e,r,n)=>{if(r.isVisible&&r.pageId>0){let a=!1;const s=[r.pageName,r.localization].join(" ").toLowerCase().replace(/ /gi,"");if(s.indexOf(o)>-1&&(n.push(r),a=!0),!a){for(const c of e)if(s.indexOf(c)>=0){n.push(r);break}}}for(const a of r.children)Ju(o,e,a,n)};function TC(o){if(!o.length)return 0;let e=o.length-1;for(;e>=0&&!isNaN(parseInt(o.charAt(e)));)e--;return e>0?parseInt(o.substring(e+1)):-1}function vC(o,e){switch(o){case 0:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 5:return[[16777215],[15658734],[14540253]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const r=[];for(const n of e){const a=q().getPetColorResult(o,n.paletteId);a&&(a.primaryColor===a.secondaryColor?r.push([a.primaryColor]):r.push([a.primaryColor,a.secondaryColor]))}return r}}}class ue{}ue.WALL="i";ue.FLOOR="s";ue.EFFECT="e";ue.HABBO_CLUB="h";ue.BADGE="b";ue.GAME_TOKEN="GAME_TOKEN";ue.PET="p";ue.ROBOT="r";const Zu=class{constructor(o,e,r,n,a,s,c=!1,u=0,m=0){this._productType=o.toLowerCase(),this._productClassId=e,this._extraParam=r,this._productCount=n,this._productData=a,this._furnitureData=s,this._isUniqueLimitedItem=c,this._uniqueLimitedItemSeriesSize=u,this._uniqueLimitedItemsLeft=m}static stripAddonProducts(o){return o.length===1?o:o.filter(e=>e.productType!==ue.BADGE&&e.productType!==ue.EFFECT&&e.productClassId!==Zu.EFFECT_CLASSID_NINJA_DISAPPEAR)}getIconUrl(o=null,e=null){switch(this._productType){case ue.FLOOR:return q().getFurnitureFloorIconUrl(this.productClassId);case ue.WALL:{if(o&&this._furnitureData){let r="";switch(this._furnitureData.className){case"floor":r=["th",this._furnitureData.className,o.product.extraParam].join("_");break;case"wallpaper":r=["th","wall",o.product.extraParam].join("_");break;case"landscape":r=["th",this._furnitureData.className,(o.product.extraParam||"").replace(".","_"),"001"].join("_");break}if(r!=="")return`${K("catalog.asset.url")}/${r}.png`}return q().getFurnitureWallIconUrl(this.productClassId,this._extraParam)}case ue.EFFECT:return SC(this.productClassId);case ue.HABBO_CLUB:return NC(this.productClassId);case ue.BADGE:return H().getBadgeUrl(this._extraParam);case ue.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(o){this._extraParam=o}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(o){this._uniqueLimitedItemsLeft=o}};let Yn=Zu;Yn.EFFECT_CLASSID_NINJA_DISAPPEAR=108;const Kr=class{constructor(o,e,r,n,a,s,c,u,m,p){this._clubLevel=0,this._bundlePurchaseAllowed=!1,this._offerId=o,this._localizationId=e,this._isRentOffer=r,this._priceInCredits=n,this._priceInActivityPoints=a,this._activityPointType=s,this._giftable=c,this._clubLevel=u,this._products=m,this._bundlePurchaseAllowed=p,this.setPricingModelForProducts(),this.setPricingType();for(const g of m)if(g.productType===ue.BADGE){this._badgeCode=g.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(o){this._page=o}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];const o=Yn.stripAddonProducts(this._products);return o.length?o[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const o=gs(this._localizationId);return o?o.name:d(this._localizationId)}get localizationDescription(){const o=gs(this._localizationId);return o?o.description:d(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const o=Yn.stripAddonProducts(this._products);o.length===1?o[0].productCount===1?this._pricingModel=Kr.PRICING_MODEL_SINGLE:this._pricingModel=Kr.PRICING_MODEL_MULTI:o.length>1?this._pricingModel=Kr.PRICING_MODEL_BUNDLE:this._pricingModel=Kr.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=Kr.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=Kr.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=Kr.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=Kr.PRICE_TYPE_NONE}clone(){const o=[],e=gs(this.localizationId);for(const n of this._products){const a=hi(n.productClassId,n.productType);o.push(new Yn(n.productType,n.productClassId,n.extraParam,n.productCount,e,a))}const r=new Kr(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,o,this.bundlePurchaseAllowed);return r.page=this.page,r}};let at=Kr;at.PRICING_MODEL_UNKNOWN="pricing_model_unknown";at.PRICING_MODEL_SINGLE="pricing_model_single";at.PRICING_MODEL_MULTI="pricing_model_multi";at.PRICING_MODEL_BUNDLE="pricing_model_bundle";at.PRICING_MODEL_FURNITURE="pricing_model_furniture";at.PRICE_TYPE_NONE="price_type_none";at.PRICE_TYPE_CREDITS="price_type_credits";at.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints";at.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";class wC{constructor(e){this._furniData=e,this._product=new Yn(this._furniData.type,this._furniData.id,this._furniData.customParams,1,gs(this._furniData.className),this._furniData)}activate(){D(new $m(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return at.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}const RC=(o,e,r=null)=>{let n=null;switch(o.toLocaleLowerCase()){case ue.FLOOR:n=q().getFurnitureFloorIconUrl(e);break;case ue.WALL:n=q().getFurnitureWallIconUrl(e,r);break}return n};class xC{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class Xs{constructor(e,r,n,a,s,c,u,m,p=-1){this._timeLeftMinutes=-1,this._offerId=e,this._furniId=r,this._furniType=n,this._extraData=a,this._stuffData=s,this._price=c,this._status=u,this._averagePrice=m,this._offerCount=p}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}}Xs.TYPE_FLOOR=1;Xs.TYPE_WALL=2;class $n{}$n.ONGOING=1;$n.ONGOING_OWN=1;$n.SOLD=2;$n.EXPIRED=3;class Lt{}Lt.BY_ACTIVITY=1;Lt.BY_VALUE=2;Lt.ADVANCED=3;class ed{constructor(e,r){this._images=e,this._texts=r}getText(e){let r=this._texts[e]||"";return r&&r.length&&(r=r.replace(/\r\n|\r|\n/g,"<br />")),r}getImage(e){const r=this._images[e]||"";if(!r||!r.length)return null;let n=K("catalog.asset.image.url");return n=n.replace("%name%",r),n}}class yC{constructor(e,r,n,a,s,c,u,m){this.roomId=e,this.objectId=r,this.category=n,this.wallLocation=a,this.x=s,this.y=c,this.direction=u,this.offer=m}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}const ls=class{constructor(){this._requestType=ls.REQUEST_TYPE_NONE}resetRequest(){this._requestType=ls.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(o){this._requestType=ls.REQUEST_TYPE_ID,this._requestById=o}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(o){this._requestType=ls.REQUEST_TYPE_OFFER,this._requestedByOfferId=o}get requestByName(){return this._requestByName}set requestByName(o){this._requestType=ls.REQUEST_TYPE_NAME,this._requestByName=o}};let pn=ls;pn.REQUEST_TYPE_NONE=0;pn.REQUEST_TYPE_ID=1;pn.REQUEST_TYPE_OFFER=2;pn.REQUEST_TYPE_NAME=3;class OC{constructor(e,r,n){this.searchValue=e,this.offers=r,this.filteredNodes=n}}function hi(o,e){let r=null;switch(e.toLowerCase()){case ue.FLOOR:r=H().getFloorItemData(o);break;case ue.WALL:r=H().getWallItemData(o);break}return r}function aa(o,e,r){const n=q().getRoomObject(o,e,r);if(!n)return;const a=n.model.getValue(te.FURNITURE_TYPE_ID);switch(r){case Q.FLOOR:return H().getFloorItemData(a);case Q.WALL:return H().getWallItemData(a)}return null}function AC(){const o=Jn();return o?o.model.getValue(te.FIGURE_POSTURE):ms.POSTURE_STAND}function gs(o){return o?H().getProductData(o):null}function ye(){return Qn().getSession(-1)}function fi(){D(new Km)}function qn(){return H().clubLevel>=cr.CLUB}function bo(){return H().clubLevel>=cr.VIP}function kC(o){const e=q().getRoomObject(ye().roomId,o,Q.FLOOR);if(!e||!e.model)return!1;const r=H().userId,n=e.model.getValue(te.FURNITURE_OWNER_ID);return r===n}function PC(){const o=Jn();return o?o.model.getValue(te.FIGURE_EFFECT)===77:!1}function DC(o){Qn().startSession(o)}const Vi=()=>{ye()&&(fi(),Qn().removeSession(-1))};function Jn(){const o=H().userId,e=q().activeRoomId,r=Q.UNIT,n=q().getTotalObjectsForManager(e,r);let a=0;for(;a<n;){const s=q().getRoomObjectByIndex(e,a,r);if(s){const c=ye().userDataManager.getUserDataByIndex(s.id);if(c&&c.webID===o)return s}a++}return null}const Hi=(o,e,r,n=1)=>{const a=q().getRoomObjectBoundingRectangle(o,e,r,n);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},td=(o,e,r,n=1)=>{const a=q().getRoomObjectScreenLocation(o,e,r,n);return a?(a.x=Math.round(a.x),a.y=Math.round(a.y),a):null},MC=(o,e,r=1)=>{const n=q(),a=n.activeRoomId;n.initializeRoomInstanceRenderingCanvas(a,r,o,e)};function LC(o){let e=!1;const r=q().getRoomObject(o.roomId,o.objectId,o.category);return r&&r.model.getValue(te.FURNITURE_SELECTION_DISABLED)===1&&(e=!0,H().isModerator&&(e=!1)),e}function us(o,e,r){q().processRoomObjectOperation(o,e,r)}function Fl(o){q().setActiveRoomId(o)}const D=o=>pi().send(o);class lr{static getAchievementBadgeCode(e){if(!e)return null;let r=e.badgeId;return e.finalLevel||(r=Xu().getPreviousLevelBadgeId(r)),r}static getAchievementCategoryImageUrl(e,r=null,n=!1){const a=K("achievements.images.url");let s=n?"achicon_":"achcategory_";return s+=e.code,r!==null&&(s+=`_${r>0?"active":"inactive"}`),a.replace("%image%",s)}static getAchievementCategoryMaxProgress(e){if(!e)return 0;let r=0;for(const n of e.achievements)r+=n.levelCount;return r}static getAchievementCategoryProgress(e){if(!e)return 0;let r=0;for(const n of e.achievements)r+=n.finalLevel?n.level:n.level-1;return r}static getAchievementCategoryTotalUnseen(e){if(!e)return 0;let r=0;for(const n of e.achievements)n.unseen>0&&r++;return r}static getAchievementHasStarted(e){return e?!!(e.finalLevel||e.level-1>0):!1}static getAchievementIsIgnored(e){if(!e)return!1;const r=K("achievements.unseen.ignored"),n=e.badgeId.replace(/[0-9]/g,"");return r.indexOf(n)>=0}static getAchievementLevel(e){return e?e.finalLevel?e.level:e.level-1:0}}class Gl{constructor(e){this._code=e,this._achievements=[]}getProgress(){return lr.getAchievementCategoryProgress(this)}getMaxProgress(){return lr.getAchievementCategoryMaxProgress(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}class Rr{}Rr.ACTION_SAVE="AEA_ACTION_SAVE";Rr.ACTION_CLEAR="AEA_ACTION_CLEAR";Rr.ACTION_RESET="AEA_ACTION_RESET";Rr.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";class UC{constructor(e,r=!1){this._partColor=e,this._isDisabled=r,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return ir.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class Wi{constructor(e,r,n){this._selectedPartIndex=-1,this._name=e,this._parts=r,this._palettes=n,this._selectedPartIndex=-1}static defaultColorId(e,r){if(!e||!e.length)return-1;let n=0;for(;n<e.length;){const a=e[n];if(a.partColor&&a.partColor.clubLevel<=r)return a.partColor.id;n++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const r of e)r.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let r=0;for(;r<this._parts.length;){if(this._parts[r].id===e){this.selectPartIndex(r);return}r++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let r=0;for(;r<this._palettes.length;){const n=this.getPalette(r);if(n){let a=0;if(e.length>r)a=e[r];else{const c=n[0];c&&c.partColor&&(a=c.partColor.id)}let s=0;for(;s<n.length;){const c=n[s];c.partColor.id===a?(this._paletteIndexes[r]=s,c.isSelected=!0):c.isSelected=!1,s++}}r++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const r=this._parts[this._selectedPartIndex];r&&(r.isSelected=!1)}if(this._parts.length>e){const r=this._parts[e];if(r)return r.isSelected=!0,this._selectedPartIndex=e,r}return null}selectColorIndex(e,r){const n=this.getPalette(r);if(!n||n.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[r],r),this._paletteIndexes[r]=e;const a=n[e];return a?(a.isSelected=!0,this.updatePartColors(),a):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,r){const n=this.getPalette(r);if(!n||n.length<=e)return;const a=n[e];a&&(a.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length||!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const r=e[0];if(!r||!r.partColor)return null;const n=r.partColor.id,a=[];let s=0;for(;s<this._paletteIndexes.length;){const u=this._palettes[s];if(!(!u||u.length<=s))if(u.length>this._paletteIndexes[s]){const m=u[this._paletteIndexes[s]];m&&m.partColor?a.push(m.partColor.id):a.push(n)}else a.push(n);s++}const c=this.getCurrentPart();return c?a.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let r=0;for(;r<this._paletteIndexes.length;){const n=this.getSelectedColor(r);n?e.push(n.partColor):e.push(null),r++}return e}getSelectedColor(e){const r=this.getPalette(e);return!r||r.length<=this._paletteIndexes[e]?null:r[this._paletteIndexes[e]]}getSelectedColorId(e){const r=this.getSelectedColor(e);return r&&r.partColor?r.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const r of this._parts)r&&(r.partColors=e)}hasClubSelectionsOverLevel(e){let r=!1;const n=this.getSelectedColors();if(n){let s=0;for(;s<n.length;){const c=n[s];c&&c.clubLevel>e&&(r=!0),s++}}const a=this.getCurrentPart();if(a&&a.partSet){const s=a.partSet;s&&s.clubLevel>e&&(r=!0)}return r}hasInvalidSelectedItems(e){const r=this.getCurrentPart();if(!r)return!1;const n=r.partSet;if(!(!n||!n.isSellable))return e.indexOf(n.id)>-1}stripClubItemsOverLevel(e){const r=this.getCurrentPart();if(r&&r.partSet&&r.partSet.clubLevel>e){const a=this.selectPartIndex(0);return a&&!a.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(e){const r=[],n=this.getSelectedColors(),a=this.getPalette(0);let s=!1;const c=Wi.defaultColorId(a,e);if(c===-1)return!1;let u=0;for(;u<n.length;){const m=n[u];m?m.clubLevel>e?(r.push(c),s=!0):r.push(m.id):(r.push(c),s=!0),u++}return s&&this.selectColorIds(r),s}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}class gt{static getGender(e){switch(e){case ce.MALE:case"m":case"M":e=ce.MALE;break;case ce.FEMALE:case"f":case"F":e=ce.FEMALE;break;default:e=ce.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,r){if(!e||!r||!this.CURRENT_FIGURE)return null;const n=[],a=[];let s=0;for(;s<this.MAX_PALETTES;)a.push([]),s++;const c=Ll(r);if(!c)return null;const u=Ml(c.paletteID);if(!u)return null;let m=this.CURRENT_FIGURE.getColorIds(r);m||(m=[]);const p=new Array(m.length),g=this.clubItemsDimmed,h=fr();for(const b of u.colors.getValues())if(b.isSelectable&&(g||h>=b.clubLevel)){let N=0;for(;N<this.MAX_PALETTES;){const v=h<b.clubLevel,y=new UC(b,v);a[N].push(y),N++}if(r!==ce.FACE){let v=0;for(;v<m.length;)b.id===m[v]&&(p[v]=b),v++}}let f=[];if(g?f=Nt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):f=Nt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,h),f.indexOf(r)===-1){const b=new Vs(null,null,!1);b.isClear=!0,n.push(b)}const I=r!==ce.FACE,C=c.partSets;for(s=C.length-1;s>=0;){const b=C.getWithIndex(s);let N=!1;if((b.gender===ce.UNISEX||b.gender===this.CURRENT_FIGURE.gender)&&(N=!0),b.isSelectable&&N&&(g||h>=b.clubLevel)){const v=h<b.clubLevel;let y=!0;b.isSellable&&(y=this.hasFigureSetId(b.id)),y&&n.push(new Vs(b,p,I,v))}s--}for(n.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),s=0;s<this.MAX_PALETTES;)a[s].sort(this.colorSorter),s++;return new Wi(r,n,a)}static clubSorter(e,r){const n=e.partSet?e.partSet.clubLevel:9999999999,a=r.partSet?r.partSet.clubLevel:9999999999,s=e.partSet?e.partSet.isSellable:!1,c=r.partSet?r.partSet.isSellable:!1;return s&&!c?1:c&&!s||n>a?-1:n<a?1:e.partSet.id>r.partSet.id?-1:e.partSet.id<r.partSet.id?1:0}static colorSorter(e,r){const n=e.partColor?e.partColor.clubLevel:-1,a=r.partColor?r.partColor.clubLevel:-1;return n<a?-1:n>a?1:e.partColor.index<r.partColor.index?-1:e.partColor.index>r.partColor.index?1:0}static noobSorter(e,r){const n=e.partSet?e.partSet.clubLevel:-1,a=r.partSet?r.partSet.clubLevel:-1,s=e.partSet?e.partSet.isSellable:!1,c=r.partSet?r.partSet.isSellable:!1;return s&&!c?1:c&&!s||n<a?-1:n>a?1:e.partSet.id<r.partSet.id?-1:e.partSet.id>r.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const r=Ll(e);if(!r)return-1;const n=Ml(r.paletteID);if(!n)return-1;for(const a of n.colors.getValues())if(!(!a.isSelectable||fr()<a.clubLevel))return a.id;return-1}static get clubItemsFirst(){return K("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return K("avatareditor.show.clubitems.dimmed",!0)}}gt.MAX_PALETTES=2;gt.CURRENT_FIGURE=null;gt.FIGURE_SET_IDS=[];gt.BOUND_FURNITURE_NAMES=[];const Se=class{constructor(){this._gender="M",this._direction=Se.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(o,e){this._data=new Map,this._colors=new Map,this._gender=e,this.parseFigureString(o),this.updateView()}parseFigureString(o){if(!o)return;const e=o.split(".");if(!(!e||!e.length))for(const r of e){const n=r.split("-");if(!n.length)continue;const a=n[0],s=parseInt(n[1]),c=[];let u=2;for(;u<n.length;)c.push(parseInt(n[u])),u++;c.length||c.push(0),this.savePartSetId(a,s,!1),this.savePartSetColourId(a,c,!1)}}getPartSetId(o){const e=this._data.get(o);return e!==void 0?e:-1}getColorIds(o){const e=this._colors.get(o);return e!==void 0?e:[gt.avatarSetFirstSelectableColor(o)]}getFigureString(){let o="";const e=[];for(const[n,a]of this._data.entries()){const s=this._colors.get(n);let c=n+"-"+a;if(s&&s.length){let u=0;for(;u<s.length;)c=c+("-"+s[u]),u++}e.push(c)}let r=0;for(;r<e.length;)o=o+e[r],r<e.length-1&&(o=o+"."),r++;return o}savePartData(o,e,r,n=!1){this.savePartSetId(o,e,n),this.savePartSetColourId(o,r,n)}savePartSetId(o,e,r=!0){switch(o){case Se.FACE:case Se.HAIR:case Se.HAT:case Se.HEAD_ACCESSORIES:case Se.EYE_ACCESSORIES:case Se.FACE_ACCESSORIES:case Se.SHIRT:case Se.JACKET:case Se.CHEST_ACCESSORIES:case Se.CHEST_PRINTS:case Se.TROUSERS:case Se.SHOES:case Se.TROUSER_ACCESSORIES:e>=0?this._data.set(o,e):this._data.delete(o);break}r&&this.updateView()}savePartSetColourId(o,e,r=!0){switch(o){case Se.FACE:case Se.HAIR:case Se.HAT:case Se.HEAD_ACCESSORIES:case Se.EYE_ACCESSORIES:case Se.FACE_ACCESSORIES:case Se.SHIRT:case Se.JACKET:case Se.CHEST_ACCESSORIES:case Se.CHEST_PRINTS:case Se.TROUSERS:case Se.SHOES:case Se.TROUSER_ACCESSORIES:this._colors.set(o,e);break}r&&this.updateView()}getFigureStringWithFace(o,e=!0){let r="";const n=[Se.FACE],a=[];for(const c of n){const u=this._colors.get(c);if(!u)continue;let m=this._data.get(c);c===Se.FACE&&e&&(m=o);let p=c+"-"+m;if(m>=0){let g=0;for(;g<u.length;)p=p+("-"+u[g]),g++}a.push(p)}let s=0;for(;s<a.length;)r=r+a[s],s<a.length-1&&(r=r+"."),s++;return r}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(o){this._direction=o,this.updateView()}set avatarEffectType(o){this._avatarEffectType=o}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(o){this._notifier=o}};let ce=Se;ce.DEFAULT_DIRECTION=4;ce.MALE="M";ce.FEMALE="F";ce.UNISEX="U";ce.SCALE="h";ce.STD="std";ce.DEFAULT_FRAME="0";ce.FACE="hd";ce.HAIR="hr";ce.HAT="ha";ce.HEAD_ACCESSORIES="he";ce.EYE_ACCESSORIES="ea";ce.FACE_ACCESSORIES="fa";ce.JACKET="cc";ce.SHIRT="ch";ce.CHEST_ACCESSORIES="ca";ce.CHEST_PRINTS="cp";ce.TROUSERS="lg";ce.SHOES="sh";ce.TROUSER_ACCESSORIES="wa";ce.SET_TYPES=[Se.FACE,Se.HAIR,Se.HAT,Se.HEAD_ACCESSORIES,Se.EYE_ACCESSORIES,Se.FACE_ACCESSORIES,Se.JACKET,Se.SHIRT,Se.CHEST_ACCESSORIES,Se.CHEST_PRINTS,Se.TROUSERS,Se.SHOES,Se.TROUSERS];const cs=class{constructor(o,e,r=!0,n=!1){if(this._renderManager=Nt(),this._partSet=o,this._partColors=e,this._useColors=r,this._isDisabled=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,o){const a=o.parts;for(const s of a)this._maxColorIndex=Math.max(this._maxColorIndex,s.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const o=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(o)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(o,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet||!this._isValidFigure&&!this.analyzeFigure())return null;const o=this._partSet.parts.concat().sort(this.sortByDrawOrder),e=new Qm;for(const r of o){if(!r)continue;let n=null,a=0,s=!1;for(;!s&&a<cs.THUMB_DIRECTIONS.length;){const g=ce.SCALE+"_"+ce.STD+"_"+r.type+"_"+r.id+"_"+cs.THUMB_DIRECTIONS[a]+"_"+ce.DEFAULT_FRAME;n=this._renderManager.getAssetByName(g),n&&n.texture?s=!0:a++}if(!s)continue;const c=n.offsetX,u=n.offsetY;let m=null;if(this._useColors&&r.colorLayerIndex>0){const g=this._partColors[r.colorLayerIndex-1];g&&(m=g)}const p=new Vo(n.texture);p.position.set(c,u),m&&(p.tint=m.rgb),e.addChild(p)}return e}updateThumbVisualization(){if(!this._isInitalized)return;let o=this._thumbContainer;o||(o=this.renderThumb()),o&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(o,.2),this._imageUrl=en.generateImageUrl(o),this.notify&&this.notify())}setAlpha(o,e){return o.filters=[cs.ALPHA_FILTER],o}sortByDrawOrder(o,e){const r=cs.DRAW_ORDER.indexOf(o.type),n=cs.DRAW_ORDER.indexOf(e.type);return r<n?-1:r>n?1:o.index<e.index?-1:o.index>e.index?1:0}resetFigure(o){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(o){this._partColors=o,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(o){this._thumbContainer=o,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(o){this._isClear=o}get isSelected(){return this._isSelected}set isSelected(o){this._isSelected=o,this.notify&&this.notify()}get notify(){return this._notifier}set notify(o){this._notifier=o}};let Vs=cs;Vs.ALPHA_FILTER=new Xm(.2);Vs.THUMB_DIRECTIONS=[2,6,0,4,3,1];Vs.DRAW_ORDER=[He.LEFT_HAND_ITEM,He.LEFT_HAND,He.LEFT_SLEEVE,He.LEFT_COAT_SLEEVE,He.BODY,He.SHOES,He.LEGS,He.CHEST,He.CHEST_ACCESSORY,He.COAT_CHEST,He.CHEST_PRINT,He.WAIST_ACCESSORY,He.RIGHT_HAND,He.RIGHT_SLEEVE,He.RIGHT_COAT_SLEEVE,He.HEAD,He.FACE,He.EYES,He.HAIR,He.HAIR_BIG,He.FACE_ACCESSORY,He.EYE_ACCESSORY,He.HEAD_ACCESSORY,He.HEAD_ACCESSORY_EXTRA,He.RIGHT_HAND_ITEM];class ia{constructor(){this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let r=this._categories.get(e);r||(r=gt.createCategory(this,e),r&&(this._categories.set(e,r),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const r=this._categories.get(e);if(!r)return;const n=gt.CURRENT_FIGURE.getPartSetId(e);let a=gt.CURRENT_FIGURE.getColorIds(e);a||(a=[]),r.selectPartId(n),r.selectColorIds(a)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const r of this._categories.values())if(r&&r.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const r of this._categories.values())if(r.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let r=!1;for(const[n,a]of this._categories.entries()){let s=!1;if(a.stripClubItemsOverLevel(e)&&(s=!0),a.stripClubColorsOverLevel(e)&&(s=!0),s){const c=a.getCurrentPart();c&&gt.CURRENT_FIGURE&&gt.CURRENT_FIGURE.savePartData(n,c.id,a.getSelectedColorIds(),!0),r=!0}}return r}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[r,n]of this._categories.entries());return e}selectPart(e,r){const n=this._categories.get(e);if(!n)return;const a=n.selectedPartIndex;n.selectPartIndex(r);const s=n.getCurrentPart();if(s){if(s.isDisabled){n.selectPartIndex(a);return}this._maxPaletteCount=s.maxColorIndex,gt.CURRENT_FIGURE.savePartData(e,s.id,n.getSelectedColorIds(),!0)}}selectColor(e,r,n){const a=this._categories.get(e);if(!a)return;const s=a.getCurrentColorIndex(n);if(a.selectColorIndex(r,n),a.getSelectedColor(n).isDisabled){a.selectColorIndex(s,n);return}gt.CURRENT_FIGURE.savePartSetColourId(e,a.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class FC extends ia{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(ce.FACE),this._isInitalized=!0}selectColor(e,r,n){super.selectColor(e,r,n),this.updateSelectionsFromFigure(ce.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!gt.CURRENT_FIGURE)return;const r=this._categories.get(e);if(!r)return;const n=gt.CURRENT_FIGURE.getPartSetId(e);let a=gt.CURRENT_FIGURE.getColorIds(e);a||(a=[]),r.selectPartId(n),r.selectColorIds(a);for(const s of r.parts){const c=u=>{const m=gt.CURRENT_FIGURE.getFigureStringWithFace(s.id),p=Nt().createAvatarImage(m,Li.LARGE,null,{resetFigure:c,dispose:null,disposed:!1}),g=p.getImageAsSprite(Ho.HEAD);g&&(g.y=10,s.thumbContainer=g,setTimeout(()=>p.dispose(),0))};c()}}get canSetGender(){return!0}get name(){return gn.GENERIC}}const Kt=o=>{if(o==null||typeof o!="object")return o;const e=new o.constructor;for(const r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);return e};class Qt{static makeColorHex(e){return"#"+e}static makeColorNumberHex(e){return"#"+e.toString(16).padStart(6,"0")}static convertFromHex(e){return parseInt(e.replace("#",""),16)}static uintHexColor(e){const r=e>>>0;return Qt.makeColorHex(r.toString(16).substring(2))}static int_to_8BitVals(e){const r=e>>24&255,n=e>>16&255,a=e>>8&255,s=e&255;return[r,n,a,s]}static eight_bitVals_to_int(e,r,n,a){return(e<<24)+(r<<16)+(n<<8)+(a|0)}static int2rgb(e){e>>>=0;const r=e&255,n=(e&65280)>>>8;return"rgba("+[(e&16711680)>>>16,n,r,1].join(",")+")"}}const Un=o=>{let e=Math.floor(o/86400),r=Math.floor(o%86400/3600),n=Math.floor(o%86400%3600/60),a=o%86400%3600%60;return e.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")},Yo=o=>{try{JSON.parse(window.localStorage.getItem(o))}catch{return null}},ji=o=>{let e=_e().localization.getBadgeDesc(o);return(!e||!e.length)&&(e=`badge_desc_${o}`),e},Qs=o=>{let e=_e().localization.getBadgeName(o);return(!e||!e.length)&&(e=`badge_name_${o}`),e};function zo(o){return!o||isNaN(o)?"0":o.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function GC(o){if(!o||isNaN(o))return"0";let e=Math.abs(o);const r=Math.pow(10,1),n=o<0;let a="";const s=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const c of s){let u=e/c.value;if(u=Math.round(u*r)/r,u>=1){e=u,a=c.key;break}}return(n?"-":"")+e+a}function d(o,e=null,r=null){return _e().getLocalizationWithParameters(o,e,r)}class Js{}Js.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects";Js.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";const rd=(o,e)=>o.dispatchEvent(e),Ii=o=>rd(_e().events,o),tn=new Jm,St=o=>rd(tn,o);let nd=!1;const rn=o=>{nd&&Ii(new pl(pl.PLAY_SOUND,o))},Bl=[xe.MOUSE_CLICK],BC=()=>{const o=()=>Bl.forEach(r=>window.removeEventListener(r,e)),e=r=>(nd=!0)&&o();Bl.forEach(r=>window.addEventListener(r,e))};BC();class Z{}Z.DEFAULT=1;Z.WALL_PAPER=2;Z.FLOOR=3;Z.LANDSCAPE=4;Z.POST_IT=5;Z.POSTER=6;Z.SOUND_SET=7;Z.TRAX_SONG=8;Z.PRESENT=9;Z.ECOTRON_BOX=10;Z.TROPHY=11;Z.CREDIT_FURNI=12;Z.PET_SHAMPOO=13;Z.PET_CUSTOM_PART=14;Z.PET_CUSTOM_PART_SHAMPOO=15;Z.PET_SADDLE=16;Z.GUILD_FURNI=17;Z.GAME_FURNI=18;Z.MONSTERPLANT_SEED=19;Z.MONSTERPLANT_REVIVAL=20;Z.MONSTERPLANT_REBREED=21;Z.MONSTERPLANT_FERTILIZE=22;Z.FIGURE_PURCHASABLE_SET=23;class Hs{constructor(e){e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(this._secondsToExpiration===-1)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(wr()-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new Hs(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class qi{constructor(e=-1,r=-1,n=null,a=null,s=-1){this._type=e,this._category=r,this._roomEngine=n,this._stuffData=a,this._extra=s,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new qi;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const r of this._items)if(r.id===e)return r;return null}getTradeItems(e){const r=[],n=this.getLastItem();if(!n)return r;let a=0,s=0;for(;s<this._items.length&&!(a>=e);){const c=this.getItemByIndex(s);!c.locked&&c.isTradable&&c.type===n.type&&(r.push(c),a++),s++}return r}push(e){const r=[...this._items];let n=0;for(;n<r.length;){let a=r[n];if(a.id===e.id){a=a.clone(),a.locked=!1,r.splice(n,1),r.push(a),this._items=r;return}n++}r.push(e),this._items=r,this._items.length===1&&this.prepareGroup()}pop(){const e=[...this._items];let r=null;if(e.length>0){const n=e.length-1;r=e[n],e.splice(n,1)}return this._items=e,r}remove(e){const r=[...this._items];let n=0;for(;n<r.length;){let a=r[n];if(a.id===e)return r.splice(n,1),this._items=r,a;n++}return null}getTotalCount(){if(this._category===Z.POST_IT){let e=0,r=0;for(;r<this._items.length;){const n=this.getItemByIndex(r);e=e+parseInt(n.stuffData.getLegacyString()),r++}return e}return this._items.length}getUnlockedCount(){if(this.category===Z.POST_IT)return this.getTotalCount();let e=0,r=0;for(;r<this._items.length;)this.getItemByIndex(r).locked||e++,r++;return e}getLastItem(){return this._items.length?this.getItemByIndex(this._items.length-1):null}unlockAllItems(){const e=[...this._items];let r=0;for(;r<e.length;){const n=e[r];if(n.locked){const a=n.clone();a.locked=!1,e[r]=a}r++}this._items=e}lockItemIds(e){const r=[...this._items];let n=0,a=!1;for(;n<r.length;){const s=r[n],c=e.indexOf(s.ref)>=0;if(s.locked!==c){a=!0;const u=s.clone();u.locked=c,r[n]=u}n++}return this._items=r,a}setName(){const e=this.getLastItem();if(!e){this._name="";return}let r="";switch(this._category){case Z.POSTER:r="poster_"+e.stuffData.getLegacyString()+"_name";break;case Z.TRAX_SONG:this._name="SONG_NAME";return;default:this.isWallItem?r="wallItem.name."+e.type:r="roomItem.name."+e.type}this._name=d(r)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;this.isWallItem?e=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):e=this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return e?e.isWallItem:!1}get isGroupable(){const e=this.getItemByIndex(0);return e?e.isGroupable:!1}get isSellable(){const e=this.getItemByIndex(0);return e?e.sellable:!1}get items(){return this._items}set items(e){this._items=e}}const Yi=(o,e,r,n=NaN)=>new qi(o,e,q(),r,n),VC=(o,e,r)=>{const n=[];for(const s of o)s.type===e.type&&n.push(s);for(const s of n)if(s.getItemById(e.id))return s;const a=Yi(e.type,e.category,e.stuffData,e.extra);return a.push(e),r?(a.hasUnseenItems=!0,o.unshift(a)):o.push(a),a},HC=(o,e,r)=>{let n=null;for(const a of o)if(a.type===e.type&&a.isWallItem===e.isWallItem&&a.isGroupable)if(e.category===Z.POSTER){if(a.stuffData.getLegacyString()===e.stuffData.getLegacyString()){n=a;break}}else if(e.category===Z.GUILD_FURNI){if(e.stuffData.compare(a.stuffData)){n=a;break}}else{n=a;break}if(n){if(n.push(e),r){n.hasUnseenItems=!0;const a=o.indexOf(n);a>=0&&o.splice(a,1),o.unshift(n)}return n}return n=Yi(e.type,e.category,e.stuffData,e.extra),n.push(e),r?(n.hasUnseenItems=!0,o.unshift(n)):o.push(n),n},Vl=(o,e,r)=>{e.isGroupable?HC(o,e,r):VC(o,e,r)},WC=(o,e,r,n)=>{if(e===1)return o;n[r]=o;for(const s of n)if(!s)return null;const a=new Map;for(const s of n){for(const[c,u]of s)a.set(c,u);s.clear()}return n=null,a},jC=o=>{const e=[];for(const r of o){let n=r.getTotalCount();r.category===Z.POST_IT&&(n=1);let a=0;for(;a<n;)e.push(r.getItemByIndex(a).id),a++}return e};let sd=!1,od=-1;const qC=()=>sd,Zs=o=>sd=o,Es=()=>od,la=o=>od=o,Ws=()=>{Es()!==-1&&(q().cancelRoomObjectPlacement(),la(-1),Zs(!1))},Ei=(o,e=!1)=>{const r=o.petData;if(!r)return!1;const n=Qn().getSession(1);return!n||!n.isRoomOwner&&!n.allowPets?!1:(ee("inventory/hide"),q().processRoomObjectPlacement(Ms.INVENTORY,-r.id,Q.UNIT,pt.PET,r.figureData.figuredata)&&(la(r.id),Zs(!0)),!0)},_s=(o,e=!1)=>{if(!o||!o.getUnlockedCount())return!1;const r=o.getLastItem();if(!r)return!1;if(r.category===Z.FLOOR||r.category===Z.WALL_PAPER||r.category===Z.LANDSCAPE)return e||D(new Uo(r.id)),!1;{ee("inventory/hide");let n=0,a=!1;r.isWallItem?n=Q.WALL:n=Q.FLOOR,r.category===Z.POSTER?a=q().processRoomObjectPlacement(Ms.INVENTORY,r.id,n,r.type,r.stuffData.getLegacyString()):a=q().processRoomObjectPlacement(Ms.INVENTORY,r.id,n,r.type,r.extra.toString(),r.stuffData),a&&(la(r.ref),Zs(!0))}return!0},_i=(o,e=!1)=>{const r=o.botData;if(!r)return!1;const n=Qn().getSession(1);return!n||!n.isRoomOwner?!1:(ee("inventory/hide"),q().processRoomObjectPlacement(Ms.INVENTORY,-r.id,Q.UNIT,pt.RENTABLE_BOT,r.figure)&&(la(r.id),Zs(!0)),!0)};class qe{}qe.FURNI=1;qe.RENTABLE=2;qe.PET=3;qe.BADGE=4;qe.BOT=5;qe.GAMES=6;const YC=o=>o.map(e=>e.petData.id),ad=(o,e,r=!0)=>{const n={petData:o};return r?e.unshift(n):e.push(n),n},id=(o,e)=>{let r=0;for(;r<e.length;){const n=e[r];if(n&&n.petData.id===o)return Es()===n.petData.id&&(Ws(),ee("inventory/open")),e.splice(r,1),n;r++}return null},zC=(o,e,r)=>{const n=YC(o),a=[],s=[];for(const c of e.keys())n.indexOf(c)===-1&&a.push(c);for(const c of n)!e.get(c)&&s.push(c);n.length;for(const c of s)id(c,o);for(const c of a){const u=e.get(c);u&&ad(u,o,r(qe.PET,u.id))}return o},$C=(o,e,r,n)=>{if(e===1)return o;n[r]=o;for(const s of n)if(!s)return null;const a=new Map;for(const s of n){for(const[c,u]of s)a.set(c,u);s.clear()}return n=null,a};class rt{}rt.TRADING_STATE_READY=0;rt.TRADING_STATE_RUNNING=1;rt.TRADING_STATE_COUNTDOWN=2;rt.TRADING_STATE_CONFIRMING=3;rt.TRADING_STATE_CONFIRMED=4;rt.TRADING_STATE_COMPLETED=5;rt.TRADING_STATE_CANCELLED=6;class Hl{constructor(e=-1,r="",n=new Ls,a=0,s=0,c=!1,u=!1){this.userId=e,this.userName=r,this.userItems=n,this.itemCount=a,this.creditsCount=s,this.accepts=c,this.canTrade=u}}class bt{}bt.ALERT_SCAM=0;bt.HOTEL_TRADING_DISABLED=1;bt.YOU_NOT_ALLOWED=2;bt.THEY_NOT_ALLOWED=4;bt.ROOM_DISABLED=6;bt.YOU_OPEN=7;bt.THEY_OPEN=8;bt.ERROR_WHILE_COMMIT=9;bt.THEY_CANCELLED=10;const Wl=o=>{var e;return((e=H().getWallItemData(o))==null?void 0:e.isExternalImage)||!1},jl=o=>{const e=new Ls;if(o.length)for(const n of o){const a=n.spriteId,s=n.category;let c=n.furniType+a;(!n.isGroupable||Wl(a))&&(c="itemid"+n.itemId),n.category===Z.POSTER?c=n.itemId+"poster"+n.stuffData.getLegacyString():n.category===Z.GUILD_FURNI&&(c="");let u=n.isGroupable&&!Wl(n.spriteId)?e.getValue(c):null;u||(u=Yi(a,s,n.stuffData),e.add(c,u)),u.push(new Hs(n))}return e},KC=(o,e)=>{let r=o.toString();if(!(e instanceof $s))return r;let n=1;for(;n<5;)r=r+(","+e.getValue(n)),n++;return r};class Fo{static getProductImageUrl(e,r,n){let a=null;switch(e){case ys.S:a=q().getFurnitureFloorIconUrl(r);break;case ys.I:this.getProductCategory(ys.I,r)===1&&(a=q().getFurnitureWallIconUrl(r,n));break}return a}static getProductCategory(e,r){if(e===ys.S)return 1;if(e===ys.I){if(r===3001)return Z.WALL_PAPER;if(r===3002)return Z.FLOOR;if(r===4057)return Z.LANDSCAPE}return 1}}class $o{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,r){const n=new Array(r);let a=e.length;const s=new Array(a);for(;r--;){var c=this.getRandomNumber(a);n[r]=e[c in s?s[c]:c],s[c]=--a in s?s[a]:a}return n}}const Tt=new Map;Tt.set("r","red");Tt.set("b","blue");Tt.set("g","green");Tt.set("y","yellow");Tt.set("w","white");Tt.set("o","orange");Tt.set("c","cyan");Tt.set("br","brown");Tt.set("pr","purple");Tt.set("pk","pink");Tt.set("red","red");Tt.set("blue","blue");Tt.set("green","green");Tt.set("yellow","yellow");Tt.set("white","white");Tt.set("orange","orange");Tt.set("cyan","cyan");Tt.set("brown","brown");Tt.set("purple","purple");Tt.set("pink","pink");const XC=o=>o.replace(/([\u00A0-\u9999<>&])(.|$)/g,(e,r,n)=>r!=="&"||n!=="#"?(/[\u00A0-\u9999<>&]/.test(n)&&(n="&#"+n.charCodeAt(0)+";"),"&#"+r.charCodeAt(0)+";"+n):e),QC=o=>{let e="";if(o=XC(o),o.startsWith("@")&&o.indexOf("@",1)>-1){let r=null;for(;(r=/@[a-zA-Z]+@/g.exec(o))!==null;){const n=r[0].toString(),a=n.substr(1,n.length-2),s=o.replace(n,"");Tt.has(a)?e='<span style="color: '+Tt.get(a)+'">'+s+"</span>":e=s;break}}else e=o;return e},ld=(o,e)=>window.localStorage.setItem(o,JSON.stringify(e));class ur{}ur.CAMERA_SHUTTER="camera_shutter";ur.CREDITS="credits";ur.DUCKETS="duckets";ur.MESSENGER_NEW_THREAD="messenger_new_thread";ur.MESSENGER_MESSAGE_RECEIVED="messenger_message_received";ur.MODTOOLS_NEW_TICKET="modtools_new_ticket";function JC(o){const e=o.parts;let r=0;for(const n of e)r=Math.max(r,n.colorLayerIndex);return r}function ZC(o,e){return e=e.filter(r=>o.indexOf(r)===-1),[...o,...$o.getRandomElements(e,$o.getRandomNumber(e.length)+1)]}function eb(o,e,r=0,n=[]){if(!o)return null;const a=o.partSets.getValues().filter(s=>!s.isSelectable||s.gender!=="U"&&s.gender!==e||s.clubLevel>r||s.isSellable&&n.indexOf(s.id)===-1?null:s);return!a||!a.length?null:$o.getRandomElement(a)}function tb(o,e,r=0){if(!o)return[];const n=o.colors.getValues().filter(a=>!a.isSelectable||a.clubLevel>r?null:a);return!n||!n.length?null:$o.getRandomElements(n,JC(e))}function rb(o,e,r=0,n=[],a=[]){const s=Nt().structure,c=new Zm(""),u=ZC(s.getMandatorySetTypeIds(e,r),ce.SET_TYPES);for(const m of a){const p=o.getPartSetId(m),g=o.getColorIds(m);c.updatePart(m,p,g)}for(const m of u){if(c.hasPartType(m))continue;const p=s.figureData.getSetType(m),g=eb(p,e,r,n);if(!g)continue;let h=[];g.isColorable&&(h=tb(s.figureData.getPalette(p.paletteID),g,r).map(f=>f.id)),c.updatePart(p.type,g.id,h)}return c.getFigureString()}class nb extends ia{init(){super.init(),this.addCategory(ce.HAIR),this.addCategory(ce.HAT),this.addCategory(ce.HEAD_ACCESSORIES),this.addCategory(ce.EYE_ACCESSORIES),this.addCategory(ce.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return gn.HEAD}}class sb extends ia{init(){super.init(),this.addCategory(ce.TROUSERS),this.addCategory(ce.SHOES),this.addCategory(ce.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return gn.LEGS}}class ob extends ia{init(){super.init(),this.addCategory(ce.SHIRT),this.addCategory(ce.CHEST_PRINTS),this.addCategory(ce.JACKET),this.addCategory(ce.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return gn.TORSO}}class js{}js.COLORMATRIX="colormatrix";js.COMPOSITE="composite";class ab{constructor(e,r){this.texture=e,this.imageUrl=r}}class ib{constructor(e,r){this.effectName=e,this.thumbnailUrl=r}}class lb{constructor(e,r,n){this._productName=e,this._customImage=r,this._furnitureClassName=n}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}class Ft{}Ft.STATE_UNLOCKED=1;Ft.STATE_LOCKED_AVAILABLE=2;Ft.STATE_LOCKED_EXPIRED=3;Ft.STATE_LOCKED_FUTURE=4;class Ar{}Ar.TYPE_CHAT=1;Ar.TYPE_ROOM_INFO=2;Ar.TYPE_IM=3;const cd=()=>{const o=new Date;return`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`},ql=(o=0)=>{const e=o?new Date(Date.now()-o*1e3):new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},ud=o=>{if(!o||!o.length)return null;const e=o.split("/"),r=e[0],n=e[1],a=parseInt(e[2]);return{username:r,figure:n,userId:a}};class jt{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}jt.RELATIONSHIP_NONE=0;jt.RELATIONSHIP_HEART=1;jt.RELATIONSHIP_SMILE=2;jt.RELATIONSHIP_BOBBA=3;class zn{}zn.GROUP_CHAT=0;zn.PRIVATE_CHAT=1;class Hr{}Hr.HIDDEN=0;Hr.SHOW=1;Hr.UNREAD=2;class Yl{populate(e){return e?(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0):!1}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class cb{constructor(e=0,r=0,n=0,a=[]){this.userFriendLimit=e,this.normalFriendLimit=r,this.extendedFriendLimit=n,this.categories=a}}class Wr{constructor(e,r,n=0,a=null,s=0){this._type=s,this._senderId=e,this._message=r,this._secondsSinceSent=n,this._extraData=a,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}Wr.CHAT=0;Wr.ROOM_INVITE=1;Wr.STATUS_NOTIFICATION=2;Wr.SECURITY_NOTIFICATION=3;class ub{constructor(e,r=zn.PRIVATE_CHAT){this._userId=e,this._chats=[],this._type=r}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}const dd=class{constructor(o){this._threadId=++dd.THREAD_ID,this._participant=o,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0}addMessage(o,e,r=0,n=null,a=0){const s=o<0&&n,c=s?ud(n).userId:o,u=this.getLastGroup(c);if(!u)return;s&&(u.type=zn.GROUP_CHAT);const m=new Wr(o,e,r,n,a);return u.addChat(m),this._lastUpdated=new Date,this._unreadCount++,m}getLastGroup(o){let e=this._groups[this._groups.length-1];return e&&e.userId===o||(e=new ub(o),this._groups.push(e)),e}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}};let zi=dd;zi.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED";zi.THREAD_ID=0;function ca(o=0){ee(o===0?"friends-messenger/toggle":`friends-messenger/${o}`)}const db=()=>pu.RENDERER_VERSION,md=()=>"2.1.1";function eo(o){D(new Us(o,!0))}function gd(o){ee(`groups/manage/${o}`)}function zl(o,e){ee(e?`group-members/${o}/${e}`:`group-members/${o}`)}const Ci=class{constructor(o,e,r,n){this.type=o,this.key=e||0,this.color=r||0,this.position=n||4}get code(){return this.key===0&&this.type!==Ci.BASE?null:Ci.getCode(this.type,this.key,this.color,this.position)}static getCode(o,e,r,n){return o+(e<10?"0":"")+e+(r<10?"0":"")+r+n}};let zt=Ci;zt.BASE="b";zt.SYMBOL="s";class vt{}vt.NOT_MEMBER=0;vt.MEMBER=1;vt.REQUEST_PENDING=2;class ar{}ar.REGULAR=0;ar.EXCLUSIVE=1;ar.PRIVATE=2;const mb=o=>{D(o.favourite?new eg(o.groupId):new tg(o.groupId))},$i=o=>D(new rg(o));class ge{}ge.NONE="NONE";ge.ERROR="ERROR";ge.REJECTED="REJECTED";ge.USER_CREATE="USER_CREATE";ge.USER_PENDING="USER_PENDING";ge.USER_ONGOING="USER_ONGOING";ge.USER_FEEDBACK="USER_FEEDBACK";ge.USER_NO_HELPERS="USER_NO_HELPERS";ge.USER_SOMETHING_WRONG="USER_SOMETHING_WRONG";ge.USER_THANKS="USER_THANKS";ge.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED";ge.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU";ge.GUIDE_ACCEPT="GUIDE_ACCEPT";ge.GUIDE_ONGOING="GUIDE_ONGOING";ge.GUIDE_CLOSED="GUIDE_CLOSED";ge.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT";ge.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS";ge.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE";ge.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS";ge.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";class $l{constructor(e,r){this._message=e,this._roomId=r}get message(){return this._message}get roomId(){return this._roomId}}class Kl{constructor(e){this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}class Gr{}Gr.ACTIVE="active";Gr.NONE="none";Gr.EXPIRED="expired";const gb="HC1",pb=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"],hb=o=>{let e=null;return pb.forEach(r=>o.indexOf(r)>-1&&(e=r)),e||gb};class Ko{}Ko.TOO_MANY_PENDING_CALLS_CODE=1;Ko.HAS_ABUSIVE_CALL_CODE=2;const fb=o=>o===1?"useless":o===2?"abusive":"resolved";class At{}At.SELECT_USER=0;At.SELECT_CHATS=1;At.SELECT_TOPICS=2;At.INPUT_REPORT_MESSAGE=3;At.REPORT_SUMMARY=4;class Ve{}Ve.EMERGENCY=1;Ve.GUIDE=2;Ve.IM=3;Ve.ROOM=4;Ve.BULLY=6;Ve.THREAD=7;Ve.MESSAGE=8;Ve.PHOTO=9;const Ib=o=>{switch(o){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador"}return"Unknown"};class Me{constructor(e,r,n,a,s){this._actionId=e,this._name=r,this._actionType=n,this._sanctionTypeId=a,this._actionLengthHours=s}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}}Me.ALERT=1;Me.MUTE=2;Me.BAN=3;Me.KICK=4;Me.TRADE_LOCK=5;Me.MESSAGE=6;class ke{}ke.NONE=0;ke.START_DOORBELL=1;ke.START_PASSWORD=2;ke.STATE_PENDING_SERVER=3;ke.UPDATE_STATE=4;ke.STATE_WAITING=5;ke.STATE_NO_ANSWER=6;ke.STATE_WRONG_PASSWORD=7;ke.STATE_ACCEPTED=8;class dn{}dn.LIST=0;dn.THUMBNAILS=1;dn.FORCED_THUMBNAILS=2;const Eb=()=>{const o=[];for(let e=10;e<=100;e=e+10)o.push(e);return o},Xl=Eb(),ns=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function Ir(o){D(new Wo(o,!1,!0))}class de{}de.DEFAULT="default";de.MOTD="motd";de.MODERATION="moderation";de.EVENT="event";de.NITRO="nitro";de.SEARCH="search";de.ALERT="alert";const bi=class{constructor(o,e=de.DEFAULT,r=null,n=null,a=null,s=null){bi.ITEM_ID+=1,this._id=bi.ITEM_ID,this._messages=o,this._alertType=e,this._clickUrl=r,this._clickUrlText=n,this._title=a,this._imageUrl=s}get id(){return this._id}get messages(){return this._messages}set alertType(o){this._alertType=o}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}};let Si=bi;Si.ITEM_ID=-1;class $e{}$e.FRIENDOFFLINE="friendoffline";$e.FRIENDONLINE="friendonline";$e.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline";$e.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline";$e.ACHIEVEMENT="achievement";$e.BADGE_RECEIVED="badge_received";$e.INFO="info";$e.RECYCLEROK="recyclerok";$e.RESPECT="respect";$e.CLUB="club";$e.SOUNDMACHINE="soundmachine";$e.PETLEVEL="petlevel";$e.CLUBGIFT="clubgift";$e.BUYFURNI="buyfurni";$e.VIP="vip";$e.ROOMMESSAGESPOSTED="roommessagesposted";const Ni=class{constructor(o,e=$e.INFO,r=null,n=null){Ni.ITEM_ID+=1,this._id=Ni.ITEM_ID,this._message=o,this._notificationType=e,this._iconUrl=r,this._linkUrl=n}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}};let pd=Ni;pd.ITEM_ID=-1;const Ti=class{constructor(o,e,r,n,a,s,c){Ti.ITEM_ID+=1,this._id=Ti.ITEM_ID,this._confirmType=o,this._message=e,this._onConfirm=r,this._onCancel=n,this._confirmText=a,this._cancelText=s,this._title=c}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}};let hd=Ti;hd.ITEM_ID=-1;class Ki{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const r=new Ki;return r._credits=e._credits,r._activityPoints=e._activityPoints,r._clubDays=e._clubDays,r._clubPeriods=e._clubPeriods,r._isVIP=e._isVIP,r._pastClubDays=e._pastClubDays,r._pastVipDays=e._pastVipDays,r._isExpiring=e._isExpiring,r._minutesUntilExpiration=e._minutesUntilExpiration,r._minutesSinceLastModified=e._minutesSinceLastModified,r._lastUpdated=e._lastUpdated,r}get credits(){return this._credits}set credits(e){this._lastUpdated=wr(),this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=wr(),this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=wr(),this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=wr(),this._clubPeriods=e}get hasClubLeft(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=wr(),this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=wr(),this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(wr()-this._lastUpdated)/6e4,r=this._minutesUntilExpiration-e;return r>0?r:0}set minutesUntilExpiration(e){this._lastUpdated=wr(),this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=wr(),this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return this.clubDays===0&&this.clubPeriods===0?cr.NO_CLUB:this.isVip?cr.VIP:cr.CLUB}}class to extends kr{}class mn extends to{constructor(e,r){super(e),this._id=-1,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=r}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}}mn.OFFER="RWPUW_OFFER";mn.ERROR="RWPUW_ERROR";mn.CONTENT="RWPUW_CONTENT";class Tn extends to{constructor(e,r=0,n=0,a=0){super(e),this._hue=r,this._saturation=n,this._lightness=a}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}Tn.PREVIEW="RWUBCPE_PREVIEW";Tn.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";const fd=class extends to{constructor(o,e){super(fd.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=o,this._userName=e}get chatMode(){return this._chatMode}get userName(){return this._userName}};let wn=fd;wn.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT";wn.WHISPER="whisper";wn.SHOUT="shout";const Id=class extends to{constructor(o,e,r,n,a,s,c){super(Id.UPDATE_CHAT),this._objectId=o,this._category=e,this._botId=r,this._chat=n,this._automaticChat=a,this._chatDelay=s,this._mixSentences=c}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}};let Xi=Id;Xi.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";class Re extends to{constructor(e,r,n,a){super(e),this._id=r,this._category=n,this._roomId=a}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}Re.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED";Re.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED";Re.USER_REMOVED="RWUROE_USER_REMOVED";Re.FURNI_REMOVED="RWUROE_FURNI_REMOVED";Re.FURNI_ADDED="RWUROE_FURNI_ADDED";Re.USER_ADDED="RWUROE_USER_ADDED";Re.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER";Re.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT";Re.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION";Re.OBJECT_DOUBLE_CLICKED="RWUROE_OBJECT_DOUBLE_CLICKED";class Cs{constructor(e){this.type=e,this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}}Cs.FURNI="IFI_FURNI";class Ed{constructor(e,r,n,a,s,c=!1){this.roomIndex=e,this.category=r,this.id=n,this.name=a,this.userType=s,this.isFriend=c}}class bs{constructor(e){this.type=e,this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}}bs.PET_INFO="IPI_PET_INFO";class Ss{constructor(e){this.type=e,this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}}Ss.RENTABLE_BOT="IRBI_RENTABLE_BOT";const _d=class{constructor(o){this.type=o,this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===_d.OWN_USER}};let et=_d;et.OWN_USER="IUI_OWN_USER";et.PEER="IUI_PEER";et.BOT="IUI_BOT";et.TRADE_REASON_OK=0;et.TRADE_REASON_SHUTDOWN=2;et.TRADE_REASON_NO_TRADING=3;et.DEFAULT_BOT_BADGE_ID="BOT";class ss{static getObjectName(e,r){const n=ye();let a=-1,s=null,c=0;switch(r){case Q.FLOOR:case Q.WALL:{const u=q().getRoomObject(n.roomId,e,r);if(!u)break;if(u.type.indexOf("poster")===0)s=d("${poster_"+parseInt(u.type.replace("poster",""))+"_name}");else{let m=null;const p=u.model.getValue(te.FURNITURE_TYPE_ID);if(r===Q.FLOOR?m=H().getFloorItemData(p):r===Q.WALL&&(m=H().getWallItemData(p)),!m)break;a=m.id,s=m.name}break}case Q.UNIT:{const u=n.userDataManager.getUserDataByIndex(e);if(!u)break;a=u.webID,s=u.name,c=u.type;break}}return!s||!s.length?null:new Ed(e,r,a,s,c)}static getFurniInfo(e,r){const n=ye(),a=new Cs(Cs.FURNI);a.id=e,a.category=r;const s=q().getRoomObject(n.roomId,e,r);if(!s)return;const c=s.model;c.getValue(cn.INFOSTAND_EXTRA_PARAM)&&(a.extraParam=c.getValue(cn.INFOSTAND_EXTRA_PARAM));const u=c.getValue(te.FURNITURE_DATA_FORMAT),m=hu.getData(u);m.initializeFromRoomObjectModel(c),a.stuffData=m;const p=s.type;if(p.indexOf("poster")===0){const I=parseInt(p.replace("poster",""));a.name=d("${poster_"+I+"_name}"),a.description=d("${poster_"+I+"_desc}")}else{const I=c.getValue(te.FURNITURE_TYPE_ID);let C=null;r===Q.FLOOR?C=H().getFloorItemData(I):r===Q.WALL&&(C=H().getWallItemData(I)),C&&(a.name=C.name,a.description=C.description,a.purchaseOfferId=C.purchaseOfferId,a.purchaseCouldBeUsedForBuyout=C.purchaseCouldBeUsedForBuyout,a.rentOfferId=C.rentOfferId,a.rentCouldBeUsedForBuyout=C.rentCouldBeUsedForBuyout,a.availableForBuildersClub=C.availableForBuildersClub,a.tileSizeX=C.tileSizeX,a.tileSizeY=C.tileSizeY)}p.indexOf("post_it")>-1&&(a.isStickie=!0);const g=c.getValue(te.FURNITURE_EXPIRY_TIME),h=c.getValue(te.FURNITURE_EXPIRTY_TIMESTAMP);a.expiration=g<0?g:Math.max(0,g-(wr()-h)/1e3);let f=q().getRoomObjectImage(n.roomId,e,r,new Rt(180),64,null);(!f.data||f.data.width>140||f.data.height>200)&&(f=q().getRoomObjectImage(n.roomId,e,r,new Rt(180),1,null)),a.image=f.getImage(),a.isWallItem=r===Q.WALL,a.isRoomOwner=n.isRoomOwner,a.roomControllerLevel=n.controllerLevel,a.isAnyRoomController=H().isModerator,a.ownerId=c.getValue(te.FURNITURE_OWNER_ID),a.ownerName=c.getValue(te.FURNITURE_OWNER_NAME),a.usagePolicy=c.getValue(te.FURNITURE_USAGE_POLICY);const _=c.getValue(te.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);return _!==0&&(a.groupId=_),Wt(s)&&(a.isOwner=!0),a}static getUserInfo(e,r){const n=ye();let a=et.OWN_USER;r.webID!==H().userId&&(a=et.PEER);const s=new et(a);s.isSpectatorMode=n.isSpectator,s.name=r.name,s.motto=r.custom,s.achievementScore=r.activityPoints,s.webID=r.webID,s.roomIndex=r.roomIndex,s.userType=pt.USER;const c=q().getRoomObject(n.roomId,r.roomIndex,e);if(c&&(s.carryItem=c.model.getValue(te.FIGURE_CARRY_OBJECT)||0),a===et.OWN_USER&&(s.allowNameChange=H().canChangeName),s.amIOwner=n.isRoomOwner,s.isGuildRoom=n.isGuildRoom,s.roomControllerLevel=n.controllerLevel,s.amIAnyRoomController=H().isModerator,s.isAmbassador=H().isAmbassador,a===et.PEER){if(c){const p=c.model.getValue(te.FIGURE_FLAT_CONTROL);p!==null&&(s.targetRoomControllerLevel=p),s.canBeMuted=this.canBeMuted(s),s.canBeKicked=this.canBeKicked(s),s.canBeBanned=this.canBeBanned(s)}s.isIgnored=H().isUserIgnored(r.name),s.respectLeft=H().respectsLeft;const u=H().isSystemShutdown,m=n.tradeMode;if(u)s.canTrade=!1;else switch(m){case Ra.ROOM_CONTROLLER_REQUIRED:{const p=s.roomControllerLevel!==tt.NONE&&s.roomControllerLevel!==tt.GUILD_MEMBER,g=s.targetRoomControllerLevel!==tt.NONE&&s.targetRoomControllerLevel!==tt.GUILD_MEMBER;s.canTrade=p||g;break}case Ra.NO_TRADING:s.canTrade=!0;break;default:s.canTrade=!1;break}s.canTradeReason=et.TRADE_REASON_OK,u&&(s.canTradeReason=et.TRADE_REASON_SHUTDOWN),m!==Ra.FREE_TRADING&&(s.canTradeReason=et.TRADE_REASON_NO_TRADING)}return s.groupId=r.groupId,s.groupBadgeId=H().getGroupBadge(s.groupId),s.groupName=r.groupName,s.badges=n.userDataManager.getUserBadges(r.webID),s.figure=r.figure,s}static getBotInfo(e,r){const n=ye(),a=new et(et.BOT);a.name=r.name,a.motto=r.custom,a.webID=r.webID,a.roomIndex=r.roomIndex,a.userType=r.type;const s=q().getRoomObject(n.roomId,r.roomIndex,e);return s&&(a.carryItem=s.model.getValue(te.FIGURE_CARRY_OBJECT)||0),a.amIOwner=n.isRoomOwner,a.isGuildRoom=n.isGuildRoom,a.roomControllerLevel=n.controllerLevel,a.amIAnyRoomController=H().isModerator,a.isAmbassador=H().isAmbassador,a.badges=[et.DEFAULT_BOT_BADGE_ID],a.figure=r.figure,a}static getRentableBotInfo(e,r){const n=ye(),a=new Ss(Ss.RENTABLE_BOT);a.name=r.name,a.motto=r.custom,a.webID=r.webID,a.roomIndex=r.roomIndex,a.ownerId=r.ownerId,a.ownerName=r.ownerName,a.botSkills=r.botSkills;const s=q().getRoomObject(n.roomId,r.roomIndex,e);return s&&(a.carryItem=s.model.getValue(te.FIGURE_CARRY_OBJECT)||0),a.amIOwner=n.isRoomOwner,a.roomControllerLevel=n.controllerLevel,a.amIAnyRoomController=H().isModerator,a.badges=[et.DEFAULT_BOT_BADGE_ID],a.figure=r.figure,a}static getPetInfo(e){const r=ye(),n=r.userDataManager.getPetData(e.id);if(!n)return;const a=new fs(n.figure);let s=null;a.typeId===Ut.MONSTERPLANT&&(e.level>=e.adultLevel?s="std":s="grw"+e.level);const c=e.ownerId===H().userId,u=new bs(bs.PET_INFO);return u.name=n.name,u.id=e.id,u.ownerId=e.ownerId,u.ownerName=e.ownerName,u.rarityLevel=e.rarityLevel,u.petType=a.typeId,u.petBreed=a.paletteId,u.petFigure=n.figure,u.posture=s,u.isOwner=c,u.roomIndex=n.roomIndex,u.level=e.level,u.maximumLevel=e.maximumLevel,u.experience=e.experience,u.levelExperienceGoal=e.levelExperienceGoal,u.energy=e.energy,u.maximumEnergy=e.maximumEnergy,u.happyness=e.happyness,u.maximumHappyness=e.maximumHappyness,u.respect=e.respect,u.respectsPetLeft=H().respectsPetLeft,u.age=e.age,u.saddle=e.saddle,u.rider=e.rider,u.breedable=e.breedable,u.fullyGrown=e.fullyGrown,u.dead=e.dead,u.rarityLevel=e.rarityLevel,u.skillTresholds=e.skillTresholds,u.canRemovePet=!1,u.publiclyRideable=e.publiclyRideable,u.maximumTimeToLive=e.maximumTimeToLive,u.remainingTimeToLive=e.remainingTimeToLive,u.remainingGrowTime=e.remainingGrowTime,u.publiclyBreedable=e.publiclyBreedable,(c||r.isRoomOwner||H().isModerator||r.controllerLevel>=tt.GUEST)&&(u.canRemovePet=!0),u}static checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=tt.GUILD_ADMIN:e.roomControllerLevel>=tt.GUEST}static isValidSetting(e,r){const n=ye();if(!n.isPrivateRoom)return!1;const a=n.moderationSettings;let s=!1;return a&&(s=r(e,a)),s&&e.targetRoomControllerLevel<tt.ROOM_OWNER}static canBeMuted(e){const r=(n,a)=>{switch(a.allowMute){case Mr.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,r)}static canBeKicked(e){const r=(n,a)=>{switch(a.allowKick){case Mr.MODERATION_LEVEL_ALL:return!0;case Mr.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,r)}static canBeBanned(e){const r=(n,a)=>{switch(a.allowBan){case Mr.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(n);default:return n.roomControllerLevel>=tt.ROOM_OWNER}};return this.isValidSetting(e,r)}}class Ne{}Ne.GENERIC_SKILL=0;Ne.DRESS_UP=1;Ne.SETUP_CHAT=2;Ne.RANDOM_WALK=3;Ne.DANCE=4;Ne.CHANGE_BOT_NAME=5;Ne.SERVE_BEVERAGE=6;Ne.INCLIENT_LINK=7;Ne.NUX_PROCEED=8;Ne.CHANGE_BOT_MOTTO=9;Ne.NUX_TAKE_TOUR=10;Ne.NO_PICK_UP=12;Ne.NAVIGATOR_SEARCH=14;Ne.DONATE_TO_USER=24;Ne.DONATE_TO_ALL=25;const Cd=class{constructor(o=-1,e=-1,r=-1,n="",a="",s="",c=null,u=0,m=0,p=null,g=null){this.senderId=o,this.senderCategory=e,this.roomId=r,this.text=n,this.formattedText=a,this.username=s,this.location=c,this.type=u,this.styleId=m,this.imageUrl=p,this.color=g,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.skipMovement=!1,this._top=0,this._left=0,this.id=++Cd.BUBBLE_COUNTER}get top(){return this._top}set top(o){this._top=o,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(o){this._left=o,this.elementRef&&(this.elementRef.style.left=this._left+"px")}};let bd=Cd;bd.BUBBLE_COUNTER=0;class Br{}Br.CHAT_DEFAULT=0;Br.CHAT_WHISPER=1;Br.CHAT_SHOUT=2;class Ql{constructor(e=0,r=0,n=0,a=0){this.id=e,this.type=r,this.color=n,this.light=a}}const _b=(o,e,r,n=0)=>!(o.left+n+o.width<e.left+n||o.left+n>e.left+n+e.width||o.top+o.height<e.top+r||o.top>e.top+r+e.height);class rr{static savePreset(e,r,n,a,s){ye().updateMoodlightData(e,r,n,a,s)}static changeState(){ye().toggleMoodlightState()}static previewDimmer(e,r,n){q().updateObjectRoomColor(ye().roomId,e,r,n)}static scaleBrightness(e){return~~((e-this.MIN_BRIGHTNESS)*(100-0)/(this.MAX_BRIGHTNESS-this.MIN_BRIGHTNESS)+0)}}rr.AVAILABLE_COLORS=[7665141,21495,15161822,15353138,15923281,8581961,0];rr.HTML_COLORS=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"];rr.MIN_BRIGHTNESS=76;rr.MAX_BRIGHTNESS=255;const Cb=130,bb=100,Sb=130,Nb=100,Tb=130,vb=100,Sd=o=>{let e=0,r=0,n=0,a=0;for(;a<o.length;){switch(a%3){case 0:e=e+o.charCodeAt(a)*37;break;case 1:r=r+o.charCodeAt(a)*37;break;case 2:n=n+o.charCodeAt(a)*37;break}a++}return e=e%bb+Cb,r=r%Nb+Sb,n=n%vb+Tb,`rgb(${e},${r},${n})`};class ps{static getMergedMannequinFigureContainer(e,r){const n=Nt().createFigureContainer(e),a=Nt().createFigureContainer(r);for(const s of this.MANNEQUIN_CLOTHING_PART_TYPES)n.removePart(s);for(const s of a.getPartTypeIds())n.updatePart(s,a.getPartSetId(s),a.getPartColorIds(s));return n}static transformAsMannequinFigure(e){for(const r of e.getPartTypeIds())this.MANNEQUIN_CLOTHING_PART_TYPES.indexOf(r)>=0||e.removePart(r);e.updatePart(this.MANNEQUIN_FIGURE[0],this.MANNEQUIN_FIGURE[1],this.MANNEQUIN_FIGURE[2])}}ps.MANNEQUIN_FIGURE=["hd",99999,[99998]];ps.MANNEQUIN_CLOTHING_PART_TYPES=[He.CHEST_ACCESSORY,He.COAT_CHEST,He.CHEST,He.LEGS,He.SHOES,He.WAIST_ACCESSORY];class Xo{}Xo.POSTURE_STAND=0;Xo.POSTURE_SIT=1;class ds{constructor(e,r,n){this._id=e,this._category=r,this._name=n}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class wb{constructor(e,r,n,a,s,c,u){this.id=e,this.category=r,this.name=n,this.requestRoomObjectId=a,this.targetRoomObjectId=s,this.requestInventoryStripId=c,this.replace=u}}const Qo="0",Nd="1";class yr{}yr.UNSTARTED=-1;yr.ENDED=0;yr.PLAYING=1;yr.PAUSED=2;yr.BUFFERING=3;yr.CUED=5;function Jt(o){D(new ng(o))}const ro=o=>{const e=Math.floor(o/2);return o%2?(e+.5).toString():e.toString()};class pe{}pe.TOGGLE_FURNI_STATE=0;pe.RESET=1;pe.SET_FURNI_STATE=3;pe.MOVE_FURNI=4;pe.GIVE_SCORE=6;pe.CHAT=7;pe.TELEPORT=8;pe.JOIN_TEAM=9;pe.LEAVE_TEAM=10;pe.CHASE=11;pe.FLEE=12;pe.MOVE_AND_ROTATE_FURNI=13;pe.GIVE_SCORE_TO_PREDEFINED_TEAM=14;pe.TOGGLE_TO_RANDOM_STATE=15;pe.MOVE_FURNI_TO=16;pe.GIVE_REWARD=17;pe.CALL_ANOTHER_STACK=18;pe.KICK_FROM_ROOM=19;pe.MUTE_USER=20;pe.BOT_TELEPORT=21;pe.BOT_MOVE=22;pe.BOT_TALK=23;pe.BOT_GIVE_HAND_ITEM=24;pe.BOT_FOLLOW_AVATAR=25;pe.BOT_CHANGE_FIGURE=26;pe.BOT_TALK_DIRECT_TO_AVTR=27;class he{}he.STATES_MATCH=0;he.FURNIS_HAVE_AVATARS=1;he.ACTOR_IS_ON_FURNI=2;he.TIME_ELAPSED_MORE=3;he.TIME_ELAPSED_LESS=4;he.USER_COUNT_IN=5;he.ACTOR_IS_IN_TEAM=6;he.HAS_STACKED_FURNIS=7;he.STUFF_TYPE_MATCHES=8;he.STUFFS_IN_FORMATION=9;he.ACTOR_IS_GROUP_MEMBER=10;he.ACTOR_IS_WEARING_BADGE=11;he.ACTOR_IS_WEARING_EFFECT=12;he.NOT_STATES_MATCH=13;he.FURNI_NOT_HAVE_HABBO=14;he.NOT_ACTOR_ON_FURNI=15;he.NOT_USER_COUNT_IN=16;he.NOT_ACTOR_IN_TEAM=17;he.NOT_HAS_STACKED_FURNIS=18;he.NOT_FURNI_IS_OF_TYPE=19;he.NOT_STUFFS_IN_FORMATION=20;he.NOT_ACTOR_IN_GROUP=21;he.NOT_ACTOR_WEARS_BADGE=22;he.NOT_ACTOR_WEARING_EFFECT=23;he.DATE_RANGE_ACTIVE=24;he.ACTOR_HAS_HANDITEM=25;const Jl=o=>`${o.getFullYear()}/${("0"+(o.getMonth()+1)).slice(-2)}/${("0"+o.getDate()).slice(-2)} ${("0"+o.getHours()).slice(-2)}:${("0"+o.getMinutes()).slice(-2)}`;class ie{}ie.STUFF_SELECTION_OPTION_NONE=0;ie.STUFF_SELECTION_OPTION_BY_ID=1;ie.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2;ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;const Rb=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
uniform mat3 projectionMatrix;
varying vec2 vTextureCoord;
void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,xb=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 lineColor;
uniform vec3 color;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorLine = lineColor * currentColor.a;
    vec3 colorOverlay = color * currentColor.a;

    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {
        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);
    } else if(currentColor.a > 0.0) {
        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);
    }
}`;class yb extends sg{constructor(e,r){super(Rb,xb),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=r}get lineColor(){return this._lineColor}set lineColor(e){const r=this.uniforms.lineColor;typeof e=="number"?(ir.hex2rgb(e,r),this._lineColor=e):(r[0]=e[0],r[1]=e[1],r[2]=e[2],this._lineColor=ir.rgb2hex(r))}get color(){return this._color}set color(e){const r=this.uniforms.color;typeof e=="number"?(ir.hex2rgb(e,r),this._color=e):(r[0]=e[0],r[1]=e[1],r[2]=e[2],this._color=ir.rgb2hex(r))}}const Xr=class{static show(o){Xr.applySelectionShader(Xr.getRoomObject(o))}static hide(o){Xr.clearSelectionShader(Xr.getRoomObject(o))}static clearSelectionShaderFromFurni(o){for(const e of o)Xr.clearSelectionShader(Xr.getRoomObject(e))}static applySelectionShaderToFurni(o){for(const e of o)Xr.applySelectionShader(Xr.getRoomObject(e))}static getRoomObject(o){const e=q();return e.getRoomObject(e.activeRoomId,o,Q.FLOOR)}static applySelectionShader(o){if(!o)return;const e=o.visualization;if(e)for(const r of e.sprites)r.blendMode!==1&&(r.filters=[Xr._selectionShader])}static clearSelectionShader(o){if(!o)return;const e=o.visualization;if(e)for(const r of e.sprites)r.filters=[]}};let hs=Xr;hs._selectionShader=new yb([1,1,1],[.6,.6,.6]);const Ns="	";class Je{}Je.AVATAR_SAYS_SOMETHING=0;Je.AVATAR_WALKS_ON_FURNI=1;Je.AVATAR_WALKS_OFF_FURNI=2;Je.EXECUTE_ONCE=3;Je.TOGGLE_FURNI=4;Je.EXECUTE_PERIODICALLY=6;Je.AVATAR_ENTERS_ROOM=7;Je.GAME_STARTS=8;Je.GAME_ENDS=9;Je.SCORE_ACHIEVED=10;Je.COLLISION=11;Je.EXECUTE_PERIODICALLY_LONG=12;Je.BOT_REACHED_STUFF=13;Je.BOT_REACHED_AVATAR=14;const L=o=>{const{ref:e=null,innerRef:r=null,display:n=null,fit:a=!1,fitV:s=!1,grow:c=!1,shrink:u=!1,fullWidth:m=!1,fullHeight:p=!1,overflow:g=null,position:h=null,float:f=null,pointer:_=!1,visible:I=null,textColor:C=null,classNames:E=[],className:b="",style:N={},children:v=null,...y}=o,R=i.exports.useMemo(()=>{const k=[];return n&&n.length&&k.push("d-"+n),(a||m)&&k.push("w-100"),(a||p)&&k.push("h-100"),s&&k.push("vw-100","vh-100"),c&&k.push("flex-grow-1"),u&&k.push("flex-shrink-0"),g&&k.push("overflow-"+g),h&&k.push("position-"+h),f&&k.push("float-"+f),_&&k.push("cursor-pointer"),I!==null&&k.push(I?"visible":"invisible"),C&&k.push("text-"+C),E.length&&k.push(...E),k},[n,a,s,c,u,m,p,g,h,f,_,I,C,E]),x=i.exports.useMemo(()=>{let k=R.join(" ");return b.length&&(k+=" "+b),k.trim()},[R,b]),F=i.exports.useMemo(()=>{let k={};return Object.keys(N).length&&(k={...k,...N}),k},[N]);return t("div",{ref:r,className:x,style:F,...y,children:v})},Td=i.exports.createContext({isCssGrid:!1}),Ob=o=>t(Td.Provider,{value:o.value,children:o.children}),Ab=()=>i.exports.useContext(Td),re=o=>{const{inline:e=!1,gap:r=2,maxContent:n=!1,columnCount:a=0,center:s=!1,alignSelf:c=null,alignItems:u=null,justifyContent:m=null,fullHeight:p=!0,classNames:g=[],style:h={},...f}=o,_=i.exports.useMemo(()=>{const C=[];return e?C.push("inline-grid"):C.push("grid"),r?C.push("gap-"+r):r===0&&C.push("gap-0"),n&&C.push("flex-basis-max-content"),c&&C.push("align-self-"+c),u&&C.push("align-items-"+u),m&&C.push("justify-content-"+m),!u&&!m&&s&&C.push("align-items-center","justify-content-center"),g.length&&C.push(...g),C},[e,r,n,c,u,m,s,g]),I=i.exports.useMemo(()=>{let C={};return a&&(C["--bs-columns"]=a.toString()),Object.keys(h).length&&(C={...C,...h}),C},[a,h]);return t(Ob,{value:{isCssGrid:!0},children:t(L,{fullHeight:p,classNames:_,style:I,...f})})},Le=o=>{const{columnMinWidth:e=40,columnMinHeight:r=40,columnCount:n=0,fullHeight:a=!1,maxContent:s=!0,overflow:c="auto",style:u={},...m}=o,p=i.exports.useMemo(()=>{let g={};return g["--nitro-grid-column-min-height"]=r+"px",n>1&&(g.gridTemplateColumns=`repeat(auto-fill, minmax(${e}px, 1fr))`),Object.keys(u).length&&(g={...g,...u}),g},[e,r,n,u]);return t(re,{columnCount:n,fullHeight:a,overflow:c,style:p,...m})},w=o=>{const{display:e="flex",column:r=void 0,reverse:n=!1,gap:a=null,center:s=!1,alignSelf:c=null,alignItems:u=null,justifyContent:m=null,classNames:p=[],...g}=o,h=i.exports.useMemo(()=>{const f=[];return r?n?f.push("flex-column-reverse"):f.push("flex-column"):n&&f.push("flex-row-reverse"),a&&f.push("gap-"+a),c&&f.push("align-self-"+c),u&&f.push("align-items-"+u),m&&f.push("justify-content-"+m),!u&&!m&&s&&f.push("align-items-center","justify-content-center"),p.length&&f.push(...p),f},[r,n,a,s,c,u,m,p]);return t(L,{display:e,classNames:h,...g})},M=o=>{const{variant:e="primary",size:r="sm",active:n=!1,disabled:a=!1,classNames:s=[],...c}=o,u=i.exports.useMemo(()=>{const m=["btn"];return e&&m.push("btn-"+e),r&&m.push("btn-"+r),n&&m.push("active"),a&&m.push("disabled"),s.length&&m.push(...s),m},[e,r,n,a,s]);return t(w,{center:!0,classNames:u,...c})},Zr=o=>{const{classNames:e=[],...r}=o,n=i.exports.useMemo(()=>{const a=["btn-group"];return e.length&&a.push(...e),a},[e]);return t(L,{classNames:n,...r})},vd=i.exports.createContext({closers:null,setClosers:null,closeAll:null}),kb=o=>t(vd.Provider,{...o}),Pb=()=>i.exports.useContext(vd),Jo=o=>{const{alignItems:e="center",gap:r=1,children:n=null,...a}=o;return t(w,{alignItems:e,gap:r,...a,children:n})},Zo=o=>{const{headerText:e="",isExpanded:r=!1,gap:n=0,classNames:a=[],children:s=null,...c}=o,[u,m]=i.exports.useState(!1),{setClosers:p=null,closeAll:g=null}=Pb(),h=()=>{g(),m(I=>!I)},f=i.exports.useCallback(()=>m(!1),[]),_=i.exports.useMemo(()=>{const I=["nitro-card-accordion-set"];return u&&I.push("active"),a&&a.length&&I.push(...a),I},[u,a]);return i.exports.useEffect(()=>{m(r)},[r]),i.exports.useEffect(()=>{const I=f;return p(C=>{const E=[...C];return E.push(I),E}),()=>{p(C=>{const E=[...C],b=E.indexOf(I);return b>=0&&E.splice(b,1),E})}},[f,p]),l(T,{classNames:_,gap:n,...c,children:[l(w,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:h,children:[t(S,{children:e}),u&&t(yi,{className:"fa-icon"}),!u&&t(Oi,{className:"fa-icon"})]}),u&&t(T,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:s})]})},Db=o=>{const{...e}=o,[r,n]=i.exports.useState([]),a=i.exports.useCallback(()=>{for(const s of r)s()},[r]);return t(kb,{value:{closers:r,setClosers:n,closeAll:a},children:t(T,{gap:0,...e})})},ne=o=>{const{overflow:e="auto",classNames:r=[],...n}=o,a=i.exports.useMemo(()=>{const s=["container-fluid","content-area"];return r.length&&s.push(...r),s},[r]);return t(T,{classNames:a,overflow:e,...n})},Mb=i.exports.createContext({theme:null}),Lb=o=>t(Mb.Provider,{value:o.value,children:o.children}),se=o=>{const{headerText:e=null,isGalleryPhoto:r=!1,noCloseButton:n=!1,onReportPhoto:a=null,onCloseClick:s=null,justifyContent:c="center",alignItems:u="center",classNames:m=[],children:p=null,...g}=o,h=i.exports.useMemo(()=>{const _=["drag-handler","container-fluid","nitro-card-header"];return m.length&&_.push(...m),_},[m]);return t(T,{center:!0,position:"relative",classNames:h,...g,children:l(w,{fullWidth:!0,center:!0,children:[t("span",{className:"nitro-card-header-text",children:e}),r&&t(L,{position:"absolute",className:"end-4 nitro-card-header-report-camera",onClick:a,children:t(Sm,{className:"fa-icon"})}),t(w,{center:!0,position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:_=>{_.stopPropagation(),_.nativeEvent.stopImmediatePropagation()},onClick:s,children:t(_r,{className:"fa-icon w-12 h-12"})})]})})},wd=o=>{const{justifyContent:e="center",classNames:r=[],variant:n="muted",...a}=o,s=i.exports.useMemo(()=>{const c=["container-fluid","p-1"];return r.length&&c.push(...r),c.push("bg-"+n),c},[r,n]);return t(w,{justifyContent:e,classNames:s,...a})};class kt{}kt.CENTER="DWP_CENTER";kt.TOP_CENTER="DWP_TOP_CENTER";kt.TOP_LEFT="DWP_TOP_LEFT";kt.NOTHING="DWP_NOTHING";const an=[],Zl=0,ec=0,On=o=>{const{uniqueKey:e=null,handleSelector:r=".drag-handler",windowPosition:n=kt.CENTER,disableDrag:a=!1,dragStyle:s={},children:c=null,offsetLeft:u=0,offsetTop:m=0}=o,[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(null),[_,I]=i.exports.useState({x:0,y:0}),[C,E]=i.exports.useState(!1),[b,N]=i.exports.useState(null),v=i.exports.useRef(),y=i.exports.useCallback(()=>{let Y=400;for(const Ee of an)Y+=1,Ee.style.zIndex=Y.toString()},[]),R=i.exports.useCallback(()=>{const Y=an.indexOf(v.current);if(Y===-1)an.push(v.current);else{if(Y===an.length-1)return;Y>=0&&(an.splice(Y,1),an.push(v.current))}y()},[y]),x=i.exports.useCallback(Y=>{R()},[R]),F=i.exports.useCallback(Y=>{R()},[R]),k=i.exports.useCallback((Y,Ee)=>{I({x:Y,y:Ee}),E(!0)},[]),A=i.exports.useCallback(Y=>{k(Y.clientX,Y.clientY)},[k]),O=i.exports.useCallback(Y=>{const Ee=Y.touches[0];k(Ee.clientX,Ee.clientY)},[k]),P=i.exports.useCallback(Y=>{g({x:Y.clientX-_.x,y:Y.clientY-_.y})},[_]),B=i.exports.useCallback(Y=>{const Ee=Y.touches[0];g({x:Ee.clientX-_.x,y:Ee.clientY-_.y})},[_]),G=i.exports.useCallback(()=>{if(!v.current||!b)return;let Y=h.x+p.x,Ee=h.y+p.y;const le=v.current.offsetLeft+Y,Pe=v.current.offsetTop+Ee;if(Pe<Zl?Ee=-v.current.offsetTop:Pe+b.offsetHeight>=document.body.offsetHeight-Zl&&(Ee=document.body.offsetHeight-v.current.offsetHeight-v.current.offsetTop),le+v.current.offsetWidth<ec?Y=-v.current.offsetLeft:le>=document.body.offsetWidth-ec&&(Y=document.body.offsetWidth-v.current.offsetWidth-v.current.offsetLeft),g({x:0,y:0}),f({x:Y,y:Ee}),E(!1),e!==null){const Qe={...Yo(`nitro.windows.${e}`)};Qe.offset={x:Y,y:Ee},ld(`nitro.windows.${e}`,Qe)}},[b,p,h,e]),z=i.exports.useCallback(Y=>{G()},[G]),X=i.exports.useCallback(Y=>{G()},[G]);return i.exports.useEffect(()=>{const Y=v.current;if(!Y)return;if(an.push(Y),y(),!a){const Pe=Y.querySelector(r);Pe&&N(Pe)}let Ee=0,le=0;switch(n){case kt.TOP_CENTER:Y.style.top=50+m+"px",Y.style.left=`calc(50vw - ${Y.offsetWidth/2+u}px)`;break;case kt.CENTER:Y.style.top=`calc(50vh - ${Y.offsetHeight/2+m}px)`,Y.style.left=`calc(50vw - ${Y.offsetWidth/2+u}px)`;break;case kt.TOP_LEFT:Y.style.top=50+m+"px",Y.style.left=50+u+"px";break}return g({x:0,y:0}),f({x:Ee,y:le}),()=>{const Pe=an.indexOf(Y);Pe>=0&&an.splice(Pe,1)}},[r,n,e,a,u,m,y]),i.exports.useEffect(()=>{if(!h&&!p)return;const Y=v.current;Y&&(Y.style.transform=`translate(${h.x+p.x}px, ${h.y+p.y}px)`,Y.style.visibility="visible")},[h,p]),i.exports.useEffect(()=>{if(b)return b.addEventListener(xe.MOUSE_DOWN,A),b.addEventListener(pr.TOUCH_START,O),()=>{b.removeEventListener(xe.MOUSE_DOWN,A),b.removeEventListener(pr.TOUCH_START,O)}},[b,A,O]),i.exports.useEffect(()=>{if(C)return document.addEventListener(xe.MOUSE_UP,z),document.addEventListener(pr.TOUCH_END,X),document.addEventListener(xe.MOUSE_MOVE,P),document.addEventListener(pr.TOUCH_MOVE,B),()=>{document.removeEventListener(xe.MOUSE_UP,z),document.removeEventListener(pr.TOUCH_END,X),document.removeEventListener(xe.MOUSE_MOVE,P),document.removeEventListener(pr.TOUCH_MOVE,B)}},[C,z,P,X,B]),i.exports.useEffect(()=>{if(!e)return;const Y=Yo(`nitro.windows.${e}`);!Y||!Y.offset||(g({x:0,y:0}),Y.offset&&f(Y.offset))},[e]),Ai.exports.createPortal(t(L,{position:"absolute",innerRef:v,className:"draggable-window",onMouseDownCapture:x,onTouchStartCapture:F,style:s,children:c}),document.getElementById("draggable-windows-container"))},oe=o=>{const{theme:e="primary",uniqueKey:r=null,handleSelector:n=".drag-handler",windowPosition:a=kt.CENTER,disableDrag:s=!1,overflow:c="hidden",position:u="relative",gap:m=0,classNames:p=[],...g}=o,h=i.exports.useRef(),f=i.exports.useMemo(()=>{const _=["nitro-card","rounded","shadow"];return _.push(`theme-${e||"primary"}`),p.length&&_.push(...p),_},[e,p]);return t(Lb,{value:{theme:e},children:t(On,{uniqueKey:r,handleSelector:n,windowPosition:a,disableDrag:s,children:t(T,{innerRef:h,overflow:c,position:u,gap:m,classNames:f,...g})})})},st=o=>{const{figure:e="",gender:r="M",headOnly:n=!1,direction:a=0,scale:s=1,classNames:c=[],style:u={},...m}=o,[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(-1),_=i.exports.useRef(!1),I=i.exports.useMemo(()=>{const E=["avatar-image"];return c.length&&E.push(...c),E},[c]),C=i.exports.useMemo(()=>{let E={};return p&&p.length&&(E.backgroundImage=`url('${p}')`),s!==1&&(E.transform=`scale(${s})`,s%1||(E.imageRendering="pixelated")),Object.keys(u).length&&(E={...E,...u}),E},[p,s,u]);return i.exports.useEffect(()=>{const E=Nt().createAvatarImage(e,Li.LARGE,r,{resetFigure:v=>{_.current||f(Math.random())},dispose:()=>{},disposed:!1},null);if(!E)return;let b=Ho.FULL;n&&(b=Ho.HEAD),E.setDirection(b,a);const N=E.getCroppedImage(b);N&&g(N.src),E.dispose()},[e,r,a,n,h]),i.exports.useEffect(()=>(_.current=!1,()=>{_.current=!0}),[]),t(L,{classNames:I,style:C,...m})},Rd=o=>{const{imageUrl:e=null,fit:r=!0,style:n=null,...a}=o,s=i.exports.useMemo(()=>{const c={...n};return e&&(c.background=`url(${e}) center no-repeat`),c},[n,e]);return t(L,{fit:r,style:s,...a})},je=o=>{const{badgeCode:e=null,isGroup:r=!1,showInfo:n=!1,customTitle:a=null,isGrayscale:s=!1,scale:c=1,classNames:u=[],style:m={},children:p=null,...g}=o,[h,f]=i.exports.useState(null),_=i.exports.useMemo(()=>{const C=["badge-image"];return r&&C.push("group-badge"),s&&C.push("grayscale"),u.length&&C.push(...u),C},[u,r,s]),I=i.exports.useMemo(()=>{let C={};return h&&(C.backgroundImage=`url(${r?h.src:K("badge.asset.url").replace("%badgename%",e.toString())})`,C.width=h.width,C.height=h.height,c!==1&&(C.transform=`scale(${c})`,c%1||(C.imageRendering="pixelated"),C.width=h.width*c,C.height=h.height*c)),Object.keys(m).length&&(C={...C,...m}),C},[h,c,m]);return i.exports.useEffect(()=>{if(!e||!e.length)return;let C=!1;const E=N=>{if(N.badgeId!==e)return;const v=en.generateImage(new Vo(N.image));v.onload=()=>f(v),C=!0,H().events.removeEventListener(xa.IMAGE_READY,E)};H().events.addEventListener(xa.IMAGE_READY,E);const b=r?H().getGroupBadgeImage(e):H().getBadgeImage(e);if(b&&!C){const N=en.generateImage(new Vo(b));N.onload=()=>f(N)}return()=>H().events.removeEventListener(xa.IMAGE_READY,E)},[e,r]),l(L,{classNames:_,style:I,...g,children:[n&&K("badge.descriptions.enabled",!0)&&l(L,{className:"badge-information text-black py-1 px-2 small",children:[t("div",{className:"fw-bold mb-1",children:r?a:Qs(e)}),t("div",{children:r?d("group.badgepopup.body"):ji(e)})]}),p]})},Ub=o=>{const{day:e="00",hour:r="00",minutes:n="00",seconds:a="00",classNames:s=[],children:c=null,...u}=o,m=i.exports.useMemo(()=>{const p=["nitro-counter-time"];return s.length&&p.push(...s),p},[s]);return l(w,{gap:1,children:[t(L,{classNames:m,...u,children:l("div",{children:[e!="00"?e:r,e!="00"?d("countdown_clock_unit_days"):d("countdown_clock_unit_hours")]})}),t(L,{style:{marginTop:"3px"},children:":"}),t(L,{classNames:m,...u,children:l("div",{children:[n,d("countdown_clock_unit_minutes")]})}),t(L,{style:{marginTop:"3px"},children:":"}),t(L,{classNames:m,...u,children:l("div",{children:[a,d("countdown_clock_unit_seconds")]})}),c]})},it=o=>{const{type:e="",classNames:r=[],style:n={},...a}=o,s=i.exports.useMemo(()=>{const m=["nitro-currency-icon"];return r.length&&m.push(...r),m},[r]),c=i.exports.useMemo(()=>{let m=K("currency.asset.icon.url","");return m=m.replace("%type%",e.toString()),`url(${m})`},[e]),u=i.exports.useMemo(()=>{let m={};return m.backgroundImage=c,Object.keys(n).length&&(m={...m,...n}),m},[n,c]);return t(L,{classNames:s,style:u,...a})},Qi=o=>{const{productType:e="s",productClassId:r=-1,direction:n=2,extraData:a="",scale:s=1,style:c={},...u}=o,[m,p]=i.exports.useState(null),g=i.exports.useMemo(()=>{var f;let h={};return(f=m==null?void 0:m.src)!=null&&f.length&&(h.backgroundImage=`url('${m.src}')`,h.width=m.width,h.height=m.height),s!==1&&(h.transform=`scale(${s})`,s%1||(h.imageRendering="pixelated")),Object.keys(c).length&&(h={...h,...c}),h},[m,s,c]);return i.exports.useEffect(()=>{let h=null;const f={imageReady:(_,I,C)=>{!C&&I&&(C=en.generateImage(I)),C.onload=()=>p(C)},imageFailed:null};switch(e.toLocaleLowerCase()){case ue.FLOOR:h=q().getFurnitureFloorImage(r,new Rt(n),64,f,0,a);break;case ue.WALL:h=q().getFurnitureWallImage(r,new Rt(n),64,f,0,a);break}if(h){const _=h.getImage();_.onload=()=>p(_)}},[e,r,n,a]),m?t(L,{classNames:["furni-image"],style:g,...u}):null},xd=o=>{const{figure:e=null,userName:r=null,message:n=null,editable:a=!1,onChange:s=null}=o;return l(w,{overflow:"hidden",className:"nitro-gift-card text-black",children:[l("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!r&&t("div",{className:"gift-incognito"}),e&&t("div",{className:"gift-avatar",children:t(st,{figure:e,direction:2,headOnly:!0})})]}),t(w,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:l(T,{grow:!0,overflow:"auto",justifyContent:"between",children:[!a&&t(S,{textBreak:!0,className:"gift-message",children:n}),a&&s!==null&&t("textarea",{className:"gift-message h-100",maxLength:140,value:n,onChange:c=>s(c.target.value),placeholder:d("catalog.gift_wrapping_new.message_hint")}),r&&t(S,{italics:!0,textEnd:!0,className:"pe-1",children:d("catalog.gift_wrapping_new.message_from",["name"],[r])})]})})]})},T=o=>{const{size:e=0,offset:r=0,column:n=!0,gap:a=2,classNames:s=[],...c}=o,{isCssGrid:u=!1}=Ab(),m=i.exports.useMemo(()=>{const p=[];if(e){let g=`col-${e}`;u&&(g=`g-${g}`),p.push(g)}if(r){let g=`offset-${r}`;u&&(g=`g-start-${r}`),p.push(g)}return s.length&&p.push(...s),p},[e,r,u,s]);return t(w,{classNames:m,column:n,gap:a,...c})},Rn=o=>{const{count:e=0,position:r="absolute",classNames:n=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return n.length&&u.push(...n),u},[n]);return l(L,{position:"absolute",classNames:c,...s,children:[e,a]})},qs=o=>{const{value:e=0}=o,r=e.toString().split("");return t(V,{children:r.map((n,a)=>t("i",{className:"limited-edition-number n-"+n},a))})},yd=o=>{const{uniqueNumber:e=0,uniqueSeries:r=0,classNames:n=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["unique-compact-plate","z-index-1"];return n.length&&u.push(...n),u},[n]);return l(L,{classNames:c,...s,children:[t("div",{children:t(qs,{value:e})}),t("div",{children:t(qs,{value:r})}),a]})},Fb=o=>{const{uniqueLimitedItemsLeft:e=0,uniqueLimitedSeriesSize:r=0,classNames:n=[],...a}=o,s=i.exports.useMemo(()=>{const c=["unique-complete-plate"];return n.length&&c.push(...n),c},[n]);return t(L,{classNames:s,...a,children:l(T,{className:"plate-container",gap:0,children:[l(w,{justifyContent:"between",alignItems:"center",children:[d("unique.items.left"),t("div",{children:t(qs,{value:e})})]}),l(w,{justifyContent:"between",alignItems:"center",children:[d("unique.items.number.sold"),t("div",{children:t(qs,{value:r})})]})]})})},be=o=>{const{itemImage:e=void 0,itemColor:r=void 0,itemActive:n=!1,itemCount:a=1,itemCountMinimum:s=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:m=!1,itemHighlight:p=!1,disabled:g=!1,center:h=!0,column:f=!0,style:_={},classNames:I=[],position:C="relative",overflow:E="hidden",children:b=null,...N}=o,v=i.exports.useMemo(()=>{const R=["layout-grid-item","border","border-2","border-muted","rounded"];return n&&R.push("active"),(c||u>0)&&R.push("unique-item"),c&&R.push("sold-out"),m&&R.push("unseen"),p&&R.push("has-highlight"),g&&R.push("disabled"),e===null&&R.push("icon","loading-icon"),I.length&&R.push(...I),R},[n,c,u,m,p,g,e,I]),y=i.exports.useMemo(()=>{let R={..._};return e&&!(c||u>0)&&(R.backgroundImage=`url(${e})`),r&&(R.backgroundColor=r),Object.keys(_).length&&(R={...R,..._}),R},[_,e,r,c,u]);return l(T,{center:h,pointer:!0,position:C,overflow:E,column:f,classNames:v,style:y,...N,children:[a>s&&t(Rn,{count:a}),u>0&&l(V,{children:[t(L,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute bottom-0 unique-item-counter",children:t(qs,{value:u})})]}),b]})},nn=o=>{const{imageUrl:e=null,className:r="",...n}=o;return t("img",{src:e,className:"no-select "+r,alt:"",...n})},Ji=o=>{const{...e}=o;return l(L,{classNames:["spinner-container"],...e,children:[t(L,{className:"spinner"}),t(L,{className:"spinner"}),t(L,{className:"spinner"})]})},Gb=o=>{const{roomId:e=-1,textureReceiver:r=null,onClose:n=null}=o,a=i.exports.useRef(),s=()=>{if(!a||!a.current)return null;const u=a.current.getBoundingClientRect();return new fu(Math.floor(u.x),Math.floor(u.y),Math.floor(u.width),Math.floor(u.height))},c=()=>{rn(ur.CAMERA_SHUTTER),r(q().createTextureFromRoom(e,1,s()))};return t(On,{handleSelector:".nitro-room-thumbnail-camera",children:l("div",{className:"nitro-room-thumbnail-camera px-2",children:[t("div",{ref:a,className:"camera-frame"}),l("div",{className:"d-flex align-items-end h-100 pb-2",children:[t("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:n,children:d("cancel")}),t("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:c,children:d("navigator.thumbeditor.save")})]})]})})},ua=o=>{const{title:e="",onClose:r=null,classNames:n=[],children:a=null,type:s=de.DEFAULT,...c}=o,u=i.exports.useMemo(()=>{const m=["nitro-alert"];return m.push("nitro-alert-"+s),n.length&&m.push(...n),m},[n,s]);return l(oe,{classNames:u,theme:"primary-slim",...c,children:[t(se,{headerText:e,onCloseClick:r}),t(ne,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:a})]})};class wt{}wt.BOUNCE="bounce";wt.SLIDE_LEFT="slideLeft";wt.SLIDE_RIGHT="slideRight";wt.FLIP_X="flipX";wt.FADE_IN="fadeIn";wt.FADE_DOWN="fadeDown";wt.FADE_UP="fadeUp";wt.HEAD_SHAKE="headShake";function Bb(o,e,r=300){switch(o){case wt.BOUNCE:switch(e){default:return{};case Sn:return{animationName:"bounceIn",animationDuration:`${r}ms`};case Ln:return{animationName:"bounceOut",animationDuration:`${r}ms`}}case wt.SLIDE_LEFT:switch(e){default:return{};case Sn:return{animationName:"slideInLeft",animationDuration:`${r}ms`};case Ln:return{animationName:"slideOutLeft",animationDuration:`${r}ms`}}case wt.SLIDE_RIGHT:switch(e){default:return{};case Sn:return{animationName:"slideInRight",animationDuration:`${r}ms`};case Ln:return{animationName:"slideOutRight",animationDuration:`${r}ms`}}case wt.FLIP_X:switch(e){default:return{};case Sn:return{animationName:"flipInX",animationDuration:`${r}ms`};case Ln:return{animationName:"flipOutX",animationDuration:`${r}ms`}}case wt.FADE_UP:switch(e){default:return{};case Sn:return{animationName:"fadeInUp",animationDuration:`${r}ms`};case Ln:return{animationName:"fadeOutDown",animationDuration:`${r}ms`}}case wt.FADE_IN:switch(e){default:return{};case Sn:return{animationName:"fadeIn",animationDuration:`${r}ms`};case Ln:return{animationName:"fadeOut",animationDuration:`${r}ms`}}case wt.FADE_DOWN:switch(e){default:return{};case Sn:return{animationName:"fadeInDown",animationDuration:`${r}ms`};case Ln:return{animationName:"fadeOutUp",animationDuration:`${r}ms`}}case wt.HEAD_SHAKE:switch(e){default:return{};case Sn:return{animationName:"headShake",animationDuration:`${r}ms`}}}return null}const no=o=>{const{type:e=null,inProp:r=!1,timeout:n=300,className:a=null,children:s=null}=o,[c,u]=i.exports.useState(!1);return i.exports.useEffect(()=>{let m=null;return r?u(!0):m=setTimeout(()=>{u(!1),clearTimeout(n)},n),()=>{m&&clearTimeout(m)}},[r,n]),t(Nm,{in:r,timeout:n,children:m=>t("div",{className:(a??"")+" animate__animated",style:{...Bb(e,m,n)},children:c&&s})})},Zi=o=>{const{fadesOut:e=!0,timeoutMs:r=8e3,onClose:n=null,overflow:a="hidden",classNames:s=[],...c}=o,[u,m]=i.exports.useState(!1),p=i.exports.useMemo(()=>{const g=["nitro-notification-bubble","rounded"];return s.length&&g.push(...s),g},[s]);return i.exports.useEffect(()=>(m(!0),()=>m(!1)),[]),i.exports.useEffect(()=>{if(!e)return;const g=setTimeout(()=>{m(!1),setTimeout(()=>n(),300)},r);return()=>clearTimeout(g)},[e,r,n]),t(no,{type:wt.FADE_IN,inProp:u,timeout:300,children:t(w,{overflow:a,classNames:p,onClick:n,...c})})},Jr=o=>{const{figure:e="",typeId:r=-1,paletteId:n=-1,petColor:a=16777215,customParts:s=[],posture:c="std",headOnly:u=!1,direction:m=0,scale:p=1,style:g={},...h}=o,[f,_]=i.exports.useState(null),[I,C]=i.exports.useState(0),[E,b]=i.exports.useState(0),N=i.exports.useRef(!1),v=i.exports.useMemo(()=>{let y={};return f&&f.length&&(y.backgroundImage=`url(${f})`),p!==1&&(y.transform=`scale(${p})`,p%1||(y.imageRendering="pixelated")),y.width=I,y.height=E,Object.keys(g).length&&(y={...y,...g}),y},[f,p,g,I,E]);return i.exports.useEffect(()=>{let y=r,R=n,x=a,F=s,k=u;if(e&&e.length){const O=new fs(e);y=O.typeId,R=O.paletteId,x=O.color,F=O.customParts}y===16&&(k=!1);const A=q().getRoomObjectPetImage(y,R,x,new Rt(m*45),64,{imageReady:(O,P,B)=>{N.current||(B?(_(B.src),C(B.width),b(B.height)):P&&(_(en.generateImageUrl(P)),C(P.width),b(P.height)))},imageFailed:O=>{}},k,0,F,c);if(A){const O=A.getImage();O&&(_(O.src),C(O.width),b(O.height))}},[e,r,n,a,s,c,u,m]),i.exports.useEffect(()=>(N.current=!1,()=>{N.current=!0}),[]),t(L,{classNames:["pet-image"],style:v,...h})},el=o=>{const{text:e="",progress:r=0,maxProgress:n=100,position:a="relative",justifyContent:s="center",classNames:c=[],children:u=null,...m}=o,p=i.exports.useMemo(()=>{const g=["nitro-progress-bar","text-white"];return c.length&&g.push(...c),g},[c]);return l(T,{position:a,justifyContent:s,classNames:p,...m,children:[e&&e.length>0&&t(w,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:e}),t(L,{className:"nitro-progress-bar-inner",style:{width:~~((r-0)*(100-0)/(n-0)+0)+"%"}}),u]})},tl=o=>{const{level:e=0,classNames:r=[],children:n=null,...a}=o,s=i.exports.useMemo(()=>{const c=["nitro-rarity-level"];return r.length&&c.push(...r),c},[r]);return l(L,{classNames:s,...a,children:[t("div",{children:e}),n]})},da=o=>{const{roomPreviewer:e=null,height:r=0,children:n=null}=o,[a,s]=i.exports.useState(null),c=i.exports.useRef(),u=m=>{e&&(m.shiftKey?e.changeRoomObjectDirection():e.changeRoomObjectState())};return i.exports.useEffect(()=>{if(!e)return;const m=g=>{!e||!a||!c.current||(e.updatePreviewRoomView(),a.canvasUpdated&&(c.current.style.backgroundImage=`url(${en.generateImageUrl(a.master)})`))};if(!a&&c.current&&e){let h=document.defaultView.getComputedStyle(c.current,null).backgroundColor;h=ir.rgbStringToHex(h),h=h.replace("#","0x"),e.backgroundColor=parseInt(h,16);const f=c.current.parentElement.clientWidth;e.getRoomCanvas(f,r);const _=e.getRenderingCanvas();s(_),_.canvasUpdated=!0,m()}hn().add(m);const p=new ResizeObserver(()=>{if(!e||!c.current)return;const g=c.current.parentElement.offsetWidth;e.modifyRoomCanvas(g,r),m()});return p.observe(c.current),()=>{p.disconnect(),hn().remove(m)}},[a,e,c,r]),l("div",{className:"room-preview-container",children:[t("div",{ref:c,className:"room-preview-image",style:{height:r},onClick:u}),n]})},ma=o=>{const{roomId:e=-1,customUrl:r=null,shrink:n=!0,overflow:a="hidden",classNames:s=[],children:c=null,...u}=o,m=i.exports.useMemo(()=>{const g=["room-thumbnail","rounded","border"];return s.length&&g.push(...s),g},[s]),p=i.exports.useMemo(()=>r&&r.length?K("image.library.url")+r:K("thumbnails.url").replace("%thumbnail%",e.toString()),[r,e]);return l(L,{shrink:n,overflow:a,classNames:m,...u,children:[p&&t("img",{alt:"",src:p}),c]})},Od=o=>{const{color:e="",message:r="",date:n="",senderName:a="",customTitle:s=null,onCloseClick:c=null}=o;return t(On,{handleSelector:".drag-handler",children:l(T,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${e}`,children:[l(w,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[t(L,{position:"absolute",pointer:!0,className:"trophy-close",onClick:c}),t(S,{bold:!0,children:d("widget.furni.trophy.title")})]}),l(T,{className:"trophy-content py-1",gap:1,children:[s&&t(S,{bold:!0,children:s}),r]}),l(w,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[t(S,{bold:!0,children:n}),t(S,{bold:!0,children:a})]})]})})},Er=o=>{const{userId:e=0,userName:r=null,classNames:n=[],pointer:a=!0,children:s=null,...c}=o,u=i.exports.useMemo(()=>{const m=["nitro-friends-spritesheet","icon-profile-sm"];return n.length&&m.push(...n),m},[n]);return t(L,{classNames:u,pointer:a,onClick:m=>Jt(e),...c,children:s})},jr=o=>{const{isActive:e=!1,count:r=0,overflow:n="hidden",position:a="relative",pointer:s=!0,classNames:c=[],children:u=null,...m}=o,p=i.exports.useMemo(()=>{const g=["nav-item","rounded-top","border"];return e&&g.push("active"),c.length&&g.push(...c),g},[e,c]);return l(w,{overflow:n,pointer:s,position:a,classNames:p,...m,children:[t(w,{shrink:!0,center:!0,children:u}),r>0&&t(Rn,{count:r})]})},In=o=>{const{justifyContent:e="center",gap:r=1,classNames:n=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["container-fluid","nitro-card-tabs","pt-1"];return n.length&&u.push(...n),u},[n]);return t(w,{justifyContent:e,gap:r,classNames:c,...s,children:a})},Vt=(...o)=>o.filter(Boolean).join(" "),Vb=o=>{const{classNames:e=[],...r}=o,n=i.exports.useMemo(()=>{const a=["form-group"];return e.length&&a.push(...e),a},[e]);return t(w,{classNames:n,...r})},Hb=o=>{const{variant:e="black",height:r=1,classNames:n=[],style:a={},...s}=o,c=i.exports.useMemo(()=>{const m=[];return e&&m.push("bg-"+e),n.length&&m.push(...n),m},[e,n]),u=i.exports.useMemo(()=>{let m={display:"list-item"};return r>0&&(m.height=r),Object.keys(a).length&&(m={...m,...a}),m},[r,a]);return t(L,{classNames:c,style:u,...s})},ga=o=>{var _,I;const{rows:e=[],overscan:r=5,scrollToBottom:n=!1,rowRender:a=null}=o,[s,c]=i.exports.useState(e.length-1),u=i.exports.useRef(null),{virtualItems:m=[],totalSize:p=0,scrollToIndex:g=null}=Tm({parentRef:u,size:e.length,overscan:r}),h=m.length>0&&((_=m==null?void 0:m[0])==null?void 0:_.start)||0,f=m.length>0?p-(((I=m==null?void 0:m[m.length-1])==null?void 0:I.end)||0):0;return i.exports.useEffect(()=>{n&&g(s)},[n,s,g]),l(L,{fit:!0,innerRef:u,position:"relative",overflow:"auto",children:[h>0&&t("div",{style:{minHeight:`${h}px`}}),m.map(C=>{const E=e[C.index];return E?t("div",{"data-index":C.index,ref:C.measureRef,children:a(E)},C.key):t(i.exports.Fragment,{},C.key)}),f>0&&t("div",{style:{minHeight:`${f}px`}})]})},S=o=>{const{variant:e="black",fontWeight:r=null,fontSize:n=0,align:a=null,bold:s=!1,underline:c=!1,italics:u=!1,truncate:m=!1,center:p=!1,textEnd:g=!1,small:h=!1,wrap:f=!1,noWrap:_=!1,textBreak:I=!1,...C}=o,E=i.exports.useMemo(()=>{const b=["d-inline"];return e&&b.push("text-"+e),s&&b.push("fw-bold"),r&&b.push("fw-"+r),n&&b.push("fs-"+n),a&&b.push("text-"+a),c&&b.push("text-decoration-underline"),u&&b.push("fst-italic"),m&&b.push("text-truncate"),p&&b.push("text-center"),g&&b.push("text-end"),h&&b.push("small"),f&&b.push("text-wrap"),_&&b.push("text-nowrap"),I&&b.push("text-break"),b},[e,r,n,a,s,c,u,m,p,g,h,f,_,I]);return t(L,{classNames:E,...C})},Wb=o=>{const{isError:e=!1,message:r="",percent:n=0}=o;return t(T,{fullHeight:!0,position:"relative",className:"nitro-loading",children:t(L,{fullHeight:!0,className:"container h-100",children:l(T,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[t(L,{className:"connecting-duck"}),t(T,{size:6,className:"text-center py-4",children:e&&r&&r.length?t(L,{className:"fs-4 text-shadow",children:r}):l(V,{children:[l(S,{fontSize:4,variant:"white",className:"text-shadow",children:[n.toFixed(),"%"]}),t(el,{progress:n,className:"mt-2 large"})]})})]})})})},En=(o,e,r,n=!0)=>{i.exports.useEffect(()=>{if(n)return Array.isArray(o)?o.map(a=>e.addEventListener(a,r)):e.addEventListener(o,r),()=>{Array.isArray(o)?o.map(a=>e.removeEventListener(a,r)):e.removeEventListener(o,r)}},[o,e,n,r])},tc=(o,e)=>En(o,EC().events,e),jb=(o,e)=>En(o,_e().cameraManager.events,e),qb=(o,e)=>En(o,_e().localization.events,e),Fn=(o,e)=>En(o,_e().events,e),Te=(o,e)=>En(o,q().events,e),Ye=(o,e)=>En(o,Qn().events,e),Yb=(o,e)=>En(o,H().events,e),Hn=(o,e,r=!0)=>En(o,_e().soundManager.events,e,r),U=(o,e)=>{i.exports.useEffect(()=>{const r=new o(e);return Gs().registerMessageEvent(r),()=>Gs().removeMessageEvent(r)},[o,e])},lt=(o,e,r=!0)=>En(o,tn,e,r),zb=()=>{const[o,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[m,p]=i.exports.useState(0),g=i.exports.useMemo(()=>{let b=0;return r.forEach(N=>b+=lr.getAchievementCategoryTotalUnseen(N)),b},[r]),h=i.exports.useMemo(()=>{let b=0;return r.forEach(N=>b+=N.getProgress()),b},[r]),f=i.exports.useMemo(()=>{let b=0;return r.forEach(N=>b+=N.getMaxProgress()),b},[r]),_=i.exports.useMemo(()=>~~((h-0)*(100-0)/(f-0)+0),[h,f]),I=i.exports.useMemo(()=>a===null?null:r.find(b=>b.code===a),[r,a]),C=i.exports.useMemo(()=>c===-1||!I?null:I.achievements.find(b=>b.achievementId===c),[I,c]),E=i.exports.useCallback((b,N)=>{n(v=>{const y=[...v];for(const R of y)if(R.code===b)for(const x of R.achievements)x.achievementId===N&&(x.unseen=0);return y})},[]);return U(og,b=>{const v=b.getParser().achievement;n(y=>{const R=[...y],x=R.findIndex(F=>F.code===v.category);if(x===-1){const F=new Gl(v.category);F.achievements.push(v),R.push(F)}else{const F=Kt(R[x]),k=[...F.achievements],A=k.findIndex(P=>P.achievementId===v.achievementId);let O=null;A===-1?k.push(v):(O=k[A],k[A]=v),lr.getAchievementIsIgnored(v)||(v.unseen++,O&&(v.unseen+=O.unseen)),F.achievements=k,R[x]=F}return R})}),U(ag,b=>{const N=b.getParser(),v=[];for(const y of N.achievements){const R=y.category;let x=v.find(F=>F.code===R);x||(x=new Gl(R),v.push(x)),x.achievements.push(y)}n(v)}),U(ig,b=>{const N=b.getParser();p(N.score)}),i.exports.useEffect(()=>{o&&(D(new lg),e(!1))},[o]),i.exports.useEffect(()=>{!a||c===-1||E(a,c)},[a,c,E]),{achievementCategories:r,selectedCategoryCode:a,setSelectedCategoryCode:s,selectedAchievementId:c,setSelectedAchievementId:u,achievementScore:m,getTotalUnseen:g,getProgress:h,getMaxProgress:f,scaledProgressPercent:_,selectedCategory:I,selectedAchievement:C,setAchievementSeen:E}},pa=()=>ct(zb),$b=()=>{const[o,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState(10),[m,p]=i.exports.useState(null);return jb(dg.INITIALIZED,g=>{e(Array.from(Ps().effects.values()))}),U(cg,g=>{const h=g.getParser();p({credits:h.creditPrice,duckets:h.ducketPrice,publishDucketPrice:h.publishDucketPrice})}),i.exports.useEffect(()=>{if(!Ps().isLoaded){Ps().init(),D(new ug);return}},[]),{availableEffects:o,cameraRoll:r,setCameraRoll:n,selectedPictureIndex:a,setSelectedPictureIndex:s,myLevel:c,price:m}},Ad=()=>ct($b);class dr extends kr{}dr.SHOW_CATALOG="CE_SHOW_CATALOG";dr.HIDE_CATALOG="CE_HIDE_CATALOG";dr.TOGGLE_CATALOG="CE_TOGGLE_CATALOG";dr.SOLD_OUT="CE_SOLD_OUT";dr.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT";dr.PURCHASE_APPROVED="CE_PURCHASE_APPROVED";dr.INIT_GIFT="CE_INIT_GIFT";dr.CATALOG_RESET="CE_RESET";dr.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";class Kb extends dr{constructor(e,r,n){super(dr.INIT_GIFT),this._pageId=e,this._offerId=r,this._extraData=n}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}const kd=class extends dr{constructor(o){super(kd.POST_MARKETPLACE),this._item=o}get item(){return this._item}};let rl=kd;rl.POST_MARKETPLACE="CE_POST_MARKETPLACE";const Pd=class extends kr{constructor(o){super(Pd.PURCHASE_SUCCESS),this._purchase=o}get purchase(){return this._purchase}};let fn=Pd;fn.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";const Dd=class extends kr{constructor(o){super(Dd.PURCHASE_FAILED),this._code=o}get code(){return this._code}};let Kn=Dd;Kn.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";const Md=class extends kr{constructor(o){super(Md.NOT_ALLOWED),this._code=o}get code(){return this._code}};let ea=Md;ea.NOT_ALLOWED="CPNAE_NOT_ALLOWED";class xt extends kr{}xt.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED";xt.SELECT_PRODUCT="CWE_SELECT_PRODUCT";xt.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM";xt.PURCHASE="CWE_PURCHASE";xt.COLOUR_ARRAY="CWE_COLOUR_ARRAY";xt.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY";xt.COLOUR_INDEX="CWE_COLOUR_INDEX";xt.TEXT_INPUT="CWE_TEXT_INPUT";xt.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT";xt.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE";xt.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES";xt.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW";xt.GUILD_SELECTED="CWE_GUILD_SELECTED";xt.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED";xt.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED";xt.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA";xt.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY";xt.TOGGLE="CWE_CWE_TOGGLE";xt.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED";xt.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED";xt.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";const Ld=class extends kr{constructor(){super(Ld.SOLD_OUT)}};let ta=Ld;ta.SOLD_OUT="CPSOE_SOLD_OUT";const Ud=class extends kr{constructor(o,e){super(Ud.UPDATE_STUFF_DATA),this._offer=o,this._stuffData=e}get offer(){return this._offer}get stuffData(){return this._stuffData}};let Xb=Ud;Xb.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";class Ht extends kr{}Ht.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL";Ht.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL";Ht.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL";Ht.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST";Ht.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";class ra extends kr{}ra.INIT="HC_NAME_CHANGE_INIT";const Fd=class extends kr{constructor(o,e,r){super(Fd.FURNI_ADDED),this.id=o,this.spriteId=e,this.category=r}};let na=Fd;na.FURNI_ADDED="IFAE_FURNI_ADDED";class Ur extends kr{}Ur.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL";Ur.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL";Ur.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";const rc=o=>o&&o.length?o.replace(/\\r/g,"\r"):"",nc=o=>{const e="0"+o;return e.substr(e.length-2,e.length)};let Os=null;const Qb=()=>{const[o,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(!1),[m,p]=i.exports.useState(!1),g=()=>K("notification",{}),h=A=>{const O=g();return O?O[A]:null},f=(A,O,P,B)=>{if(A.has(P))return A.get(P);const G=["notification",O,P].join(".");return _e().localization.hasValue(G)||B?d(G,Array.from(A.keys()),Array.from(A.values())):null},_=(A,O)=>{let P=A.get("image");return P||(P=K("image.library.notifications.url","").replace("%image%",O.replace(/\./g,"_"))),d(P)},I=i.exports.useCallback((A,O=null,P=null,B=null,G=null,z=null)=>{(!G||!G.length)&&(G=d("notifications.broadcast.title")),(!O||!O.length)&&(O=de.DEFAULT);const X=new Si([rc(A)],O,P,B,G,z);e(Y=>[X,...Y])},[]),C=i.exports.useCallback(()=>I(null,de.NITRO),[I]),E=i.exports.useCallback((A,O,P=null,B=null)=>{if(c)return;const G=new pd(A,O,P,B);n(z=>[G,...z])},[c]),b=(A,O=null)=>{O||(O=new Map);const P=h("notification."+A);if(P)for(const Ee in P)O.set(Ee,P[Ee]);A==="floorplan_editor.error"&&O.set("message",O.get("message").replace(/[^a-zA-Z._ ]/g,""));const B=f(O,A,"title",!0),G=f(O,A,"message",!0).replace(/\\r/g,"\r"),z=f(O,A,"linkTitle",!1),X=f(O,A,"linkUrl",!1),Y=_(O,A);O.get("display")==="BUBBLE"?E(d(G),$e.INFO,Y,X):I(d(G),A,X,z,B,Y),O.get("sound")&&rn(O.get("sound"))},N=i.exports.useCallback((A,O,P,B=null,G=null,z=null,X=null)=>{(!B||!B.length)&&(B=d("generic.confirm")),(!G||!G.length)&&(G=d("generic.cancel")),(!z||!z.length)&&(z=d("notifications.broadcast.title"));const Y=new hd(X,A,O,P,B,G,z);s(Ee=>[Y,...Ee])},[]),v=(A,O=null,P=!0)=>{I(A,de.DEFAULT,O,d("mod.alert.link"),d("mod.alert.title"))},y=i.exports.useCallback((A,O="")=>{switch(A){case bt.ALERT_SCAM:I(d("inventory.trading.warning.other_not_offering"),null,null,null,d("inventory.trading.notification.title"));return;case bt.HOTEL_TRADING_DISABLED:case bt.YOU_NOT_ALLOWED:case bt.THEY_NOT_ALLOWED:case bt.ROOM_DISABLED:case bt.YOU_OPEN:case bt.THEY_OPEN:I(d(`inventory.trading.openfail.${A}`,["otherusername"],[O]),null,null,null,d("inventory.trading.openfail.title"));return;case bt.ERROR_WHILE_COMMIT:I(`${d("inventory.trading.notification.caption")}, ${d("inventory.trading.notification.commiterror.info")}`,null,null,null,d("inventory.trading.notification.title"));return;case bt.THEY_CANCELLED:I(d("inventory.trading.info.closed"),null,null,null,d("inventory.trading.notification.title"));return}},[I]),R=i.exports.useCallback(A=>{e(O=>{const P=[...O],B=P.findIndex(G=>A===G);return B>=0&&P.splice(B,1),P})},[]),x=i.exports.useCallback(A=>{n(O=>{const P=[...O],B=P.findIndex(G=>A===G);return B>=0&&P.splice(B,1),P})},[]),F=i.exports.useCallback(A=>{s(O=>{const P=[...O],B=P.findIndex(G=>A===G);return B>=0&&P.splice(B,1),P})},[]);U(mg,A=>{const O=A.getParser();if(O.userId!==H().userId)return;const P=d("notifications.text.respect.1"),B=d("notifications.text.respect.2",["count"],[O.respectsReceived.toString()]);E(P,$e.RESPECT),E(B,$e.RESPECT)}),U(gg,A=>{const O=A.getParser();I(O.message.replace(/\\r/g,"\r"),null,null,d("notifications.broadcast.title"))}),U(pg,A=>{const O=A.getParser(),P=d("achievements.levelup.desc"),B=Qs(O.data.badgeCode),G=H().getBadgeUrl(O.data.badgeCode),z="questengine/achievements/"+O.data.category;E(P+" "+B,$e.ACHIEVEMENT,G,z)}),U(hg,A=>{const O=A.getParser();O.numGifts<=0||E(O.numGifts.toString(),$e.CLUBGIFT,null,"catalog/open/"+K("catalog.links")["hc.hc_gifts"])}),U(fg,A=>{const O=A.getParser();v(O.message,O.url,!1)}),U(Iu,A=>{const O=A.getParser();if(O.amountChanged<=0||O.type!==5)return;const P=K("currency.asset.icon.url","").replace("%type%",O.type.toString());E(d("notifications.text.loyalty.received",["AMOUNT"],[O.amountChanged.toString()]),$e.INFO,P)}),U(Ig,A=>{const O=A.getParser();v(O.message)}),U(Eg,A=>{const O=A.getParser();I(d("opening.hours."+(O.userThrowOutAtClose?"disconnected":"closed"),["h","m"],[nc(O.openHour),nc(O.openMinute)]),de.DEFAULT,null,null,d("opening.hours.title"))}),U(_g,A=>{const O=A.getParser(),P=d("notifications.text."+(O.boughtAsGift?"petbought":"petreceived"));let B=null;const G=q().getRoomObjectPetImage(O.pet.typeId,O.pet.paletteId,parseInt(O.pet.color,16),new Rt(45*3),64,null,!0);G&&(B=G.getImage().src),E(P,$e.PETLEVEL,B)}),U(Cg,A=>{const P=A.getParser().messages.map(G=>rc(G)),B=new Si(P,de.MOTD,null,null,d("notifications.motd.title"));e(G=>[B,...G])}),U(bg,A=>{const O=A.getParser();let P=null;const B=q().getRoomObjectPetImage(O.figureData.typeId,O.figureData.paletteId,parseInt(O.figureData.color,16),new Rt(45*3),64,null,!0);B&&(P=B.getImage().src),E(d("notifications.text.petlevel",["pet_name","level"],[O.petName,O.level.toString()]),$e.PETLEVEL,P)}),U(Sg,A=>{const O=A.getParser();u(!O.enabled)}),U(Ng,A=>{const O=A.getParser();if(!O.products||!O.products.length)return;const P=O.products[0];P&&E(d("notifications.text.club_gift.selected"),$e.INFO,Fo.getProductImageUrl(P.productType,P.furniClassId,P.extraParam))}),U(Tg,A=>{const O=A.getParser();I(d("maintenance.shutdown",["m","d"],[O.minutesUntilMaintenance.toString(),O.duration.toString()]),de.DEFAULT,null,null,d("opening.hours.title"))}),U(vg,A=>{const O=A.getParser();v(O.message,O.url)}),U(wg,A=>{const O=A.getParser();b(O.type,O.parameters)}),U(Rg,A=>{const O=A.getParser();I(d("opening.hours.shutdown",["m"],[O.openMinute.toString()]),de.DEFAULT,null,null,d("opening.hours.title"))}),U(xg,A=>{const O=A.getParser();I(d("opening.hours.disconnected",["h","m"],[O.openHour.toString(),O.openMinute.toString()]),de.DEFAULT,null,null,d("opening.hours.title"))}),U(yg,A=>{const O=A.getParser();switch(O.errorCode){default:case 0:I(d("connection.server.error.desc",["errorCode"],[O.errorCode.toString()]),de.ALERT,null,null,d("connection.server.error.title"));break;case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 1009:case 1010:case 1011:case 1012:case 1013:case 1014:case 1015:case 1016:case 1017:case 1018:case 1019:A.connection.dispose();break;case 4013:I(d("connection.room.maintenance.desc"),de.ALERT,null,null,d("connection.room.maintenance.title"));break}}),U(Og,A=>{const O=A.getParser();I(d(O.alertMessage),de.DEFAULT,null,null,d(O.titleMessage?O.titleMessage:"notifications.broadcast.title"))});const k=i.exports.useCallback(()=>{if(!m)if(ci.isRunning()){if(Os)return;Os=setTimeout(()=>{k()},ci.totalRunningTime+5e3)}else Os&&(clearTimeout(Os),Os=null),E(d("mod.chatdisclaimer"),$e.INFO),p(!0)},[m,E]);return U(Ag,k),{alerts:o,bubbleAlerts:r,confirms:a,simpleAlert:I,showNitroAlert:C,showTradeAlert:y,showConfirm:N,showSingleBubble:E,closeAlert:R,closeBubbleAlert:x,closeConfirm:F}},Xe=()=>ct(Qb),Jb=(o,e)=>{const[r,n]=i.exports.useState(()=>{if(typeof window>"u")return e;try{return Yo(o)??e}catch{return e}});return[r,s=>{try{const c=s instanceof Function?s(r):s;n(c),typeof window<"u"&&ld(o,c)}catch(c){Eu.error(c)}}]},ha=Jb,Zb=()=>ha(Js.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),Gd=()=>ct(Zb),eS=()=>ha(Js.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),Bd=()=>ct(eS),tS=-12345678,rS=()=>{const[o,e]=i.exports.useState(!1),[r,n]=i.exports.useState(!1),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState(-1),[m,p]=i.exports.useState(xr.NORMAL),[g,h]=i.exports.useState(null),[f,_]=i.exports.useState(null),[I,C]=i.exports.useState(null),[E,b]=i.exports.useState(null),[N,v]=i.exports.useState([]),[y,R]=i.exports.useState(null),[x,F]=i.exports.useState([]),[k,A]=i.exports.useState(null),[O,P]=i.exports.useState(!1),[B,G]=i.exports.useState({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[z,X]=i.exports.useState({}),[Y,Ee]=i.exports.useState(!1),[le,Pe]=Gd(),[Qe,ht]=Bd(),[Ze,Gt]=i.exports.useState(null),[We,Yt]=i.exports.useState(null),[Sr,Fe]=i.exports.useState(0),[Ie,ze]=i.exports.useState(0),[yt,me]=i.exports.useState(0),[Oe,ot]=i.exports.useState(0),[er,fe]=i.exports.useState(0),[De,Nr]=i.exports.useState(0),{simpleAlert:kn=null}=Xe(),tr=i.exports.useRef(new pn),ao=i.exports.useCallback(()=>{s(-1),u(-1),h(null),_(null),C(null),b(null),v([]),R(null),F([]),e(!1)},[]),ws=i.exports.useCallback(W=>{if(!W)return nr.MISSING_OFFER;if(Sr<0||Sr>=Ie)return nr.FURNI_LIMIT_REACHED;const $=ye();if(!$)return nr.NOT_IN_ROOM;if(!$.isRoomOwner)return nr.NOT_ROOM_OWNER;if(Oe<=0){const J=q();let ae=J.getRoomObjectCount($.roomId,Q.UNIT);for(;ae>0;){const Ae=J.getRoomObjectByIndex($.roomId,ae,Q.UNIT),Ke=$.userDataManager.getUserDataByIndex(Ae.id);if(Ke&&Ke.type===pt.USER&&Ke.roomIndex!==$.ownRoomIndex&&!Ke.isModerator)return nr.VISITORS_IN_ROOM;ae--}}return nr.OKAY},[Sr,Ie,Oe]),Pn=i.exports.useCallback(W=>{const $=ye();return!!(($&&W.page&&W.page.layoutCode!=="sold_ltd_items"&&m===xr.NORMAL&&($.isRoomOwner||$.isGuildRoom&&$.controllerLevel>=tt.GUILD_MEMBER)||m===xr.BUILDER&&ws(W)===nr.OKAY)&&W.pricingModel!==at.PRICING_MODEL_BUNDLE&&W.product.productType!==ue.EFFECT&&W.product.productType!==ue.HABBO_CLUB)},[m,ws]),Dn=i.exports.useCallback(W=>{if(!Pn(W))return;const $=W.product;if(!$)return;let J=0;switch($.productType){case ue.FLOOR:J=Q.FLOOR;break;case ue.WALL:J=Q.WALL;break}q().processRoomObjectPlacement(Ms.CATALOG,-W.offerId,J,$.productClassId,$.extraParam)&&(Gt(W),Ee(!0),e(!1))},[Pn]),ts=i.exports.useCallback((W,$)=>{const J=q();let ae=J.getRoomInstanceVariable(J.activeRoomId,te.ROOM_WALL_TYPE),Ae=J.getRoomInstanceVariable(J.activeRoomId,te.ROOM_FLOOR_TYPE),Ke=J.getRoomInstanceVariable(J.activeRoomId,te.ROOM_LANDSCAPE_TYPE);switch(ae=ae&&ae.length?ae:"101",Ae=Ae&&Ae.length?Ae:"101",Ke=Ke&&Ke.length?Ke:"1.1",W){case"floor":J.updateRoomInstancePlaneType(J.activeRoomId,$,ae,Ke,!0);return;case"wallpaper":J.updateRoomInstancePlaneType(J.activeRoomId,Ae,$,Ke,!0);return;case"landscape":J.updateRoomInstancePlaneType(J.activeRoomId,Ae,ae,$,!0);return;default:J.updateRoomInstancePlaneType(J.activeRoomId,Ae,ae,Ke,!0);return}},[]),Rs=i.exports.useCallback(()=>{Ze&&(q().cancelRoomObjectInsert(),Ee(!1),Gt(null))},[Ze]),bn=i.exports.useCallback((W=!0)=>{Ee($=>($&&W&&ee("catalog/open"),!1))},[]),Mn=i.exports.useCallback((W=!1)=>{W||bn(),Yt($=>{if($)switch($.category){case Q.FLOOR:q().removeRoomObjectFloor($.roomId,$.objectId);break;case Q.WALL:{switch($.furniData.className){case"floor":case"wallpaper":case"landscape":ts("reset","");break;default:q().removeRoomObjectWall($.roomId,$.objectId);break}break}default:q().deleteRoomObject($.objectId,$.category);break}return null})},[bn,ts]),Bt=i.exports.useCallback((W,$)=>{if($.pageId===W&&$!==g)return $;for(const J of $.children){const ae=Bt(W,J);if(ae)return ae}return null},[g]),Yr=i.exports.useCallback((W,$)=>{if($.pageName===W&&$!==g)return $;for(const J of $.children){const ae=Yr(W,J);if(ae)return ae}return null},[g]),rs=i.exports.useCallback((W,$=!1)=>{if(!f||!f.size)return null;if($){const J=[],ae=f.get(W);if(ae&&ae.length)for(const Ae of ae)Ae.isVisible&&J.push(Ae);if(J.length)return J}return f.get(W)},[f]),zr=i.exports.useCallback((W,$)=>{W<0||(n(!0),s(W),W>-1&&D(new kg(W,$,m)))},[m]),bm=i.exports.useCallback((W,$,J,ae,Ae,Ke)=>{const Ot=new Bi(W,$,J,ae,Ke);if(C(Ot),u(Ce=>W!==-1?W:Ce),P(!1),Ae>-1&&Ot.offers.length){for(const Ce of Ot.offers)if(Ce.offerId===Ae){b(Ce);break}}},[]),on=i.exports.useCallback((W,$=-1)=>{if(Rs(),W.parent.pageName==="root"&&W.children.length){for(const Ae of W.children)if(Ae.isVisible){W=Ae;break}}const J=[];let ae=W;for(;ae&&ae.pageName!=="root";)J.push(ae),ae=ae.parent;J.reverse(),v(Ae=>{const Ke=Ae.indexOf(W)>=0,Ot=W.isOpen;for(const Ce of Ae)Ce.deactivate(),J.indexOf(Ce)===-1&&Ce.close();for(const Ce of J)Ce.activate(),Ce.parent&&Ce.open(),Ce===W.parent&&Ce.children.length&&Ce.open();return Ke&&Ot?W.close():W.open(),J}),W.pageId>-1&&zr(W.pageId,$)},[v,zr,Rs]),xs=i.exports.useCallback(W=>{if(W!==-1&&R(null),!o)tr.current.requestById=W,e(!0);else{const $=Bt(W,g);$&&on($)}},[o,g,Bt,on]),Sa=i.exports.useCallback(W=>{if(R(null),!o)tr.current.requestByName=W,e(!0);else{const $=Yr(W,g);$&&on($)}},[o,g,Yr,on]),Na=i.exports.useCallback(W=>{if(R(null),!o)tr.current.requestedByOfferId=W,e(!0);else{const $=rs(W);if(!$||!$.length)return;on($[0],W)}},[o,rs,on]),ml=i.exports.useCallback(()=>{},[]);return U(Pg,W=>{const $=W.getParser(),J=new Map,ae=(Ae,Ke,Ot)=>{const Ce=new CC(Ae,Ke,Ot);for(const Tr of Ce.offerIds)J.has(Tr)?J.get(Tr).push(Ce):J.set(Tr,[Ce]);Ke++;for(const Tr of Ae.children)Ce.addChild(ae(Tr,Ke,Ce));return Ce};h(ae($.root,0,null)),_(J)}),U(Dg,W=>{const $=W.getParser();if($.catalogType!==m)return;const J=[];for(const ae of $.offers){const Ae=[],Ke=gs(ae.localizationId);for(const Ce of ae.products){const Tr=hi(Ce.furniClassId,Ce.productType);Ae.push(new Yn(Ce.productType,Ce.furniClassId,Ce.extraParam,Ce.productCount,Ke,Tr,Ce.uniqueLimitedItem,Ce.uniqueLimitedSeriesSize,Ce.uniqueLimitedItemsLeft))}if(!Ae.length)continue;const Ot=new at(ae.offerId,ae.localizationId,ae.rent,ae.priceCredits,ae.priceActivityPoints,ae.priceActivityPointsType,ae.giftable,ae.clubLevel,Ae,ae.bundlePurchaseAllowed);(m===xr.NORMAL||Ot.pricingModel!==at.PRICING_MODEL_BUNDLE&&Ot.pricingModel!==at.PRICING_MODEL_MULTI)&&J.push(Ot)}$.frontPageItems&&$.frontPageItems.length&&F($.frontPageItems),n(!1),a===$.pageId&&bm($.pageId,$.layoutCode,new ed($.localization.images.concat(),$.localization.texts.concat()),J,$.offerId,$.acceptSeasonCurrencyAsCredits)}),U(Mg,W=>{const $=W.getParser();St(new fn($.offer))}),U(Lg,W=>{const $=W.getParser();St(new Kn($.code))}),U(Ug,W=>{const $=W.getParser();St(new ea($.code))}),U(Fg,W=>{W.getParser(),St(new ta)}),U(Gg,W=>{const J=W.getParser().offer;if(!J||!J.products.length)return;J.products[0].uniqueLimitedItem;const Ae=[],Ke=gs(J.localizationId);for(const Ce of J.products){const Tr=hi(Ce.furniClassId,Ce.productType);Ae.push(new Yn(Ce.productType,Ce.furniClassId,Ce.extraParam,Ce.productCount,Ke,Tr,Ce.uniqueLimitedItem,Ce.uniqueLimitedSeriesSize,Ce.uniqueLimitedItemsLeft))}const Ot=new at(J.offerId,J.localizationId,J.rent,J.priceCredits,J.priceActivityPoints,J.priceActivityPointsType,J.giftable,J.clubLevel,Ae,J.bundlePurchaseAllowed);(m===xr.NORMAL||Ot.pricingModel!==at.PRICING_MODEL_BUNDLE&&Ot.pricingModel!==at.PRICING_MODEL_MULTI)&&(Ot.page=I,b(Ot),Ot.product&&Ot.product.productType===ue.WALL&&G(Ce=>{const Tr={...Ce};return Tr.extraData=Ot.product.extraParam||null,Tr}))}),U(Bg,W=>{const $=W.getParser(),J=new bC($.productCode,$.palettes.slice());X(ae=>{const Ae=[];ae.petPalettes&&Ae.push(...ae.petPalettes);for(let Ke=0;Ke<Ae.length;Ke++)if(Ae[Ke].breed===J.breed){Ae.splice(Ke,1);break}return Ae.push(J),{...ae,petPalettes:Ae}})}),U(Vg,W=>{const $=W.getParser();X(J=>{const ae=$.offers;return{...J,clubOffers:ae}})}),U(Hg,W=>{const $=W.getParser();X(J=>{const ae=$.groups;return{...J,groups:ae}})}),U(Wg,W=>{const $=W.getParser();X(J=>{const ae=new xC($);return{...J,giftConfiguration:ae}})}),U(jg,W=>{const $=W.getParser();if(!$)return;let J="";$.result===1?J=d("inventory.marketplace.result.title.success"):J=d("inventory.marketplace.result.title.failure");const ae=d(`inventory.marketplace.result.${$.result}`);kn(ae,de.DEFAULT,null,null,J)}),U(_u,W=>{const $=W.getParser();X(J=>({...J,clubGifts:$}))}),U(qg,W=>{const $=o;ao(),$&&kn(d("catalog.alert.published.description"),de.ALERT,null,null,d("catalog.alert.published.title"))}),U(Yg,W=>{const $=W.getParser();Fe($.furniCount),ml()}),U(zg,W=>{const $=W.getParser();ze($.furniLimit),me($.maxFurniLimit),ot($.secondsLeft),fe(wr()),Nr($.secondsLeftWithGrace),ml()}),lt(fn.PURCHASE_SUCCESS,W=>rn(ur.CREDITS)),Te(hl.PLACED,W=>{if(!Y||W.type!==hl.PLACED)return;if(Mn(!0),!Ze){bn();return}let $=!1;const J=Ze.product;if(W.category===Q.WALL)switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":$=W.placedOnFloor||W.placedOnWall;break;default:$=W.placedInRoom;break}else $=W.placedInRoom;if(!$){bn();return}switch(Yt(new yC(W.roomId,W.objectId,W.category,W.wallLocation,W.x,W.y,W.direction,Ze)),m){case xr.NORMAL:{switch(W.category){case Q.FLOOR:q().addFurnitureFloor(W.roomId,W.objectId,J.productClassId,new Rt(W.x,W.y,W.z),new Rt(W.direction),0,new Xg);break;case Q.WALL:switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":ts(J.furnitureData.className,J.extraParam);break;default:q().addFurnitureWall(W.roomId,W.objectId,J.productClassId,new Rt(W.x,W.y,W.z),new Rt(W.direction*45),0,W.instanceData,0);break}}const ae=q().getRoomObject(W.roomId,W.objectId,W.category);ae&&ae.model.setValue(te.FURNITURE_ALPHA_MULTIPLIER,.5),Qe&&D(new oa(a,Ze.offerId,J.extraParam,1)),le&&Dn(Ze);break}case xr.BUILDER:{let ae=Ze.page.pageId;switch(ae===tS&&(ae=-1),W.category){case Q.FLOOR:D(new Kg(ae,Ze.offerId,J.extraParam,W.x,W.y,W.direction));break;case Q.WALL:D(new $g(ae,Ze.offerId,J.extraParam,W.wallLocation));break}le&&Dn(Ze);break}}}),lt(na.FURNI_ADDED,W=>{const $=q();if(!(!We||We.productClassId!==W.spriteId||We.roomId!==$.activeRoomId)){switch(W.category){case Z.FLOOR:{const J=$.getRoomInstanceVariable($.activeRoomId,te.ROOM_FLOOR_TYPE);We.extraParam!==J&&D(new Uo(W.id));break}case Z.WALL_PAPER:{const J=$.getRoomInstanceVariable($.activeRoomId,te.ROOM_WALL_TYPE);We.extraParam!==J&&D(new Uo(W.id));break}case Z.LANDSCAPE:{const J=$.getRoomInstanceVariable($.activeRoomId,te.ROOM_LANDSCAPE_TYPE);We.extraParam!==J&&D(new Uo(W.id));break}default:D(new Qg(W.id,We.category,We.wallLocation,We.x,We.y,We.direction))}le||Mn()}}),i.exports.useEffect(()=>()=>b(null),[I]),i.exports.useEffect(()=>{if(!(!o||!g||!f||!tr.current))switch(tr.current.requestType){case pn.REQUEST_TYPE_NONE:if(I)return;if(g.isBranch){for(const W of g.children)if(W&&W.isVisible){on(W);return}}return;case pn.REQUEST_TYPE_ID:xs(tr.current.requestById),tr.current.resetRequest();return;case pn.REQUEST_TYPE_OFFER:Na(tr.current.requestedByOfferId),tr.current.resetRequest();return;case pn.REQUEST_TYPE_NAME:Sa(tr.current.requestByName),tr.current.resetRequest();return}},[o,g,f,I,on,xs,Na,Sa]),i.exports.useEffect(()=>{!y&&I&&I.pageId===-1&&xs(c)},[y,I,c,xs]),i.exports.useEffect(()=>{E&&G({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})},[E]),i.exports.useEffect(()=>{!o||g||(D(new Jg),D(new Cu),D(new Zg(m)),D(new ep))},[o,g,m]),i.exports.useEffect(()=>(A(new jo(q(),++jo.PREVIEW_COUNTER)),()=>{A(W=>(W.dispose(),null))}),[]),{isVisible:o,setIsVisible:e,isBusy:r,pageId:a,previousPageId:c,currentType:m,rootNode:g,offersToNodes:f,currentPage:I,setCurrentPage:C,currentOffer:E,setCurrentOffer:b,activeNodes:N,searchResult:y,setSearchResult:R,frontPageItems:x,roomPreviewer:k,navigationHidden:O,setNavigationHidden:P,purchaseOptions:B,setPurchaseOptions:G,catalogOptions:z,setCatalogOptions:X,getNodeById:Bt,getNodeByName:Yr,activateNode:on,openPageById:xs,openPageByName:Sa,openPageByOfferId:Na,requestOfferToMover:Dn}},Ue=()=>ct(rS),nS=1e3,sS=10,oS=1e3;let aS=0,iS=0;const lS=()=>{const[o,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(!1),m=h=>{h.id=aS++,e(f=>{const _=[...f];return _.push(h),_.length>nS&&_.shift(),_})},p=h=>{n(f=>{const _=[...f];return _.push(h),_.length>sS&&_.shift(),_})},g=h=>{h.id=iS++,s(f=>{const _=[...f];return _.push(h),_.length>oS&&_.shift(),_})};return Ye(qt.STARTED,h=>u(!0)),U(Ts,h=>{if(!c)return;const f=h.getParser();r.length&&r[r.length-1].id===f.data.roomId||(m({id:-1,webId:-1,entityId:-1,name:f.data.roomName,timestamp:cd(),type:Ar.TYPE_ROOM_INFO,roomId:f.data.roomId}),p({id:f.data.roomId,name:f.data.roomName}),u(!1))}),U(bu,h=>{const f=h.getParser();g({id:-1,webId:f.senderId,entityId:-1,name:"",message:f.messageText,roomId:-1,timestamp:ql(f.secondsSinceSent),type:Ar.TYPE_IM})}),U(Su,h=>{const f=h.getParser();g({id:-1,webId:f.senderId,entityId:-1,name:"",message:f.messageText,roomId:-1,timestamp:ql(),type:Ar.TYPE_IM})}),{addChatEntry:m,chatHistory:o,roomHistory:r,messengerHistory:a}},fa=()=>ct(lS),cS=()=>{const[o,e]=i.exports.useState([]),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState([]),[m,p]=i.exports.useState(null),g=i.exports.useMemo(()=>{const N=o.filter(v=>v.online);return N.sort((v,y)=>v.name<y.name?-1:v.name>y.name?1:0),N},[o]),h=i.exports.useMemo(()=>{const N=o.filter(v=>!v.online);return N.sort((v,y)=>v.name<y.name?-1:v.name>y.name?1:0),N},[o]),f=N=>D(new Ui(N.id)),_=(N,v)=>v!==N.relationshipStatus&&D(new As(N.id,v)),I=N=>{for(const v of o)if(v.id===N)return v;return null},C=N=>!(N===H().userId||I(N)||r.find(v=>v.requesterUserId===N)||a.indexOf(N)>=0),E=(N,v)=>{if(!C(N))return!1;s(y=>{const R=[...y];return R.push(N),R}),D(new Nu(v))},b=(N,v)=>{N===-1&&!v?(D(new fl(!0)),n([])):n(y=>{const R=[...y],x=R.findIndex(F=>F.id===N);return x===-1?y:(D(v?new cp(R[x].id):new fl(!1,R[x].id)),R.splice(x,1),R)})};return U(rp,N=>{const v=N.getParser();p(new cb(v.userFriendLimit,v.normalFriendLimit,v.extendedFriendLimit,v.categories)),D(new tp)}),U(np,N=>{const v=N.getParser();e(y=>{const R=[...y];for(const x of v.fragment){const F=R.findIndex(A=>A.id===x.id),k=new jt;k.populate(x),F>-1?R[F]=k:R.push(k)}return R})}),U(sp,N=>{const v=N.getParser();e(y=>{const R=[...y],x=F=>{const k=R.findIndex(A=>A.id===F.id);if(k===-1){const A=new jt;A.populate(F),R.unshift(A)}else R[k].populate(F)};for(const F of v.addedFriends)x(F);for(const F of v.updatedFriends)x(F);for(const F of v.removedFriendIds){const k=R.findIndex(A=>A.id===F);k>-1&&R.splice(k,1)}return R})}),U(op,N=>{const v=N.getParser();n(y=>{const R=[...y];for(const x of v.requests){const F=R.findIndex(k=>k.requesterUserId===x.requesterUserId);if(F>0)R[F]=Kt(R[F]),R[F].populate(x);else{const k=new Yl;k.populate(x),R.push(k)}}return R})}),U(ap,N=>{const y=N.getParser().request;n(R=>{const x=[...R];if(x.findIndex(k=>k.requesterUserId===y.requesterUserId)===-1){const k=new Yl;k.populate(y),x.push(k)}return x})}),i.exports.useEffect(()=>{D(new ip);const N=setInterval(()=>D(new lp),12e4);return()=>{clearInterval(N)}},[]),{friends:o,requests:r,sentRequests:a,dismissedRequestIds:c,setDismissedRequestIds:u,settings:m,onlineFriends:g,offlineFriends:h,getFriend:I,canRequestFriend:C,requestFriend:E,requestResponse:b,followFriend:f,updateRelationship:_}},mr=()=>ct(cS),uS=()=>{const[o,e]=i.exports.useState([]),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(Hr.HIDDEN),{getFriend:m=null}=mr(),{simpleAlert:p=null}=Xe(),g=i.exports.useMemo(()=>o.filter(C=>a.indexOf(C.threadId)===-1),[o,a]),h=i.exports.useMemo(()=>r>0&&g.find(C=>C.threadId===r||null),[r,g]),f=C=>{let E=o.find(b=>b.participant&&b.participant.id===C);if(E){const b=a.indexOf(E.threadId);b>=0&&s(N=>{const v=[...N];return v.splice(b,1),v})}else{const b=m(C);if(!b)return null;E=new zi(b),E.addMessage(null,d("messenger.moderationinfo"),0,null,Wr.SECURITY_NOTIFICATION),E.setRead(),e(N=>{const v=[...N];return v.push(E),v})}return E},_=C=>{s(E=>{const b=[...E];return b.indexOf(C)>=0?E:(b.push(C),b)}),r===C&&n(-1)},I=(C,E,b,N=0,v=null,y=Wr.CHAT)=>{if(!C||!b||!b.length)return;const R=E===H().userId;R&&b.length<=255&&D(new dp(C.participant.id,b)),e(x=>{const F=[...x],k=F.findIndex(A=>A.threadId===C.threadId);return k===-1?x:(C=Kt(F[k]),R&&C.groups.length===1&&rn(ur.MESSENGER_NEW_THREAD),C.addMessage(y===Wr.ROOM_INVITE?null:E,b,N,v,y),r===C.threadId&&C.setRead(),F[k]=C,!R&&C.unread&&rn(ur.MESSENGER_MESSAGE_RECEIVED),F)})};return U(bu,C=>{const E=C.getParser(),b=f(E.senderId);b&&I(b,E.senderId,E.messageText,E.secondsSinceSent,E.extraData)}),U(Su,C=>{const E=C.getParser(),b=f(E.senderId);b&&I(b,E.senderId,E.messageText,0,null,Wr.ROOM_INVITE)}),U(up,C=>{const E=C.getParser();p(`Received room invite error: ${E.errorCode},recipients: ${E.failedRecipients}`,de.DEFAULT,null,null,d("friendlist.alert.title"))}),i.exports.useEffect(()=>{r<=0||e(C=>{const E=[...C],b=E.findIndex(N=>N.threadId===r);return b>=0&&(E[b]=Kt(E[b]),E[b].setRead()),E})},[r]),i.exports.useEffect(()=>{u(C=>{if(!g.length)return Hr.HIDDEN;let E=!1;for(const b of g)if(b.unreadCount>0){E=!0;break}return E?Hr.UNREAD:Hr.SHOW})},[g]),{messageThreads:o,activeThread:h,iconState:c,visibleThreads:g,getMessageThread:f,setActiveThreadId:n,closeThread:_,sendMessage:I}},Vd=()=>ct(uS),dS=()=>{const[o,e]=i.exports.useState(!1),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState(!1),[g,h]=i.exports.useState(null);return U(mp,f=>{let _=f.getParser();!_||_&&!_.games.length||(s(_.games[0]),n(_.games))}),U(gp,f=>{let _=f.getParser();_&&u(_)}),U(pp,f=>{let _=f.getParser();_&&p(_.isInMaintenance)}),U(hp,f=>{let _=f.getParser();if(_)switch(_.gameTypeId){case 2:return console.log("snowwar");default:return h(_.url)}}),i.exports.useEffect(()=>{o&&(D(new fp),Vi())},[o]),{isVisible:o,setIsVisible:e,games:r,accountStatus:c,selectedGame:a,setSelectedGame:s,gameOffline:m,gameURL:g,setGameURL:h}},Ia=()=>ct(dS),mS=()=>{const[o,e]=i.exports.useState(null);return U(Ip,r=>{const n=r.getParser(),a={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};n.bases.forEach((c,u)=>a.badgeBases.push({id:u,images:c})),n.symbols.forEach((c,u)=>a.badgeSymbols.push({id:u,images:c})),n.partColors.forEach((c,u)=>a.badgePartColors.push({id:u,color:c})),n.colorsA.forEach((c,u)=>a.groupColorsA.push({id:u,color:c})),n.colorsB.forEach((c,u)=>a.groupColorsB.push({id:u,color:c}));const s=(c,u)=>c.id<u.id?-1:c.id>u.id?1:0;a.badgeBases.sort(s),a.badgeSymbols.sort(s),a.badgePartColors.sort(s),a.groupColorsA.sort(s),a.groupColorsB.sort(s),e(a)}),i.exports.useEffect(()=>{D(new Ep)},[]),{groupCustomize:o}},so=()=>ct(mS),gS=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),{simpleAlert:a=null,showConfirm:s=null}=Xe(),c=(u,m)=>{const p={reportType:u,reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,roomName:"",messageId:-1,threadId:-1,groupId:-1,extraData:"",roomObjectId:-1,message:"",currentStep:0};switch(u){case Ve.BULLY:case Ve.EMERGENCY:case Ve.IM:p.reportedUserId=m.reportedUserId,p.currentStep=At.SELECT_CHATS;break;case Ve.ROOM:p.roomId=m.roomId,p.roomName=m.roomName,p.currentStep=At.SELECT_TOPICS;break;case Ve.THREAD:p.groupId=m.groupId,p.threadId=m.threadId,p.currentStep=At.SELECT_TOPICS;break;case Ve.MESSAGE:p.groupId=m.groupId,p.threadId=m.threadId,p.messageId=m.messageId,p.currentStep=At.SELECT_TOPICS;break;case Ve.PHOTO:p.extraData=m.extraData,p.roomId=m.roomId,p.reportedUserId=m.reportedUserId,p.roomObjectId=m.roomObjectId,p.currentStep=At.SELECT_TOPICS;break}e(p)};return U(Cp,u=>{const m=u.getParser();let p=m.messageText;switch(m.resultType){case Ko.TOO_MANY_PENDING_CALLS_CODE:D(new _p),a(d("help.cfh.error.pending"),de.MODERATION,null,null,d("help.cfh.error.title"));break;case Ko.HAS_ABUSIVE_CALL_CODE:a(d("help.cfh.error.abusive"),de.MODERATION,null,null,d("help.cfh.error.title"));break;default:p.trim().length===0&&(p=d("help.cfh.sent.text")),a(p,de.MODERATION,null,null,d("help.cfh.sent.title"))}}),U(bp,u=>{const m=u.getParser(),p=m.messageText.length===0?d("help.cfh.closed."+fb(m.closeReason)):m.messageText;a(p,de.MODERATION,null,null,d("mod.alert.title"))}),U(Np,u=>{const m=u.getParser();m.count>0&&s(d("help.emergency.pending.title")+`
`+m.pendingCalls[0].message,()=>{D(new Sp)},null,d("help.emergency.pending.button.discard"),d("help.emergency.pending.button.keep"),d("help.emergency.pending.message.subtitle"))}),U(Tp,u=>{a("Your pending calls were deleted",de.MODERATION,null,null,d("mod.alert.title"))}),U(vp,u=>{const m=u.getParser();a(m.message,de.MODERATION,null,null,d("help.cfh.reply.title"))}),U(wp,u=>{const m=u.getParser();a(d("help.emergency.global_mute.message"),de.MODERATION,m.infoUrl,d("help.emergency.global_mute.link"),d("help.emergency.global_mute.subtitle"))}),U(Rp,u=>{const m=u.getParser();n(m)}),{activeReport:o,setActiveReport:e,sanctionInfo:r,setSanctionInfo:n,report:c}},Pr=()=>ct(gS),Ea=()=>{const[o,e]=i.exports.useState([]),r=i.exports.useMemo(()=>!!o.length,[o]),n=i.exports.useCallback(()=>{let s=-1;return e(c=>{const u=[...c];return s=u.length?u[u.length-1]+1:0,u.push(s),u}),s},[]),a=i.exports.useCallback(s=>{e(c=>{const u=[...c],m=u.indexOf(s);return m===-1?c:(u.splice(m,1),u)})},[]);return{isVisible:r,activate:n,deactivate:a}},pS=o=>D(new yp(o)),hS=(o,e)=>D(new Op(o,...e)),fS=()=>{const[o,e]=i.exports.useState(new Map),r=i.exports.useCallback(m=>{var p;return((p=o.get(m))==null?void 0:p.length)||0},[o]),n=i.exports.useMemo(()=>{let m=0;for(const p of o.keys())m+=r(p);return m},[o,r]),a=i.exports.useCallback(m=>{let p=!0;return e(g=>{if(!g.has(m))return p=!1,g;const h=new Map(g);return h.delete(m),pS(m),h}),p},[]),s=i.exports.useCallback((m,p)=>{let g=!0;return e(h=>{if(!h.has(m))return g=!1,h;const f=new Map(h),_=f.get(m);if(_)for(const I of p)_.splice(_.indexOf(I),1);return hS(m,p),f}),g},[]),c=i.exports.useCallback((m,p)=>o.has(m)?o.get(m).indexOf(p)>=0:!1,[o]),u=i.exports.useCallback((m,p)=>{e(g=>{if(!g.has(m))return g;const h=new Map(g),f=h.get(m),_=f.indexOf(p);return _>=0&&f.splice(_,1),h})},[]);return U(xp,m=>{const p=m.getParser();e(g=>{const h=new Map(g);for(const f of p.categories){let _=h.get(f);_||(_=[],h.set(f,_));const I=p.getItemsByCategory(f);for(const C of I)_.indexOf(C)===-1&&_.push(C)}return h})}),{getCount:r,getFullCount:n,resetCategory:a,resetItems:s,isUnseen:c,removeUnseen:u}},Cr=()=>ct(fS),IS=()=>{const[o,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(new Map),[c,u]=i.exports.useState([]),[m,p]=i.exports.useState(null),{isVisible:g=!1,activate:h=null,deactivate:f=null}=Ea(),{isUnseen:_=null,resetCategory:I=null}=Cr(),C=K("user.badges.max.slots",5),E=y=>c.indexOf(y)>=0,b=()=>c.length<C,N=y=>{u(R=>{const x=[...R],F=x.indexOf(y);if(F===-1){if(!b())return R;x.push(y)}else x.splice(F,1);const k=new Dp;for(let A=0;A<C;A++)k.addActivatedBadge(x[A]??"");return D(k),x})},v=y=>r.indexOf(y)===-1?0:a.get(y)??0;return U(Ap,y=>{const R=y.getParser(),x=[];s(F=>{const k=new Map(F);return R.getAllBadgeCodes().forEach(A=>{const O=r.indexOf(A)>=0,P=R.getBadgeId(A);k.set(A,P),!O&&x.push(A)}),k}),u(R.getActiveBadgeCodes()),n(F=>[...F,...x])}),U(kp,y=>{const R=y.getParser(),x=_(qe.BADGE,R.badgeId);n(F=>{const k=[...F];return x?k.unshift(R.badgeCode):k.push(R.badgeCode),k}),s(F=>{const k=new Map(F);return k.set(R.badgeCode,R.badgeId),k})}),i.exports.useEffect(()=>{!r||!r.length||p(y=>{let R=y;return R&&r.indexOf(R)===-1&&(R=null),R||(R=r[0]),R})},[r]),i.exports.useEffect(()=>{if(g)return()=>{I(qe.BADGE)}},[g,I]),i.exports.useEffect(()=>{!g||!o||(D(new Pp),e(!1))},[g,o]),{badgeCodes:r,activeBadgeCodes:c,selectedBadgeCode:m,setSelectedBadgeCode:p,isWearingBadge:E,canWearBadges:b,toggleBadge:N,getBadgeId:v,activate:h,deactivate:f}},_a=()=>ct(IS),ES=()=>{const[o,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:m=null}=Ea(),{isUnseen:p=null,resetCategory:g=null}=Cr();return U(Mp,h=>{const f=h.getParser();n(_=>{const I=[..._],C=I.map(b=>b.botData.id),E=[];for(const b of f.items.values())C.indexOf(b.id)===-1&&E.push(b);for(const b of C){let N=!0;for(const R of f.items.values())if(R.id===b){N=!1;break}if(!N)continue;const v=I.findIndex(R=>R.botData.id===b),y=I[v];v===-1||!y||(Es()===y.botData.id&&(Ws(),ee("inventory/open")),I.splice(v,1))}for(const b of E){const N={botData:b};p(qe.BOT,b.id)?I.unshift(N):I.push(N)}return I})}),U(Lp,h=>{const f=h.getParser();n(_=>{const I=[..._];if(I.findIndex(N=>N.botData.id===f.item.id)>=0)return _;const E={botData:f.item};return p(qe.BOT,E.botData.id)?I.unshift(E):I.push(E),I})}),U(Up,h=>{const f=h.getParser();n(_=>{const I=[..._],C=I.findIndex(E=>E.botData.id===f.itemId);return C===-1?_:(I.splice(C,1),Es()===f.itemId&&(Ws(),ee("inventory/show")),I)})}),i.exports.useEffect(()=>{!r||!r.length||s(h=>{let f=h;return f&&r.indexOf(f)===-1&&(f=null),f||(f=r[0]),f})},[r]),i.exports.useEffect(()=>{if(c)return()=>{g(qe.BOT)}},[c,g]),i.exports.useEffect(()=>{!c||!o||(D(new Fp),e(!1))},[c,o]),{botItems:r,selectedBot:a,setSelectedBot:s,activate:u,deactivate:m}},Hd=()=>ct(ES);let So=null;const _S=()=>{const[o,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:m=null}=Ea(),{isUnseen:p=null,resetCategory:g=null}=Cr(),h=I=>{if(!(!r||!r.length))return r.filter(C=>C.type===I)},f=I=>{if(!(!r||!r.length)){for(const C of r){const E=C.getItemById(I);if(E&&E.isWallItem)return C}return null}},_=I=>{if(!(!r||!r.length)){for(const C of r){const E=C.getItemById(I);if(E&&!E.isWallItem)return C}return null}};return U(Tu,I=>{const C=I.getParser();n(E=>{const b=[...E];for(const N of C.items){let v=0,y=null;for(;v<b.length;){const R=b[v];let x=0;for(;x<R.items.length;){const F=R.items[x];if(F.id===N.itemId){F.update(N);const k=[...R.items];k[x]=F,R.items=k,y=R;break}x++}if(y)break;v++}if(y)y.hasUnseenItems=!0,b[v]=Kt(y);else{const R=new Hs(N);Vl(b,R,p(qe.FURNI,N.itemId)),St(new na(R.id,R.type,R.category))}}return b})}),U(ui,I=>{const C=I.getParser();So||(So=new Array(C.totalFragments));const E=WC(C.fragment,C.totalFragments,C.fragmentNumber,So);E&&(n(b=>{const N=[...b],v=jC(N);for(const y of v){if(E.get(y))continue;let R=0;for(;R<N.length;){const x=N[R],F=x.remove(y);if(!F){R++;continue}Es()===F.ref&&(Ws(),_s(x)||ee("inventory/show")),x.getTotalCount()<=0&&(N.splice(R,1),x.dispose());break}}for(const y of E.keys()){if(v.indexOf(y)>=0)continue;const R=E.get(y);if(!R)continue;const x=new Hs(R);Vl(N,x,p(qe.FURNI,y)),St(new na(x.id,x.type,x.category))}return N}),So=null)}),U(Gp,I=>{e(!0)}),U(vu,I=>{const C=I.getParser();n(E=>{const b=[...E];let N=0;for(;N<b.length;){const v=b[N],y=v.remove(C.itemId);if(!y){N++;continue}Es()===y.ref&&(Ws(),_s(v)||ee("inventory/show")),v.getTotalCount()<=0&&(b.splice(N,1),v.dispose());break}return b})}),U(Bp,I=>{}),i.exports.useEffect(()=>{!r||!r.length||s(I=>{let C=I;return C&&r.indexOf(C)===-1&&(C=null),C||(C=r[0]),C})},[r]),i.exports.useEffect(()=>{if(c)return()=>{g(qe.FURNI)&&n(I=>{const C=[...I];for(const E of C)E.hasUnseenItems=!1;return C})}},[c,g]),i.exports.useEffect(()=>{!c||!o||(D(new Vp),e(!1))},[c,o]),{isVisible:c,groupItems:r,setGroupItems:n,selectedItem:a,setSelectedItem:s,activate:u,deactivate:m,getWallItemById:f,getFloorItemById:_,getItemsByType:h}},Zn=()=>ct(_S);let No=null;const CS=()=>{const[o,e]=i.exports.useState(!0),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(null),{isVisible:c=!1,activate:u=null,deactivate:m=null}=Ea(),{isUnseen:p=null,resetCategory:g=null}=Cr();return U(Hp,h=>{const f=h.getParser();No||(No=new Array(f.totalFragments));const _=$C(f.fragment,f.totalFragments,f.fragmentNumber,No);_&&(n(I=>{const C=[...I];return zC(C,_,p),C}),No=null)}),U(Wp,h=>{const f=h.getParser();n(_=>{const I=[..._];return ad(f.pet,I,p(qe.PET,f.pet.id)),I})}),U(jp,h=>{const f=h.getParser();n(_=>{const I=[..._];return id(f.petId,I),I})}),i.exports.useEffect(()=>{!r||!r.length||s(h=>{let f=h;return f&&r.indexOf(f)===-1&&(f=null),f||(f=r[0]),f})},[r]),i.exports.useEffect(()=>{if(c)return()=>{g(qe.PET)}},[c,g]),i.exports.useEffect(()=>{!c||!o||(D(new qp),e(!1))},[c,o]),{petItems:r,selectedPet:a,setSelectedPet:s,activate:u,deactivate:m}},Wd=()=>ct(CS),bS=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(rt.TRADING_STATE_READY),{groupItems:c=[],setGroupItems:u=null,activate:m=null,deactivate:p=null}=Zn(),{simpleAlert:g=null,showTradeAlert:h=null}=Xe(),f=a>=rt.TRADING_STATE_RUNNING,_=()=>{switch(a){case rt.TRADING_STATE_RUNNING:!r.itemCount&&!o.accepts&&g(d("inventory.trading.warning.other_not_offering"),null,null,null),o.accepts?D(new sh):D(new oh);return;case rt.TRADING_STATE_CONFIRMING:D(new nh),s(rt.TRADING_STATE_CONFIRMED);return}},I=E=>{const b=E.getLastItem();b&&D(new ah(b.id))},C=()=>{if(f)switch(a){case rt.TRADING_STATE_RUNNING:D(new lh);return;default:D(new ih);return}};return U(Yp,E=>{const b=E.getParser();!o||!r||(o.userId===b.userID?e(N=>{const v=Kt(N);return v.accepts=b.userAccepts,v}):r.userId===b.userID&&n(N=>{const v=Kt(N);return v.accepts=b.userAccepts,v}))}),U($p,E=>{const b=E.getParser();b.reason===zp.ERROR_WHILE_COMMIT?h(bt.ERROR_WHILE_COMMIT):o&&b.userID!==o.userId&&h(bt.THEY_CANCELLED),e(null),n(null),s(rt.TRADING_STATE_READY)}),U(Kp,E=>{E.getParser(),e(null),n(null),s(rt.TRADING_STATE_READY)}),U(Xp,E=>{E.getParser(),s(rt.TRADING_STATE_COUNTDOWN)}),U(Qp,E=>{const b=E.getParser(),N=jl(b.firstUserItemArray),v=jl(b.secondUserItemArray);e(y=>{const R=Kt(y);R.userId===b.firstUserID?(R.creditsCount=b.firstUserNumCredits,R.itemCount=b.firstUserNumItems,R.userItems=N):(R.creditsCount=b.secondUserNumCredits,R.itemCount=b.secondUserNumItems,R.userItems=v);const x=[];for(const F of R.userItems.getValues()){let k=0;for(;k<F.getTotalCount();){const A=F.getItemByIndex(k);A&&x.push(A.ref),k++}}return u(F=>{const k=[...F];for(const A of k)A.lockItemIds(x);return k}),R}),n(y=>{const R=Kt(y);return R.userId===b.firstUserID?(R.creditsCount=b.firstUserNumCredits,R.itemCount=b.firstUserNumItems,R.userItems=N):(R.creditsCount=b.secondUserNumCredits,R.itemCount=b.secondUserNumItems,R.userItems=v),R})}),U(Jp,E=>{E.getParser()}),U(Zp,E=>{const b=E.getParser(),N=new Hl,v=ye().userDataManager.getUserData(b.userID);N.userItems=new Ls;const y=new Hl,R=ye().userDataManager.getUserData(b.otherUserID);y.userItems=new Ls,v.webID===H().userId?(N.userId=v.webID,N.userName=v.name,N.canTrade=b.userCanTrade,y.userId=R.webID,y.userName=R.name,y.canTrade=b.otherUserCanTrade):R.webID===H().userId&&(N.userId=R.webID,N.userName=R.name,N.canTrade=b.otherUserCanTrade,y.userId=v.webID,y.userName=v.name,y.canTrade=b.userCanTrade),e(N),n(y),s(rt.TRADING_STATE_RUNNING)}),U(eh,E=>{const b=E.getParser();h(b.reason,b.otherUserName)}),U(th,E=>{E.getParser(),h(bt.THEY_NOT_ALLOWED)}),U(rh,E=>{E.getParser(),h(bt.YOU_NOT_ALLOWED)}),i.exports.useEffect(()=>{if(a===rt.TRADING_STATE_READY)return;const E=m();return()=>p(E)},[a,m,p]),{ownUser:o,otherUser:r,tradeState:a,setTradeState:s,isTrading:f,groupItems:c,progressTrade:_,removeItem:I,stopTrading:C}},jd=()=>ct(bS),SS=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState([]),[m,p]=i.exports.useState([]),[g,h]=i.exports.useState([]),[f,_]=i.exports.useState([]),{simpleAlert:I=null}=Xe(),C=P=>{r.indexOf(P)>=0||n(B=>[...B,P])},E=P=>{n(B=>{const G=[...B],z=G.indexOf(P);return z>=0&&G.splice(z),G})},b=P=>{r.indexOf(P)>=0?E(P):C(P)},N=P=>{a.indexOf(P)>=0||s(B=>[...B,P])},v=P=>{s(B=>{const G=[...B],z=G.indexOf(P);return z>=0&&G.splice(z),G})},y=P=>{a.indexOf(P)>=0?v(P):N(P)},R=P=>{c.indexOf(P)>=0||u(B=>[...B,P])},x=P=>{u(B=>{const G=[...B],z=G.indexOf(P);return z>=0&&G.splice(z),G})},F=P=>{c.indexOf(P)>=0?x(P):R(P)},k=P=>{m.indexOf(P)>=0||p(B=>[...B,P])},A=P=>{p(B=>{const G=[...B],z=G.indexOf(P);return z>=0&&G.splice(z),G})},O=P=>{a.indexOf(P)>=0?A(P):k(P)};return U(ch,P=>{const G=P.getParser().data;e(G),h(G.issues)}),U(uh,P=>{const B=P.getParser();h(G=>{const z=[...G],X=z.findIndex(Y=>Y.issueId===B.issueData.issueId);return X>=0?z[X]=B.issueData:(z.push(B.issueData),rn(ur.MODTOOLS_NEW_TICKET)),z})}),U(dh,P=>{P.getParser()}),U(mh,P=>{P.getParser()&&I("Failed to pick issue",de.DEFAULT,null,null,"Error")}),U(gh,P=>{const B=P.getParser();h(G=>{const z=[...G],X=z.findIndex(Y=>Y.issueId===B.issueId);return X>=0&&z.splice(X,1),z})}),U(ph,P=>{P.getParser().success?I("Moderation action was successfull",de.MODERATION,null,null,"Success"):I("There was a problem applying tht moderation action",de.MODERATION,null,null,"Error")}),U(hh,P=>{const B=P.getParser();_(B.callForHelpCategories)}),U(fh,P=>{P.getParser()}),{settings:o,openRooms:r,openRoomChatlogs:a,openUserChatlogs:m,openUserInfos:c,cfhCategories:f,tickets:g,openRoomInfo:C,closeRoomInfo:E,toggleRoomInfo:b,openRoomChatlog:N,closeRoomChatlog:v,toggleRoomChatlog:y,openUserInfo:R,closeUserInfo:x,toggleUserInfo:F,openUserChatlog:k,closeUserChatlog:A,toggleUserChatlog:O}},vs=()=>ct(SS),NS=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState({roomInfo:null,state:ke.NONE}),[g,h]=i.exports.useState(null),[f,_]=i.exports.useState({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),{simpleAlert:I=null}=Xe();return U(Ih,C=>{const E=C.getParser();D(new Wo(E.roomId,!1,!1))}),U(Eh,C=>{const E=C.getParser();E.canCreate||I(d(`navigator.cannotcreateevent.error.${E.errorCode}`),null,null,null,d("navigator.cannotcreateevent.title"))}),U(Ru,C=>{D(new _h),D(new wu)}),U(Ch,C=>{const E=C.getParser();_(b=>{const N={...b};return N.eventMod=E.securityLevel>=qo.MODERATOR,N.roomPicker=E.securityLevel>=qo.COMMUNITY,N})}),U(bh,C=>{const E=C.getParser();Ir(E.roomId)}),U(xu,C=>{const E=C.getParser();_(b=>{const N={...b};return N.enteredGuestRoom=null,N.currentRoomOwner=E.isOwner,N.currentRoomId=E.roomId,N}),D(new Wo(E.roomId,!0,!1)),Fs.available&&Fs.call("legacyTrack","navigator","private",[E.roomId])}),U(Ts,C=>{const E=C.getParser();if(E.roomEnter)p({roomInfo:null,state:ke.NONE}),_(b=>{const N={...b};return N.enteredGuestRoom=E.data,N.currentRoomIsStaffPick=E.staffPick,!(N.createdFlatId===E.data.roomId)&&E.data.displayRoomEntryAd&&K("roomenterad.habblet.enabled",!1)&&zs.openRoomEnterAd(),N.createdFlatId=0,N.enteredGuestRoom&&N.enteredGuestRoom.habboGroupId>0,N});else if(E.roomForward){if(E.data.ownerName!==H().userName&&!E.isGroupMember)switch(E.data.doorMode){case nt.DOORBELL_STATE:p(b=>{const N={...b};return N.roomInfo=E.data,N.state=ke.START_DOORBELL,N});return;case nt.PASSWORD_STATE:p(b=>{const N={...b};return N.roomInfo=E.data,N.state=ke.START_PASSWORD,N});return}if(E.data.doorMode===nt.NOOB_STATE&&!H().isAmbassador&&!H().isRealNoob&&!H().isModerator)return;jn(E.data.roomId)}else _(b=>{const N={...b};return N.enteredGuestRoom=E.data,N.currentRoomIsStaffPick=E.staffPick,N})}),U(Sh,C=>{const E=C.getParser();_(b=>{const N={...b};return N.currentRoomRating=E.totalLikes,N.canRate=E.canLike,N})}),U(Nh,C=>{const E=C.getParser();(!E.userName||E.userName.length===0)&&p(b=>{const N={...b};return N.state=ke.STATE_WAITING,N})}),U(Th,C=>{const E=C.getParser();(!E.userName||E.userName.length===0)&&p(b=>{const N={...b};return N.state=ke.STATE_ACCEPTED,N})}),U(vh,C=>{const E=C.getParser();(!E.userName||E.userName.length===0)&&p(b=>{const N={...b};return N.state=ke.STATE_NO_ANSWER,N})}),U(wh,C=>{switch(C.getParser().errorCode){case-100002:p(b=>{const N={...b};return N.state=ke.STATE_WRONG_PASSWORD,N});return;case 4009:I(d("navigator.alert.need.to.be.vip"),de.DEFAULT,null,null,d("generic.alert.title"));return;case 4010:I(d("navigator.alert.invalid_room_name"),de.DEFAULT,null,null,d("generic.alert.title"));return;case 4011:I(d("navigator.alert.cannot_perm_ban"),de.DEFAULT,null,null,d("generic.alert.title"));return;case 4013:I(d("navigator.alert.room_in_maintenance"),de.DEFAULT,null,null,d("generic.alert.title"));return}}),U(Rh,C=>{const E=C.getParser();u(E.topLevelContexts),s(E.topLevelContexts.length?E.topLevelContexts[0]:null)}),U(xh,C=>{const E=C.getParser();s(b=>{let N=b;if(N||(N=c&&c.length&&c[0]||null),!N)return null;if(E.result.code!==N.code&&c&&c.length)for(const v of c)v.code===E.result.code&&(N=v);for(const v of c)v.code===E.result.code&&(N=v);return N}),h(E.result)}),U(yh,C=>{const E=C.getParser();e(E.categories)}),U(Oh,C=>{const E=C.getParser();n(E.categories)}),U(Ah,C=>{const E=C.getParser();jn(E.roomId)}),U(kh,C=>{const E=C.getParser();let b=!1;if(_(y=>{b=y.settingsReceived;const R={...y};return R.homeRoomId=E.homeRoomId,R.settingsReceived=!0,R}),b)return;let N=-1,v=-1;K("friend.id")!==void 0&&parseInt(K("friend.id"))>0&&(N=0,D(new Ui(parseInt(K("friend.id"))))),K("forward.type")!==void 0&&K("forward.id")!==void 0&&(N=parseInt(K("forward.type")),v=parseInt(K("forward.id"))),N===2?Ir(v):N===-1&&E.roomIdToEnter>0&&(ee("navigator/close"),E.roomIdToEnter!==E.homeRoomId?jn(E.roomIdToEnter):jn(E.homeRoomId))}),U(Ph,C=>{const E=C.getParser();switch(E.reason){case ya.REASON_FULL:I(d("navigator.guestroomfull.text"),de.DEFAULT,null,null,d("navigator.guestroomfull.title"));break;case ya.REASON_QUEUE_ERROR:I(d(`room.queue.error.${E.parameter}`),de.DEFAULT,null,null,d("room.queue.error.title"));break;case ya.REASON_BANNED:I(d("navigator.banned.text"),de.DEFAULT,null,null,d("navigator.banned.title"));break;default:I(d("room.queue.error.title"),de.DEFAULT,null,null,d("room.queue.error.title"));break}Vi()}),U(Dh,C=>ee("navigator/show")),{categories:o,doorData:m,setDoorData:p,topLevelContext:a,topLevelContexts:c,searchResult:g,navigatorData:f}},Dr=()=>ct(NS),TS=()=>{const[o,e]=i.exports.useState(new Ki),r=i.exports.useMemo(()=>K("hc.disabled",!1),[]),n=i.exports.useMemo(()=>r||o.clubDays>0?Gr.ACTIVE:o.pastVipDays>0||o.pastVipDays>0?Gr.EXPIRED:Gr.NONE,[o,r]),a=s=>{if(s===-1)return o.credits;for(const[c,u]of o.activityPoints.entries())if(c===s)return u;return 0};return U(Mh,s=>{const c=s.getParser();e(u=>{const m=Kt(u);return m.credits=parseFloat(c.credits),u.credits!==m.credits&&rn(ur.CREDITS),m})}),U(Lh,s=>{const c=s.getParser();e(u=>{const m=Kt(u);return m.activityPoints=c.currencies,m})}),U(Iu,s=>{const c=s.getParser();e(u=>{const m=Kt(u);return m.activityPoints=new Map(m.activityPoints),m.activityPoints.set(c.type,c.amount),c.type===0&&rn(ur.DUCKETS),m})}),U(Fh,s=>{const c=s.getParser(),u=c.productName;u!=="club_habbo"&&u!=="habbo_club"||e(m=>{const p=Kt(m);return p.clubDays=Math.max(0,c.daysToPeriodEnd),p.clubPeriods=Math.max(0,c.periodsSubscribedAhead),p.isVip=c.isVip,p.pastClubDays=c.pastClubDays,p.pastVipDays=c.pastVipDays,p.isExpiring=c.responseType===Uh.RESPONSE_TYPE_DISCOUNT_AVAILABLE,p.minutesUntilExpiration=c.minutesUntilExpiration,p.minutesSinceLastModified=c.minutesSinceLastModified,p})}),i.exports.useEffect(()=>{if(r)return;D(new Il("habbo_club"));const s=setInterval(()=>D(new Il("habbo_club")),5e4);return()=>clearInterval(s)},[r]),i.exports.useEffect(()=>{D(new Gh)},[]),{purse:o,hcDisabled:r,clubStatus:n,getCurrencyAmount:a}},es=()=>ct(TS),vS=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const r=n=>e(n);return tn.addEventListener(Re.FURNI_ADDED,r),()=>{tn.removeEventListener(Re.FURNI_ADDED,r)}},[o,e])},br=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const r=n=>e(n);return tn.addEventListener(Re.FURNI_REMOVED,r),()=>{tn.removeEventListener(Re.FURNI_REMOVED,r)}},[o,e])},wS=o=>{lt(Re.OBJECT_DESELECTED,o)},RS=o=>{lt(Re.OBJECT_ROLL_OUT,o)},xS=o=>{lt(Re.OBJECT_ROLL_OVER,o)},nl=o=>{lt(Re.OBJECT_SELECTED,o)},qd=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const r=n=>e(n);return tn.addEventListener(Re.USER_ADDED,r),()=>{tn.removeEventListener(Re.USER_ADDED,r)}},[o,e])},Yd=(o,e)=>{i.exports.useEffect(()=>{if(!o)return;const r=n=>e(n);return tn.addEventListener(Re.USER_REMOVED,r),()=>{tn.removeEventListener(Re.USER_REMOVED,r)}},[o,e])},yS=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(!1);return U(Bh,a=>{const s=a.getParser();s&&e(s)}),{promoteInformation:o,isExtended:r,setPromoteInformation:e,setIsExtended:n}},sl=()=>ct(yS),OS=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(0),m=(g,h,f,_=!1)=>{if(!r)return;const I=ir.hslToRGB(((g&255)<<16)+((h&255)<<8)+(f&255));_&&u(I),!g&&!h&&!f?r.tint=0:r.tint=I},p=g=>{if(!a)return;const h=g>>16&255,f=g>>8&255,_=g&255;a.red=h/255,a.green=f/255,a.blue=_/255};return lt(Tn.PREVIEW,g=>m(g.hue,g.saturation,g.lightness)),lt(Tn.CLEAR_PREVIEW,g=>{r&&(r.tint=c)}),Te(Vh.ROOM_BACKGROUND_COLOR,g=>{Wn.isRoomPreviewerId(g.roomId)||(g.enable?m(g.hue,g.saturation,g.lightness,!0):m(0,0,0,!0))}),Te(Hh.ROOM_COLOR,g=>{if(Wn.isRoomPreviewerId(g.roomId))return;let h=0,f=255;g.bgOnly||(h=g.color,f=g.brightness),p(ir.hslToRGB((ir.rgbToHSL(h)&16776960)+f))}),Te([hr.INITIALIZED,hr.DISPOSED],g=>{if(Wn.isRoomPreviewerId(g.roomId))return;const h=ye();if(h)switch(g.type){case hr.INITIALIZED:Fl(g.roomId),e(h);return;case hr.DISPOSED:e(null);return}}),Ye([qt.CREATED,qt.ENDED],g=>{switch(g.type){case qt.CREATED:DC(g.session);return;case qt.ENDED:e(null);return}}),Te([ft.SELECTED,ft.DESELECTED,ft.ADDED,ft.REMOVED,ft.PLACED,ft.REQUEST_MOVE,ft.REQUEST_ROTATE,ft.MOUSE_ENTER,ft.MOUSE_LEAVE,ft.DOUBLE_CLICK],g=>{if(Wn.isRoomPreviewerId(g.roomId))return;let h=null;switch(g.type){case ft.SELECTED:LC(g)||(h=new Re(Re.OBJECT_SELECTED,g.objectId,g.category,g.roomId));break;case ft.DESELECTED:h=new Re(Re.OBJECT_DESELECTED,g.objectId,g.category,g.roomId);break;case ft.ADDED:{let f=null;switch(g.category){case Q.FLOOR:case Q.WALL:f=Re.FURNI_ADDED;break;case Q.UNIT:f=Re.USER_ADDED;break}f&&(h=new Re(f,g.objectId,g.category,g.roomId));break}case ft.REMOVED:{let f=null;switch(g.category){case Q.FLOOR:case Q.WALL:f=Re.FURNI_REMOVED;break;case Q.UNIT:f=Re.USER_REMOVED;break}f&&(h=new Re(f,g.objectId,g.category,g.roomId));break}case ft.REQUEST_MOVE:Bs(o,g.objectId,g.category)&&us(g.objectId,g.category,Fr.OBJECT_MOVE);break;case ft.REQUEST_ROTATE:Bs(o,g.objectId,g.category)&&us(g.objectId,g.category,Fr.OBJECT_ROTATE_POSITIVE);break;case ft.MOUSE_ENTER:h=new Re(Re.OBJECT_ROLL_OVER,g.objectId,g.category,g.roomId);break;case ft.MOUSE_LEAVE:h=new Re(Re.OBJECT_ROLL_OUT,g.objectId,g.category,g.roomId);break;case ft.DOUBLE_CLICK:h=new Re(Re.OBJECT_DOUBLE_CLICKED,g.objectId,g.category,g.roomId);break}h&&St(h)}),i.exports.useEffect(()=>{if(!o)return;const g=_e(),h=q(),f=o.roomId,_=1,I=Math.floor(window.innerWidth),C=Math.floor(window.innerHeight),E=g.application.renderer;E&&(E.view.style.width=`${I}px`,E.view.style.height=`${C}px`,E.resolution=window.devicePixelRatio,E.resize(I,C));const b=h.getRoomInstanceDisplay(f,_,I,C,Wh.SCALE_ZOOMED_IN),N=q().getRoomInstanceRenderingCanvas(f,_);if(!b||!N)return;const v=new Vo(jh.WHITE),y=new qh,R=N.master;v.tint=0,v.width=I,v.height=C,R.addChildAt(v,0),R.filters=[y],n(v),s(y);const x=h.getRoomInstanceGeometry(f,_);if(x){const A=h.getRoomInstanceVariable(f,io.ROOM_MIN_X)||0,O=h.getRoomInstanceVariable(f,io.ROOM_MAX_X)||0,P=h.getRoomInstanceVariable(f,io.ROOM_MIN_Y)||0,B=h.getRoomInstanceVariable(f,io.ROOM_MAX_Y)||0;let G=(A+O)/2,z=(P+B)/2;const X=20;G=G+(X-1),z=z+(X-1);const Y=Math.sqrt(X*X+X*X)*Math.tan(30/180*Math.PI);x.location=new Rt(G,z,Y)}const F=g.application.stage;if(!F)return;F.addChild(b),Fl(o.roomId);const k=A=>{const O=Math.floor(window.innerWidth),P=Math.floor(window.innerHeight);E.view.style.width=`${O}px`,E.view.style.height=`${P}px`,E.resolution=window.devicePixelRatio,E.resize(O,P),v.width=O,v.height=P,MC(O,P,1),g.application.render()};return window.addEventListener("resize",k),()=>{n(null),s(null),u(0),window.removeEventListener("resize",k)}},[o]),{roomSession:o}},Ge=()=>ct(OS),AS=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(0),{roomSession:c=null}=Ge(),u=()=>{const g=ir.rgbToHSL(a),[h,f,_,I]=Qt.int_to_8BitVals(g);D(new Yh(o,f,_,I))},m=()=>c.useMultistateItem(o),p=()=>{St(new Tn(Tn.CLEAR_PREVIEW)),e(-1),n(-1),s(0)};return Te(we.REQUEST_BACKGROUND_COLOR,g=>{if(!Bs(c,g.objectId,g.category))return;const f=q().getRoomObject(g.roomId,g.objectId,g.category).model;e(g.objectId),n(g.category);const _=parseInt(f.getValue(te.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),I=parseInt(f.getValue(te.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),C=parseInt(f.getValue(te.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)),E=Qt.eight_bitVals_to_int(0,_,I,C),b=ir.hslToRGB(E);s(b)}),br(o!==-1&&r!==-1,g=>{g.id!==o||g.category!==r||p()}),i.exports.useEffect(()=>{if(o===-1||r===-1)return;const g=ir.rgbToHSL(a),[h,f,_,I]=Qt.int_to_8BitVals(g);St(new Tn(Tn.PREVIEW,f,_,I))},[o,r,a]),{objectId:o,color:a,setColor:s,applyToner:u,toggleToner:m,onClose:p}},kS=AS,PS=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState("1"),[c,u]=i.exports.useState(""),[m,p]=i.exports.useState(""),[g,h]=i.exports.useState(""),[f,_]=i.exports.useState(""),{simpleAlert:I=null}=Xe(),C=()=>{e(-1),n(-1),s("1"),u(""),p(""),h(""),_("")};return Te([we.REQUEST_BADGE_DISPLAY_ENGRAVING,we.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING],E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const N=new $s;N.initializeFromRoomObjectModel(b.model),e(E.objectId),n(E.category),s("1"),u(Qs(N.getValue(1))),p(ji(N.getValue(1))),h(N.getValue(2)),_(N.getValue(3))}),Te(we.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);!b||b.model.getValue(te.FURNITURE_OWNER_ID)!==H().userId||I(`${d("resolution.failed.subtitle")} ${d("resolution.failed.text")}`,null,null,null,d("resolution.failed.title"))}),br(o!==-1&&r!==-1,E=>{E.id!==o||E.category!==r||C()}),{objectId:o,category:r,color:a,badgeName:c,badgeDesc:m,date:g,senderName:f,onClose:C}},DS=PS,vi="MONSTERPLANT_SEED_CONFIRMATION",wi="PURCHASABLE_CLOTHING_CONFIRMATION",zd="GROUP_FURNITURE",$d="EFFECTBOX_OPEN",Ri="MYSTERYTROPHY_OPEN_DIALOG",MS=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[m,p]=i.exports.useState(null),[g,h]=i.exports.useState(!1),[f,_]=i.exports.useState(-1),{roomSession:I=null}=Ge(),C=()=>{e(-1),p(null),h(!1),n(null)},E=()=>{s(null),u(-1)},b=N=>{if(N)switch(N){case"use_friend_furni":I.useMultistateItem(o);break;case"use_monsterplant_seed":s(vi),u(o);break;case"use_random_teleport":q().useRoomObject(o,Q.FLOOR);break;case"use_purchaseable_clothing":s(wi),u(o);break;case"use_mystery_box":I.useMultistateItem(o);break;case"use_mystery_trophy":s(Ri),u(o);break;case"join_group":$i(m.guildId),h(!0);return;case"go_to_group_homeroom":m&&Ir(m.guildHomeRoomId);break}C()};return Te([we.OPEN_FURNI_CONTEXT_MENU,we.CLOSE_FURNI_CONTEXT_MENU,we.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,we.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,we.REQUEST_EFFECTBOX_OPEN_DIALOG,we.REQUEST_MYSTERYBOX_OPEN_DIALOG,we.REQUEST_MYSTERYTROPHY_OPEN_DIALOG],N=>{const v=q().getRoomObject(I.roomId,N.objectId,N.category);if(v)switch(_(v.model.getValue(te.FURNITURE_OWNER_ID)),N.type){case we.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!Wt(v))return;u(v.id),s(vi),C();return;case we.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!Wt(v))return;u(v.id),s($d),C();return;case we.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!Wt(v))return;u(v.id),s(wi),C();return;case we.REQUEST_MYSTERYBOX_OPEN_DIALOG:I.useMultistateItem(v.id),C();return;case we.REQUEST_MYSTERYTROPHY_OPEN_DIALOG:if(!Wt(v))return;u(v.id),s(Ri),C();return;case we.OPEN_FURNI_CONTEXT_MENU:switch(e(v.id),N.contextMenu){case Mt.FRIEND_FURNITURE:n(Mt.FRIEND_FURNITURE);return;case Mt.MONSTERPLANT_SEED:Wt(v)&&n(Mt.MONSTERPLANT_SEED);return;case Mt.MYSTERY_BOX:n(Mt.MYSTERY_BOX);return;case Mt.MYSTERY_TROPHY:Wt(v)&&n(Mt.MYSTERY_TROPHY);return;case Mt.RANDOM_TELEPORT:n(Mt.RANDOM_TELEPORT);return;case Mt.PURCHASABLE_CLOTHING:Wt(v)&&n(Mt.PURCHASABLE_CLOTHING);return}return;case we.CLOSE_FURNI_CONTEXT_MENU:v.id===o&&C();return}}),U(zh,N=>{const v=N.getParser();e(v.objectId),p(v),h(v.userIsMember),n(zd)}),{objectId:o,mode:r,confirmMode:a,confirmingObjectId:c,groupData:m,isGroupMember:g,objectOwnerId:f,closeConfirm:E,processAction:b,onClose:C}},LS=MS,US=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState([]),[m,p]=i.exports.useState(null),[g,h]=i.exports.useState(new Map),[f,_]=i.exports.useState(!1),{groupItems:I=[],getItemsByType:C=null,activate:E=null,deactivate:b=null}=Zn(),{simpleAlert:N=null}=Xe(),v=a&&g.get(a.name)||null,y=()=>{n([]),s(null),u([]),h(new Map)},R=()=>{e(-1),y()},x=()=>{_(!0),D(new ef(o,a.name))},F=k=>{s(k),g.get(k.name)||D(new tf(k.name))};return Te(we.OPEN_WIDGET,k=>{k.widget===$h.CRAFTING&&(e(k.objectId),y(),D(new Kh(k.objectId)))}),U(Xh,k=>{const A=k.getParser();if(!A.isActive()){e(-1);return}n(O=>{const P=[];for(const B of A.recipes){const G=q().roomContentLoader._activeObjectTypeIds.get(B.itemName),z=q().getFurnitureFloorIconUrl(G);P.push({name:B.recipeName,localizedName:d("roomItem.name."+G),iconUrl:z})}return P}),p(A.ingredients)}),U(Qh,k=>{const A=k.getParser();h(O=>{const P=new Map(O);return P.set(a.name,A.ingredients),P})}),U(Jh,k=>{s(null),_(!1),k.getParser().result&&N(d("crafting.info.result.ok"))}),U(Zh,k=>{}),i.exports.useEffect(()=>{!m||!m.length||u(k=>{const A=[];for(const O of m){const P=q().roomContentLoader._activeObjectTypeIds.get(O),B=q().getFurnitureFloorIconUrl(P),G=C(P);let z=0;if(G)for(const X of G)z+=X.items.length;A.push({name:O,iconUrl:B,count:z})}return A})},[I,m,C]),i.exports.useEffect(()=>{if(o===-1)return;const k=E();return()=>b(k)},[o,E,b]),{objectId:o,recipes:r,ingredients:c,selectedRecipe:a,requiredIngredients:v,isCrafting:f,selectRecipe:F,craft:x,onClose:R}},FS=US,GS=()=>{const[o,e]=i.exports.useState([]),[r,n]=i.exports.useState(0),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(0),[m,p]=i.exports.useState(0),[g,h]=i.exports.useState(16777215),[f,_]=i.exports.useState(255),[I,C]=i.exports.useState(0),[E,b]=i.exports.useState(0),[N,v]=i.exports.useState(0),{roomSession:y=null}=Ge(),R=()=>y.isRoomOwner||y.controllerLevel>=tt.GUEST||H().isModerator,x=k=>{const A=o[k-1];A&&(n(A.id),C(A.type),b(A.color),v(A.light))},F=()=>{if(a===0)return;const k=r-1;if(r<1||r>o.length)return;const A=o[k];!A||I===A.type&&E===A.color&&N===A.light||(e(O=>{const P=[...O];return P[k]=new Ql(A.id,I,E,N),P}),rr.savePreset(A.id,I,E,N,!0))};return Te(we.REQUEST_DIMMER,k=>{R()&&y.requestMoodlightSettings()}),Ye(rf.ROOM_DIMMER_PRESETS,k=>{const A=[];let O=0;for(;O<k.presetCount;){const P=k.getPreset(O);P&&A.push(new Ql(P.id,P.type,P.color,P.brightness)),O++}e(A),n(k.selectedPresetId)}),Te(nf.ROOM_COLOR,k=>{Wn.isRoomPreviewerId(k.roomId)||(u(a),s(k.state),n(k.presetId),p(k.effectId),C(k.effectId),h(k.color),b(k.color),_(k.brightness),v(k.brightness))}),i.exports.useEffect(()=>{a===0&&c===0||rr.previewDimmer(E,N,I===2)},[a,c,E,N,I]),{presets:o,selectedPresetId:r,dimmerState:a,lastDimmerState:c,effectId:m,color:g,brightness:f,selectedEffectId:I,setSelectedEffectId:C,selectedColor:E,setSelectedColor:b,selectedBrightness:N,setSelectedBrightness:v,selectPresetId:x,applyChanges:F}},BS=GS,VS=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(0),c=()=>{e(-1),n(-1),s(0)},u=()=>{ye().connection.send(new sf(o)),c()};return Te(we.REQUEST_CREDITFURNI,m=>{const p=q().getRoomObject(m.roomId,m.objectId,m.category);!p||!Wt(p)||(e(m.objectId),n(m.category),s(p.model.getValue(te.FURNITURE_CREDIT_VALUE)||0))}),br(o!==-1&&r!==-1,m=>{m.id!==o||m.category!==r||c()}),{objectId:o,value:a,redeem:u,onClose:c}},HS=VS,WS=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState([]),{roomSession:m=null}=Ge(),p=()=>{e(-1),n(-1),s(-1),u([])};return Te(we.REQUEST_EXTERNAL_IMAGE,g=>{const h=q().getRoomObject(g.roomId,g.objectId,g.category),f=q().getRoomObjects(m==null?void 0:m.roomId,Q.WALL);if(!h)return;const _=[];f.forEach(C=>{if(C.type!=="external_image_wallitem_poster_small")return null;const E=C.model.getValue(te.FURNITURE_DATA),b=JSON.parse(E);_.push(b)}),e(g.objectId),n(g.category),u(_);const I=JSON.parse(h.model.getValue(te.FURNITURE_DATA));s(C=>{let E=0;return I&&(E=_.findIndex(b=>b.u===I.u)),E<0&&(E=0),E})}),br(o!==-1&&r!==-1,g=>{g.id!==o||g.category!==r||p()}),{objectId:o,currentPhotoIndex:a,currentPhotos:c,onClose:p}},jS=WS,qS=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState([]),[m,p]=i.exports.useState([]),[g,h]=i.exports.useState(null),[f,_]=i.exports.useState(0),I=()=>{e(-1),n(-1),s(0),u([]),p([]),h(null)},C=E=>{ye().connection.send(new cf(o,E)),I()};return U(of,E=>{const b=E.getParser();e(b.furniId),_(b.start?1:2)}),U(af,E=>I()),U(lf,E=>I()),Te(we.REQUEST_FRIEND_FURNITURE_ENGRAVING,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const N=b.model.getValue(te.FURNITURE_DATA),v=b.model.getValue(te.FURNITURE_FRIENDFURNI_ENGRAVING);N[0]!=="1"||N.length!==6||(e(E.objectId),n(E.category),s(v),u([N[1],N[2]]),p([N[3],N[4]]),h(N[5]),_(0))}),br(o!==-1&&r!==-1,E=>{E.id!==o||E.category!==r||I()}),{objectId:o,type:a,usernames:c,figures:m,date:g,stage:f,onClose:I,respond:C}},YS=qS,zS=["perteam","mostwins","classic"],$S=["alltime","daily","weekly","monthly"],KS=()=>{const[o,e]=i.exports.useState(new Map),{roomSession:r=null}=Ge(),n=s=>zS[s],a=s=>$S[s];return Te(we.REQUEST_HIGH_SCORE_DISPLAY,s=>{const c=q().getRoomObject(s.roomId,s.objectId,s.category);if(!c)return;const u=c.model.getValue(te.FURNITURE_DATA_FORMAT),m=hu.getData(u);m.initializeFromRoomObjectModel(c.model),e(p=>{const g=new Map(p);return g.set(c.id,m),g})}),Te(we.REQUEST_HIDE_HIGH_SCORE_DISPLAY,s=>{s.roomId===r.roomId&&e(c=>{const u=new Map(c);return u.delete(s.objectId),u})}),{stuffDatas:o,getScoreType:n,getClearType:a}},XS=KS,QS="internalLink",JS=()=>(Te(we.REQUEST_INTERNAL_LINK,o=>{const e=q().getRoomObject(o.roomId,o.objectId,o.category);if(!e)return;let n=e.model.getValue(te.FURNITURE_DATA)[QS];(!n||!n.length)&&(n=e.model.getValue(te.FURNITURE_INTERNAL_LINK)),n&&n.length&&ee(n)}),{}),ZS=JS,eN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState(cr.NO_CLUB),[g,h]=i.exports.useState(null),f=()=>{e(-1),n(-1),s(null),u(null),h(null)},_=()=>{o!==-1&&(D(new uf(o)),f())},I=()=>{o!==-1&&(D(new di(o)),f())},C=()=>{o!==-1&&D(new df(o,g))};return Te(we.REQUEST_MANNEQUIN,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const N=b.model,v=N.getValue(te.FURNITURE_MANNEQUIN_FIGURE)||null,y=N.getValue(te.FURNITURE_MANNEQUIN_GENDER)||null,R=Nt().createFigureContainer(v),x=Nt().getFigureClubLevel(R,y,ps.MANNEQUIN_CLOTHING_PART_TYPES);e(E.objectId),n(E.category),s(v),u(y),p(x),h(N.getValue(te.FURNITURE_MANNEQUIN_NAME)||null)}),br(o!==-1&&r!==-1,E=>{E.id!==o||E.category!==r||f()}),{objectId:o,figure:a,gender:c,clubLevel:m,name:g,setName:h,saveFigure:_,wearFigure:I,saveName:C,onClose:f}},tN=eN,rN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(-1),[c,u]=i.exports.useState(new Ls),[m,p]=i.exports.useState([]),{roomSession:g=null}=Ge(),{showSingleBubble:h=null,simpleAlert:f=null}=Xe(),_=()=>{e(-1),n(-1)},I=i.exports.useCallback((N,v)=>D(new mf(N,v)),[]),C=i.exports.useCallback(N=>D(new gf(N)),[]),E=i.exports.useCallback((N,v)=>D(new di(N,v)),[]);Te(we.REQUEST_PLAYLIST_EDITOR,N=>{var y,R,x;const v=q().getRoomObject(N.roomId,N.objectId,N.category);if(v){if(Wt(v)){e(N.objectId),n(N.category),(y=_e().soundManager.musicController)==null||y.requestUserSongDisks(),(x=(R=_e().soundManager.musicController)==null?void 0:R.getRoomItemPlaylist())==null||x.requestPlayList();return}(g.isRoomOwner||g.controllerLevel>=tt.GUEST||H().isModerator)&&D(new di(N.objectId,-2))}}),br(o!==-1&&r!==-1,N=>{N.id!==o||N.category!==r||_()}),Hn(yu.NPE_SONG_CHANGED,N=>{s(N.position)}),Hn(pf.NOTIFY_PLAYED_SONG,N=>{h(d("soundmachine.notification.playing",["songname","songauthor"],[N.name,N.creator]),$e.SOUNDMACHINE)}),Hn(hf.SDIR_SONG_DISK_INVENTORY_RECEIVENT_EVENT,N=>{var v;u((v=_e().soundManager.musicController)==null?void 0:v.songDiskInventory.clone())}),Hn(El.PLUE_PLAY_LIST_UPDATED,N=>{var v,y;p((y=(v=_e().soundManager.musicController)==null?void 0:v.getRoomItemPlaylist())==null?void 0:y.entries.concat())}),Hn(El.PLUE_PLAY_LIST_FULL,N=>{f(d("playlist.editor.alert.playlist.full"),de.ALERT,"","",d("playlist.editor.alert.playlist.full.title"))});const b=N=>{var v,y;o!==-1&&(N instanceof ui?N.getParser().fragmentNumber===0&&((v=_e().soundManager.musicController)==null||v.requestUserSongDisks()):(y=_e().soundManager.musicController)==null||y.requestUserSongDisks())};return U(ui,b),U(vu,b),U(Tu,b),{objectId:o,diskInventory:c,playlist:m,currentPlayingIndex:a,onClose:_,addToPlaylist:I,removeFromPlaylist:C,togglePlayPause:E}},nN=rN,sc="floor",sN="wallpaper",oc="landscape",oN="poster",aN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState(!1),[g,h]=i.exports.useState(null),[f,_]=i.exports.useState(null),[I,C]=i.exports.useState(-1),[E,b]=i.exports.useState(null),[N,v]=i.exports.useState(!1),[y,R]=i.exports.useState(null),{roomSession:x=null}=Ge(),F=()=>{e(-1),n(-1),s(null),u(null),p(!1),h(null),_(null),C(-1),b(null),v(!1),R(null)},k=()=>{o!==-1&&(x.openGift(o),q().changeObjectModelData(q().activeRoomId,o,Q.FLOOR,te.FURNITURE_DISABLE_PICKING_ANIMATION,1))},A=i.exports.useMemo(()=>({imageReady:(O,P,B)=>{!B&&P&&(B=en.generateImage(P)),R(B.src)},imageFailed:null}),[]);return Ye(ff.RSPE_PRESENT_OPENED,O=>{let P=null;O.itemType===ue.FLOOR?P=H().getFloorItemData(O.classId):O.itemType===ue.WALL&&(P=H().getWallItemData(O.classId));let B=!1;if(O.placedInRoom){const G=q().getRoomObject(x.roomId,O.placedItemId,Q.FLOOR);G&&(B=Wt(G))}switch(O.itemType){case ue.WALL:{if(P)switch(P.className){case sc:case oc:case sN:let G=null;P.className===sc?G=d("inventory.furni.item.floor.name"):P.className===oc?G=d("inventory.furni.item.landscape.name"):G=d("inventory.furni.item.wallpaper.name"),u(G);break;case oN:{const z=O.productCode;let X=null;z.indexOf("poster")===0&&(X=z.replace("poster",""));const Y=H().getProductData(z);let Ee=null;Y?Ee=Y.name:P&&(Ee=P.name),u(Ee),R(q().getFurnitureWallIconUrl(O.classId,X));break}default:{u(P.name||null),R(q().getFurnitureWallIconUrl(O.classId));break}}break}case ue.HABBO_CLUB:u(d("widget.furni.present.hc"));break;default:{if(O.placedItemType===ue.PET){const z=O.petFigureString;if(z&&z.length){const X=new fs(z),Y=q().getRoomObjectPetImage(X.typeId,X.paletteId,X.color,new Rt(90),64,A,!0,0,X.customParts);Y&&R(Y.getImage().src)}}else{const z=q().getFurnitureFloorImage(O.classId,new Rt(90),64,A);z&&R(z.getImage().src)}const G=H().getProductData(O.productCode);u(G&&G.name||P.name);break}}e(0),n(O.classId),s(O.itemType),p(B),C(O.placedItemId),b(O.placedItemType),v(O.placedInRoom)}),Te(we.REQUEST_PRESENT,O=>{const P=q().getRoomObject(O.roomId,O.objectId,O.category);if(!P)return null;F(),e(O.objectId),n(-1),u(P.model.getValue(te.FURNITURE_DATA)||""),p(Wt(P)),h(P.model.getValue(te.FURNITURE_PURCHASER_NAME)||null),_(P.model.getValue(te.FURNITURE_PURCHASER_FIGURE)||null)}),br(o!==-1,O=>{O.id===o&&F(),O.id===I&&N&&v(!1)}),{objectId:o,classId:r,itemType:a,text:c,isOwnerOfFurniture:m,senderName:g,senderFigure:f,placedItemId:I,placedItemType:E,placedInRoom:N,imageUrl:y,openPresent:k,onClose:F}},iN=aN,lN="internalLink",cN=()=>{const[o,e]=i.exports.useState(0);return Te(we.REQUEST_ROOM_LINK,r=>{const n=q().getRoomObject(r.roomId,r.objectId,r.category);if(!n)return;let s=n.model.getValue(te.FURNITURE_DATA)[lN];(!s||!s.length)&&(s=n.model.getValue(te.FURNITURE_INTERNAL_LINK)),!(!s||!s.length)&&(s=parseInt(s,10),!isNaN(s)&&(e(s),D(new Wo(s,!1,!1))))}),U(Ts,r=>{!o||r.getParser().data.roomId!==o||e(0)}),{}},uN=cN,dN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(""),[m,p]=i.exports.useState("0"),[g,h]=i.exports.useState(""),[f,_]=i.exports.useState(!1),{getWallItemById:I=null}=Zn(),C=()=>{D(new Ef(o,c,m,g)),e(-1),n(-1),s(""),u(""),p("0"),h(""),_(!1)};return U(If,E=>{const b=E.getParser();e(b.itemId),n(Q.WALL);const N=I(b.itemId);let v="post_it";if(N){const y=q().getFurnitureWallName(N.type);y.match("post_it_")&&(v=y)}s(v),u(b.location),p("FFFF33"),h(""),_(!0)}),{objectId:o,color:m,setColor:p,text:g,setText:h,canModify:f,onClose:C}},mN=dN,Va=40,gN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(-1),m=()=>{e(-1),n(-1),s(0),u(-1)},p=(g,h=!1)=>{g||(g=0),g=Math.abs(g),h||g>Va&&(g=Va),s(parseFloat(g.toFixed(2))),h||u(g*100)};return U(_f,g=>{const h=g.getParser();o===h.furniId&&p(h.height,!0)}),Te(we.REQUEST_STACK_HEIGHT,g=>{if(!Bs(ye(),g.objectId,g.category))return;const h=q().getRoomObject(g.roomId,g.objectId,g.category);h&&(e(g.objectId),n(g.category),s(h.getLocation().z),u(-1))}),br(o!==-1&&r!==-1,g=>{g.id!==o||g.category!==r||m()}),i.exports.useEffect(()=>{if(o===-1||c===-1)return;const g=setTimeout(()=>D(new mi(o,~~c)),10);return()=>clearTimeout(g)},[o,c]),{objectId:o,height:a,maxHeight:Va,onClose:m,updateHeight:p}},pN=gN,hN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState("0"),[c,u]=i.exports.useState(""),[m,p]=i.exports.useState(""),[g,h]=i.exports.useState(!1),f=()=>{e(-1),n(-1),s("0"),u(""),p(""),h(!1)},_=E=>{E!==a&&(s(E),q().modifyRoomObjectData(o,r,E,c))},I=E=>{u(E),q().modifyRoomObjectData(o,r,a,E)},C=()=>q().deleteRoomObject(o,r);return Te(we.REQUEST_STICKIE,E=>{const b=q().getRoomObject(E.roomId,E.objectId,E.category);if(!b)return;const N=b.model.getValue(te.FURNITURE_ITEMDATA);if(N.length<6)return;let v=null,y=null;N.indexOf(" ")>0?(v=N.slice(0,N.indexOf(" ")),y=N.slice(N.indexOf(" ")+1,N.length)):v=N,e(E.objectId),n(E.category),s(v||"0"),u(y||""),p(b.type||"post_it"),h(ye().isRoomOwner||H().isModerator||Wt(b))}),br(o!==-1&&r!==-1,E=>{E.id!==o||E.category!==r||f()}),{objectId:o,color:a,text:c,type:m,canModify:g,updateColor:_,updateText:I,trash:C,onClose:f}},fN=hN,IN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState("1"),[c,u]=i.exports.useState(""),[m,p]=i.exports.useState(""),[g,h]=i.exports.useState(""),f=()=>{e(-1),n(-1),s("1"),u(""),p(""),h("")};return Te(we.REQUEST_TROPHY,_=>{const I=q().getRoomObject(_.roomId,_.objectId,_.category);if(!I)return;let C=I.model.getValue(te.FURNITURE_DATA);I.model.getValue(te.FURNITURE_EXTRAS),e(_.objectId),n(_.category),s(I.model.getValue(te.FURNITURE_COLOR)||"1");const E=C.substring(0,C.indexOf("	"));C=C.substring(E.length+1,C.length);const b=C.substring(0,C.indexOf("	")),N=C.substr(b.length+1,C.length);u(E),p(b),h(N)}),br(o!==-1&&r!==-1,_=>{_.id!==o||_.category!==r||f()}),{objectId:o,color:a,senderName:c,date:m,message:g,onClose:f}},EN=IN,_N=0,CN=1,bN=2,SN=3,NN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState(null),[g,h]=i.exports.useState(-1),[f,_]=i.exports.useState(null),[I,C]=i.exports.useState(null),[E,b]=i.exports.useState(!1),N=()=>{e(-1),n(-1),s(null),u(null),p(null),h(-1),_(null),C(null),b(!1)},v=()=>D(new lo(o,_N)),y=()=>D(new lo(o,CN)),R=()=>E&&a&&a.length&&D(new lo(o,bN)),x=()=>E&&a&&a.length&&D(new lo(o,SN)),F=k=>{if(f===k){_(null),D(new _l(o,""));return}_(k),D(new _l(o,k))};return Te(we.REQUEST_YOUTUBE,k=>{if(Wn.isRoomPreviewerId(k.roomId))return;const A=q().getRoomObject(k.roomId,k.objectId,k.category);A&&(e(k.objectId),n(k.category),b(H().hasSecurity(qo.EMPLOYEE)||Wt(A)),D(new Cf(k.objectId)))}),U(bf,k=>{const A=k.getParser();o===-1||o!==A.furniId||(s(A.videoId),u(A.startAtSeconds),p(A.endAtSeconds),h(A.state))}),U(Sf,k=>{const A=k.getParser();o===-1||o!==A.furniId||(C(A.playlists),_(A.selectedPlaylistId),s(null),h(-1),p(null),u(null))}),U(Nf,k=>{const A=k.getParser();if(!(o===-1||o!==A.furniId))switch(A.commandId){case 1:h(yr.PLAYING);break;case 2:h(yr.PAUSED);break}}),br(o!==-1&&r!==-1,k=>{k.id!==o||k.category!==r||N()}),{objectId:o,videoId:a,videoStart:c,videoEnd:m,currentVideoState:g,selectedVideo:f,playlists:I,onClose:N,previous:v,next:y,pause:R,play:x,selectVideo:F}},TN=NN,vN=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState([]),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState([]),[m,p]=i.exports.useState(0),[g,h]=i.exports.useState(ie.STUFF_SELECTION_OPTION_NONE),{showConfirm:f=null}=Xe(),_=()=>{const C=E=>{E&&(E instanceof Ou?D(new xf(E.id,r,a,c,m,E.stuffTypeSelectionCode)):E instanceof Au?D(new yf(E.id,r,a,c,E.stuffTypeSelectionCode)):E instanceof ku&&D(new Of(E.id,r,a,c,E.stuffTypeSelectionCode)))};kC(o.id)?C(o):f(d("wiredfurni.nonowner.change.confirm.body"),()=>{C(o)},null,null,null,d("wiredfurni.nonowner.change.confirm.title"))},I=(C,E)=>{!o||!g||C<=0||u(b=>{const N=[...b],v=b.indexOf(C);return v>=0?(N.splice(v,1),hs.hide(C)):N.length<o.maximumItemSelectionCount&&(N.push(C),hs.show(C)),N})};return U(Tf,C=>{C.getParser(),e(null)}),U(vf,C=>{const E=C.getParser();e(E.definition)}),U(wf,C=>{const E=C.getParser();e(E.definition)}),U(Rf,C=>{const E=C.getParser();e(E.definition)}),i.exports.useEffect(()=>{if(o)return()=>{n([]),s(""),p(0),u(C=>(C&&C.length&&hs.clearSelectionShaderFromFurni(C),[])),h(ie.STUFF_SELECTION_OPTION_NONE)}},[o]),{trigger:o,setTrigger:e,intParams:r,setIntParams:n,stringParam:a,setStringParam:s,furniIds:c,setFurniIds:u,actionDelay:m,setActionDelay:p,setAllowsFurni:h,saveWired:_,selectObjectForWired:I}},ve=()=>ct(vN),wN=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState([]),[m,p]=i.exports.useState(null),[g,h]=i.exports.useState(-1),[f,_]=i.exports.useState(!1),{friends:I=[]}=mr(),{selectObjectForWired:C=null}=ve(),{roomSession:E=null}=Ge(),b=x=>{s(F=>{const k=[...F];return k.splice(x,1),k})},N=x=>{u(F=>{const k=[...F],A=k.splice(x,1)[0];return m===A&&p(null),k})},v=x=>{p(x),u([])},y=(x,F)=>{const k=ss.getObjectName(x,F);k&&(n(k),F!==Q.UNIT&&u([]))},R=(x,F)=>{let k=null;switch(F){case Q.FLOOR:case Q.WALL:k=ss.getFurniInfo(x,F),k&&C(x,F);break;case Q.UNIT:{const A=E.userDataManager.getUserDataByIndex(x);if(!A)break;switch(A.type){case pt.PET:E.userDataManager.requestPetInfo(A.webID),h(A.webID);break;case pt.USER:k=ss.getUserInfo(F,A);break;case pt.BOT:k=ss.getBotInfo(F,A);break;case pt.RENTABLE_BOT:k=ss.getRentableBotInfo(F,A);break}}}k&&e(k)};return Ye(Af.USER_DATA_UPDATED,x=>{if(!x.addedUsers.length)return;let F=[];x.addedUsers.forEach(k=>{k.webID!==H().userId&&I.find(A=>A.id===k.webID)&&F.push(new Ed(k.roomIndex,Q.UNIT,k.webID,k.name,k.type,!0))}),F.length&&s(k=>{const A=[...k];return F.forEach(O=>{const P=A.findIndex(B=>B.id===O.id);P>-1&&A.splice(P,1),A.push(O)}),A})}),Ye(kf.PET_INFO,x=>{const F=x.petInfo;if(!F||F.id!==g)return;const k=ss.getPetInfo(F);k&&(e(k),h(-1))}),Ye(Pf.PET_STATUS_UPDATE,x=>{}),Te(Cl.USE_PRODUCT_FROM_INVENTORY,x=>{}),Te(Cl.USE_PRODUCT_FROM_ROOM,x=>{const F=q().getRoomObject(E.roomId,x.objectId,Q.FLOOR);if(!F||!Wt(F))return;const k=F.model.getValue(te.FURNITURE_OWNER_ID),A=F.model.getValue(te.FURNITURE_TYPE_ID),O=H().getFloorItemData(A),P=O.customParams.split(" "),B=P.length?parseInt(P[0]):-1;if(B===-1)return;const G=[],z=q().getRoomObjects(E.roomId,Q.UNIT);for(const X of z){const Y=E.userDataManager.getUserDataByIndex(X.id);let Ee=!1;if(!(!Y||Y.type!==pt.PET)){if(Y.ownerId===k){Y.hasSaddle&&O.specialType===Z.PET_SADDLE&&(Ee=!0);const le=Y.figure.split(" ");if((le.length?parseInt(le[0]):-1)===B){if(O.specialType===Z.MONSTERPLANT_REVIVAL&&!Y.canRevive||O.specialType===Z.MONSTERPLANT_REBREED&&(Y.petLevel<7||Y.canRevive||Y.canBreed)||O.specialType===Z.MONSTERPLANT_FERTILIZE&&(Y.petLevel>=7||Y.canRevive))continue;G.push(new wb(Y.roomIndex,Q.UNIT,Y.name,x.objectId,X.id,-1,Ee))}}}}p(null),G.length&&u(G)}),Te(ft.REQUEST_MANIPULATION,x=>{Bs(E,x.objectId,x.category)&&_(!0)}),nl(x=>{R(x.id,x.category)}),wS(x=>{e(null),u([])}),xS(x=>{o||x.category!==Q.UNIT||y(x.id,x.category)}),RS(x=>{!r||x.category!==Q.UNIT||r.roomIndex!==x.id||n(null)}),lt([Re.FURNI_REMOVED,Re.USER_REMOVED],x=>{if(r&&r.category===x.category&&r.roomIndex===x.id&&n(null),x.category===Q.UNIT){let F=a.findIndex(k=>k.roomIndex===x.id);F>-1&&s(k=>k.filter(A=>A.roomIndex===x.id)),F=c.findIndex(k=>k.id===x.id),F>-1&&u(k=>k.filter(A=>A.id!==x.id))}else x.category===Q.FLOOR&&c.findIndex(k=>k.id===x.id)>-1&&u(k=>k.filter(A=>A.requestRoomObjectId!==x.id));o&&(o instanceof Cs?o.id===x.id&&e(null):(o instanceof et||o instanceof Ss||o instanceof bs)&&o.roomIndex===x.id&&e(null))}),i.exports.useEffect(()=>{o&&(n(null),s([]),u([]))},[o]),i.exports.useEffect(()=>{r&&s([])},[r]),i.exports.useEffect(()=>{E.isDecorating=f},[E,f]),{avatarInfo:o,setAvatarInfo:e,activeNameBubble:r,setActiveNameBubble:n,nameBubbles:a,productBubbles:c,confirmingProduct:m,isDecorating:f,setIsDecorating:_,removeNameBubble:b,removeProductBubble:N,updateConfirmingProduct:v,getObjectName:y}},RN=wN,xN=()=>{const[o,e]=i.exports.useState(""),[r,n]=i.exports.useState(!1),[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),[m,p]=i.exports.useState(!1),[g,h]=i.exports.useState(0),{showNitroAlert:f=null,showConfirm:_=null}=Xe(),{roomSession:I=null}=Ge(),C=(E,b,N="",v=0)=>{if(E==="")return null;const y=E.split(" ");if(y.length>0){const R=y[0];let x="";if(y.length>1&&(x=y[1]),R.charAt(0)===":"&&x==="x"){const F=q().selectedAvatarId;if(F>-1){const k=I.userDataManager.getUserDataByIndex(F);k&&(x=k.name,E=E.replace(" x"," "+k.name))}}switch(R.toLowerCase()){case":shake":return Sl.init(2500,5e3),Sl.turnVisualizationOn(),null;case":rotate":return bl.init(2500,5e3),bl.turnVisualizationOn(),null;case":d":case";d":fr()===cr.VIP&&I.sendExpressionMessage(Qr.LAUGH.ordinal);break;case"o/":case"_o/":return I.sendExpressionMessage(Qr.WAVE.ordinal),null;case":kiss":if(fr()===cr.VIP)return I.sendExpressionMessage(Qr.BLOW.ordinal),null;break;case":jump":if(fr()===cr.VIP)return I.sendExpressionMessage(Qr.JUMP.ordinal),null;break;case":idle":return I.sendExpressionMessage(Qr.IDLE.ordinal),null;case"_b":return I.sendExpressionMessage(Qr.RESPECT.ordinal),null;case":sign":return I.sendSignMessage(parseInt(x)),null;case":iddqd":case":flip":return q().events.dispatchEvent(new gi(I.roomId,-1,!0)),null;case":zoom":return q().events.dispatchEvent(new gi(I.roomId,parseFloat(x),!1)),null;case":screenshot":const F=q().createTextureFromRoom(I.roomId,1),k=new Image;return k.src=en.generateImageUrl(F),window.open("").document.write(k.outerHTML),null;case":pickall":return(I.isRoomOwner||H().isModerator)&&_(d("room.confirm.pick_all"),()=>{H().sendSpecialCommandMessage(":pickall")},null,null,null,d("generic.alert.title")),null;case":ejectall":return(I.isRoomOwner||H().isModerator||I.controllerLevel>=tt.GUEST)&&_(d("room.confirm.eject_all"),()=>{H().sendSpecialCommandMessage(":ejectall")},null,null,null,d("generic.alert.title")),null;case":furni":return ee("furni-chooser/"),null;case":chooser":return ee("user-chooser/"),null;case":floor":case":bcfloor":return I.controllerLevel>=tt.ROOM_OWNER&&ee("floor-editor/show"),null;case":togglefps":return hn().maxFPS>0?hn().maxFPS=0:hn().maxFPS=K("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return f(),null;case":settings":return(I.isRoomOwner||H().isModerator)&&D(new Pu(I.roomId)),null}}switch(b){case Br.CHAT_DEFAULT:I.sendChatMessage(E,v);break;case Br.CHAT_SHOUT:I.sendShoutMessage(E,v);break;case Br.CHAT_WHISPER:I.sendWhisperMessage(N,E,v);break}};return Ye(vr.FLOOD_EVENT,E=>{p(!0),h(parseFloat(E.message))}),nl(E=>{if(E.category!==Q.UNIT)return;const b=I.userDataManager.getUserDataByIndex(E.id);b&&e(b.name)}),Te(ft.DESELECTED,E=>e("")),i.exports.useEffect(()=>{if(!m)return;let E=0;const b=setInterval(()=>{h(N=>(E=(N||0)-1,E)),E<0&&(clearInterval(b),p(!1))},1e3);return()=>clearInterval(b)},[m]),i.exports.useEffect(()=>{if(!c)return;let E=null;return c&&(E=setTimeout(()=>{u(!1),n(!1)},1e4)),()=>clearTimeout(E)},[c]),i.exports.useEffect(()=>{r?a||(s(!0),I.sendChatTypingMessage(r)):a&&(s(!1),I.sendChatTypingMessage(r))},[I,r,a]),{selectedUsername:o,floodBlocked:m,floodBlockedSeconds:g,setIsTyping:n,setIsIdle:u,sendChat:C}},yN=xN,ac=new Map,ic=new Map,lc=new Map,ON=()=>{const[o,e]=i.exports.useState([]),[r,n]=i.exports.useState({mode:It.CHAT_MODE_FREE_FLOW,weight:It.CHAT_BUBBLE_WIDTH_NORMAL,speed:It.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:It.FLOOD_FILTER_NORMAL}),{roomSession:a=null}=Ge(),{addChatEntry:s}=fa(),c=i.exports.useRef(!1),u=i.exports.useMemo(()=>{if(!r)return 6e3;switch(r.speed){case It.CHAT_SCROLL_SPEED_FAST:return 3e3;case It.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case It.CHAT_SCROLL_SPEED_SLOW:return 12e3}},[r]),m=h=>{const f=Nt().createAvatarImage(h,Li.LARGE,null,{resetFigure:C=>{c.current||m(C)},dispose:()=>{},disposed:!1});if(!f)return;const _=f.getCroppedImage(Ho.HEAD),I=f.getPartColor(He.CHEST);return ac.set(h,I&&I.rgb||16777215),f.dispose(),ic.set(h,_.src),_.src},p=h=>{let f=ic.get(h);return f||(f=m(h)),f},g=(h,f,_,I=64,C=null)=>{let E=lc.get(h+C);if(E)return E;const b=new fs(h),N=b.typeId,v=q().getRoomObjectPetImage(N,b.paletteId,b.color,new Rt(f*45),I,null,!1,0,b.customParts,C);return v&&(E=en.generateImageUrl(v.data),lc.set(h+C,E)),E};return Ye(vr.CHAT_EVENT,h=>{const f=q().getRoomObject(a.roomId,h.objectId,Q.UNIT),_=f?td(a.roomId,f==null?void 0:f.id,Q.UNIT):new vn,I=f?a.userDataManager.getUserDataByIndex(h.objectId):new Df(-1);let C="",E=0,b=null,N=h.chatType,v=h.style,y=0,R=h.message;if(I){y=I.type;const A=I.figure;switch(y){case pt.PET:b=g(A,2,!0,64,f.model.getValue(te.FIGURE_POSTURE)),new fs(A).typeId;break;case pt.USER:b=p(A);break;case pt.RENTABLE_BOT:case pt.BOT:v=Uf.BOT;break}E=ac.get(A),C=I.name}switch(N){case vr.CHAT_TYPE_RESPECT:R=d("widgets.chatbubble.respect",["username"],[C]),K("respect.options").enabled&&rn(K("respect.options").sound);break;case vr.CHAT_TYPE_PETREVIVE:case vr.CHAT_TYPE_PET_REBREED_FERTILIZE:case vr.CHAT_TYPE_PET_SPEED_FERTILIZE:{let A="widget.chatbubble.petrevived";N===vr.CHAT_TYPE_PET_REBREED_FERTILIZE?A="widget.chatbubble.petrefertilized;":N===vr.CHAT_TYPE_PET_SPEED_FERTILIZE&&(A="widget.chatbubble.petspeedfertilized");let O=null;if(q().getRoomObject(a.roomId,h.extraParam,Q.UNIT)){const B=a.userDataManager.getUserDataByIndex(f.id);B&&(O=B.name)}R=d(A,["petName","userName"],[C,O]);break}case vr.CHAT_TYPE_PETRESPECT:R=d("widget.chatbubble.petrespect",["petname"],[C]);break;case vr.CHAT_TYPE_PETTREAT:R=d("widget.chatbubble.pettreat",["petname"],[C]);break;case vr.CHAT_TYPE_HAND_ITEM_RECEIVED:R=d("widget.chatbubble.handitem",["username","handitem"],[C,d("handitem"+h.extraParam)]);break;case vr.CHAT_TYPE_MUTE_REMAINING:{const A=(h.extraParam>0?Math.floor(h.extraParam/3600):0).toString(),O=(h.extraParam>0?Math.floor(h.extraParam%3600/60):0).toString(),P=(h.extraParam%60).toString();R=d("widget.chatbubble.mutetime",["hours","minutes","seconds"],[A,O,P]);break}}const x=QC(R),F=E&&("#"+E.toString(16).padStart(6,"0")||null),k=new bd(I.roomIndex,Q.UNIT,a.roomId,R,x,C,new vn(_.x,_.y),N,v,b,F);e(A=>[...A,k]),s({id:-1,webId:I.webID,entityId:I.roomIndex,name:C,imageUrl:b,style:v,chatType:N,entityType:I.type,message:x,timestamp:cd(),type:Ar.TYPE_CHAT,roomId:a.roomId,color:F})}),Te(Mf.ROOM_DRAG,h=>{if(!o.length||h.roomId!==a.roomId)return;const f=h.offsetX;o.forEach(_=>_.elementRef&&(_.left+=f))}),U(Ts,h=>{const f=h.getParser();f.roomEnter&&n(f.chat)}),U(Lf,h=>{const f=h.getParser();n(f.chat)}),i.exports.useEffect(()=>(c.current=!1,()=>{c.current=!0}),[]),{chatMessages:o,setChatMessages:e,chatSettings:r,getScrollSpeed:u}},AN=ON,kN=()=>{const[o,e]=i.exports.useState([]),r=s=>{o.indexOf(s)>=0||e([...o,s])},n=s=>{const c=o.indexOf(s);if(c===-1)return;const u=[...o];u.splice(c,1),e(u)},a=(s,c)=>{ye().sendDoorbellApprovalMessage(s,c),n(s)};return Ye(Oa.DOORBELL,s=>r(s.userName)),Ye(Oa.RSDE_REJECTED,s=>n(s.userName)),Ye(Oa.RSDE_ACCEPTED,s=>n(s.userName)),{users:o,addUser:r,removeUser:n,answer:a}},PN=kN,DN=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(!1),a=()=>n(!1);return U(Ff,s=>{const c=s.getParser();n(!0),e(c.words)}),{wordsFilter:o,isVisible:r,setWordsFilter:e,onClose:a}},MN=DN,LN=()=>{const[o,e]=i.exports.useState([]),{requests:r=[],dismissedRequestIds:n=[],setDismissedRequestIds:a=null}=mr(),s=i.exports.useMemo(()=>o.filter(u=>n.indexOf(u.request.requesterUserId)===-1),[o,n]),c=u=>{a(m=>{if(m.indexOf(u)>=0)return m;const p=[...m];return p.push(u),p})};return qd(!0,u=>{if(u.category!==Q.UNIT)return;const m=ye().userDataManager.getUserDataByIndex(u.id);if(!m||m.type!==Nl.getTypeNumber(Nl.USER))return;const p=r.find(h=>h.requesterUserId===m.webID);if(!p||o.find(h=>h.request.requesterUserId===m.webID))return;const g=[...o];g.push({roomIndex:m.roomIndex,request:p}),e(g)}),Yd(!0,u=>{if(u.category!==Q.UNIT)return;const m=o.findIndex(g=>g.roomIndex===u.id);if(m===-1)return;const p=[...o];p.splice(m,1),e(p)}),i.exports.useEffect(()=>{const u=[];for(const m of r){const p=ye().userDataManager.getUserData(m.requesterUserId);p&&u.push({roomIndex:p.roomIndex,request:m})}e(u)},[r]),{displayedRequests:s,hideFriendRequest:c}},UN=LN,FN=()=>{const[o,e]=i.exports.useState(null),{roomSession:r=null}=Ge(),n=()=>e(null),a=c=>c&&q().selectRoomObject(ye().roomId,c.id,c.category),s=()=>{const c=H(),u=q().getRoomObjects(r.roomId,Q.WALL),m=q().getRoomObjects(r.roomId,Q.FLOOR),p=u.map(h=>{if(h.id<0)return null;let f=h.type;if(f.startsWith("poster"))f=d(`poster_${f.replace("poster","")}_name`);else{const _=h.model.getValue(te.FURNITURE_TYPE_ID),I=c.getWallItemData(_);I&&I.name.length&&(f=I.name)}return new ds(h.id,Q.WALL,f)}),g=m.map(h=>{if(h.id<0)return null;let f=h.type;const _=h.model.getValue(te.FURNITURE_TYPE_ID),I=c.getFloorItemData(_);return I&&I.name.length&&(f=I.name),new ds(h.id,Q.FLOOR,f)});e([...p,...g].sort((h,f)=>h.name<f.name?-1:1))};return vS(!!o,c=>{if(c.id<0)return;const u=q().getRoomObject(ye().roomId,c.id,c.category);if(!u)return;let m=null;switch(c.category){case Q.WALL:{let p=u.type;if(p.startsWith("poster"))p=d(`poster_${p.replace("poster","")}_name`);else{const g=u.model.getValue(te.FURNITURE_TYPE_ID),h=H().getWallItemData(g);h&&h.name.length&&(p=h.name)}m=new ds(u.id,Q.WALL,p);break}case Q.FLOOR:{let p=u.type;const g=u.model.getValue(te.FURNITURE_TYPE_ID),h=H().getFloorItemData(g);h&&h.name.length&&(p=h.name),m=new ds(u.id,Q.FLOOR,p)}}e(p=>[...p,m].sort((g,h)=>g.name<h.name?-1:1))}),br(!!o,c=>{c.id<0||e(u=>{const m=[...u];for(let p=0;p<m.length;p++){const g=m[p];if(!(g.id!==c.id||g.category!==c.category)){m.splice(p,1);break}}return m})}),{items:o,onClose:n,selectItem:a,populateChooser:s}},GN=FN,BN=()=>{const[o,e]=i.exports.useState(!1),[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(""),[m,p]=i.exports.useState(""),g=()=>{p(""),u(""),s(""),n(-1),e(!1)},h=()=>{D(new Gf(r,c))},f=I=>{u(I),m.length>0&&p("")},_=I=>{if(!(!I||I===0))switch(I){case 1:return d("catalog.alert.petname.long");case 2:return d("catalog.alert.petname.short");case 3:return d("catalog.alert.petname.chars");case 4:default:return d("catalog.alert.petname.bobba")}};return Ye(Tl.RSOPPE_OPEN_PET_PACKAGE_REQUESTED,I=>{if(!I)return;const C=q().getRoomObject(I.session.roomId,I.objectId,Q.FLOOR);n(I.objectId),s(C.type),e(!0)}),Ye(Tl.RSOPPE_OPEN_PET_PACKAGE_RESULT,I=>{I&&(I.nameValidationStatus===0&&g(),I.nameValidationStatus!==0&&p(_(I.nameValidationStatus)))}),{isVisible:o,errorResult:m,petName:c,objectType:a,onChangePetName:f,onConfirm:h,onClose:g}},VN=BN,HN=()=>{const{roomSession:o=null}=Ge(),e=a=>o.sendPollStartMessage(a),r=a=>o.sendPollRejectMessage(a),n=(a,s,c)=>o.sendPollAnswerMessage(a,s,c);return Ye(Aa.OFFER,a=>{const s=new mn(mn.OFFER,a.id);s.summary=a.summary,s.headline=a.headline,St(s)}),Ye(Aa.ERROR,a=>{const s=new mn(mn.ERROR,a.id);s.summary=a.summary,s.headline=a.headline,St(s)}),Ye(Aa.CONTENT,a=>{const s=new mn(mn.CONTENT,a.id);s.startMessage=a.startMessage,s.endMessage=a.endMessage,s.numQuestions=a.numQuestions,s.questionArray=a.questionArray,s.npsPoll=a.npsPoll,St(s)}),{startPoll:e,rejectPoll:r,answerPoll:n}},WN=HN,jN=()=>{const[o,e]=i.exports.useState(null);Ge();const r=()=>e(null),n=s=>s&&q().selectRoomObject(ye().roomId,s.id,s.category),a=()=>{const s=ye(),c=q().getRoomObjects(s.roomId,Q.UNIT);e(c.map(u=>{if(u.id<0)return null;const m=s.userDataManager.getUserDataByIndex(u.id);return m?new ds(m.roomIndex,Q.UNIT,m.name):null}).sort((u,m)=>u.name<m.name?-1:1))};return qd(!!o,s=>{if(s.id<0)return;const c=ye().userDataManager.getUserDataByIndex(s.id);c&&e(u=>{const m=[...u];return m.push(new ds(c.roomIndex,Q.UNIT,c.name)),m.sort((p,g)=>p.name<g.name?-1:1),m})}),Yd(!!o,s=>{s.id<0||e(c=>{const u=[...c];for(let m=0;m<u.length;m++){const p=u[m];if(!(p.id!==s.id||p.category!==s.category)){u.splice(m,1);break}}return u})}),{items:o,onClose:r,selectItem:n,populateChooser:a}},qN=jN,cc=4e3,YN=3,zN=()=>{const[o,e]=i.exports.useState(-1),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState(new Map),[g,h]=i.exports.useState(new Map),{answerPoll:f=null}=WN(),{roomSession:_=null}=Ge(),I=()=>{e(-1),n(null)},C=E=>{a||!r||(f(o,r.id,[E]),s(!0))};return Ye(ka.ANSWERED,E=>{const b=_.userDataManager.getUserData(E.userId);b&&(p(E.answerCounts),h(N=>{if(!N.has(b.roomIndex)){const v=new Map(g);return v.set(b.roomIndex,{value:E.value,secondsLeft:YN}),v}return N}),q().updateRoomObjectUserGesture(_.roomId,b.roomIndex,ms.getGestureId(E.value==="0"?ms.GESTURE_SAD:ms.GESTURE_SMILE)))}),Ye(ka.FINISHED,E=>{r&&r.id===E.questionId&&(p(E.answerCounts),s(!0),u(b=>(b&&clearTimeout(b),setTimeout(()=>I(),cc)))),h(new Map)}),Ye(ka.QUESTION,E=>{e(E.id),n(E.question),s(!1),p(new Map),h(new Map),u(b=>{if(b&&clearTimeout(b),E.duration>0){const N=E.duration<1e3?cc:E.duration;return setTimeout(()=>I(),N)}return null})}),i.exports.useEffect(()=>{const E=()=>{h(N=>{const v=[];if(N.forEach((R,x)=>{R.secondsLeft--,R.secondsLeft<=0&&v.push(x)}),v.length===0)return N;const y=new Map(N);return v.forEach(R=>y.delete(R)),y})},b=setInterval(()=>E(),1e3);return()=>clearInterval(b)},[]),i.exports.useEffect(()=>()=>{u(E=>(E&&clearTimeout(E),null))},[]),{question:r,answerSent:a,answerCounts:m,userAnswers:g,vote:C}},$N=zN,KN=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(0),[m,p]=i.exports.useState(0),[g,h]=ha("nitro.screensize",{width:window.innerWidth,height:window.innerHeight}),f=C=>{s(C),D(new Vf(C))},_=C=>{H().giveRespect(C),u(H().respectsLeft)},I=C=>{H().givePetRespect(C),p(H().respectsPetLeft)};return U(Ru,C=>{const E=C.getParser();e(E.userInfo),n(E.userInfo.figure),u(E.userInfo.respectsRemaining),p(E.userInfo.respectsPetRemaining)}),U(Bf,C=>{const E=C.getParser();n(E.figure)}),U(Du,C=>{const E=C.getParser();s(E.chatType)}),i.exports.useEffect(()=>{const C=Yo("nitro.screensize");if(C&&(C.width!==window.innerWidth||C.height!==window.innerHeight)){let b=window.localStorage.length;for(;b>0;){const N=window.localStorage.key(b);N&&N.startsWith("nitro.window")&&window.localStorage.removeItem(N),b--}}const E=b=>h({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[h]),{userInfo:o,userFigure:r,chatStyleId:a,userRespectRemaining:c,petRespectRemaining:m,respectUser:_,respectPet:I,updateChatStyleId:f}},_n=()=>ct(KN),XN=o=>i.exports.useEffect(o,[]),Kd=o=>XN(()=>o()),Xd=o=>{const{achievement:e=null,scale:r=1,...n}=o;return e?t(je,{badgeCode:lr.getAchievementBadgeCode(e),isGrayscale:!lr.getAchievementHasStarted(e),scale:r,...n}):null},QN=o=>{const{achievement:e=null}=o,{selectedAchievement:r=null,setSelectedAchievementId:n=null}=pa();return e?t(be,{itemActive:r===e,itemUnseen:e.unseen>0,onClick:a=>n(e.achievementId),children:t(Xd,{achievement:e})}):null},JN=o=>{const{achievements:e=null}=o;return t(Le,{columnCount:6,columnMinWidth:50,columnMinHeight:50,children:e&&e.length>0&&e.map((r,n)=>t(QN,{achievement:r},n))})},ZN=o=>{const{achievement:e=null}=o;return e?l(w,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",children:[l(T,{center:!0,gap:1,children:[t(Xd,{className:"nitro-achievements-badge-image",achievement:e,scale:2}),t(S,{fontWeight:"bold",children:d("achievements.details.level",["level","limit"],[lr.getAchievementLevel(e).toString(),e.levelCount.toString()])})]}),l(T,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[l(T,{gap:1,children:[t(S,{fontWeight:"bold",truncate:!0,children:Qs(lr.getAchievementBadgeCode(e))}),t(S,{textBreak:!0,children:ji(lr.getAchievementBadgeCode(e))})]}),(e.levelRewardPoints>0||e.scoreLimit>0)&&l(T,{gap:1,children:[e.levelRewardPoints>0&&l(w,{alignItems:"center",gap:1,children:[t(S,{truncate:!0,className:"small",children:d("achievements.details.reward")}),l(w,{center:!0,className:"fw-bold small",gap:1,children:[e.levelRewardPoints,t(it,{type:e.levelRewardPointType})]})]}),e.scoreLimit>0&&t(el,{text:d("achievements.details.progress",["progress","limit"],[(e.currentPoints+e.scoreAtStartOfLevel).toString(),(e.scoreLimit+e.scoreAtStartOfLevel).toString()]),progress:e.currentPoints+e.scoreAtStartOfLevel,maxProgress:e.scoreLimit+e.scoreAtStartOfLevel})]})]})]}):null},eT=o=>{const{category:e=null}=o,{selectedAchievement:r=null,setSelectedAchievementId:n=null}=pa();return i.exports.useEffect(()=>{var a,s;e&&(r||n((s=(a=e==null?void 0:e.achievements)==null?void 0:a[0])==null?void 0:s.achievementId))},[e,r,n]),e?l(T,{fullHeight:!0,justifyContent:"between",children:[t(JN,{achievements:e.achievements}),!!r&&t(ZN,{achievement:r})]}):null},tT=o=>{const{category:e=null,selectedCategoryCode:r=null,setSelectedCategoryCode:n=null}=o;if(!e)return null;const a=lr.getAchievementCategoryProgress(e),s=lr.getAchievementCategoryMaxProgress(e),c=lr.getAchievementCategoryImageUrl(e,a),u=lr.getAchievementCategoryTotalUnseen(e);return l(be,{itemActive:r===e.code,itemCount:u,itemCountMinimum:0,gap:1,onClick:m=>n(e.code),children:[t(S,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:d(`quests.${e.code}.name`)}),t(Rd,{position:"relative",imageUrl:c,children:l(S,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[a," / ",s]})})]})},rT=o=>{const{categories:e=null,selectedCategoryCode:r=null,setSelectedCategoryCode:n=null}=o;return t(Le,{columnCount:3,columnMinWidth:90,columnMinHeight:100,children:e&&e.length>0&&e.map((a,s)=>t(tT,{category:a,selectedCategoryCode:r,setSelectedCategoryCode:n},s))})},nT=o=>{const[e,r]=i.exports.useState(!1),{achievementCategories:n=[],selectedCategoryCode:a=null,setSelectedCategoryCode:s=null,achievementScore:c=0,getProgress:u=0,getMaxProgress:m=0,selectedCategory:p=null}=pa();return i.exports.useEffect(()=>{const g={linkReceived:h=>{const f=h.split("/");if(!(f.length<2))switch(f[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(_=>!_);return}},eventUrlPrefix:"achievements/"};return _t(g),()=>Ct(g)},[]),e?l(oe,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[t(se,{headerText:d("inventory.achievements"),onCloseClick:g=>r(!1)}),p&&l(wd,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[t(L,{onClick:g=>s(null),className:"nitro-achievements-back-arrow"}),l(T,{grow:!0,gap:0,children:[t(S,{fontSize:4,fontWeight:"bold",className:"text-small",children:d(`quests.${p.code}.name`)}),t(S,{children:d("achievements.details.categoryprogress",["progress","limit"],[p.getProgress().toString(),p.getMaxProgress().toString()])})]}),t(nn,{imageUrl:lr.getAchievementCategoryImageUrl(p,null,!0)})]}),l(ne,{gap:1,children:[!p&&l(V,{children:[t(rT,{categories:n,selectedCategoryCode:a,setSelectedCategoryCode:s}),l(T,{grow:!0,justifyContent:"end",gap:1,children:[t(S,{small:!0,center:!0,children:d("achievements.categories.score",["score"],[c.toString()])}),t(el,{text:d("achievements.categories.totalprogress",["progress","limit"],[u.toString(),m.toString()]),progress:u,maxProgress:m})]})]}),p&&t(eT,{category:p})]})]}):null},xn=o=>{const{icon:e=null,selected:r=!1,classNames:n=[],children:a=null,...s}=o,c=i.exports.useMemo(()=>{const u=["nitro-avatar-editor-spritesheet"];return e&&e.length&&u.push(e+"-icon"),r&&u.push("selected"),n.length&&u.push(...n),u},[e,r,n]);return t(L,{classNames:c,...s})},sT=o=>{const{figureData:e=null}=o,[r,n]=i.exports.useState(-1),a=s=>{s<co.MIN_DIRECTION&&(s=co.MAX_DIRECTION+(s+1)),s>co.MAX_DIRECTION&&(s=s-(co.MAX_DIRECTION+1)),e.direction=s};return i.exports.useEffect(()=>{if(e)return e.notify=()=>n(s=>s+1),()=>{e.notify=null}},[e]),l(T,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[t(st,{figure:e.getFigureString(),direction:e.direction,scale:2}),t(xn,{className:"avatar-spotlight",icon:"spotlight"}),t(L,{className:"avatar-shadow"}),l(L,{className:"arrow-container",children:[t(xn,{pointer:!0,icon:"arrow-left",onClick:s=>a(e.direction+1)}),t(xn,{pointer:!0,icon:"arrow-right",onClick:s=>a(e.direction-1)})]})]})},oT=o=>{const{partItem:e=null,children:r=null,...n}=o,[a,s]=i.exports.useState(-1),c=K("hc.disabled",!1);return i.exports.useEffect(()=>{const u=()=>s(m=>m+1);return e.notify=u,()=>e.notify=null},[e]),l(be,{itemImage:e.isClear?void 0:e.imageUrl,itemActive:e.isSelected,...n,children:[!c&&e.isHC&&t(it,{className:"position-absolute end-1 bottom-1",type:"hc"}),e.isClear&&t(xn,{icon:"clear"}),e.isSellable&&t(xn,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),r]})},aT=o=>{const{model:e=null,category:r=null,setMaxPaletteCount:n=null}=o,a=i.exports.useRef(null),s=i.exports.useCallback(c=>{const u=r.parts.indexOf(c);if(u===-1)return;e.selectPart(r.name,u);const m=r.getCurrentPart();n(m.maxColorIndex||1)},[e,r,n]);return i.exports.useEffect(()=>{!e||!r||!a||!a.current||(a.current.scrollTop=0)},[e,r]),t(Le,{innerRef:a,columnCount:3,columnMinHeight:50,children:r.parts.length>0&&r.parts.map((c,u)=>t(oT,{partItem:c,onClick:m=>s(c)},u))})},iT=o=>{const{colorItem:e=null,children:r=null,...n}=o,[a,s]=i.exports.useState(-1),c=K("hc.disabled",!1);return i.exports.useEffect(()=>{const u=()=>s(m=>m+1);return e.notify=u,()=>e.notify=null},[e]),l(be,{itemHighlight:!0,itemColor:e.color,itemActive:e.isSelected,className:"clear-bg",...n,children:[!c&&e.isHC&&t(it,{className:"position-absolute end-1 bottom-1",type:"hc"}),r]})},uc=o=>{const{model:e=null,category:r=null,paletteSet:n=[],paletteIndex:a=-1}=o,s=i.exports.useRef(null),c=i.exports.useCallback(u=>{const m=n.indexOf(u);m!==-1&&e.selectColor(r.name,m,a)},[e,r,n,a]);return i.exports.useEffect(()=>{!e||!r||!s||!s.current||(s.current.scrollTop=0)},[e,r]),t(Le,{innerRef:s,gap:1,columnCount:5,columnMinWidth:30,children:n.length>0&&n.map((u,m)=>t(iT,{colorItem:u,onClick:p=>c(u)},m))})},lT=o=>{const{model:e=null,gender:r=null,setGender:n=null}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(1),m=i.exports.useCallback(p=>{const g=e.categories.get(p);if(g){g.init(),s(g);for(const h of g.parts)if(!(!h||!h.isSelected)){u(h.maxColorIndex||1);break}}},[e]);return i.exports.useEffect(()=>{e.init();for(const p of e.categories.keys()){m(p);break}},[e,m]),!e||!a?null:l(re,{children:[l(T,{size:2,children:[e.canSetGender&&l(V,{children:[t(w,{center:!0,pointer:!0,className:"category-item",onClick:p=>n(ce.MALE),children:t(xn,{icon:"male",selected:r===ce.MALE})}),t(w,{center:!0,pointer:!0,className:"category-item",onClick:p=>n(ce.FEMALE),children:t(xn,{icon:"female",selected:r===ce.FEMALE})})]}),!e.canSetGender&&e.categories&&e.categories.size>0&&Array.from(e.categories.keys()).map(p=>{const g=e.categories.get(p);return t(w,{center:!0,pointer:!0,className:"category-item",onClick:h=>m(p),children:t(xn,{icon:g.name,selected:a===g})},p)})]}),t(T,{size:5,overflow:"hidden",children:t(aT,{model:e,category:a,setMaxPaletteCount:u})}),l(T,{size:5,overflow:"hidden",children:[c>=1&&t(uc,{model:e,category:a,paletteSet:a.getPalette(0),paletteIndex:0}),c===2&&t(uc,{model:e,category:a,paletteSet:a.getPalette(1),paletteIndex:1})]})]})},cT=o=>{const{figureData:e=null,savedFigures:r=[],setSavedFigures:n=null,loadAvatarInEditor:a=null}=o,s=K("hc.disabled",!1),c=i.exports.useCallback(p=>{if(p>=r.length||p<0)return;const[g,h]=r[p];a(g.getFigureString(),h)},[r,a]),u=i.exports.useCallback(p=>{if(!e||p>=r.length||p<0)return;const g=[...r],h=e.getFigureString(),f=e.gender;g[p]=[Nt().createFigureContainer(h),f],n(g),D(new Hf(p+1,h,f))},[e,r,n]),m=i.exports.useMemo(()=>{if(!r||!r.length)return[];const p=[];return r.forEach(([g,h],f)=>{let _=0;g&&(_=Nt().getFigureClubLevel(g,h)),p.push(l(be,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[g&&t(st,{figure:g.getFigureString(),gender:h,direction:2}),t(L,{className:"avatar-shadow"}),!s&&_>0&&t(it,{className:"position-absolute top-1 start-1",type:"hc"}),l(w,{gap:1,className:"button-container",children:[t(M,{variant:"link",fullWidth:!0,onClick:I=>u(f),children:d("avatareditor.wardrobe.save")}),g&&t(M,{variant:"link",fullWidth:!0,onClick:I=>c(f),disabled:_>fr(),children:d("generic_usable.button.use")})]})]},f))}),p},[r,s,u,c]);return t(Le,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:m})},uT="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",dT="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",mT=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState([]),[_,I]=i.exports.useState([]),[C,E]=i.exports.useState([]),[b,N]=i.exports.useState(!1),[v,y]=i.exports.useState(null),[R,x]=i.exports.useState(null),[F,k]=i.exports.useState(!0),[A,O]=i.exports.useState(!1),P=i.exports.useMemo(()=>K("avatar.wardrobe.max.slots",10),[]);U(Wf,le=>{const Pe=le.getParser();f(Pe.figureSetIds),I(Pe.boundsFurnitureNames)}),U(jf,le=>{const Pe=le.getParser(),Qe=[];let ht=0;for(;ht<P;)Qe.push([null,null]),ht++;for(let[Ze,[Gt,We]]of Pe.looks.entries()){const Yt=Nt().createFigureContainer(Gt);Qe[Ze-1]=[Yt,We]}E(Qe)});const B=i.exports.useCallback(le=>{u&&g(u.get(le))},[u]),G=i.exports.useCallback(()=>{const le=new Map;le.set(gn.GENERIC,new FC),le.set(gn.HEAD,new nb),le.set(gn.TORSO,new ob),le.set(gn.LEGS,new sb),m(le)},[]),z=i.exports.useCallback(()=>{const le=new Map,Pe=new ce,Qe=new ce;Pe.loadAvatarData(uT,ce.MALE),Qe.loadAvatarData(dT,ce.FEMALE),le.set(ce.MALE,Pe),le.set(ce.FEMALE,Qe),a(le),c(le.get(ce.MALE))},[]),X=i.exports.useCallback((le,Pe,Qe=!0)=>{Pe=gt.getGender(Pe);let ht=s;Pe!==ht.gender&&(ht=n.get(Pe)),le!==ht.getFigureString()&&ht.loadAvatarData(le,Pe),ht!==s&&c(ht),Qe&&(y(s.getFigureString()),x(s.gender))},[n,s]),Y=i.exports.useCallback(le=>{switch(le){case Rr.ACTION_CLEAR:X(s.getFigureStringWithFace(0,!1),s.gender,!1),G();return;case Rr.ACTION_RESET:X(v,R),G();return;case Rr.ACTION_RANDOMIZE:const Pe=rb(s,s.gender,fr(),h,[ce.FACE]);X(Pe,s.gender,!1),G();return;case Rr.ACTION_SAVE:D(new Mu(s.gender,s.getFigureString())),r(!1);return}},[s,v,R,h,X,G]),Ee=i.exports.useCallback(le=>{le=gt.getGender(le),c(n.get(le))},[n]);return i.exports.useEffect(()=>{const le={linkReceived:Pe=>{const Qe=Pe.split("/");if(!(Qe.length<2))switch(Qe[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(ht=>!ht);return}},eventUrlPrefix:"avatar-editor/"};return _t(le),()=>Ct(le)},[]),i.exports.useEffect(()=>{E(new Array(P))},[P]),i.exports.useEffect(()=>{b&&(g(null),D(new qf))},[b]),i.exports.useEffect(()=>{p&&N(!1)},[p]),i.exports.useEffect(()=>{u&&B(gn.GENERIC)},[u,B]),i.exports.useEffect(()=>{if(s)return gt.CURRENT_FIGURE=s,G(),()=>gt.CURRENT_FIGURE=null},[s,G]),i.exports.useEffect(()=>(gt.FIGURE_SET_IDS=h,gt.BOUND_FURNITURE_NAMES=_,G(),()=>{gt.FIGURE_SET_IDS=null,gt.BOUND_FURNITURE_NAMES=null}),[h,_,G]),i.exports.useEffect(()=>{if(e&&!n){z(),O(!0);return}},[e,n,z]),i.exports.useEffect(()=>{!e||!A||!F||(X(H().figure,H().gender),k(!1))},[e,A,F,X]),i.exports.useEffect(()=>{if(!e)return()=>{k(!0)}},[e]),!e||!s?null:l(oe,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[t(se,{headerText:d("avatareditor.title"),onCloseClick:le=>r(!1)}),l(In,{children:[u&&u.size>0&&Array.from(u.keys()).map(le=>{const Pe=p&&p.name===le;return t(jr,{isActive:Pe,onClick:Qe=>B(le),children:d(`avatareditor.category.${le}`)},le)}),t(jr,{isActive:b,onClick:le=>N(!0),children:d("avatareditor.category.wardrobe")})]}),t(ne,{children:l(re,{children:[l(T,{size:9,overflow:"hidden",children:[p&&!b&&t(lT,{model:p,gender:s.gender,setGender:Ee}),b&&t(cT,{figureData:s,savedFigures:C,setSavedFigures:E,loadAvatarInEditor:X})]}),l(T,{size:3,overflow:"hidden",children:[t(sT,{figureData:s}),l(T,{grow:!0,gap:1,children:[l(Zr,{children:[t(M,{variant:"secondary",onClick:le=>Y(Rr.ACTION_RESET),children:t(vm,{className:"fa-icon"})}),t(M,{variant:"secondary",onClick:le=>Y(Rr.ACTION_CLEAR),children:t(ki,{className:"fa-icon"})}),t(M,{variant:"secondary",onClick:le=>Y(Rr.ACTION_RANDOMIZE),children:t(wm,{className:"fa-icon"})})]}),t(M,{className:"w-100",variant:"success",onClick:le=>Y(Rr.ACTION_SAVE),children:d("avatareditor.save")})]})]})]})})]})},gT=5,pT=o=>{const{onClose:e=null,onEdit:r=null,onDelete:n=null}=o,{cameraRoll:a=null,setCameraRoll:s=null,selectedPictureIndex:c=-1,setSelectedPictureIndex:u=null}=Ad(),{simpleAlert:m=null}=Xe(),p=i.exports.useRef(),g=c>-1?a[c]:null,h=()=>{if(!p||!p.current)return null;const _=p.current.getBoundingClientRect();return new fu(Math.floor(_.x),Math.floor(_.y),Math.floor(_.width),Math.floor(_.height))},f=()=>{if(c>-1){u(-1);return}const _=q().createTextureFromRoom(ye().roomId,1,h()),I=[...a];I.length>=gT&&(m(d("camera.full.body")),I.pop()),rn(ur.CAMERA_SHUTTER),I.push(new ab(_,en.generateImageUrl(_))),s(I)};return t(On,{uniqueKey:"nitro-camera-capture",children:l(T,{center:!0,className:"nitro-camera-capture",gap:0,children:[g&&t("img",{alt:"",className:"camera-area",src:g.imageUrl}),l("div",{className:"camera-canvas drag-handler",children:[t("div",{className:"position-absolute header-close",onClick:e,children:t(_r,{className:"fa-icon"})}),!g&&t("div",{ref:p,className:"camera-area camera-view-finder"}),g&&t("div",{className:"camera-area camera-frame",children:l("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[t("button",{className:"btn btn-success me-3",title:d("camera.editor.button.tooltip"),onClick:r,children:d("camera.editor.button.text")}),t("button",{className:"btn btn-danger",onClick:n,children:d("camera.delete.button.text")})]})}),t("div",{className:"d-flex justify-content-center",children:t("div",{className:"camera-button",title:d("camera.take.photo.button.tooltip"),onClick:f})})]}),a.length>0&&t(w,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:a.map((_,I)=>t("img",{alt:"",src:_.imageUrl,onClick:C=>u(I)},I))})]})})},hT=o=>{const{base64Url:e=null,onCloseClick:r=null,onCancelClick:n=null,price:a=null}=o,[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null),[p,g]=i.exports.useState(0),[h,f]=i.exports.useState(!1),[_,I]=i.exports.useState(!1),[C,E]=i.exports.useState(0),b=i.exports.useMemo(()=>K("camera.publish.disabled",!1),[]);U(Yf,v=>{g(y=>y+1),I(!1)}),U(zf,v=>{const y=v.getParser();m(y.extraDataId),E(y.secondsToWait),f(y.ok),I(!1)}),U($f,v=>{const y=v.getParser();c(K("camera.url")+"/"+y.url)});const N=(v,y=null)=>{switch(v){case"close":r();return;case"buy":if(_)return;I(!0),D(new Xf(""));return;case"publish":if(_)return;I(!0),D(new Kf);return;case"cancel":n();return}};return i.exports.useEffect(()=>{e&&q().saveBase64AsScreenshot(e)},[e]),a?l(oe,{className:"nitro-camera-checkout",theme:"primary-slim",children:[t(se,{headerText:d("camera.confirm_phase.title"),onCloseClick:v=>N("close")}),l(ne,{children:[l(w,{center:!0,children:[s&&s.length&&t(nn,{className:"picture-preview border",imageUrl:s}),(!s||!s.length)&&t(w,{center:!0,className:"picture-preview border",children:t(S,{bold:!0,children:d("camera.loading")})})]}),l(w,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(T,{size:b?10:6,gap:1,children:[t(S,{bold:!0,children:d("camera.purchase.header")}),(a.credits>0||a.duckets>0)&&l(w,{gap:1,children:[t(S,{children:d("catalog.purchase.confirmation.dialog.cost")}),a.credits>0&&l(w,{gap:1,children:[t(S,{bold:!0,children:a.credits}),t(it,{type:-1})]}),a.duckets>0&&l(w,{gap:1,children:[t(S,{bold:!0,children:a.duckets}),t(it,{type:5})]})]}),p>0&&l(S,{children:[t(S,{bold:!0,children:d("camera.purchase.count.info")})," ",p,t("u",{className:"ms-1 cursor-pointer",onClick:()=>ee("inventory/toggle"),children:d("camera.open.inventory")})]})]}),t(w,{alignItems:"center",children:t(M,{variant:"success",disabled:_,onClick:v=>N("buy"),children:d(p?"camera.buy.another.button.text":"buy")})})]}),!b&&l(w,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d(h?"camera.publish.successful":"camera.publish.explanation")}),t(S,{children:d(h?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),h&&t("a",{href:u,rel:"noreferrer",target:"_blank",children:d("camera.link.to.published")}),!h&&a.publishDucketPrice>0&&l(w,{gap:1,children:[t(S,{children:d("catalog.purchase.confirmation.dialog.cost")}),l(w,{gap:1,children:[t(S,{bold:!0,children:a.publishDucketPrice}),t(it,{type:5})]})]}),C>0&&t("div",{className:"mt-1 text-center fw-bold",children:d("camera.publish.wait",["minutes"],[Math.ceil(C/60).toString()])})]}),!h&&t(w,{className:"d-flex align-items-end",children:t(M,{variant:"success",disabled:_||C>0,onClick:v=>N("publish"),children:d("camera.publish.button.text")})})]}),t(S,{center:!0,children:d("camera.warning.disclaimer")}),t(w,{justifyContent:"end",children:t(M,{onClick:v=>N("cancel"),children:d("generic.cancel")})})]})]}):null},fT=o=>{const{effect:e=null,thumbnailUrl:r=null,isActive:n=!1,isLocked:a=!1,selectEffect:s=null,removeEffect:c=null}=o;return l(be,{title:d(a?`camera.effect.required.level ${e.minLevel}`:`camera.effect.name.${e.name}`),itemActive:n,onClick:u=>!n&&s(),children:[n&&t(M,{variant:"danger",className:"rounded-circle remove-effect",onClick:c,children:t(_r,{className:"fa-icon"})}),!a&&r&&r.length>0&&t("div",{className:"effect-thumbnail-image border",children:t("img",{alt:"",src:r})}),a&&l(S,{center:!0,bold:!0,children:[t("div",{children:t(au,{className:"fa-icon"})}),e.minLevel]})]})},IT=o=>{const{myLevel:e=0,selectedEffects:r=[],effects:n=[],thumbnails:a=[],processAction:s=null}=o;return t(re,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map((c,u)=>{const m=a.find(g=>g.effectName===c.name),p=r.findIndex(g=>g.effect.name===c.name)>-1;return t(fT,{effect:c,thumbnailUrl:m&&m.thumbnailUrl||null,isActive:p,isLocked:c.minLevel>e,selectEffect:()=>s("select_effect",c.name),removeEffect:()=>s("remove_effect",c.name)},u)})})},dc=[js.COLORMATRIX,js.COMPOSITE],ET=o=>{const{picture:e=null,availableEffects:r=null,myLevel:n=1,onClose:a=null,onCancel:s=null,onCheckout:c=null}=o,[u,m]=i.exports.useState(dc[0]),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState([]),[_,I]=i.exports.useState([]),[C,E]=i.exports.useState(!1),b=i.exports.useMemo(()=>r.filter(O=>O.colorMatrix),[r]),N=i.exports.useMemo(()=>r.filter(O=>O.texture),[r]),v=i.exports.useCallback(()=>u===js.COLORMATRIX?b:N,[u,b,N]),y=i.exports.useCallback(O=>!O||!O.length||!h||!h.length?-1:h.findIndex(P=>P.effect.name===O),[h]),R=i.exports.useMemo(()=>y(p),[p,y]),x=i.exports.useMemo(()=>p&&h[R]||null,[p,R,h]),F=i.exports.useCallback(O=>{const P=R;P!==-1&&f(B=>{const G=[...B],z=G[P];return G[R]=new Pa(z.effect,O),G})},[R,f]),k=i.exports.useMemo(()=>Ps().applyEffects(e.texture,h,C).src,[e,h,C]),A=i.exports.useCallback((O,P=null)=>{switch(O){case"close":a();return;case"cancel":s();return;case"checkout":c(k);return;case"change_tab":m(String(P));return;case"select_effect":{if(y(P)>=0)return;const G=r.find(z=>z.name===P);if(!G)return;f(z=>[...z,new Pa(G,1)]),g(G.name);return}case"remove_effect":{let B=y(P);if(B===-1)return;f(G=>{const z=[...G];return z.splice(B,1),z}),p===P&&g(null);return}case"clear_effects":g(null),f([]);return;case"download":{const B=new Image;B.src=k,window.open("").document.write(B.outerHTML);return}case"zoom":E(!C);return}},[C,r,p,k,y,s,c,a,E,f]);return i.exports.useEffect(()=>{const O=[];for(const P of r)O.push(new ib(P.name,Ps().applyEffects(e.texture,[new Pa(P,1)],!1).src));I(O)},[e,r]),l(oe,{className:"nitro-camera-editor",children:[t(se,{headerText:d("camera.editor.button.text"),onCloseClick:O=>A("close")}),t(In,{children:dc.map(O=>t(jr,{isActive:u===O,onClick:P=>A("change_tab",O),children:t("i",{className:"icon icon-camera-"+O})},O))}),t(ne,{children:l(re,{children:[t(T,{size:5,overflow:"hidden",children:t(IT,{myLevel:n,selectedEffects:h,effects:v(),thumbnails:_,processAction:A})}),l(T,{size:7,justifyContent:"between",overflow:"hidden",children:[l(T,{center:!0,children:[t(nn,{imageUrl:k,className:"picture-preview"}),p&&l(T,{center:!0,fullWidth:!0,gap:1,children:[t(S,{children:d("camera.effect.name."+p)}),t(Pt,{className:"nitro-slider",min:0,max:1,step:.01,value:x.alpha,onChange:O=>F(O),renderThumb:(O,P)=>t("div",{...O,children:P.valueNow})})]})]}),l(w,{justifyContent:"between",children:[l(Zr,{children:[t(M,{onClick:O=>A("clear_effects"),children:t(ki,{className:"fa-icon"})}),t(M,{onClick:O=>A("download"),children:t(Rm,{className:"fa-icon"})}),l(M,{onClick:O=>A("zoom"),children:[C&&t(xm,{className:"fa-icon"}),!C&&t(ym,{className:"fa-icon"})]})]}),l(w,{gap:1,children:[t(M,{onClick:O=>A("cancel"),children:d("generic.cancel")}),t(M,{onClick:O=>A("checkout"),children:d("camera.preview.button.text")})]})]})]})]})})]})},os=0,To=1,mc=2,gc=3,_T=o=>{const[e,r]=i.exports.useState(os),[n,a]=i.exports.useState(null),{availableEffects:s=[],selectedPictureIndex:c=-1,cameraRoll:u=[],setCameraRoll:m=null,myLevel:p=0,price:g={credits:0,duckets:0,publishDucketPrice:0}}=Ad(),h=_=>{switch(_){case"close":r(os);return;case"edit":r(mc);return;case"delete":m(I=>{const C=[...I];return C.splice(c,1),C});return;case"editor_cancel":r(To);return}},f=_=>{a(_),r(gc)};return Ye(qt.ENDED,_=>r(os)),i.exports.useEffect(()=>{const _={linkReceived:I=>{const C=I.split("/");if(!(C.length<2))switch(C[1]){case"show":r(To);return;case"hide":r(os);return;case"toggle":r(E=>E?os:To);return}},eventUrlPrefix:"camera/"};return _t(_),()=>Ct(_)},[]),e===os?null:l(V,{children:[e===To&&t(pT,{onClose:()=>h("close"),onEdit:()=>h("edit"),onDelete:()=>h("delete")}),e===mc&&t(ET,{picture:u[c],myLevel:p,onClose:()=>h("close"),onCancel:()=>h("editor_cancel"),onCheckout:f,availableEffects:s}),e===gc&&t(hT,{base64Url:n,onCloseClick:()=>h("close"),onCancelClick:()=>h("editor_cancel"),price:g})]})},CT=o=>{const{itemId:e=-1,state:r=null,product:n=null,active:a=!1,onClick:s=null}=o,c=u=>{let m=H().getFloorItemDataByName(u),p=null;return m?p=q().getFurnitureFloorIconUrl(m.id):(m=H().getWallItemDataByName(u),m&&(p=q().getFurnitureWallIconUrl(m.id))),p};return l(T,{fit:!0,center:!0,pointer:!0,className:`campaign-spritesheet campaign-day-generic-bg rounded calendar-item ${a?"active":""}`,onClick:()=>s(e),children:[r===Ft.STATE_UNLOCKED&&t(w,{center:!0,className:"campaign-spritesheet unlocked-bg",children:t(w,{center:!0,className:"campaign-spritesheet campaign-opened",children:n&&t(nn,{imageUrl:n.customImage?K("image.library.url")+n.customImage:c(n.productName)})})}),r!==Ft.STATE_UNLOCKED&&l(w,{center:!0,className:"campaign-spritesheet locked-bg",children:[r===Ft.STATE_LOCKED_AVAILABLE&&t(L,{className:"campaign-spritesheet available"}),(r===Ft.STATE_LOCKED_EXPIRED||r===Ft.STATE_LOCKED_FUTURE)&&t(L,{className:"campaign-spritesheet unavailable"})]})]})},Ha=5,bT=o=>{const{onClose:e=null,campaignName:r=null,currentDay:n=null,numDays:a=null,missedDays:s=null,openedDays:c=null,openPackage:u=null,receivedProducts:m=null}=o,[p,g]=i.exports.useState(n),[h,f]=i.exports.useState(Math.max(0,p-1)),_=v=>c.includes(v)?Ft.STATE_UNLOCKED:v>n?Ft.STATE_LOCKED_FUTURE:s.includes(v)?Ft.STATE_LOCKED_EXPIRED:Ft.STATE_LOCKED_AVAILABLE,I=v=>{switch(_(v)){case Ft.STATE_UNLOCKED:return d("campaign.calendar.info.unlocked");case Ft.STATE_LOCKED_FUTURE:return d("campaign.calendar.info.future");case Ft.STATE_LOCKED_EXPIRED:return d("campaign.calendar.info.expired");default:return d("campaign.calendar.info.available.desktop")}},C=()=>{const v=p+1;v!==a&&(g(v),h+Ha<v+1&&f(h+1))},E=()=>{const v=p-1;v<0||(g(v),h>v&&f(h-1))},b=v=>{if(p===v){_(v)===Ft.STATE_LOCKED_AVAILABLE&&u(v,!1);return}g(v)},N=()=>{const v=p;_(v)!==Ft.STATE_UNLOCKED&&u(v,!0)};return l(oe,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[t(se,{headerText:d(`campaign.calendar.${r}.title`),onCloseClick:e}),l(ne,{children:[l(re,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[t(T,{size:1}),t(T,{size:10,children:l(w,{justifyContent:"between",alignItems:"center",gap:1,children:[l(T,{gap:1,children:[t(S,{fontSize:3,children:d("campaign.calendar.heading.day",["number"],[(p+1).toString()])}),t(S,{children:I(p)})]}),t("div",{children:H().isModerator&&t(M,{variant:"danger",onClick:N,children:"Force open"})})]})}),t(T,{size:1})]}),l(w,{fullHeight:!0,gap:2,children:[t(w,{center:!0,children:t(L,{pointer:!0,className:"campaign-spritesheet prev",onClick:E})}),t(T,{center:!0,fullWidth:!0,children:t(re,{fit:!0,columnCount:Ha,gap:1,children:[...Array(Ha)].map((v,y)=>{const R=h+y;return t(T,{overflow:"hidden",children:t(CT,{itemId:R,state:_(R),active:p===R,product:m.has(R)?m.get(R):null,onClick:b})},y)})})}),t(w,{center:!0,children:t(L,{pointer:!0,className:"campaign-spritesheet next",onClick:C})})]})]})]})},ST=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(-1),[s,c]=i.exports.useState(new Map),[u,m]=i.exports.useState(!1),p=(g,h=!1)=>{e&&(a(g),D(h?new Qf(e.campaignName,g):new Jf(e.campaignName,g)))};return U(Zf,g=>{const h=g.getParser();h&&r(h.calendarData)}),U(eI,g=>{const h=g.getParser();if(!h)return;const f=n;h.doorOpened&&(r(_=>{const I=_.clone();return I.openedDays.push(n),I}),c(_=>{const I=new Map(_);return I.set(f,new lb(h.productName,h.customImage,h.furnitureClassName)),I})),a(-1)}),i.exports.useEffect(()=>{const g={linkReceived:h=>{const f=h.split("/");if(!(f.length<2))switch(f[1]){case"calendar":m(!0);break}},eventUrlPrefix:"openView/"};return _t(g),()=>Ct(g)},[]),t(V,{children:e&&u&&t(bT,{onClose:()=>m(!1),campaignName:e.campaignName,currentDay:e.currentDay,numDays:e.campaignDays,openedDays:e.openedDays,missedDays:e.missedDays,openPackage:p,receivedProducts:s})})},Qd=o=>{const{icon:e=0}=o,r=i.exports.useMemo(()=>K("catalog.asset.icon.url").replace("%name%",e.toString()),[e]);return t(nn,{imageUrl:r,style:{width:20,height:20}})},NT=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),[u,m]=i.exports.useState(""),[p,g]=i.exports.useState(""),[h,f]=i.exports.useState(!0),[_,I]=i.exports.useState(""),[C,E]=i.exports.useState([]),[b,N]=i.exports.useState(0),[v,y]=i.exports.useState(0),[R,x]=i.exports.useState(0),[F,k]=i.exports.useState(0),[A,O]=i.exports.useState(0),[P,B]=i.exports.useState(!1),{catalogOptions:G=null}=Ue(),{friends:z}=mr(),{giftConfiguration:X=null}=G,[Y,Ee]=i.exports.useState([]),[le,Pe]=i.exports.useState([]),[Qe,ht]=i.exports.useState(!0),Ze=i.exports.useCallback(()=>{r(!1),a(0),c(0),m(""),g(""),f(!0),I(""),N(0),y(0),ht(!1),Pe([]),C.length&&x(C[0].id)},[C]),Gt=i.exports.useMemo(()=>X?X.defaultStuffTypes.findIndex(fe=>fe===Y[b])>-1:!1,[Y,X,b]),We=i.exports.useMemo(()=>X?(Y[b]*1e3+X.ribbonTypes[v]).toString():"",[X,b,v,Y]),Yt=i.exports.useMemo(()=>{if(!X||Gt)return!1;const fe=Y[b];return!(fe===8||fe>=3&&fe<=6)},[X,b,Gt,Y]),Sr=i.exports.useMemo(()=>Gt?Y[b]:R,[Gt,Y,b,R]),Fe=z.filter(fe=>fe.id!==-1),Ie=fe=>{const De=fe.target.value;let Nr=[];De.length>0&&(Nr=Fe.sort().filter(kn=>kn.name.includes(De))),g(De),ht(!0),Pe(Nr)},ze=fe=>{g(fe),ht(!1)},yt=i.exports.useCallback(fe=>{switch(fe){case"prev_box":N(De=>De===0?F:De-1);return;case"next_box":N(De=>De===F?0:De+1);return;case"prev_ribbon":y(De=>De===0?A:De-1);return;case"next_ribbon":y(De=>De===A?0:De+1);return;case"buy":if(!p||p.length===0){B(!0);return}D(new tI(n,s,u,p,_,Sr,b,v,h));return}},[Sr,u,F,A,_,s,n,p,b,v,h]);U(rI,fe=>B(!0)),lt([fn.PURCHASE_SUCCESS,dr.INIT_GIFT],fe=>{switch(fe.type){case fn.PURCHASE_SUCCESS:Ze();return;case dr.INIT_GIFT:const De=fe;Ze(),a(De.pageId),c(De.offerId),m(De.extraData),r(!0);return}}),i.exports.useEffect(()=>{B(!1)},[p]);const me=i.exports.useCallback(()=>{X&&Ee(fe=>{let De=[...X.boxTypes];return De.push(X.defaultStuffTypes[Math.floor(Math.random()*(X.defaultStuffTypes.length-1))]),k(De.length-1),O(De.length-1),De})},[X]);if(i.exports.useEffect(()=>{if(!X)return;const fe=[];for(const De of X.stuffTypes){const Nr=H().getFloorItemData(De);Nr&&Nr.colors&&Nr.colors.length>0&&fe.push({id:De,color:Qt.makeColorNumberHex(Nr.colors[0])})}me(),fe.length&&(x(fe[0].id),E(fe))},[X,me]),i.exports.useEffect(()=>{e&&me()},[me,e]),!X||!X.isEnabled||!e)return null;const Oe="catalog.gift_wrapping_new.box."+(Gt?"default":Y[b]),ot=`catalog.gift_wrapping_new.ribbon.${v}`,er="catalog.gift_wrapping_new."+(Gt?"freeprice":"price");return l(oe,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[t(se,{headerText:d("catalog.gift_wrapping.title"),onCloseClick:Ze}),l(ne,{className:"text-black",children:[l(Vb,{column:!0,children:[t(S,{children:d("catalog.gift_wrapping.receiver")}),t("input",{type:"text",className:Vt("form-control form-control-sm",P&&"is-invalid"),value:p,onChange:fe=>Ie(fe)}),le.length>0&&Qe&&t(T,{className:"autocomplete-gift-container",children:le.map(fe=>t(L,{className:"autocomplete-gift-item",onClick:De=>ze(fe.name),children:fe.name},fe.id))}),P&&t(L,{className:"invalid-feedback",children:d("catalog.gift_wrapping.receiver_not_found.title")})]}),t(xd,{figure:H().figure,userName:H().userName,message:_,editable:!0,onChange:fe=>I(fe)}),l(L,{className:"form-check",children:[t("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:h,onChange:fe=>f(De=>!De)}),t("label",{className:"form-check-label",children:d("catalog.gift_wrapping.show_face.title")})]}),l(w,{alignItems:"center",gap:2,children:[R&&t(L,{className:"gift-preview",children:t(Qi,{productType:ue.FLOOR,productClassId:Sr,extraData:We})}),l(T,{gap:1,children:[l(w,{gap:2,children:[l(Zr,{children:[t(M,{variant:"primary",onClick:()=>yt("prev_box"),children:t(sr,{className:"fa-icon"})}),t(M,{variant:"primary",onClick:()=>yt("next_box"),children:t(or,{className:"fa-icon"})})]}),l(T,{gap:1,children:[t(S,{fontWeight:"bold",children:d(Oe)}),l(w,{alignItems:"center",gap:1,children:[d(er,["price"],[X.price.toString()]),t(it,{type:-1})]})]})]}),l(w,{alignItems:"center",gap:2,className:Yt?"":"opacity-50 pointer-events-none",children:[l(Zr,{children:[t(M,{variant:"primary",onClick:()=>yt("prev_ribbon"),children:t(sr,{className:"fa-icon"})}),t(M,{variant:"primary",onClick:()=>yt("next_ribbon"),children:t(or,{className:"fa-icon"})})]}),t(S,{fontWeight:"bold",children:d(ot)})]})]})]}),l(T,{gap:1,className:Yt?"":"opacity-50 pointer-events-none",children:[t(S,{fontWeight:"bold",children:d("catalog.gift_wrapping.pick_color")}),t(Zr,{fullWidth:!0,children:C.map(fe=>t(M,{variant:"dark",active:fe.id===R,disabled:!Yt,style:{backgroundColor:fe.color},onClick:()=>x(fe.id)},fe.id))})]}),l(w,{justifyContent:"between",alignItems:"center",children:[t(M,{variant:"link",onClick:Ze,className:"text-black",children:d("cancel")}),t(M,{variant:"success",onClick:()=>yt("buy"),children:d("catalog.gift_wrapping.give_gift")})]})]})]})},TT=o=>{const[e,r]=i.exports.useState(""),{currentType:n=null,rootNode:a=null,offersToNodes:s=null,searchResult:c=null,setSearchResult:u=null,setCurrentPage:m=null}=Ue();return i.exports.useEffect(()=>{let p=e==null?void 0:e.toLocaleLowerCase().replace(" ","");if(!p||!p.length){u(null);return}const g=setTimeout(()=>{const h=H().getAllFurnitureData({loadFurnitureData:null});if(!h||!h.length)return;const f=[],_=[];for(const E of h){if(n===xr.BUILDER&&!E.availableForBuildersClub||n===xr.NORMAL&&E.excludeDynamic)continue;const b=[E.className,E.name,E.description].join(" ").replace(/ /gi,"").toLowerCase();if(n===xr.BUILDER&&E.purchaseOfferId===-1&&E.rentOfferId===-1)E.furniLine!==""&&_.indexOf(E.furniLine)<0&&b.indexOf(p)>=0&&_.push(E.furniLine);else if([...Ul(s,E.purchaseOfferId),...Ul(s,E.rentOfferId)].length&&(b.indexOf(p)>=0&&f.push(E),f.length===250))break}const I=[];for(const E of f)I.push(new wC(E));let C=[];Ju(p,_,a,C),u(new OC(p,I,C.filter(E=>E.isVisible))),m(new Bi(-1,"default_3x3",new ed([],[]),I,!1,1))},300);return()=>clearTimeout(g)},[s,n,a,e,m,u]),l(w,{gap:1,children:[t(w,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("generic.search"),value:e,onChange:p=>r(p.target.value)})}),(!e||!e.length)&&t(M,{variant:"primary",className:"catalog-search-button",children:t(Pi,{className:"fa-icon"})}),e&&!!e.length&&t(M,{variant:"primary",className:"catalog-search-button",onClick:p=>r(""),children:t(_r,{className:"fa-icon"})})]})},Jd=o=>{const{node:e=null,child:r=!1}=o;return t(V,{children:e&&e.children.length>0&&e.children.map((n,a)=>n.isVisible?t(Zd,{node:n,child:r},a):null)})},Zd=o=>{const{node:e=null,child:r=!1}=o,{activateNode:n=null}=Ue();return l(L,{className:"nitro-catalog-navigation-section",children:[l(be,{gap:1,column:!1,itemActive:e.isActive,onClick:a=>n(e),className:r?"inset":"",children:[t(Qd,{icon:e.iconId}),t(S,{grow:!0,truncate:!0,children:e.localization}),e.isBranch&&l(V,{children:[e.isOpen&&t(yi,{className:"fa-icon"}),!e.isOpen&&t(Oi,{className:"fa-icon"})]})]}),e.isOpen&&e.isBranch&&t(Jd,{node:e,child:!0})]})},vT=o=>{const{node:e=null}=o,{searchResult:r=null}=Ue();return l(V,{children:[t(TT,{}),t(T,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:l(Le,{id:"nitro-catalog-main-navigation",gap:1,columnCount:1,children:[r&&r.filteredNodes.length>0&&r.filteredNodes.map((n,a)=>t(Zd,{node:n},a)),!r&&t(Jd,{node:e})]})})]})},wT=o=>{const{columnCount:e=5,...r}=o,[n,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),{currentOffer:u=null,setPurchaseOptions:m=null}=Ue(),{badgeCodes:p=[],activate:g=null,deactivate:h=null}=_a(),f=i.exports.useMemo(()=>{if(!s)return null;const _=new $s;return _.setValue(["0",s,"",""]),_},[s]);return i.exports.useEffect(()=>{u&&m(_=>{const I={..._};return I.extraParamRequired=!0,I.extraData=f&&f.getValue(1)||null,I.previewStuffData=f,I})},[u,f,m]),i.exports.useEffect(()=>{if(!n)return;const _=g();return()=>h(_)},[n,g,h]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),t(Le,{columnCount:e,...r,children:p&&p.length>0&&p.map((_,I)=>t(be,{itemActive:s===_,onClick:C=>c(_),children:t(je,{badgeCode:_})},I))})},Ca=o=>{const{currentPage:e=null,setCurrentOffer:r=null}=Ue();return i.exports.useEffect(()=>{!e||!e.offers.length||r(e.offers[0])},[e,r]),null},ol=o=>{const{offer:e=null,selectOffer:r=null,itemActive:n=!1,...a}=o,[s,c]=i.exports.useState(!1),{requestOfferToMover:u=null}=Ue(),{isVisible:m=!1}=Zn(),p=i.exports.useMemo(()=>e.pricingModel===at.PRICING_MODEL_BUNDLE?null:e.product.getIconUrl(e),[e]),g=f=>{switch(f.type){case xe.MOUSE_DOWN:r(e),c(!0);return;case xe.MOUSE_UP:c(!1);return;case xe.ROLL_OUT:if(!s||!n||!m)return;u(e);return}},h=e.product;return h?t(be,{itemImage:p,itemCount:e.pricingModel===at.PRICING_MODEL_MULTI?h.productCount:1,itemUniqueSoldout:h.uniqueLimitedItemSeriesSize&&!h.uniqueLimitedItemsLeft,itemUniqueNumber:h.uniqueLimitedItemSeriesSize,itemActive:n,onMouseDown:g,onMouseUp:g,onMouseOut:g,...a,children:e.product.productType===ue.ROBOT&&t(st,{figure:e.product.extraParam,headOnly:!0,direction:3})}):null},oo=o=>{const{columnCount:e=5,children:r=null,...n}=o,{currentOffer:a=null,setCurrentOffer:s=null,currentPage:c=null,setPurchaseOptions:u=null}=Ue(),m=i.exports.useRef();if(i.exports.useEffect(()=>{m&&m.current&&(m.current.scrollTop=0)},[c]),!c)return null;const p=g=>{g.activate(),!g.isLazy&&(s(g),g.product&&g.product.productType===ue.WALL&&u(h=>{const f={...h};return f.extraData=g.product.extraParam||null,f}))};return l(Le,{innerRef:m,columnCount:e,...n,children:[c.offers&&c.offers.length>0&&c.offers.map((g,h)=>t(ol,{itemActive:a&&a.offerId===g.offerId,offer:g,selectOffer:p},h)),r]})},ba=o=>{const{children:e=null,...r}=o,{currentOffer:n=null}=Ue();return!n||n.pricingModel!==at.PRICING_MODEL_SINGLE||!n.product.isUniqueLimitedItem?null:l(L,{...r,children:[t(Fb,{className:"mx-auto",uniqueLimitedItemsLeft:n.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:n.product.uniqueLimitedItemSeriesSize}),e]})},qr=o=>{const{noGiftOption:e=!1,purchaseCallback:r=null}=o;i.exports.useState(!1);const[n,a]=i.exports.useState(Be.NONE);ha(Js.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1);const{currentOffer:s=null,currentPage:c=null,purchaseOptions:u=null,setPurchaseOptions:m=null}=Ue(),{getCurrencyAmount:p=null}=es(),g=i.exports.useCallback(I=>{switch(I.type){case fn.PURCHASE_SUCCESS:a(Be.NONE);return;case Kn.PURCHASE_FAILED:a(Be.FAILED);return;case ea.NOT_ALLOWED:a(Be.FAILED);return;case ta.SOLD_OUT:a(Be.SOLD_OUT);return}},[]);lt(fn.PURCHASE_SUCCESS,g),lt(Kn.PURCHASE_FAILED,g),lt(ea.NOT_ALLOWED,g),lt(ta.SOLD_OUT,g);const h=i.exports.useMemo(()=>{if(!s||u.extraParamRequired&&(!u.extraData||!u.extraData.length))return!1;if(s.pricingModel===at.PRICING_MODEL_SINGLE){const I=s.product;if(I&&I.isUniqueLimitedItem)return!I.uniqueLimitedItemsLeft}return!1},[s,u]),f=(I=!1)=>{if(!s)return;if(fr()<s.clubLevel){ee("habboUI/open/hccenter");return}if(I){St(new Kb(s.page.pageId,s.offerId,u.extraData));return}if(a(Be.PURCHASE),r){r();return}let C=s.page.pageId;D(new oa(C,s.offerId,u.extraData,u.quantity))};return i.exports.useEffect(()=>{s&&a(Be.NONE)},[s,m]),i.exports.useEffect(()=>{let I=null;return(n===Be.CONFIRM||n===Be.FAILED)&&(I=setTimeout(()=>a(Be.NONE),3e3)),()=>{I&&clearTimeout(I)}},[n]),s?l(V,{children:[t(()=>{const I=s.priceInCredits*u.quantity,C=s.priceInActivityPoints*u.quantity;if(fr()<s.clubLevel)return t(M,{variant:"danger",disabled:!0,children:d("catalog.alert.hc.required")});if(h)return t(M,{variant:"danger",disabled:!0,children:d("catalog.alert.limited_edition_sold_out.title")});if(I>p(-1))return t(M,{variant:"danger",disabled:!0,children:d("catalog.alert.notenough.title")});if(C>p(s.activityPointType))return t(M,{variant:"danger",disabled:!0,children:d("catalog.alert.notenough.activitypoints.title."+s.activityPointType)});switch(n){case Be.CONFIRM:return t(M,{variant:"warning",onClick:E=>f(),children:d("catalog.marketplace.confirm_title")});case Be.PURCHASE:return t(M,{disabled:!0,children:t(Ji,{})});case Be.FAILED:return t(M,{variant:"danger",children:d("generic.failed")});case Be.SOLD_OUT:return t(M,{variant:"danger",children:d("generic.failed")+" - "+d("catalog.alert.limited_edition_sold_out.title")});case Be.NONE:default:return t(M,{disabled:u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:E=>a(Be.CONFIRM),children:d("catalog.purchase_confirmation."+(s.isRentOffer?"rent":"buy"))})}},{}),!e&&!s.isRentOffer&&t(M,{disabled:u.quantity>1||!s.giftable||h||u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:I=>f(!0),children:d("catalog.purchase_confirmation.gift")})]}):null},em=o=>{const{offer:e=null,separator:r=!1}=o,{purchaseOptions:n=null}=Ue(),{quantity:a=1}=n;return e?l(V,{children:[e.priceInCredits>0&&l(w,{alignItems:"center",gap:1,children:[t(S,{bold:!0,children:e.priceInCredits*a}),t(it,{type:-1})]}),r&&e.priceInCredits>0&&e.priceInActivityPoints>0&&t(Ys,{size:"xs",color:"black",className:"fa-icon"}),e.priceInActivityPoints>0&&l(w,{alignItems:"center",gap:1,children:[t(S,{bold:!0,children:e.priceInActivityPoints*a}),t(it,{type:e.activityPointType})]})]}):null},Cn=o=>{const{gap:e=1,...r}=o,{currentOffer:n=null}=Ue();return t(T,{gap:e,...r,children:t(em,{offer:n})})},An=o=>{const{currentOffer:e=null,roomPreviewer:r=null,purchaseOptions:n=null}=Ue(),{previewStuffData:a=null}=n;return i.exports.useEffect(()=>{if(!e||e.pricingModel===at.PRICING_MODEL_BUNDLE||!r)return;const s=e.product;if(s)switch(r.reset(!1),s.productType){case ue.FLOOR:{if(!s.furnitureData)return;if(s.furnitureData.specialType===Z.FIGURE_PURCHASABLE_SET){const u=H().getFloorItemData(s.furnitureData.id).customParams.split(",").map(g=>parseInt(g)),m=[];for(const g of u)Nt().isValidFigureSetForGender(g,H().gender)&&m.push(g);const p=Nt().getFigureStringWithFigureIds(H().figure,H().gender,m);r.addAvatarIntoRoom(p,s.productClassId)}else r.addFurnitureIntoRoom(s.productClassId,new Rt(90),a,s.extraParam);return}case ue.WALL:{if(!s.furnitureData)return;switch(s.furnitureData.specialType){case Z.FLOOR:r.updateObjectRoom(s.extraParam);return;case Z.WALL_PAPER:r.updateObjectRoom(null,s.extraParam);return;case Z.LANDSCAPE:{r.updateObjectRoom(null,null,s.extraParam);const c=H().getWallItemDataByName("window_double_default");c&&r.addWallItemIntoRoom(c.id,new Rt(90),c.customParams);return}default:r.updateObjectRoom("default","default","default"),r.addWallItemIntoRoom(s.productClassId,new Rt(90),s.extraParam);return}}case ue.ROBOT:r.addAvatarIntoRoom(s.extraParam,0);return;case ue.EFFECT:r.addAvatarIntoRoom(H().figure,s.productClassId);return}},[e,a,r]),e?e.pricingModel===at.PRICING_MODEL_BUNDLE?t(T,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(Le,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:e.products.length>0&&e.products.map((s,c)=>t(be,{itemImage:s.getIconUrl(e),itemCount:s.productCount},c))})}):t(da,{roomPreviewer:r,height:140}):null},RT=o=>{const{page:e=null}=o,{currentOffer:r=null}=Ue();return l(V,{children:[t(Ca,{}),l(re,{children:[l(T,{size:7,overflow:"hidden",children:[t(oo,{shrink:!0}),l(T,{gap:1,overflow:"hidden",children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:d("catalog_selectbadge")}),t(wT,{})]})]}),l(T,{center:!r,size:5,overflow:"hidden",children:[!r&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(V,{children:[t(L,{position:"relative",overflow:"hidden",children:t(An,{})}),l(T,{grow:!0,gap:1,children:[t(ba,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:r.localizationName}),t(w,{justifyContent:"end",children:t(Cn,{alignItems:"end"})}),t(qr,{})]})]})]})]})]})},yn=o=>{const{...e}=o,{currentOffer:r=null}=Ue();return!r||!r.badgeCode||!r.badgeCode.length?null:t(je,{badgeCode:r.badgeCode,...e})},xT=1,yT=100,al=o=>{const{currentOffer:e=null,purchaseOptions:r=null,setPurchaseOptions:n=null}=Ue(),{quantity:a=1}=r,s=c=>{isNaN(c)&&(c=1),c=Math.max(c,xT),c=Math.min(c,yT),c!==a&&n(u=>{const m={...u};return m.quantity=c,m})};return!e||!e.bundlePurchaseAllowed?null:l(V,{children:[t(S,{children:d("catalog.bundlewidget.spinner.select.amount")}),l(w,{alignItems:"center",gap:1,children:[t(iu,{className:"text-black cursor-pointer fa-icon",onClick:c=>s(a-1)}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:a,onChange:c=>s(c.target.valueAsNumber)}),t(lu,{className:"text-black cursor-pointer fa-icon",onClick:c=>s(a+1)})]})]})},OT=o=>{const{page:e=null}=o,[r,n]=i.exports.useState(new Map),{currentOffer:a=null,setCurrentOffer:s=null}=Ue(),[c,u]=i.exports.useState(!1),m=(_,I)=>!_.product.furnitureData.colorIndex||!I.product.furnitureData.colorIndex||_.product.furnitureData.colorIndex>I.product.furnitureData.colorIndex?1:_==I?0:-1,p=(_,I)=>_.product.furnitureData.className>I.product.furnitureData.className?1:_==I?0:-1,g=_=>{_.activate(),s(_)},h=(_,I)=>{const C=`${I}*${_}`,E=e.offers.findIndex(b=>b.product.furnitureData.fullName===C);E>-1&&g(e.offers[E])},f=i.exports.useMemo(()=>{const _=[],I=new Map,C=new Map;return e.offers.sort(m),e.offers.forEach(E=>{if(!E.product)return;const b=E.product.furnitureData;if(!b||!b.hasIndexedColor)_.push(E);else{const N=b.className,v=b.colorIndex;C.has(N)||C.set(N,[]);let y=16777215;if(b.colors){for(let R of b.colors)R!==16777215&&(y=R);C.get(N).indexOf(y)===-1&&(C.get(N)[v]=y)}I.has(N)||(_.push(E),I.set(N,!0))}}),_.sort(p),n(C),_},[e.offers]);return l(re,{children:[t(T,{size:7,overflow:"hidden",children:l(Le,{columnCount:5,children:[(!c||!a||!r.has(a.product.furnitureData.className))&&f.map((_,I)=>t(ol,{itemActive:a&&(a.product.furnitureData.hasIndexedColor?a.product.furnitureData.className===_.product.furnitureData.className:a.offerId===_.offerId),offer:_,selectOffer:g},I)),c&&a&&r.has(a.product.furnitureData.className)&&r.get(a.product.furnitureData.className).map((_,I)=>t(be,{itemHighlight:!0,itemActive:a.product.furnitureData.colorIndex===I,itemColor:ir.int2rgb(_),className:"clear-bg",onClick:C=>h(I,a.product.furnitureData.className)},I))]})}),l(T,{center:!a,size:5,overflow:"hidden",children:[!a&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),a&&l(V,{children:[l(L,{position:"relative",overflow:"hidden",children:[t(An,{}),t(yn,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),a.product.furnitureData.hasIndexedColor&&t(M,{position:"absolute",className:"bottom-1 start-1",onClick:_=>u(I=>!I),children:t(cu,{className:"fa-icon"})})]}),l(T,{grow:!0,gap:1,children:[t(ba,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:a.localizationName}),l(w,{justifyContent:"between",children:[t(T,{gap:1,children:t(al,{})}),t(Cn,{justifyContent:"end",alignItems:"end"})]}),t(qr,{})]})]})]})]})},tm=o=>{const{imageUrl:e=null}=o,[r,n]=i.exports.useState("");return i.exports.useEffect(()=>{n(e??K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder"))},[e]),t(w,{center:!0,fullWidth:!0,className:"nitro-catalog-header",children:t("img",{src:r,onError:({currentTarget:a})=>{a.src=K("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder")}})})},AT=o=>{const{page:e=null}=o,{currentOffer:r=null,currentPage:n=null}=Ue();return t(V,{children:l(re,{children:[l(T,{size:7,overflow:"hidden",children:[K("catalog.headers")&&t(tm,{imageUrl:n.localization.getImage(0)}),t(oo,{})]}),l(T,{center:!r,size:5,overflow:"hidden",children:[!r&&l(V,{children:[!!e.localization.getImage(1)&&t(nn,{imageUrl:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(V,{children:[l(w,{center:!0,overflow:"hidden",style:{height:140},children:[r.product.productType!==ue.BADGE&&l(V,{children:[t(An,{}),t(yn,{className:"bg-muted rounded bottom-1 end-1"})]}),r.product.productType===ue.BADGE&&t(yn,{className:"scale-2"})]}),l(T,{grow:!0,gap:1,children:[t(ba,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:r.localizationName}),l(w,{justifyContent:"between",children:[t(T,{gap:1,children:t(al,{})}),t(Cn,{justifyContent:"end",alignItems:"end"})]}),t(qr,{})]})]})]})]})})},kT=o=>{const{...e}=o,{currentOffer:r=null,purchaseOptions:n=null}=Ue(),{previewStuffData:a=null}=n,s=i.exports.useMemo(()=>{if(!r||!a)return null;const c=a.getValue(2);return!c||!c.length?null:c},[r,a]);return s?t(je,{badgeCode:s,isGroup:!0,...e}):null},rm=o=>{const[e,r]=i.exports.useState(0),{currentOffer:n=null,catalogOptions:a=null,setPurchaseOptions:s=null}=Ue(),{groups:c=null}=a,u=i.exports.useMemo(()=>{if(!c||!c.length)return null;const p=c[e];if(!p)return null;const g=new $s;return g.setValue(["0",p.groupId.toString(),p.badgeCode,p.colorA,p.colorB]),g},[e,c]);if(i.exports.useEffect(()=>{n&&s(p=>{const g={...p};return g.extraParamRequired=!0,g.extraData=u&&u.getValue(1)||null,g.previewStuffData=u,g})},[n,u,s]),i.exports.useEffect(()=>{D(new Lu)},[]),!c||!c.length)return l(L,{className:"bg-muted rounded p-1 text-black text-center",children:[d("catalog.guild_selector.members_only"),t(M,{className:"mt-1",children:d("catalog.guild_selector.find_groups")})]});const m=c[e];return l(w,{gap:1,children:[!!m&&l(w,{overflow:"hidden",className:"rounded border",children:[t(L,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+m.colorA}}),t(L,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+m.colorB}})]}),t("select",{className:"form-select form-select-sm",value:e,onChange:p=>r(parseInt(p.target.value)),children:c.map((p,g)=>t("option",{value:g,children:p.groupName},g))})]})},PT=o=>{const{page:e=null}=o,{currentOffer:r=null}=Ue();return l(re,{children:[t(T,{size:7,overflow:"hidden",children:t(oo,{})}),l(T,{center:!r,size:5,overflow:"hidden",children:[!r&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(V,{children:[l(L,{position:"relative",overflow:"hidden",children:[t(An,{}),t(kT,{position:"absolute",className:"bottom-1 end-1"})]}),l(T,{grow:!0,gap:1,children:[t(S,{truncate:!0,children:r.localizationName}),t(L,{grow:!0,children:t(rm,{})}),t(w,{justifyContent:"end",children:t(Cn,{alignItems:"end"})}),t(qr,{})]})]})]})]})},DT=o=>{const{page:e=null}=o;i.exports.useState(0);const{currentOffer:r=null,setCurrentOffer:n=null,catalogOptions:a=null}=Ue();return i.exports.useEffect(()=>{D(new Lu)},[e]),l(V,{children:[t(Ca,{}),l(re,{children:[t(T,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:t(L,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})}),t(T,{size:5,overflow:"hidden",gap:1,children:!!r&&t(V,{children:l(T,{grow:!0,gap:1,children:[t(S,{truncate:!0,children:r.localizationName}),t(L,{grow:!0,children:t(rm,{})}),t(w,{justifyContent:"end",children:t(Cn,{alignItems:"end"})}),t(qr,{noGiftOption:!0})]})})})]})]})},MT=o=>{const{page:e=null}=o;return l(re,{children:[l(T,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[t(L,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(L,{overflow:"auto",dangerouslySetInnerHTML:{__html:e.localization.getText(0)}}),t(L,{dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),l(T,{center:!0,size:5,overflow:"hidden",children:[t(nn,{imageUrl:e.localization.getImage(1)}),t(M,{onClick:()=>ee("groups/create"),children:d("catalog.start.guild.purchase.button")})]})]})},LT=o=>{const{page:e=null}=o;return t("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:t("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:t("div",{dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})})})},nm=o=>{const{page:e=null}=o,r=e.localization.getImage(1);return l(T,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[l(w,{alignItems:"center",gap:2,children:[r&&t("img",{alt:"",src:r}),t(L,{className:"fs-5",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),t(T,{grow:!0,alignItems:"center",overflow:"auto",children:t(L,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}})}),t(w,{alignItems:"center",children:t(L,{className:"fw-bold",dangerouslySetInnerHTML:{__html:e.localization.getText(3)}})})]})},UT=o=>t(nm,{...o}),FT=o=>{const{page:e=null}=o,[r,n]=i.exports.useState(""),[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(-1),[m,p]=i.exports.useState([]),[g,h]=i.exports.useState(!1),[f,_]=i.exports.useState(1),{categories:I=null}=Dr(),{setIsVisible:C=null}=Ue(),{promoteInformation:E,isExtended:b,setIsExtended:N}=sl();i.exports.useEffect(()=>{b&&(u(E.data.flatId),n(E.data.eventName),s(E.data.eventDescription),_(E.data.categoryId),h(b),N(!1))},[b,r,a,f]);const v=()=>{u(-1),n(""),s(""),_(1),N(!1),C(!1)},y=()=>{const R=e.pageId,x=e.offers.length>=1?e.offers[0].offerId:-1,F=c,k=r,A=a,O=f;D(new oI(R,x,F,k,g,A,O)),v()};return U(nI,R=>{const x=R.getParser();x&&p(x.rooms)}),i.exports.useEffect(()=>{D(new sI),D(new wu)},[]),l(V,{children:[t(S,{bold:!0,center:!0,children:d("roomad.catalog_header")}),l(T,{size:12,overflow:"hidden",className:"text-black",children:[t(L,{children:d("roomad.catalog_text",["duration"],["120"])}),l(L,{className:"bg-muted rounded p-1",children:[l(T,{gap:2,children:[t(S,{bold:!0,children:d("navigator.category")}),t("select",{className:"form-select form-select-sm",value:f,onChange:R=>_(parseInt(R.target.value)),disabled:g,children:I&&I.map((R,x)=>t("option",{value:R.id,children:d(R.name)},x))})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("roomad.catalog_name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:r,onChange:R=>n(R.target.value),readOnly:g})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("roomad.catalog_description")}),t("textarea",{className:"form-control form-control-sm",maxLength:64,value:a,onChange:R=>s(R.target.value),readOnly:g})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("roomad.catalog_roomname")}),l("select",{className:"form-select form-select-sm",value:c,onChange:R=>u(parseInt(R.target.value)),disabled:g,children:[t("option",{value:-1,disabled:!0,children:d("roomad.catalog_roomname")}),m&&m.map((R,x)=>t("option",{value:R.roomId,children:R.roomName},x))]})]}),t(T,{gap:1,children:t(M,{variant:!r||!a||c===-1?"danger":"success",onClick:y,disabled:!r||!a||c===-1,children:d(g?"roomad.extend.event":"buy")})})]})]})]})},sm=o=>{const{columnCount:e=5,children:r=null,...n}=o,{currentOffer:a=null}=Ue(),s=i.exports.useRef();return i.exports.useEffect(()=>{s&&s.current&&(s.current.scrollTop=0)},[a]),a?l(Le,{innerRef:s,columnCount:5,...n,children:[a.products&&a.products.length>0&&a.products.map((c,u)=>t(be,{itemImage:c.getIconUrl(),itemCount:c.productCount},u)),r]}):null},om=o=>{const{gap:e=1,...r}=o,{currentOffer:n=null}=Ue();return t(w,{gap:e,alignItems:"center",classNames:["bg-muted","p-1","rounded"],...r,children:t(em,{separator:!0,offer:n})})},GT=o=>{const{page:e=null}=o;return l(V,{children:[t(Ca,{}),l(re,{children:[l(T,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(S,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(T,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(sm,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),l(T,{size:5,overflow:"hidden",gap:1,children:[!!e.localization.getText(1)&&t(S,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)}),l(T,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(yn,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(om,{position:"absolute",className:"bottom-0 end-0"})]}),t(T,{gap:1,children:t(qr,{})})]})]})]})},BT=o=>{const{page:e=null}=o;return l(V,{children:[t(Ca,{}),l(re,{children:[l(T,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(S,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(T,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(sm,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),l(T,{size:5,overflow:"hidden",gap:1,children:[!!e.localization.getText(1)&&t(S,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)}),l(T,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(yn,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(om,{position:"absolute",className:"bottom-0 end-0"})]}),t(T,{gap:1,children:t(qr,{})})]})]})]})},VT=o=>{const{page:e=null}=o,[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState(""),{currentOffer:c=null,currentPage:u=null}=Ue(),m=p=>{var g;return(g=_e().soundManager.musicController)==null?void 0:g.playSong(p,ks.PRIORITY_PURCHASE_PREVIEW,15,0,0,0)};return U(aI,p=>{const g=p.getParser();g.officialSongId===a&&n(g.songId)}),i.exports.useEffect(()=>{if(!c)return;const p=c.product;if(p){if(p.extraParam.length>0){const g=parseInt(p.extraParam);g>0?n(g):(s(p.extraParam),D(new iI(p.extraParam)))}else s(""),n(-1);return()=>{var g;return(g=_e().soundManager.musicController)==null?void 0:g.stop(ks.PRIORITY_PURCHASE_PREVIEW)}}},[c]),i.exports.useEffect(()=>()=>{var p;return(p=_e().soundManager.musicController)==null?void 0:p.stop(ks.PRIORITY_PURCHASE_PREVIEW)},[]),t(V,{children:l(re,{children:[l(T,{size:7,overflow:"hidden",children:[K("catalog.headers")&&t(tm,{imageUrl:u.localization.getImage(0)}),t(oo,{})]}),l(T,{center:!c,size:5,overflow:"hidden",children:[!c&&l(V,{children:[!!e.localization.getImage(1)&&t(nn,{imageUrl:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),c&&l(V,{children:[l(w,{center:!0,overflow:"hidden",style:{height:140},children:[c.product.productType!==ue.BADGE&&l(V,{children:[t(An,{}),t(yn,{className:"bg-muted rounded bottom-1 end-1"})]}),c.product.productType===ue.BADGE&&t(yn,{className:"scale-2"})]}),l(T,{grow:!0,gap:1,children:[t(ba,{fullWidth:!0}),t(S,{grow:!0,truncate:!0,children:c.localizationName}),r>-1&&t(M,{onClick:()=>m(r),children:d("play_preview_button")}),l(w,{justifyContent:"between",children:[t(T,{gap:1,children:t(al,{})}),t(Cn,{justifyContent:"end",alignItems:"end"})]}),t(qr,{})]})]})]})]})})},HT=["floors","walls","views"],WT=o=>{const{columnCount:e=5,children:r=null,...n}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(-1),[m,p]=i.exports.useState(null),{currentPage:g=null,currentOffer:h=null,setCurrentOffer:f=null,setPurchaseOptions:_=null}=Ue(),I=i.exports.useRef(),C=b=>{b&&p(N=>{const v=[...N];return v[c]=b,v})};if(i.exports.useEffect(()=>{if(!g)return;const b=[[],[],[]];for(const N of g.offers){if(N.pricingModel!==at.PRICING_MODEL_SINGLE&&N.pricingModel!==at.PRICING_MODEL_MULTI)continue;const v=N.product;if(!v||v.productType!==ue.WALL&&v.productType!==ue.FLOOR||!v.furnitureData)continue;switch(v.furnitureData.className){case"floor":b[0].push(N);break;case"wallpaper":b[1].push(N);break;case"landscape":b[2].push(N);break}}s(b),u(0),p([b[0][0],b[1][0],b[2][0]])},[g]),i.exports.useEffect(()=>{c===-1||!m||f(m[c])},[c,m,f]),i.exports.useEffect(()=>{c===-1||!m||!h||_(b=>{const N={...b};return N.extraData=m[c].product.extraParam,N.extraParamRequired=!0,N})},[h,c,m,_]),i.exports.useEffect(()=>{I&&I.current&&(I.current.scrollTop=0)},[c]),!a||c===-1)return null;const E=a[c];return l(V,{children:[t(Zr,{children:HT.map((b,N)=>t(M,{active:c===N,onClick:v=>u(N),children:d(`catalog.spaces.tab.${b}`)},N))}),l(Le,{innerRef:I,columnCount:e,...n,children:[E&&E.length>0&&E.map((b,N)=>t(ol,{itemActive:h&&h===b,offer:b,selectOffer:v=>C(v)},N)),r]})]})},jT=o=>{const{page:e=null}=o,{currentOffer:r=null,roomPreviewer:n=null}=Ue();return i.exports.useEffect(()=>{n.updatePreviewObjectBoundingRectangle(new vn)},[n]),l(re,{children:[t(T,{size:7,overflow:"hidden",children:t(WT,{})}),l(T,{center:!r,size:5,overflow:"hidden",children:[!r&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(V,{children:[t(L,{position:"relative",overflow:"hidden",children:t(An,{})}),l(T,{grow:!0,gap:1,children:[t(S,{grow:!0,truncate:!0,children:r.localizationName}),t(w,{justifyContent:"end",children:t(Cn,{alignItems:"end"})}),t(qr,{})]})]})]})]})},qT=o=>{const{page:e=null}=o,[r,n]=i.exports.useState(""),{currentOffer:a=null,setPurchaseOptions:s=null}=Ue();return i.exports.useEffect(()=>{a&&s(c=>{const u={...c};return u.extraData=r,u})},[a,r,s]),l(re,{children:[l(T,{size:7,overflow:"hidden",children:[t(oo,{}),t("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:r||"",onChange:c=>n(c.target.value)})]}),l(T,{center:!a,size:5,overflow:"hidden",children:[!a&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),a&&l(V,{children:[t(An,{}),l(T,{grow:!0,gap:1,children:[t(S,{grow:!0,truncate:!0,children:a.localizationName}),t(w,{justifyContent:"end",children:t(Cn,{alignItems:"end"})}),t(qr,{})]})]})]})]})},YT=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(Be.NONE),{currentPage:s=null,catalogOptions:c=null}=Ue(),{purse:u=null,getCurrencyAmount:m=null}=es(),{clubOffers:p=null}=c,g=i.exports.useCallback(N=>{switch(N.type){case fn.PURCHASE_SUCCESS:a(Be.NONE);return;case Kn.PURCHASE_FAILED:a(Be.FAILED);return}},[]);lt(fn.PURCHASE_SUCCESS,g),lt(Kn.PURCHASE_FAILED,g);const h=i.exports.useCallback(N=>{let v="";return N.months>0&&(v=d("catalog.vip.item.header.months",["num_months"],[N.months.toString()])),N.extraDays>0&&(v!==""&&(v+=" "),v+=" "+d("catalog.vip.item.header.days",["num_days"],[N.extraDays.toString()])),v},[]),f=i.exports.useCallback(()=>{if(!u)return"";const N=u.clubDays>0||u.clubPeriods>0?"extension.":"subscription.",v=e.months===0?"days":"months",y=e.months===0?e.extraDays:e.months;return d("catalog.vip.buy.confirm."+N+v).replace("%NUM_"+v.toUpperCase()+"%",y.toString())},[e,u]),_=i.exports.useCallback(()=>{let N=d("catalog.vip.buy.confirm.end_date");return N=N.replace("%month%",e.month.toString()),N=N.replace("%day%",e.day.toString()),N=N.replace("%year%",e.year.toString()),N},[e]),I=i.exports.useMemo(()=>{const N=u.clubDays,y=u.clubPeriods*31+N;return d("catalog.vip.extend.info",["days"],[y.toString()])},[u]),C=i.exports.useCallback(()=>{e&&(a(Be.PURCHASE),D(new oa(s.pageId,e.offerId,null,1)))},[e,s]),E=i.exports.useCallback(N=>{a(Be.NONE),r(N)},[]),b=i.exports.useCallback(()=>{if(!e)return null;if(e.priceCredits>m(-1))return t(M,{fullWidth:!0,variant:"danger",children:d("catalog.alert.notenough.title")});if(e.priceActivityPoints>m(e.priceActivityPointsType))return t(M,{fullWidth:!0,variant:"danger",children:d("catalog.alert.notenough.activitypoints.title."+e.priceActivityPointsType)});switch(n){case Be.CONFIRM:return t(M,{fullWidth:!0,variant:"warning",onClick:C,children:d("catalog.marketplace.confirm_title")});case Be.PURCHASE:return t(M,{fullWidth:!0,variant:"primary",disabled:!0,children:t(Ji,{})});case Be.FAILED:return t(M,{fullWidth:!0,variant:"danger",disabled:!0,children:d("generic.failed")});case Be.NONE:default:return t(M,{fullWidth:!0,variant:"success",onClick:()=>a(Be.CONFIRM),children:d("buy")})}},[e,n,C,m]);return i.exports.useEffect(()=>{p||D(new lI(1))},[p]),l(re,{children:[l(T,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[t(Le,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:p&&p.length>0&&p.map((N,v)=>l(be,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:e===N,className:"p-1",onClick:()=>E(N),children:[t("i",{className:"icon-hc-banner"}),l(T,{justifyContent:"end",gap:0,children:[t(S,{textEnd:!0,children:h(N)}),l(w,{justifyContent:"end",gap:1,children:[N.priceCredits>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:N.priceCredits}),t(it,{type:-1})]}),N.priceActivityPoints>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:N.priceActivityPoints}),t(it,{type:N.priceActivityPointsType})]})]})]})]},v))}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:d("catalog.vip.buy.hccenter")}})]}),l(T,{size:5,overflow:"hidden",children:[l(T,{fullHeight:!0,center:!0,overflow:"hidden",children:[s.localization.getImage(1)&&t("img",{alt:"",src:s.localization.getImage(1)}),t(S,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:I}})]}),e&&l(T,{fullWidth:!0,grow:!0,justifyContent:"end",children:[l(w,{alignItems:"end",children:[l(T,{grow:!0,gap:0,children:[t(S,{fontWeight:"bold",children:f()}),t(S,{children:_()})]}),l(T,{gap:1,children:[e.priceCredits>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:e.priceCredits}),t(it,{type:-1})]}),e.priceActivityPoints>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(S,{children:e.priceActivityPoints}),t(it,{type:e.priceActivityPointsType})]})]})]}),b()]})]})]})},zT=o=>{const{text:e=null}=o,[r,n]=i.exports.useState(""),[a,s]=i.exports.useState(!1),{simpleAlert:c=null}=Xe(),u=()=>{!r||!r.length||a||(D(new dI(r)),s(!0))};return U(cI,m=>{const p=m.getParser();let g=d("catalog.alert.voucherredeem.ok.description");p.productName&&(g=d("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[p.productName,p.productDescription])),c(g,null,null,null,d("catalog.alert.voucherredeem.ok.title")),s(!1),n("")}),U(uI,m=>{const p=m.getParser();c(d(`catalog.alert.voucherredeem.error.description.${p.errorCode}`),null,null,null,d("catalog.alert.voucherredeem.error.title")),s(!1)}),l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:e,value:r,onChange:m=>n(m.target.value)}),t(M,{variant:"primary",onClick:u,disabled:a,children:t(Om,{className:"fa-icon"})})]})},vo=o=>{const{item:e=null,position:r="relative",pointer:n=!0,overflow:a="hidden",fullHeight:s=!0,classNames:c=[],children:u=null,...m}=o,p=i.exports.useMemo(()=>{const h=["rounded","nitro-front-page-item"];return c.length&&h.push(...c),h},[c]);if(!e)return null;const g=K("image.library.url")+e.itemPromoImage;return l(Rd,{imageUrl:g,classNames:p,position:r,fullHeight:s,pointer:n,overflow:a,...m,children:[t(S,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:e.itemName}),u]})},$T=o=>{const{page:e=null,hideNavigation:r=null}=o,{frontPageItems:n=[]}=Ue(),a=i.exports.useCallback(s=>{switch(s.type){case vl.ITEM_CATALOGUE_PAGE:ee(`catalog/open/${s.catalogPageLocation}`);return;case vl.ITEM_PRODUCT_OFFER:ee(`catalog/open/${s.productOfferId}`);return}},[]);return i.exports.useEffect(()=>{r()},[e,r]),l(re,{children:[t(T,{size:4,children:n[0]&&t(vo,{item:n[0],onClick:s=>a(n[0])})}),l(T,{size:8,children:[n[1]&&t(vo,{item:n[1],onClick:s=>a(n[1])}),n[2]&&t(vo,{item:n[2],onClick:s=>a(n[2])}),n[3]&&t(vo,{item:n[3],onClick:s=>a(n[3])}),t(zT,{text:e.localization.getText(1)})]})]})},xi=1,Go=2,am=o=>{const{offerData:e=null,type:r=Go,onClick:n=null}=o,a=i.exports.useMemo(()=>e?d((e.furniType===2?"wallItem":"roomItem")+`.name.${e.furniId}`):"",[e]),s=i.exports.useCallback(()=>{if(!e)return"";if(e.status===$n.SOLD)return d("catalog.marketplace.offer.sold");if(e.timeLeftMinutes<=0)return d("catalog.marketplace.offer.expired");const c=Math.max(1,e.timeLeftMinutes),u=Math.floor(c/60);let p=c-u*60+" "+d("catalog.marketplace.offer.minutes");return u>0&&(p=u+" "+d("catalog.marketplace.offer.hours")+" "+p),d("catalog.marketplace.offer.time_left",["time"],[p])},[e]);return l(be,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(T,{style:{width:40,height:40},children:t(be,{column:!1,itemImage:RC(e.furniType===Xs.TYPE_FLOOR?ue.FLOOR:ue.WALL,e.furniId,e.extraData),itemUniqueNumber:e.isUniqueLimitedItem?e.stuffData.uniqueNumber:0})}),l(T,{grow:!0,gap:0,children:[t(S,{fontWeight:"bold",children:a}),r===xi&&l(V,{children:[t(S,{children:d("catalog.marketplace.offer.price_own_item",["price"],[e.price.toString()])}),t(S,{children:s()})]}),r===Go&&l(V,{children:[t(S,{children:d("catalog.marketplace.offer.price_public_item",["price","average"],[e.price.toString(),e.averagePrice>0?e.averagePrice.toString():"-"])}),t(S,{children:d("catalog.marketplace.offer_count",["count"],[e.offerCount.toString()])})]})]}),l(T,{gap:1,children:[r===xi&&e.status!==$n.SOLD&&t(M,{variant:"secondary",onClick:()=>n(e),children:d("catalog.marketplace.offer.pick")}),r===Go&&l(V,{children:[t(M,{variant:"secondary",onClick:()=>n(e),children:d("buy")}),t(M,{variant:"secondary",disabled:!0,children:d("catalog.marketplace.view_more")})]})]})]})},KT=o=>{const[e,r]=i.exports.useState(0),[n,a]=i.exports.useState([]),{simpleAlert:s=null}=Xe();U(mI,p=>{const g=p.getParser();if(!g)return;const h=g.offers.map(f=>{const _=new Xs(f.offerId,f.furniId,f.furniType,f.extraData,f.stuffData,f.price,f.status,f.averagePrice,f.offerCount);return _.timeLeftMinutes=f.timeLeftMinutes,_});r(g.creditsWaiting),a(h)}),U(gI,p=>{const g=p.getParser();if(g){if(!g.success){s(d("catalog.marketplace.cancel_failed"),de.DEFAULT,null,null,d("catalog.marketplace.operation_failed.topic"));return}a(h=>h.filter(f=>f.offerId!==g.offerId))}});const c=i.exports.useMemo(()=>n.filter(p=>p.status===$n.SOLD),[n]),u=i.exports.useCallback(()=>{a(p=>{const g=c.map(h=>h.offerId);return p.filter(h=>g.indexOf(h.offerId)===-1)}),D(new pI)},[c]),m=p=>{D(new fI(p.offerId))};return i.exports.useEffect(()=>{D(new hI)},[]),l(T,{overflow:"hidden",children:[e<=0&&t(S,{center:!0,className:"bg-muted rounded p-1",children:d("catalog.marketplace.redeem.no_sold_items")}),e>0&&l(T,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[t(S,{children:d("catalog.marketplace.redeem.get_credits",["count","credits"],[c.length.toString(),e.toString()])}),t(M,{className:"mt-1",onClick:u,children:d("catalog.marketplace.offer.redeem")})]}),l(T,{gap:1,overflow:"hidden",children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:d("catalog.marketplace.items_found",["count"],[n.length.toString()])}),t(T,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:n.length>0&&n.map(p=>t(am,{offerData:p,type:xi,onClick:m},p.offerId))})]})]})},XT=o=>{const{searchType:e=null,sortTypes:r=null,onSearch:n=null}=o,[a,s]=i.exports.useState(r?r[0]:3),[c,u]=i.exports.useState(""),[m,p]=i.exports.useState(0),[g,h]=i.exports.useState(0),f=i.exports.useCallback(I=>{s(I),(e===Lt.BY_ACTIVITY||e===Lt.BY_VALUE)&&n({minPrice:-1,maxPrice:-1,query:"",type:I})},[n,e]),_=i.exports.useCallback(()=>{const I=m>0?m:-1,C=g>0?g:-1;n({minPrice:I,maxPrice:C,type:a,query:c})},[g,m,n,c,a]);return i.exports.useEffect(()=>{if(!r||!r.length)return;const I=r[0];s(I),(e===Lt.BY_ACTIVITY||Lt.BY_VALUE===e)&&n({minPrice:-1,maxPrice:-1,query:"",type:I})},[n,e,r]),l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("catalog.marketplace.sort_order")}),t("select",{className:"form-select form-select-sm",value:a,onChange:I=>f(parseInt(I.target.value)),children:r.map(I=>t("option",{value:I,children:d(`catalog.marketplace.sort.${I}`)},I))})]}),e===Lt.ADVANCED&&l(V,{children:[l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("catalog.marketplace.search_name")}),t("input",{className:"form-control form-control-sm",type:"text",value:c,onChange:I=>u(I.target.value)})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("catalog.marketplace.search_price")}),l(w,{fullWidth:!0,gap:1,children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:m,onChange:I=>p(I.target.valueAsNumber)}),t("input",{className:"form-control form-control-sm",type:"number",min:0,value:g,onChange:I=>h(I.target.valueAsNumber)})]})]}),t(M,{variant:"secondary",className:"mx-auto",onClick:_,children:d("generic.search")})]})]})},QT=[1,2],JT=[3,4,5,6],ZT=[1,2,3,4,5,6],ev=o=>{const[e,r]=i.exports.useState(Lt.BY_ACTIVITY),[n,a]=i.exports.useState(0),[s,c]=i.exports.useState(new Map),[u,m]=i.exports.useState({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:p=null}=es(),{simpleAlert:g=null,showConfirm:h=null}=Xe(),f=i.exports.useCallback(C=>{m(C),D(new II(C.minPrice,C.maxPrice,C.query,C.type))},[]),_=i.exports.useMemo(()=>{switch(e){case Lt.BY_ACTIVITY:return JT;case Lt.BY_VALUE:return QT;case Lt.ADVANCED:return ZT}return[]},[e]),I=i.exports.useCallback(C=>{if(C.price>p(-1)){g(d("catalog.alert.notenough.credits.description"),de.DEFAULT,null,null,d("catalog.alert.notenough.title"));return}const E=C.offerId;h(d("catalog.marketplace.confirm_header"),()=>{D(new wl(E))},null,null,null,d("catalog.marketplace.confirm_title"))},[p,g,h]);return U(EI,C=>{const E=C.getParser();if(!E)return;const b=new Map;E.offers.forEach(N=>{const v=new Xs(N.offerId,N.furniId,N.furniType,N.extraData,N.stuffData,N.price,N.status,N.averagePrice,N.offerCount);v.timeLeftMinutes=N.timeLeftMinutes,b.set(N.offerId,v)}),a(E.totalItemsFound),c(b)}),U(_I,C=>{const E=C.getParser();if(E)switch(E.result){case 1:f(u);break;case 2:c(b=>{const N=new Map(b);return N.delete(E.requestedOfferId),N}),g(d("catalog.marketplace.not_available_header"),de.DEFAULT,null,null,d("catalog.marketplace.not_available_title"));break;case 3:c(b=>{const N=new Map(b),v=N.get(E.requestedOfferId);return v&&(v.offerId=E.offerId,v.price=E.newPrice,v.offerCount--,N.set(v.offerId,v)),N.delete(E.requestedOfferId),N}),h(d("catalog.marketplace.confirm_higher_header")+`
`+d("catalog.marketplace.confirm_price",["price"],[E.newPrice.toString()]),()=>{D(new wl(E.offerId))},null,null,null,d("catalog.marketplace.confirm_higher_title"));break;case 4:g(d("catalog.alert.notenough.credits.description"),de.DEFAULT,null,null,d("catalog.alert.notenough.title"));break}}),l(V,{children:[l(Zr,{children:[t(M,{active:e===Lt.BY_ACTIVITY,onClick:()=>r(Lt.BY_ACTIVITY),children:d("catalog.marketplace.search_by_activity")}),t(M,{active:e===Lt.BY_VALUE,onClick:()=>r(Lt.BY_VALUE),children:d("catalog.marketplace.search_by_value")}),t(M,{active:e===Lt.ADVANCED,onClick:()=>r(Lt.ADVANCED),children:d("catalog.marketplace.search_advanced")})]}),t(XT,{sortTypes:_,searchType:e,onSearch:f}),l(T,{gap:1,overflow:"hidden",children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:d("catalog.marketplace.items_found",["count"],[s.size.toString()])}),t(T,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(s.values()).map((C,E)=>t(am,{offerData:C,type:Go,onClick:I},E))})]})]})},tv=o=>{const{page:e=null}=o,[r,n]=i.exports.useState(-1),[a,s]=i.exports.useState([]),[c,u]=i.exports.useState(-1),[m,p]=i.exports.useState([]),[g,h]=i.exports.useState(-1),[f,_]=i.exports.useState(!1),[I,C]=i.exports.useState("");i.exports.useState(!0);const[E,b]=i.exports.useState(-1),{currentOffer:N=null,setCurrentOffer:v=null,setPurchaseOptions:y=null,catalogOptions:R=null,roomPreviewer:x=null}=Ue(),{petPalettes:F=null}=R,k=i.exports.useMemo(()=>!m.length||g===-1?16777215:m[g][0],[m,g]),A=i.exports.useMemo(()=>r===-1||!a.length||c===-1?"":d(`pet.breed.${r}.${a[c].breedId}`),[r,a,c]),O=i.exports.useMemo(()=>{if(!a.length||c===-1)return"";const G=a[c].paletteId;let z=16777215;if(r<=7){if(g===-1)return"";z=m[g][0]}let X=z.toString(16).toUpperCase();for(;X.length<6;)X="0"+X;return`${G}
${X}`},[a,c,r,m,g]),P=i.exports.useMemo(()=>{let G="";switch(E){case 1:G="catalog.alert.petname.long";break;case 2:G="catalog.alert.petname.short";break;case 3:G="catalog.alert.petname.chars";break;case 4:G="catalog.alert.petname.bobba";break}return!G||!G.length?"":d(G)},[E]),B=i.exports.useCallback(()=>{if(E===-1){D(new CI(I,1));return}if(E===0){D(new oa(e.pageId,N.offerId,`${I}
${O}`,1));return}},[e,N,I,O,E]);return U(bI,G=>{const z=G.getParser();b(z.result),z.result===0?B():St(new Kn(-1))}),i.exports.useEffect(()=>{if(!e||!e.offers.length)return;const G=e.offers[0];v(G),n(TC(G.localizationId)),_(!1)},[e,v]),i.exports.useEffect(()=>{if(!N)return;const G=N.product.productData;if(G){if(F)for(const z of F){if(z.breed!==G.type)continue;const X=[];for(const Y of z.palettes)Y.sellable&&X.push(Y);u(X.length?0:-1),s(X);return}u(-1),s([]),D(new SI(G.type))}},[N,F]),i.exports.useEffect(()=>{if(r===-1)return;const G=vC(r,a);h(G.length?0:-1),p(G)},[r,a]),i.exports.useEffect(()=>{if(!x||(x.reset(!1),r===-1||!a.length||c===-1))return;let G=`${r} ${a[c].paletteId}`;r<=7&&(G+=` ${k.toString(16)}`),x.addPetIntoRoom(G)},[x,r,a,c,k]),i.exports.useEffect(()=>{b(-1)},[I]),N?l(re,{children:[t(T,{size:7,overflow:"hidden",children:l(Le,{columnCount:5,children:[!f&&a.length>0&&a.map((G,z)=>t(be,{itemActive:c===z,onClick:X=>u(z),children:t(Jr,{typeId:r,paletteId:G.paletteId,direction:2,headOnly:!0})},z)),f&&m.length>0&&m.map((G,z)=>t(be,{itemHighlight:!0,itemActive:g===z,itemColor:ir.int2rgb(G[0]),className:"clear-bg",onClick:X=>h(z)},z))]})}),l(T,{center:!N,size:5,overflow:"hidden",children:[!N&&l(V,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(S,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),N&&l(V,{children:[l(L,{position:"relative",overflow:"hidden",children:[t(An,{}),t(yn,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),r>-1&&r<=7&&t(M,{position:"absolute",className:"bottom-1 start-1",onClick:G=>_(!f),children:t(cu,{className:"fa-icon"})})]}),l(T,{grow:!0,gap:1,children:[t(S,{truncate:!0,children:A}),l(T,{grow:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:d("widgets.petpackage.name.title"),value:I,onChange:G=>C(G.target.value)}),E>0&&t(L,{className:"invalid-feedback d-block m-0",children:P})]}),t(w,{justifyContent:"end",children:t(Cn,{justifyContent:"end",alignItems:"end"})}),t(qr,{purchaseCallback:B})]})]})]})]}):null},rv=o=>{const{offer:e=null,isAvailable:r=!1,daysRequired:n=0,onSelect:a=null}=o,s=i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0];return Fo.getProductImageUrl(u.productType,u.furniClassId,u.extraParam)},[e]),c=i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],m=Fo.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.name."+u.furniClassId:"roomItem.name."+u.furniClassId;return d(m)},[e]);return i.exports.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],m=Fo.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.desc."+u.furniClassId:"roomItem.desc."+u.furniClassId;return d(m)},[e]),i.exports.useCallback(()=>Math.floor(n/31),[n]),l(be,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(nn,{imageUrl:s()}),t(S,{grow:!0,fontWeight:"bold",children:c()}),t(M,{variant:"secondary",onClick:()=>a(e.localizationId),disabled:!r,children:d("catalog.club_gift.select")})]})},nv=o=>{const{purse:e=null}=es(),{catalogOptions:r=null,setCatalogOptions:n=null}=Ue(),{clubGifts:a=null}=r,{showConfirm:s=null}=Xe(),c=i.exports.useCallback(()=>a?a.giftsAvailable>0?d("catalog.club_gift.available",["amount"],[a.giftsAvailable.toString()]):a.daysUntilNextGift>0?d("catalog.club_gift.days_until_next",["days"],[a.daysUntilNextGift.toString()]):e.isVip?d("catalog.club_gift.not_available"):d("catalog.club_gift.no_club"):"",[a,e]),u=i.exports.useCallback(p=>{s(d("catalog.club_gift.confirm"),()=>{D(new NI(p)),n(g=>(g.clubGifts.giftsAvailable--,{...g}))},null)},[n,s]),m=i.exports.useMemo(()=>a.offers.sort((g,h)=>a.getOfferExtraData(g.offerId).daysRequired-a.getOfferExtraData(h.offerId).daysRequired),[a]);return l(V,{children:[t(S,{truncate:!0,shrink:!0,fontWeight:"bold",children:c()}),t(Le,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:a.offers.length>0&&m.map(p=>t(rv,{offer:p,isAvailable:a.getOfferExtraData(p.offerId).isSelectable&&a.giftsAvailable>0,onSelect:u,daysRequired:a.getOfferExtraData(p.offerId).daysRequired},p.offerId))})]})},sv=(o,e)=>{if(!o)return null;const r={page:o,hideNavigation:e};switch(o.layoutCode){case"frontpage_featured":return null;case"frontpage4":return t($T,{...r});case"pets":return t(tv,{...r});case"pets2":return t(UT,{...r});case"pets3":return t(nm,{...r});case"vip_buy":return t(YT,{...r});case"guild_frontpage":return t(MT,{...r});case"guild_forum":return t(DT,{...r});case"guild_custom_furni":return t(PT,{...r});case"club_gifts":return t(nv,{...r});case"marketplace_own_items":return t(KT,{...r});case"marketplace":return t(ev,{...r});case"single_bundle":return t(BT,{...r});case"room_bundle":return t(GT,{...r});case"spaces_new":return t(jT,{...r});case"trophies":return t(qT,{...r});case"info_loyalty":return t(LT,{...r});case"badge_display":return t(RT,{...r});case"roomads":return t(FT,{...r});case"default_3x3_color_grouping":return t(OT,{...r});case"soundmachine":return t(VT,{...r});case"bots":case"default_3x3":default:return t(AT,{...r})}},ov=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(0),[s,c]=i.exports.useState("0"),{catalogOptions:u=null,setCatalogOptions:m=null}=Ue(),{marketplaceConfiguration:p=null}=u,{showConfirm:g=null}=Xe(),h=E=>{c(E);const b=parseInt(E);isNaN(b)||b===n||a(parseInt(E))};if(U(TI,E=>{const b=E.getParser();m(N=>{const v={...N};return v.marketplaceConfiguration=b,v})}),lt(rl.POST_MARKETPLACE,E=>r(E.item)),i.exports.useEffect(()=>{!e||p||D(new vI)},[e,p]),i.exports.useEffect(()=>{if(e)return()=>a(0)},[e]),!p||!e)return null;const f=e?d(e.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type):"",_=e?d(e.isWallItem?"wallItem.desc."+e.type:"roomItem.desc."+e.type):"",I=()=>Math.max(Math.ceil(p.commission*.01*n),1),C=()=>{!e||n<p.minimumPrice||g(d("inventory.marketplace.confirm_offer.info",["furniname","price"],[f,n.toString()]),()=>{D(new wI(n,e.isWallItem?2:1,e.id)),r(null)},()=>{r(null)},null,null,d("inventory.marketplace.confirm_offer.title"))};return l(oe,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[t(se,{headerText:d("inventory.marketplace.make_offer.title"),onCloseClick:E=>r(null)}),t(ne,{overflow:"hidden",children:l(re,{fullHeight:!0,children:[t(T,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:t(Qi,{productType:e.isWallItem?ue.WALL:ue.FLOOR,productClassId:e.type,extraData:e.extra.toString()})}),l(T,{size:8,justifyContent:"between",overflow:"hidden",children:[l(T,{grow:!0,gap:1,children:[t(S,{fontWeight:"bold",children:f}),t(S,{truncate:!0,shrink:!0,children:_})]}),l(T,{overflow:"auto",children:[t(S,{italics:!0,children:d("inventory.marketplace.make_offer.expiration_info",["time"],[p.offerTime.toString()])}),l("div",{className:"input-group has-validation",children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:s,onChange:E=>h(E.target.value),placeholder:d("inventory.marketplace.make_offer.price_request")}),(n<p.minimumPrice||isNaN(n))&&t(L,{className:"invalid-feedback d-block",children:d("inventory.marketplace.make_offer.min_price",["minprice"],[p.minimumPrice.toString()])}),n>p.maximumPrice&&!isNaN(n)&&t(L,{className:"invalid-feedback d-block",children:d("inventory.marketplace.make_offer.max_price",["maxprice"],[p.maximumPrice.toString()])}),!(n<p.minimumPrice||n>p.maximumPrice||isNaN(n))&&t(L,{className:"invalid-feedback d-block",children:d("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[I().toString(),(n+I()).toString()])})]}),t(M,{disabled:n<p.minimumPrice||n>p.maximumPrice||isNaN(n),onClick:C,children:d("inventory.marketplace.make_offer.post")})]})]})]})})]})},av=o=>{const{isVisible:e=!1,setIsVisible:r=null,rootNode:n=null,currentPage:a=null,navigationHidden:s=!1,setNavigationHidden:c=null,activeNodes:u=[],searchResult:m=null,setSearchResult:p=null,openPageByName:g=null,openPageByOfferId:h=null,activateNode:f=null,getNodeById:_}=Ue();return i.exports.useEffect(()=>{const I={linkReceived:C=>{const E=C.split("/");if(!(E.length<2))switch(E[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(b=>!b);return;case"open":if(E.length>2)if(E.length===4)switch(E[2]){case"offerId":h(parseInt(E[3]));return}else g(E[2]);else r(!0);return}},eventUrlPrefix:"catalog/"};return _t(I),()=>Ct(I)},[r,h,g]),l(V,{children:[e&&l(oe,{uniqueKey:"catalog",className:"nitro-catalog",style:K("catalog.headers")?{width:710}:{},children:[t(se,{headerText:d("catalog.title"),onCloseClick:I=>r(!1)}),t(In,{children:n&&n.children.length>0&&n.children.map(I=>I.isVisible?t(jr,{isActive:I.isActive,onClick:C=>{m&&p(null),f(I)},children:l(w,{gap:K("catalog.tab.icons")?1:0,alignItems:"center",children:[K("catalog.tab.icons")&&t(Qd,{icon:I.iconId}),I.localization]})},I.pageId):null)}),t(ne,{children:l(re,{children:[!s&&t(T,{size:3,overflow:"hidden",children:u&&u.length>0&&t(vT,{node:u[0]})}),t(T,{size:s?12:9,overflow:"hidden",children:sv(a,()=>c(!0))})]})})]}),t(NT,{}),t(ov,{})]})},iv=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(""),{chatHistory:s=[]}=fa(),c=i.exports.useRef(null),u=i.exports.useMemo(()=>{if(n.length===0)return s;let m=n.toLowerCase();return s.filter(p=>p.message&&p.message.toLowerCase().includes(m)||p.name&&p.name.toLowerCase().includes(m))},[s,n]);return i.exports.useEffect(()=>{c&&c.current&&e&&(c.current.scrollTop=c.current.scrollHeight)},[e]),i.exports.useEffect(()=>{const m={linkReceived:p=>{const g=p.split("/");if(!(g.length<2))switch(g[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(h=>!h);return}},eventUrlPrefix:"chat-history/"};return _t(m),()=>Ct(m)},[]),e?l(oe,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[t(se,{headerText:d("room.chathistory.button.text"),onCloseClick:m=>r(!1)}),l(ne,{innerRef:c,overflow:"hidden",gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("generic.search"),value:n,onChange:m=>a(m.target.value)}),t(ga,{rows:u,scrollToBottom:!0,rowRender:m=>l(w,{alignItems:"center",className:"p-1",gap:2,children:[t(S,{variant:"muted",children:m.timestamp}),m.type===Ar.TYPE_CHAT&&l("div",{className:"bubble-container",style:{position:"relative"},children:[m.style===0&&t("div",{className:"user-container-bg",style:{backgroundColor:m.color}}),l("div",{className:`chat-bubble bubble-${m.style} type-${m.chatType}`,style:{maxWidth:"100%"},children:[t("div",{className:"user-container",children:m.imageUrl&&m.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${m.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${m.name}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${m.message}`}})]})]})]}),m.type===Ar.TYPE_ROOM_INFO&&l(V,{children:[t("i",{className:"icon icon-small-room"}),t(S,{textBreak:!0,wrap:!0,grow:!0,children:m.name})]})]})})]})]}):null},Or=32,Gn=64,Ds="x0123456789abcdefghijklmnopq";class Et{}Et.DOOR=0;Et.UP=1;Et.DOWN=2;Et.SET=3;Et.UNSET=4;const lv={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class cv{constructor(){this._currentAction=Et.SET,this._currentHeight=Ds[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=Et.SET,this._currentHeight=Ds[1]}}class wo{constructor(e,r){this._height=e,this._isBlocked=r}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const uv=(o,e)=>{let r=o*Or/2-e*Or/2;const n=o*Or/4+e*Or/4;return r=r+1024,[r,n]},dv=(o,e)=>{const r=o-1024,n=(r/(Or/2)+e/(Or/4))/2,a=(e/(Or/4)-r/(Or/2))/2;return[n,a]},sa=o=>{switch(o=parseInt(o.toString()),o){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},Ro=o=>{switch(o){case .25:return 0;case .5:return 1;case 2:return 3;default:return 2}},Vn=class extends RI{constructor(){const o=Or*Gn+20,e=Or*Gn/2+100;super({width:o,height:e,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=[],this._doorLocation=new vn(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new vn(-1,-1),this._actionSettings=new cv}initialize(){if(this._isInitialized)return;const o=Uu().getCollection("floor_editor");o&&(this._assetCollection=o,this._tilemapRenderer=new xI(o.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const o=new vn;this._tilemapRenderer.containsPoint=e=>(this._tilemapRenderer.worldTransform.applyInverse(e,o),this.tileHitDetection(o,!1)),this._tilemapRenderer.on("pointerup",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerout",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerdown",e=>{if(!(e.data.originalEvent instanceof PointerEvent)&&!(e.data.originalEvent instanceof TouchEvent))return;const r=e.data.originalEvent;if(r instanceof MouseEvent&&r.button===2)return;const n=e.data.global;this.tileHitDetection(n,!0)}),this._tilemapRenderer.on("click",e=>{if(!(e.data.originalEvent instanceof PointerEvent)||e.data.originalEvent.button===2)return;const n=e.data.global;this.tileHitDetection(n,!0,!0)})}tileHitDetection(o,e,r=!1){const n=this._tilemapRenderer.pointsBuf,a=Am,s=n.length;e&&(this._isHolding=!0);for(let c=0;c<s;c+=a){const u=c+a,m=n.slice(c,u),p=Or,g=Or/2,h=Math.floor(o.x),f=Math.floor(o.y),_=m[2],I=m[3],C=_+p/2,E=I+g/2,b=Math.abs(h-C),N=Math.abs(f-E);if(b/(p*.5)+N/(g*.5)<=1){if(this._isHolding){const[y,R]=dv(_,I);r?this.onClick(y,R):(this._lastUsedTile.x!==y||this._lastUsedTile.y!==R)&&(this._lastUsedTile.x=y,this._lastUsedTile.y=R,this.onClick(y,R))}return!0}}return!1}onClick(o,e){const r=this._tilemap[e][o],n=Ds.indexOf(r.height);let a=0;switch(this._actionSettings.currentAction){case Et.DOOR:r.height!=="x"&&(this._doorLocation.x=o,this._doorLocation.y=e,this.renderTiles());return;case Et.UP:if(r.height==="x")return;a=n+1;break;case Et.DOWN:if(r.height==="x"||n<=1)return;a=n-1;break;case Et.SET:a=Ds.indexOf(this._actionSettings.currentHeight);break;case Et.UNSET:a=0;break}if(a===-1||n===a)return;a>0&&(o+1>this._width&&(this._width=o+1),e+1>this._height&&(this._height=e+1));const s=Ds[a];s&&(r.isBlocked||(this._tilemap[e][o].height=s,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let o=0;o<this._tilemap.length;o++)for(let e=0;e<this.tilemap[o].length;e++){const r=this.tilemap[o][e];let n=r.height;this._doorLocation.x===e&&this._doorLocation.y===o&&(n=Vn.TILE_DOOR),r.isBlocked&&(n=Vn.TILE_BLOCKED);const[a,s]=uv(e,o);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${n}`),a,s)}}setTilemap(o,e){this._tilemap=[];const r=o.split("\r");let n=0,a=r.length;for(let s=0;s<a;s++){const c=r[s];if(c.length===0){r.splice(s,1),a=r.length,s--;continue}c.length>n&&(n=c.length)}for(let s=0;s<a;s++){this._tilemap[s]=[];const c=r[s];for(let u=0;u<n;u++){const m=e[s]&&e[s][u]||!1,p=c[u];p!=="x"&&p!=="X"&&p?this._tilemap[s][u]=new wo(p,m):this._tilemap[s][u]=new wo("x",m)}for(let u=n;u<Gn;u++)this.tilemap[s][u]=new wo("x",!1)}for(let s=a;s<Gn;s++){this.tilemap[s]||(this.tilemap[s]=[]);for(let c=0;c<Gn;c++)this.tilemap[s][c]=new wo("x",!1)}this._width=n,this._height=a}getCurrentTilemapString(){if(this._tilemap[this._height-1][this._width-1].height==="x"){this._width=-1,this._height=-1;for(let r=Gn-1;r>=0;r--)if(this._tilemap[r])for(let n=Gn-1;n>=0;n--){if(!this._tilemap[r][n])continue;this._tilemap[r][n].height!=="x"&&(n+1>this._width&&(this._width=n+1),r+1>this._height&&(this._height=r+1))}}const e=[];for(let r=0;r<this._height;r++){const n=[];for(let a=0;a<this._width;a++){const s=this._tilemap[r][a];n[a]=s.height}e[r]=n.join("")}return e.join("\r")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(o){this._doorLocation=o}get actionSettings(){return this._actionSettings}static get instance(){return Vn._INSTANCE||(Vn._INSTANCE=new Vn),Vn._INSTANCE}};let Dt=Vn;Dt._INSTANCE=null;Dt.TILE_BLOCKED="r_blocked";Dt.TILE_DOOR="r_door";const im=i.exports.createContext({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),mv=o=>t(im.Provider,{...o}),il=()=>i.exports.useContext(im),gv=o=>{const{gap:e=1,children:r=null,...n}=o,[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),{originalFloorplanSettings:m=null,setOriginalFloorplanSettings:p=null,setVisualizationSettings:g=null}=il(),h=i.exports.useRef(null);U(yI,_=>{const I=_.getParser();p(C=>{const E={...C};return E.reservedTiles=I.blockedTilesMap,Dt.instance.setTilemap(E.tilemap,E.reservedTiles),E}),s(!0),h.current.scrollTo(Dt.instance.view.width/3,0)}),U(OI,_=>{const I=_.getParser();p(C=>{const E={...C};return E.entryPoint=[I.x,I.y],E.entryPointDir=I.direction,E}),g(C=>{const E={...C};return E.entryPointDir=I.direction,E}),Dt.instance.doorLocation=new vn(I.x,I.y),u(!0)});const f=_=>{const I=h.current;if(I)switch(_){case"up":I.scrollBy({top:-10});break;case"down":I.scrollBy({top:10});break;case"left":I.scrollBy({left:-10});break;case"right":I.scrollBy({left:10});break}};return i.exports.useEffect(()=>()=>{Dt.instance.clear(),g(_=>({wallHeight:m.wallHeight,thicknessWall:m.thicknessWall,thicknessFloor:m.thicknessFloor,entryPointDir:_.entryPointDir}))},[m.thicknessFloor,m.thicknessWall,m.wallHeight,g]),i.exports.useEffect(()=>{!c||!a||Dt.instance.renderTiles()},[c,a]),i.exports.useEffect(()=>{D(new AI),D(new kI),Dt.instance.tilemapRenderer.interactive=!0,h.current&&h.current.appendChild(Dt.instance.renderer.view)},[]),l(T,{gap:e,...n,children:[l(re,{overflow:"hidden",gap:1,children:[t(T,{center:!0,size:1,children:t(M,{className:"d-md-none",onClick:_=>f("left"),children:t(uu,{className:"fa-icon"})})}),l(T,{overflow:"hidden",size:10,gap:1,children:[t(w,{justifyContent:"center",className:"d-md-none",children:t(M,{shrink:!0,onClick:_=>f("up"),children:t(km,{className:"fa-icon"})})}),t(L,{overflow:"auto",innerRef:h}),t(w,{justifyContent:"center",className:"d-md-none",children:t(M,{shrink:!0,onClick:_=>f("down"),children:t(Pm,{className:"fa-icon"})})})]}),t(T,{center:!0,size:1,children:t(M,{className:"d-md-none",onClick:_=>f("right"),children:t(du,{className:"fa-icon"})})})]}),r]})},pc=o=>o.replace(/\r\n|\r|\n/g,`
`).toLowerCase(),pv=o=>{const{onCloseClick:e=null}=o,[r,n]=i.exports.useState(""),{originalFloorplanSettings:a=null}=il(),s=()=>{D(new Fu(r.split(`
`).join("\r"),a.entryPoint[0],a.entryPoint[1],a.entryPointDir,sa(a.thicknessWall),sa(a.thicknessFloor),a.wallHeight-1))};return Kd(()=>{n(pc(a.tilemap))}),l(oe,{theme:"primary-slim",className:"floorplan-import-export",children:[t(se,{headerText:d("floor.plan.editor.import.export"),onCloseClick:e}),l(ne,{children:[t("textarea",{className:"h-100",value:r,onChange:c=>n(c.target.value)}),l(w,{justifyContent:"between",children:[t(M,{onClick:c=>n(pc(a.tilemap)),children:d("floor.plan.editor.revert.to.last.received.map")}),t(M,{onClick:s,children:d("floor.plan.editor.save")})]})]})]})},hc=0,xo=16,hv=0,fv=26,Iv=o=>{const{visualizationSettings:e=null,setVisualizationSettings:r=null}=il(),[n,a]=i.exports.useState(Et.SET),[s,c]=i.exports.useState(0),u=C=>{a(C),Dt.instance.actionSettings.currentAction=C},m=()=>{r(C=>{const E={...C};return E.entryPointDir<7?++E.entryPointDir:E.entryPointDir=0,E})},p=C=>{(isNaN(C)||C<=0)&&(C=0),C>26&&(C=26),c(C),Dt.instance.actionSettings.currentHeight=C.toString(36)},g=C=>{r(E=>{const b={...E};return b.thicknessFloor=C,b})},h=C=>{r(E=>{const b={...E};return b.thicknessWall=C,b})},f=C=>{(isNaN(C)||C<=0)&&(C=hc),C>xo&&(C=xo),r(E=>{const b={...E};return b.wallHeight=C,b})},_=()=>{let C=e.wallHeight+1;C>xo&&(C=xo),f(C)},I=()=>{let C=e.wallHeight-1;C<=0&&(C=hc),f(C)};return l(T,{children:[l(w,{gap:1,children:[l(T,{size:5,gap:1,children:[t(S,{bold:!0,children:d("floor.plan.editor.draw.mode")}),l(w,{gap:3,children:[l(w,{gap:1,children:[t(be,{itemActive:n===Et.SET,onClick:C=>u(Et.SET),children:t("i",{className:"icon icon-set-tile"})}),t(be,{itemActive:n===Et.UNSET,onClick:C=>u(Et.UNSET),children:t("i",{className:"icon icon-unset-tile"})})]}),l(w,{gap:1,children:[t(be,{itemActive:n===Et.UP,onClick:C=>u(Et.UP),children:t("i",{className:"icon icon-increase-height"})}),t(be,{itemActive:n===Et.DOWN,onClick:C=>u(Et.DOWN),children:t("i",{className:"icon icon-decrease-height"})})]}),t(be,{itemActive:n===Et.DOOR,onClick:C=>u(Et.DOOR),children:t("i",{className:"icon icon-set-door"})})]})]}),l(T,{alignItems:"center",size:4,children:[t(S,{bold:!0,children:d("floor.plan.editor.enter.direction")}),t("i",{className:`icon icon-door-direction-${e.entryPointDir} cursor-pointer`,onClick:m})]}),l(T,{size:3,children:[t(S,{bold:!0,children:d("floor.editor.wall.height")}),l(w,{alignItems:"center",gap:1,children:[t(iu,{className:"cursor-pointer fa-icon",onClick:I}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:e.wallHeight,onChange:C=>f(C.target.valueAsNumber)}),t(lu,{className:"cursor-pointer fa-icon",onClick:_})]})]})]}),l(w,{gap:1,children:[l(T,{size:6,children:[l(S,{bold:!0,children:[d("floor.plan.editor.tile.height"),": ",s]}),t(Pt,{className:"nitro-slider",min:hv,max:fv,step:1,value:s,onChange:C=>p(C),renderThumb:({style:C,...E},b)=>t("div",{style:{backgroundColor:`#${lv[b.valueNow.toString(33)]}`,...C},...E,children:b.valueNow})})]}),l(T,{size:6,children:[t(S,{bold:!0,children:d("floor.plan.editor.room.options")}),l(w,{className:"align-items-center",children:[l("select",{className:"form-control form-control-sm",value:e.thicknessWall,onChange:C=>h(parseInt(C.target.value)),children:[t("option",{value:0,children:d("navigator.roomsettings.wall_thickness.thinnest")}),t("option",{value:1,children:d("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:2,children:d("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:3,children:d("navigator.roomsettings.wall_thickness.thick")})]}),l("select",{className:"form-control form-control-sm",value:e.thicknessFloor,onChange:C=>g(parseInt(C.target.value)),children:[t("option",{value:0,children:d("navigator.roomsettings.floor_thickness.thinnest")}),t("option",{value:1,children:d("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:2,children:d("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:3,children:d("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},Ev=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(!1),[s,c]=i.exports.useState({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[u,m]=i.exports.useState({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),p=()=>{D(new Fu(Dt.instance.getCurrentTilemapString(),Dt.instance.doorLocation.x,Dt.instance.doorLocation.y,u.entryPointDir,sa(u.thicknessWall),sa(u.thicknessFloor),u.wallHeight-1))},g=()=>{m({wallHeight:s.wallHeight,thicknessWall:s.thicknessWall,thicknessFloor:s.thicknessFloor,entryPointDir:s.entryPointDir}),Dt.instance.doorLocation=new vn(s.entryPoint[0],s.entryPoint[1]),Dt.instance.setTilemap(s.tilemap,s.reservedTiles),Dt.instance.renderTiles()};return Te(hr.DISPOSED,h=>r(!1)),U(PI,h=>{const f=h.getParser();c(_=>{const I={..._};return I.tilemap=f.model,I.wallHeight=f.wallHeight+1,I}),m(_=>{const I={..._};return I.wallHeight=f.wallHeight+1,I})}),U(DI,h=>{const f=h.getParser();c(_=>{const I={..._};return I.thicknessFloor=Ro(f.thicknessFloor),I.thicknessWall=Ro(f.thicknessWall),I}),m(_=>{const I={..._};return I.thicknessFloor=Ro(f.thicknessFloor),I.thicknessWall=Ro(f.thicknessWall),I})}),i.exports.useEffect(()=>{const h={linkReceived:f=>{const _=f.split("/");if(!(_.length<2))switch(_[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(I=>!I);return}},eventUrlPrefix:"floor-editor/"};return _t(h),()=>Ct(h)},[]),i.exports.useEffect(()=>{Dt.instance.initialize()},[]),l(mv,{value:{originalFloorplanSettings:s,setOriginalFloorplanSettings:c,visualizationSettings:u,setVisualizationSettings:m},children:[e&&l(oe,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[t(se,{headerText:d("floor.plan.editor.title"),onCloseClick:()=>r(!1)}),l(ne,{overflow:"hidden",children:[t(Iv,{}),t(gv,{overflow:"hidden"}),l(w,{justifyContent:"between",children:[t(M,{onClick:g,children:d("floor.plan.editor.reload")}),l(Zr,{children:[t(M,{disabled:!0,children:d("floor.plan.editor.preview")}),t(M,{onClick:h=>a(!0),children:d("floor.plan.editor.import.export")}),t(M,{onClick:p,children:d("floor.plan.editor.save")})]})]})]})]}),n&&t(pv,{onCloseClick:()=>a(!1)})]})},_v=o=>{const{friend:e=null}=o,[r,n]=i.exports.useState(!1),{followFriend:a=null}=mr(),s=i.exports.useRef();return i.exports.useEffect(()=>{const c=u=>{const m=s.current;m&&u.target!==m&&!m.contains(u.target)&&n(!1)};return document.addEventListener(xe.MOUSE_CLICK,c),()=>document.removeEventListener(xe.MOUSE_CLICK,c)},[]),e?l("div",{ref:s,className:"btn btn-success friend-bar-item "+(r?"friend-bar-item-active":""),onClick:c=>n(u=>!u),children:[l("div",{className:`friend-bar-item-head position-absolute ${e.id>0?"avatar":"group"}`,children:[e.id>0&&t(st,{headOnly:!0,figure:e.figure,direction:2}),e.id<=0&&t(je,{isGroup:!0,badgeCode:e.figure})]}),t("div",{className:"text-truncate",children:e.name}),r&&l("div",{className:"d-flex justify-content-between",children:[t(L,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:c=>ca(e.id)}),e.followingAllowed&&t(L,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:c=>a(e)}),t(L,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:c=>Jt(e.id)})]})]}):l("div",{ref:s,className:"btn btn-primary friend-bar-item friend-bar-search",children:[t("div",{className:"friend-bar-item-head position-absolute"}),t("div",{className:"text-truncate",children:d("friend.bar.find.title")})]})},Wa=3,Cv=o=>{const{onlineFriends:e=null}=o,[r,n]=i.exports.useState(0),a=i.exports.useRef();return l(w,{innerRef:a,alignItems:"center",className:"friend-bar",children:[t(M,{variant:"black",className:"friend-bar-button",disabled:r<=0,onClick:s=>n(r-1),children:t(sr,{className:"fa-icon"})}),Array.from(Array(Wa),(s,c)=>t(_v,{friend:e[r+c]||null},c)),t(M,{variant:"black",className:"friend-bar-button",disabled:!(e.length>Wa&&r+Wa<=e.length-1),onClick:s=>n(r+1),children:t(or,{className:"fa-icon"})})]})},bv=o=>{const{friend:e=null,selected:r=!1,selectFriend:n=null}=o,[a,s]=i.exports.useState(!1),{followFriend:c=null,updateRelationship:u=null}=mr(),m=_=>{_.stopPropagation(),c(e)},p=_=>{_.stopPropagation(),ca(e.id)},g=_=>{_.stopPropagation(),s(!0)},h=(_,I)=>{_.stopPropagation(),u(e,I),s(!1)},f=()=>{if(!e)return"none";switch(e.relationshipStatus){case jt.RELATIONSHIP_HEART:return"heart";case jt.RELATIONSHIP_SMILE:return"smile";case jt.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}};return e?l(Jo,{justifyContent:"between",className:`px-2 py-1 ${r&&"bg-primary text-white"}`,onClick:_=>n(e.id),children:[l(w,{alignItems:"center",gap:1,children:[t(L,{onClick:_=>_.stopPropagation(),children:t(Er,{userId:e.id})}),t("div",{children:e.name})]}),l(w,{alignItems:"center",gap:1,children:[!a&&l(V,{children:[e.followingAllowed&&t(L,{pointer:!0,onClick:m,className:"nitro-friends-spritesheet icon-follow",title:d("friendlist.tip.follow")}),e.online&&t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:p,title:d("friendlist.tip.im")}),e.id>0&&t(L,{className:`nitro-friends-spritesheet icon-${f()} cursor-pointer`,onClick:g,title:d("infostand.link.relationship")})]}),a&&l(V,{children:[t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:_=>h(_,jt.RELATIONSHIP_HEART)}),t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:_=>h(_,jt.RELATIONSHIP_SMILE)}),t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:_=>h(_,jt.RELATIONSHIP_BOBBA)}),t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:_=>h(_,jt.RELATIONSHIP_NONE)})]})]})]}):null},fc=o=>{const{list:e=null,selectedFriendsIds:r=null,selectFriend:n=null}=o;return!e||!e.length?null:t(V,{children:e.map((a,s)=>t(bv,{friend:a,selected:r&&r.indexOf(a.id)>=0,selectFriend:n},s))})},Sv=o=>{const{request:e=null}=o,{requestResponse:r=null}=mr();return e?l(Jo,{justifyContent:"between",className:"px-2 py-1",children:[l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:e.id}),t("div",{children:e.name})]}),l(w,{alignItems:"center",gap:1,children:[t(L,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:n=>r(e.id,!0)}),t(L,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:n=>r(e.id,!1)})]})]}):null},Nv=o=>{const{children:e=null,...r}=o,{requests:n=[],requestResponse:a=null}=mr();return n.length?l(Zo,{...r,children:[l(T,{fullHeight:!0,justifyContent:"between",gap:1,children:[t(T,{gap:0,children:n.map((s,c)=>t(Sv,{request:s},c))}),t(w,{justifyContent:"center",className:"px-2 py-1",children:t(M,{onClick:s=>a(-1,!1),children:d("friendlist.requests.dismissall")})})]}),e]}):null},Tv=o=>{const{selectedFriendsIds:e=null,removeFriendsText:r=null,removeSelectedFriends:n=null,onCloseClick:a=null}=o;return l(oe,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[t(se,{headerText:d("friendlist.removefriendconfirm.title"),onCloseClick:a}),l(ne,{className:"text-black",children:[t("div",{children:r}),l(w,{gap:1,children:[t(M,{fullWidth:!0,variant:"danger",disabled:e.length===0,onClick:n,children:d("generic.ok")}),t(M,{fullWidth:!0,onClick:a,children:d("generic.cancel")})]})]})]})},vv=o=>{const{selectedFriendsIds:e=null,onCloseClick:r=null,sendRoomInvite:n=null}=o,[a,s]=i.exports.useState("");return l(oe,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[t(se,{headerText:d("friendlist.invite.title"),onCloseClick:r}),l(ne,{className:"text-black",children:[d("friendlist.invite.summary",["count"],[e.length.toString()]),t("textarea",{className:"form-control",value:a,maxLength:255,onChange:c=>s(c.target.value)}),t(S,{center:!0,className:"bg-muted rounded p-1",children:d("friendlist.invite.note")}),l(w,{gap:1,children:[t(M,{fullWidth:!0,variant:"success",disabled:a.length===0||e.length===0,onClick:()=>n(a),children:d("friendlist.invite.send")}),t(M,{fullWidth:!0,onClick:r,children:d("generic.cancel")})]})]})]})},wv=o=>{const{...e}=o,[r,n]=i.exports.useState(""),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),{canRequestFriend:m=null,requestFriend:p=null}=mr();return U(MI,g=>{const h=g.getParser();s(h.friends),u(h.others)}),i.exports.useEffect(()=>{if(!r||!r.length)return;const g=setTimeout(()=>{!r||!r.length||D(new LI(r))},500);return()=>clearTimeout(g)},[r]),l(Zo,{...e,children:[t("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:d("generic.search"),value:r,maxLength:50,onChange:g=>n(g.target.value)}),l(T,{children:[a&&l(V,{children:[a.length===0&&t(S,{bold:!0,small:!0,className:"px-2 py-1",children:d("friendlist.search.nofriendsfound")}),a.length>0&&l(T,{gap:0,children:[t(S,{bold:!0,small:!0,className:"px-2 py-1",children:d("friendlist.search.friendscaption",["cnt"],[a.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(T,{gap:0,children:a.map(g=>l(Jo,{justifyContent:"between",className:"px-2 py-1",children:[l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:g.avatarId}),t("div",{children:g.avatarName})]}),t(w,{alignItems:"center",gap:1,children:g.isAvatarOnline&&t(L,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:h=>ca(g.avatarId),title:d("friendlist.tip.im")})})]},g.avatarId))})]})]}),c&&l(V,{children:[c.length===0&&t(S,{bold:!0,small:!0,className:"px-2 py-1",children:d("friendlist.search.noothersfound")}),c.length>0&&l(T,{gap:0,children:[t(S,{bold:!0,small:!0,className:"px-2 py-1",children:d("friendlist.search.otherscaption",["cnt"],[c.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(T,{gap:0,children:c.map(g=>l(Jo,{justifyContent:"between",className:"px-2 py-1",children:[l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:g.avatarId}),t("div",{children:g.avatarName})]}),t(w,{alignItems:"center",gap:1,children:m(g.avatarId)&&t(L,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:h=>p(g.avatarId,g.avatarName),title:d("friendlist.tip.addfriend")})})]},g.avatarId))})]})]})]})]})},Rv=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState([]),[s,c]=i.exports.useState(!1),[u,m]=i.exports.useState(!1),{onlineFriends:p=[],offlineFriends:g=[],requests:h=[],requestFriend:f=null}=mr(),_=i.exports.useMemo(()=>{if(!n||!n.length)return"";const b=[];for(const N of n){let v=p.find(y=>y.id===N);v||(v=g.find(y=>y.id===N)),v&&b.push(v.name)}return d("friendlist.removefriendconfirm.userlist",["user_names"],[b.join(", ")])},[g,p,n]),I=i.exports.useCallback(b=>{b<0||a(N=>{const v=[...N],y=v.indexOf(b);return y>-1?v.splice(y,1):v.push(b),v})},[a]),C=b=>{!n.length||!b||!b.length||b.length>255||(D(new UI(b,n)),c(!1))},E=()=>{n.length!==0&&(a(b=>(D(new FI(...b)),[])),m(!1))};return i.exports.useEffect(()=>{const b={linkReceived:N=>{const v=N.split("/");if(!(v.length<2))switch(v[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(y=>!y);return;case"request":if(v.length<4)return;f(parseInt(v[2]),v[3])}},eventUrlPrefix:"friends/"};return _t(b),()=>Ct(b)},[f]),e?l(V,{children:[l(oe,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"primary-slim",children:[t(se,{headerText:d("friendlist.friends"),onCloseClick:b=>r(!1)}),l(ne,{overflow:"hidden",gap:1,className:"text-black p-0",children:[l(Db,{fullHeight:!0,overflow:"hidden",children:[t(Zo,{headerText:d("friendlist.friends")+` (${p.length})`,isExpanded:!0,children:t(fc,{list:p,selectedFriendsIds:n,selectFriend:I})}),t(Zo,{headerText:d("friendlist.friends.offlinecaption")+` (${g.length})`,children:t(fc,{list:g,selectedFriendsIds:n,selectFriend:I})}),t(Nv,{headerText:d("friendlist.tab.friendrequests")+` (${h.length})`,isExpanded:!0}),t(wv,{headerText:d("people.search.title")})]}),n&&n.length>0&&l(w,{gap:1,className:"p-1",children:[t(M,{fullWidth:!0,onClick:()=>c(!0),children:d("friendlist.tip.invite")}),t(M,{fullWidth:!0,variant:"danger",onClick:b=>m(!0),children:d("generic.delete")})]})]})]}),s&&t(vv,{selectedFriendsIds:n,onCloseClick:()=>c(!1),sendRoomInvite:C}),u&&t(Tv,{selectedFriendsIds:n,removeFriendsText:_,onCloseClick:()=>m(!1),removeSelectedFriends:E})]}):null},xv=o=>{const{thread:e=null,group:r=null}=o,n=i.exports.useMemo(()=>r.type===zn.GROUP_CHAT&&ud(r.chats[0].extraData),[r]),a=i.exports.useMemo(()=>!e||!r?!1:!!(r.type===zn.PRIVATE_CHAT&&r.userId===H().userId||n&&r.chats.length&&n.userId===H().userId),[e,r,n]);return!e||!r?null:r.userId?l(w,{fullWidth:!0,justifyContent:a?"end":"start",gap:2,children:[l(L,{shrink:!0,className:"message-avatar",children:[r.type===zn.PRIVATE_CHAT&&!a&&t(st,{figure:e.participant.figure,direction:2}),n&&!a&&t(st,{figure:n.figure,direction:2})]}),l(L,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(a?"right":"left"),children:[l(L,{className:"fw-bold",children:[a&&H().userName,!a&&(n?n.username:e.participant.name)]}),r.chats.map((s,c)=>t(L,{className:"text-break",children:s.message},c))]}),a&&t(L,{shrink:!0,className:"message-avatar",children:t(st,{figure:H().figure,direction:4})})]}):t(V,{children:r.chats.map((s,c)=>t(w,{fullWidth:!0,gap:2,justifyContent:"start",children:l(L,{className:"w-100 text-break",children:[s.type===Wr.SECURITY_NOTIFICATION&&l(w,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[t(L,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),t(L,{children:s.message})]}),s.type===Wr.ROOM_INVITE&&l(w,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[t(L,{className:"messenger-notification-icon flex-shrink-0"}),l(L,{children:[d("messenger.invitation")+" ",s.message]})]})]})},c))})},yv=o=>{const{thread:e=null}=o;return e.setRead(),t(V,{children:e.groups.length>0&&e.groups.map((r,n)=>t(xv,{thread:e,group:r},n))})},Ov=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(-1),[s,c]=i.exports.useState(""),{visibleThreads:u=[],activeThread:m=null,getMessageThread:p=null,sendMessage:g=null,setActiveThreadId:h=null,closeThread:f=null}=Vd(),{report:_=null}=Pr(),I=i.exports.useRef(),C=()=>m&&m.participant&&D(new Ui(m.participant.id)),E=()=>m&&m.participant&&Jt(m.participant.id),b=()=>{!m||!s.length||(g(m,H().userId,s),c(""))},N=v=>{v.key==="Enter"&&b()};return i.exports.useEffect(()=>{const v={linkReceived:y=>{const R=y.split("/");if(R.length===2){if(R[1]==="open"){r(!0);return}if(R[1]==="toggle"){r(F=>!F);return}const x=p(parseInt(R[1]));if(!x)return;h(x.threadId),r(!0)}},eventUrlPrefix:"friends-messenger/"};return _t(v),()=>Ct(v)},[p,h]),i.exports.useEffect(()=>{!e||!m||(I.current.scrollTop=I.current.scrollHeight)},[e,m]),i.exports.useEffect(()=>{if(e&&!m){n>0?h(n):u.length>0&&h(u[0].threadId);return}!e&&m&&(a(m.threadId),h(-1))},[e,m,n,u,h]),e?l(oe,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[t(se,{headerText:d("messenger.window.title",["OPEN_CHAT_COUNT"],[u.length.toString()]),onCloseClick:v=>r(!1)}),t(ne,{children:l(re,{overflow:"hidden",children:[l(T,{size:4,overflow:"hidden",children:[t(S,{bold:!0,children:d("toolbar.icon.label.messenger")}),t(T,{fit:!0,overflow:"auto",children:t(T,{children:u&&u.length>0&&u.map(v=>l(be,{itemActive:m===v,onClick:y=>h(v.threadId),children:[v.unread&&t(Rn,{count:v.unreadCount}),l(w,{fullWidth:!0,alignItems:"center",gap:1,children:[l(w,{alignItems:"center",className:"friend-head px-1",children:[v.participant.id>0&&t(st,{figure:v.participant.figure,headOnly:!0,direction:3}),v.participant.id<=0&&t(je,{isGroup:!0,badgeCode:v.participant.figure})]}),t(S,{truncate:!0,grow:!0,children:v.participant.name})]})]},v.threadId))})})]}),t(T,{size:8,overflow:"hidden",children:m&&l(V,{children:[t(S,{bold:!0,center:!0,children:d("messenger.window.separator",["FRIEND_NAME"],[m.participant.name])}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[l(w,{gap:1,children:[l(Zr,{children:[t(M,{onClick:C,children:t(L,{className:"nitro-friends-spritesheet icon-follow"})}),t(M,{onClick:E,children:t(L,{className:"nitro-friends-spritesheet icon-profile-sm"})})]}),t(M,{variant:"danger",onClick:()=>_(Ve.IM,{reportedUserId:m.participant.id}),children:d("messenger.window.button.report")})]}),t(M,{onClick:v=>f(m.threadId),children:t(_r,{className:"fa-icon"})})]}),t(T,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:t(T,{innerRef:I,overflow:"auto",children:t(yv,{thread:m})})}),l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:d("messenger.window.input.default",["FRIEND_NAME"],[m.participant.name]),value:s,onChange:v=>c(v.target.value),onKeyDown:N}),t(M,{variant:"success",onClick:b,children:d("widgets.chatinput.say")})]})]})})]})})]}):null},Av=o=>{const{settings:e=null,onlineFriends:r=[]}=mr();return e?l(V,{children:[Ai.exports.createPortal(t(Cv,{onlineFriends:r}),document.getElementById("toolbar-friend-bar-container")),t(Rv,{}),t(Ov,{})]}):null},kv=()=>{const{games:o,selectedGame:e,setSelectedGame:r}=Ia(),n=s=>{let c=["game-icon"];return e===s&&c.push("selected"),c.join(" ")},a=s=>`url(${s.assetUrl}${s.gameNameId}_icon.png)`;return l(L,{fullWidth:!0,className:"gameList-container bg-dark p-1",children:[d("gamecenter.game_list_title"),t(w,{gap:3,children:o&&o.map((s,c)=>t(L,{className:n(s),onClick:u=>r(s),style:{backgroundImage:a(s)}},c))})]})},Pv=()=>{const{gameURL:o,setGameURL:e}=Ia(),[r,n]=i.exports.useState(0),a=i.exports.useRef();return i.exports.useEffect(()=>{if(!a||a&&!a.current)return;n(0);let s=document.createElement("iframe");s.src=o,s.classList.add("game-center-stage"),s.classList.add("h-100"),s.onload=()=>{n(c=>c+=1)},a.current.innerHTML="",a.current.appendChild(s)},[a,o]),i.exports.useEffect(()=>{r>1&&(e(null),D(new GI))},[r,e]),o?t(L,{innerRef:a,className:"game-center-stage"}):null},Dv=()=>{const{selectedGame:o,accountStatus:e}=Ia();i.exports.useEffect(()=>{o&&(D(new BI(o.gameId)),D(new VI(o.gameId)))},[o]);const r=()=>Qt.uintHexColor(o.bgColor),n=()=>`url(${o.assetUrl}${o.gameNameId}_theme.png)`,a=()=>Qt.uintHexColor(o.textColor),s=()=>{D(new HI(o.gameId))};return l(w,{className:"game-view py-4",fullHeight:!0,style:{backgroundColor:r(),backgroundImage:n(),color:a()},children:[l(w,{className:"w-75",column:!0,alignItems:"center",gap:2,children:[t(S,{bold:!0,children:d(`gamecenter.${o.gameNameId}.description_title`)}),t("img",{src:o.assetUrl+o.gameNameId+"_logo.png"}),(e.hasUnlimitedGames||e.freeGamesLeft>0)&&t(V,{children:l(M,{variant:"light",position:"relative",className:"px-4",onClick:s,children:[d("gamecenter.play_now"),!e.hasUnlimitedGames&&t(Rn,{className:"me-n1 mt-n1",count:e.freeGamesLeft})]})}),t(S,{bold:!0,className:"w-50",center:!0,children:d(`gamecenter.${o.gameNameId}.description_content`)})]}),t(L,{className:"w-25"})]})},Mv=()=>{const{isVisible:o,setIsVisible:e,games:r,accountStatus:n}=Ia();if(i.exports.useEffect(()=>{const a=()=>{e(c=>!c)},s={linkReceived:c=>{switch(c.split("/")[1]){case"toggle":a();break}},eventUrlPrefix:"games/"};return _t(s),()=>Ct(s)},[]),!(!o||!r||!n))return l(w,{position:"absolute",className:"top-0 bottom-0 start-0 end-0 bg-black",justifyContent:"center",children:[l(w,{className:"game-center-main",column:!0,children:[t(Dv,{}),t(kv,{})]}),t(Pv,{})]})},Lv=[0,1,2,3,4,5,6,7,8],Uv=o=>{const{badgeParts:e=[],setBadgeParts:r=null}=o,[n,a]=i.exports.useState(-1),{groupCustomize:s=null}=so(),c=(u,m,p)=>{const g=[...e];g[u][m]=p,r(g),m==="key"&&a(-1)};return!e||!e.length?null:l(V,{children:[n<0&&e&&e.length>0&&e.map((u,m)=>l(w,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[l(w,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:p=>a(m),children:[e[m].code&&e[m].code.length>0&&t(je,{badgeCode:e[m].code,isGroup:!0}),(!e[m].code||!e[m].code.length)&&t(w,{center:!0,className:"badge-image group-badge",children:t(Ys,{className:"fa-icon"})})]}),u.type!==zt.BASE&&t(re,{gap:1,columnCount:3,children:Lv.map((p,g)=>t(L,{pointer:!0,className:`group-badge-position-swatch ${e[m].position===p?"active":""}`,onClick:h=>c(m,"position",p)},g))}),t(re,{gap:1,columnCount:8,children:s.badgePartColors.length>0&&s.badgePartColors.map((p,g)=>t(L,{pointer:!0,className:`group-badge-color-swatch ${e[m].color===g+1?"active":""}`,style:{backgroundColor:"#"+p.color},onClick:h=>c(m,"color",g+1)},g))})]},m)),n>=0&&l(re,{gap:1,columnCount:5,children:[e[n].type===zt.SYMBOL&&t(T,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:u=>c(n,"key",0),children:t(w,{center:!0,className:"badge-image group-badge",children:t(_r,{className:"fa-icon"})})}),(e[n].type===zt.BASE?s.badgeBases:s.badgeSymbols).map((u,m)=>t(T,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:p=>c(n,"key",u.id),children:t(je,{badgeCode:zt.getCode(e[n].type,u.id,e[n].color,4),isGroup:!0})},m))]})]})},lm=o=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null,skipDefault:a=null}=o,[s,c]=i.exports.useState(null),{groupCustomize:u=null}=so(),m=()=>{if(!s||!s.length)return"";let g="";return s.forEach(h=>h.code&&(g+=h.code)),g},p=i.exports.useCallback(()=>{if(!e||!s||!s.length)return!1;if(e.groupBadgeParts===s)return!0;if(e.groupId<=0)return r(h=>{const f={...h};return f.groupBadgeParts=s,f}),!0;const g=[];return s.forEach(h=>{h.code&&(g.push(h.key),g.push(h.color),g.push(h.position))}),D(new WI(e.groupId,g)),!0},[e,s,r]);return i.exports.useEffect(()=>{if(e.groupBadgeParts)return;const g=[new zt(zt.BASE,u.badgeBases[0].id,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id),new zt(zt.SYMBOL,0,u.badgePartColors[0].id)];r(h=>({...h,groupBadgeParts:g}))},[e.groupBadgeParts,u,r]),i.exports.useEffect(()=>{if(e.groupId<=0){c(e.groupBadgeParts?[...e.groupBadgeParts]:null);return}c(e.groupBadgeParts)},[e]),i.exports.useEffect(()=>(n({action:p}),()=>n(null)),[n,p]),l(re,{overflow:"hidden",gap:1,children:[t(T,{size:2,children:t(w,{center:!0,className:"bg-muted rounded p-1",children:t(je,{badgeCode:m(),isGroup:!0})})}),t(T,{size:10,overflow:"auto",children:t(Uv,{badgeParts:s,setBadgeParts:c})})]})},cm=o=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null}=o,[a,s]=i.exports.useState(null),{groupCustomize:c=null}=so(),u=g=>g===0?c.groupColorsA.find(h=>h.id===a[g]).color:c.groupColorsB.find(h=>h.id===a[g]).color,m=(g,h)=>{s(f=>{const _=[...f];return _[g]=h,_})},p=i.exports.useCallback(()=>!e||!a||!a.length?!1:e.groupColors===a?!0:e.groupId<=0?(r(g=>{const h={...g};return h.groupColors=[...a],h}),!0):(D(new jI(e.groupId,a[0],a[1])),!0),[e,a,r]);return i.exports.useEffect(()=>{if(!c.groupColorsA||!c.groupColorsB||e.groupColors)return;const g=[c.groupColorsA[0].id,c.groupColorsB[0].id];r(h=>({...h,groupColors:g}))},[c,e.groupColors,r]),i.exports.useEffect(()=>{if(e.groupId<=0){s(e.groupColors?[...e.groupColors]:null);return}s(e.groupColors)},[e]),i.exports.useEffect(()=>(n({action:p}),()=>n(null)),[n,p]),a?l(re,{overflow:"hidden",children:[l(T,{size:2,gap:1,children:[t(S,{bold:!0,children:d("group.edit.color.guild.color")}),e.groupColors&&e.groupColors.length>0&&l(w,{overflow:"hidden",className:"rounded border",children:[t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+u(0)}}),t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+u(1)}})]})]}),l(T,{size:5,gap:1,overflow:"hidden",children:[t(S,{bold:!0,children:d("group.edit.color.primary.color")}),t(Le,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsA&&c.groupColorsA.map((g,h)=>t("div",{className:Vt("group-badge-color-swatch cursor-pointer",e.groupColors[0]===g.id&&"active"),style:{backgroundColor:"#"+g.color},onClick:()=>m(0,g.id)},h))})]}),l(T,{size:5,gap:1,overflow:"hidden",children:[t(S,{bold:!0,children:d("group.edit.color.secondary.color")}),t(Le,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsB&&c.groupColorsB.map((g,h)=>t("div",{className:Vt("group-badge-color-swatch cursor-pointer",e.groupColors[1]===g.id&&"active"),style:{backgroundColor:"#"+g.color},onClick:()=>m(1,g.id)},h))})]})]}):null},Fv=o=>{const{groupData:e=null,setGroupData:r=null,purchaseCost:n=0}=o,{groupCustomize:a=null}=so(),s=()=>{if(!e||!e.groupBadgeParts||!e.groupBadgeParts.length)return"";let u="";return e.groupBadgeParts.forEach(m=>m.code&&(u+=m.code)),u},c=u=>u===0?a.groupColorsA.find(m=>m.id===e.groupColors[u]).color:a.groupColorsB.find(m=>m.id===e.groupColors[u]).color;return e?l(re,{overflow:"hidden",gap:1,children:[l(T,{size:3,children:[l(T,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(S,{bold:!0,center:!0,children:d("group.create.confirm.guildbadge")}),t(je,{badgeCode:s(),isGroup:!0})]}),l(T,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(S,{bold:!0,center:!0,children:d("group.edit.color.guild.color")}),l(w,{overflow:"hidden",className:"rounded border",children:[t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),t(L,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]})]}),l(T,{size:9,justifyContent:"between",children:[l(T,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:e.groupName}),t(S,{children:e.groupDescription})]}),t(S,{overflow:"auto",children:d("group.create.confirm.info")})]}),t(S,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:d("group.create.confirm.buyinfo",["amount"],[n.toString()])})]})]}):null},um=o=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null,onClose:a=null,isCreator:s=!1,availableRooms:c=[]}=o,[u,m]=i.exports.useState(""),[p,g]=i.exports.useState(""),[h,f]=i.exports.useState(-1),{showConfirm:_=null}=Xe(),I=()=>{!e||e.groupId<=0||_(d("group.deleteconfirm.desc"),()=>{D(new YI(e.groupId)),a&&a()},null,null,null,d("group.deleteconfirm.title"))},C=i.exports.useCallback(()=>!e||!u||!u.length?!1:u===e.groupName&&p===e.groupDescription?!0:e.groupId<=0?h<=0?!1:(r(E=>{const b={...E};return b.groupName=u,b.groupDescription=p,b.groupHomeroomId=h,b}),!0):(D(new qI(e.groupId,u,p||"")),!0),[e,u,p,h,r]);return i.exports.useEffect(()=>{m(e.groupName||""),g(e.groupDescription||""),f(e.groupHomeroomId)},[e]),i.exports.useEffect(()=>(n({action:C}),()=>n(null)),[n,C]),e?l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(S,{center:!0,className:"col-3",children:d("group.edit.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:29,onChange:E=>m(E.target.value)})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{center:!0,className:"col-3",children:d("group.edit.desc")}),t("textarea",{className:"form-control form-control-sm",value:p,maxLength:254,onChange:E=>g(E.target.value)})]}),s&&l(V,{children:[l(w,{alignItems:"center",gap:1,children:[t(S,{center:!0,className:"col-3",children:d("group.edit.base")}),t(T,{fullWidth:!0,gap:1,children:l("select",{className:"form-select form-select-sm",value:h,onChange:E=>f(parseInt(E.target.value)),children:[t("option",{value:-1,disabled:!0,children:d("group.edit.base.select.room")}),c&&c.map((E,b)=>t("option",{value:E.id,children:E.name},b))]})})]}),l(w,{gap:1,children:[t(L,{className:"col-3",children:""}),t(S,{small:!0,children:d("group.edit.base.warning")})]})]})]}),!s&&t(M,{variant:"danger",onClick:I,children:d("group.delete")}),s&&t(S,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:E=>ee("navigator/create"),children:d("group.createroom")})]}):null},Gv=[1,2,3,4],Bv=o=>{const{onClose:e=null}=o,[r,n]=i.exports.useState(1),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState(null),[g,h]=i.exports.useState(0),f=()=>{s(null),u(null),e&&e()},_=()=>{if(!c)return;const E=[];c.groupBadgeParts.forEach(b=>{b.code&&(E.push(b.key),E.push(b.color),E.push(b.position))}),D(new KI(c.groupName,c.groupDescription,c.groupHomeroomId,c.groupColors[0],c.groupColors[1],E))},I=()=>{if(!(a&&a.action&&!a.action())){if(r===1){e();return}n(E=>E-1)}},C=()=>{if(!(a&&a.action&&!a.action())){if(r===4){_();return}n(E=>E===4?E:E+1)}};return U(zI,E=>{const b=E.getParser(),N=[];b.availableRooms.forEach((v,y)=>N.push({id:y,name:v})),p(N),h(b.groupCost)}),i.exports.useEffect(()=>{n(1),u({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),D(new $I)},[u]),c?l(oe,{className:"nitro-group-creator",theme:"primary-slim",children:[t(se,{headerText:d("group.create.title"),onCloseClick:f}),l(ne,{children:[t(w,{center:!0,className:"creator-tabs",children:Gv.map((E,b)=>t(w,{center:!0,className:`tab tab-${E===1?"blue-flat":E===4?"yellow":"blue-arrow"} ${r===E?"active":""}`,children:t(S,{variant:"white",children:d(`group.create.steplabel.${E}`)})},b))}),l(T,{overflow:"hidden",children:[l(w,{alignItems:"center",gap:2,children:[t(L,{className:`nitro-group-tab-image tab-${r}`}),l(T,{grow:!0,gap:0,children:[t(S,{bold:!0,fontSize:4,children:d(`group.create.stepcaption.${r}`)}),t(S,{children:d(`group.create.stepdesc.${r}`)})]})]}),l(T,{overflow:"hidden",children:[r===1&&t(um,{groupData:c,setGroupData:u,setCloseAction:s,onClose:null,isCreator:!0,availableRooms:m}),r===2&&t(lm,{groupData:c,setGroupData:u,setCloseAction:s}),r===3&&t(cm,{groupData:c,setGroupData:u,setCloseAction:s}),r===4&&t(Fv,{groupData:c,setGroupData:u,purchaseCost:g})]}),l(w,{justifyContent:"between",children:[t(M,{variant:"link",className:"text-black",onClick:I,children:d(r===1?"generic.cancel":"group.create.previousstep")}),t(M,{disabled:r===4&&!qn(),variant:r===4?qn()?"success":"danger":"primary",onClick:C,children:d(r===4?qn()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null},Vv=["regular","exclusive","private"],dm=o=>{const{groupInformation:e=null,onClose:r=null,overflow:n="hidden",...a}=o,{showConfirm:s=null}=Xe(),c=e&&e.ownerName===H().userName,u=()=>e&&$i(e.id),m=()=>{s(d("group.leaveconfirm.desc"),()=>{D(new Fi(e.id,H().userId)),r&&r()},null)},p=()=>e.membershipType===vt.NOT_MEMBER||e.membershipType===vt.REQUEST_PENDING?null:c?t("i",{className:"icon icon-group-owner",title:d("group.youareowner")}):e.isAdmin?t("i",{className:"icon icon-group-admin",title:d("group.youareadmin")}):t("i",{className:"icon icon-group-member",title:d("group.youaremember")}),g=()=>{if(c)return"group.youareowner";if(e.type===ar.PRIVATE&&e.membershipType!==vt.MEMBER)return"";if(e.membershipType===vt.MEMBER)return"group.leave";if(e.membershipType===vt.NOT_MEMBER&&e.type===ar.REGULAR)return"group.join";if(e.membershipType===vt.REQUEST_PENDING)return"group.membershippending";if(e.membershipType===vt.NOT_MEMBER&&e.type===ar.EXCLUSIVE)return"group.requestmembership"},h=()=>{if(!(e.type===ar.PRIVATE&&e.membershipType===vt.NOT_MEMBER)){if(e.membershipType===vt.MEMBER){m();return}u()}},f=_=>{switch(_){case"members":zl(e.id);break;case"members_pending":zl(e.id,2);break;case"manage":gd(e.id);break;case"homeroom":Ir(e.roomId);break;case"furniture":ee("catalog/open/"+ut.GUILD_CUSTOM_FURNI);break;case"popular_groups":ee("navigator/search/groups");break}};return e?l(re,{overflow:n,...a,children:[l(T,{center:!0,size:3,overflow:"hidden",children:[t(w,{alignItems:"center",overflow:"hidden",className:"group-badge",children:t(je,{badgeCode:e.badge,isGroup:!0,scale:2})}),l(T,{alignItems:"center",gap:1,children:[t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("members"),children:d("group.membercount",["totalMembers"],[e.membersCount.toString()])}),e.pendingRequestsCount>0&&t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("members_pending"),children:d("group.pendingmembercount",["amount"],[e.pendingRequestsCount.toString()])}),e.isOwner&&t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("manage"),children:d("group.manage")})]}),p()]}),l(T,{size:9,justifyContent:"between",overflow:"auto",children:[l(T,{overflow:"hidden",children:[l(T,{gap:1,children:[l(w,{alignItems:"center",gap:2,children:[t(S,{bold:!0,children:e.title}),l(w,{gap:1,children:[t("i",{className:"icon icon-group-type-"+e.type,title:d(`group.edit.settings.type.${Vv[e.type]}.help`)}),e.canMembersDecorate&&t("i",{className:"icon icon-group-decorate",title:d("group.memberscandecorate")})]})]}),t(S,{small:!0,children:d("group.created",["date","owner"],[e.createdAt,e.ownerName])})]}),t(S,{small:!0,overflow:"auto",className:"group-description",children:e.description})]}),l(T,{children:[l(T,{gap:1,children:[t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("homeroom"),children:d("group.linktobase")}),t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("furniture"),children:d("group.buyfurni")}),t(S,{small:!0,underline:!0,pointer:!0,onClick:()=>f("popular_groups"),children:d("group.showgroups")})]}),(e.type!==ar.PRIVATE||e.type===ar.PRIVATE&&e.membershipType===vt.MEMBER)&&t(M,{disabled:e.membershipType===vt.REQUEST_PENDING||c,onClick:h,children:d(g())})]})]})]}):null},Hv=o=>{const[e,r]=i.exports.useState(null);return U(Ks,n=>{const a=n.getParser();(e&&e.id===a.id||a.flag)&&r(a)}),e?l(oe,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[t(se,{headerText:d("group.window.title"),onCloseClick:n=>r(null)}),t(ne,{children:t(dm,{groupInformation:e,onClose:()=>r(null)})})]}):null},Wv=["regular","exclusive","private"],jv=o=>{const{groupData:e=null,setGroupData:r=null,setCloseAction:n=null}=o,[a,s]=i.exports.useState(e.groupState),[c,u]=i.exports.useState(e.groupCanMembersDecorate),m=i.exports.useCallback(()=>e?a===e.groupState&&c===e.groupCanMembersDecorate?!0:e.groupId<=0?(r(p=>{const g={...p};return g.groupState=a,g.groupCanMembersDecorate=c,g}),!0):(D(new XI(e.groupId,a,c?0:1)),!0):!1,[e,a,c,r]);return i.exports.useEffect(()=>{s(e.groupState),u(e.groupCanMembersDecorate)},[e]),i.exports.useEffect(()=>(n({action:m}),()=>n(null)),[n,m]),l(T,{overflow:"auto",children:[t(T,{children:Wv.map((p,g)=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"groupState",checked:a===g,onChange:h=>s(g)}),l(T,{gap:0,children:[l(w,{gap:1,children:[t("i",{className:`icon icon-group-type-${g}`}),t(S,{bold:!0,children:d(`group.edit.settings.type.${p}.label`)})]}),t(S,{children:d(`group.edit.settings.type.${p}.help`)})]})]},g))}),t(Hb,{}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:c,onChange:p=>u(g=>!g)}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("group.edit.settings.rights.caption")}),t(S,{children:d("group.edit.settings.rights.members.help")})]})]})]})},qv=[1,2,3,5],Yv=o=>{const[e,r]=i.exports.useState(1),[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),u=()=>{a(p=>(p&&p.action&&p.action(),null)),c(null)},m=p=>{n&&n.action&&n.action(),r(p)};return U(Ks,p=>{const g=p.getParser();!s||s.groupId!==g.id||c(h=>{const f={...h};return f.groupName=g.title,f.groupDescription=g.description,f.groupState=g.type,f.groupCanMembersDecorate=g.canMembersDecorate,f})}),U(QI,p=>{const g=p.getParser(),h=[];g.badgeParts.forEach((f,_)=>{h.push(new Da(f.isBase?Da.BASE:Da.SYMBOL,f.key,f.color,f.position))}),c({groupId:g.id,groupName:g.title,groupDescription:g.description,groupHomeroomId:g.roomId,groupState:g.state,groupCanMembersDecorate:g.canMembersDecorate,groupColors:[g.colorA,g.colorB],groupBadgeParts:h})}),!s||s.groupId<=0?null:l(oe,{className:"nitro-group-manager",children:[t(se,{headerText:d("group.window.title"),onCloseClick:u}),t(In,{children:qv.map(p=>t(jr,{isActive:e===p,onClick:()=>m(p),children:d(`group.edit.tab.${p}`)},p))}),l(ne,{children:[l(w,{alignItems:"center",gap:2,children:[t(L,{className:`nitro-group-tab-image tab-${e}`}),l(T,{grow:!0,gap:0,children:[t(S,{bold:!0,fontSize:4,children:d(`group.edit.tabcaption.${e}`)}),t(S,{children:d(`group.edit.tabdesc.${e}`)})]})]}),l(T,{grow:!0,overflow:"hidden",children:[e===1&&t(um,{groupData:s,setGroupData:c,setCloseAction:a,onClose:u}),e===2&&t(lm,{groupData:s,setGroupData:c,setCloseAction:a,skipDefault:!0}),e===3&&t(cm,{groupData:s,setGroupData:c,setCloseAction:a}),e===5&&t(jv,{groupData:s,setGroupData:c,setCloseAction:a})]})]})]})},zv=o=>{const[e,r]=i.exports.useState(-1),[n,a]=i.exports.useState(-1),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(-1),[p,g]=i.exports.useState(0),[h,f]=i.exports.useState(""),[_,I]=i.exports.useState(null),{showConfirm:C=null}=Xe(),E=R=>{if(R.rank===Xt.OWNER)return"group.members.owner";if(s.admin){if(R.rank===Xt.ADMIN)return"group.members.removerights";if(R.rank===Xt.MEMBER)return"group.members.giverights"}return""},b=i.exports.useCallback(()=>{e===-1||n===-1||u===-1||D(new Rl(e,u,h,n))},[e,n,u,h]),N=R=>{!s.admin||R.rank===Xt.OWNER||(R.rank!==Xt.ADMIN?D(new eE(s.groupId,R.id)):D(new tE(s.groupId,R.id)),b())},v=R=>{!s.admin||R.rank!==Xt.REQUESTED||(D(new rE(s.groupId,R.id)),b())},y=R=>{if(s.admin){if(R.rank===Xt.REQUESTED){D(new nE(s.groupId,R.id)),b();return}I(R.name),D(new sE(s.groupId,R.id))}};return U(JI,R=>{const x=R.getParser();c(x),a(x.level),g(Math.ceil(x.totalMembersCount/x.pageSize))}),U(ZI,R=>{const x=R.getParser();C(d(x.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[_,x.furnitureCount.toString()]),()=>{D(new Fi(s.groupId,x.userId)),b()},null),I(null)}),i.exports.useEffect(()=>{const R={linkReceived:x=>{const F=x.split("/");if(F.length<2)return;const k=parseInt(F[1])||-1,A=parseInt(F[2])||3;r(k),a(A),m(0)},eventUrlPrefix:"group-members/"};return _t(R),()=>Ct(R)},[]),i.exports.useEffect(()=>{m(0)},[e,n,h]),i.exports.useEffect(()=>{e===-1||n===-1||u===-1||D(new Rl(e,u,h,n))},[e,n,u,h]),i.exports.useEffect(()=>{e!==-1&&(a(-1),c(null),g(0),f(""),I(null))},[e]),e===-1||!s?null:l(oe,{className:"nitro-group-members",theme:"primary-slim",children:[t(se,{headerText:d("group.members.title",["groupName"],[s?s.groupTitle:""]),onCloseClick:R=>r(-1)}),l(ne,{overflow:"hidden",children:[l(w,{gap:2,children:[t(w,{center:!0,className:"group-badge",children:t(je,{badgeCode:s.badge,isGroup:!0,className:"mx-auto d-block"})}),l(T,{fullWidth:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:d("group.members.searchinfo"),value:h,onChange:R=>f(R.target.value)}),l("select",{className:"form-select form-select-sm w-100",value:n,onChange:R=>a(parseInt(R.target.value)),children:[t("option",{value:"0",children:d("group.members.search.all")}),t("option",{value:"1",children:d("group.members.search.admins")}),t("option",{value:"2",children:d("group.members.search.pending")})]})]})]}),t(re,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:s.result.map((R,x)=>l(w,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[t("div",{className:"avatar-head cursor-pointer",onClick:()=>Jt(R.id),children:t(st,{figure:R.figure,headOnly:!0,direction:2})}),l(T,{grow:!0,gap:1,children:[t(S,{bold:!0,small:!0,pointer:!0,onClick:F=>Jt(R.id),children:R.name}),R.rank!==Xt.REQUESTED&&t(S,{small:!0,italics:!0,variant:"muted",children:d("group.members.since",["date"],[R.joinedAt])})]}),l(T,{gap:1,children:[R.rank!==Xt.REQUESTED&&t(w,{center:!0,children:t(L,{pointer:s.admin,className:`icon icon-group-small-${R.rank===Xt.OWNER?"owner":R.rank===Xt.ADMIN?"admin":s.admin&&R.rank===Xt.MEMBER?"not-admin":""}`,title:d(E(R)),onClick:F=>N(R)})}),s.admin&&R.rank===Xt.REQUESTED&&t(w,{alignItems:"center",children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:d("group.members.accept"),onClick:F=>v(R)})}),s.admin&&R.rank!==Xt.OWNER&&R.id!==H().userId&&t(w,{alignItems:"center",children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:d(R.rank===Xt.REQUESTED?"group.members.reject":"group.members.kick"),onClick:F=>y(R)})})]})]},x))}),l(w,{gap:1,justifyContent:"between",alignItems:"center",children:[t(M,{disabled:s.pageIndex===0,onClick:R=>m(x=>x-1),children:t(sr,{className:"fa-icon"})}),t(S,{small:!0,children:d("group.members.pageinfo",["amount","page","totalPages"],[s.totalMembersCount.toString(),(s.pageIndex+1).toString(),p.toString()])}),t(M,{disabled:s.pageIndex===p-1,onClick:R=>m(x=>x+1),children:t(or,{className:"fa-icon"})})]})]})]})},$v=o=>{const[e,r]=i.exports.useState(!1);return so(),U(oE,n=>{const a=n.getParser();r(!1),Ir(a.roomId)}),i.exports.useEffect(()=>{const n={linkReceived:a=>{const s=a.split("/");if(!(s.length<2))switch(s[1]){case"create":r(!0);return;case"manage":if(!s[2])return;r(!1),D(new aE(Number(s[2])));return}},eventUrlPrefix:"groups/"};return _t(n),()=>Ct(n)},[]),l(V,{children:[e&&t(Bv,{onClose:()=>r(!1)}),!e&&t(Yv,{}),t(zv,{}),t(Hv,{})]})},Kv=o=>{const{helpRequestDescription:e=null,helpRequestAverageTime:r=0}=o,n=a=>D(new iE(a));return l(T,{children:[l(T,{gap:0,className:"bg-muted p-2 rounded",children:[t(S,{bold:!0,children:d("guide.help.request.guide.accept.request.title")}),t(S,{variant:"muted",children:d("guide.help.request.type.1")}),t(S,{wrap:!0,textBreak:!0,children:e})]}),l(T,{gap:1,children:[t(M,{variant:"success",onClick:a=>n(!0),children:d("guide.help.request.guide.accept.accept.button")}),t(M,{variant:"danger",onClick:a=>n(!1),children:d("guide.help.request.guide.accept.skip.link")})]})]})},Xv=o=>{const{isOnDuty:e=!1,isHandlingGuideRequests:r=!1,setIsHandlingGuideRequests:n=null,isHandlingHelpRequests:a=!1,setIsHandlingHelpRequests:s=null,isHandlingBullyReports:c=!1,setIsHandlingBullyReports:u=null,guidesOnDuty:m=0,helpersOnDuty:p=0,guardiansOnDuty:g=0,processAction:h=null}=o;return l(T,{children:[l(w,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[t(L,{className:"duty-switch"+(e?"":" off"),onClick:f=>h("toggle_duty")}),l(T,{gap:0,children:[t(S,{bold:!0,children:d("guide.help.guide.tool.yourstatus")}),t(S,{children:d(`guide.help.guide.tool.duty.${e?"on":"off"}`)})]})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("guide.help.guide.tool.tickettypeselection.caption")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:r,onChange:f=>n(f.target.checked)}),t(S,{children:d("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:a,onChange:f=>s(f.target.checked)}),t(S,{children:d("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:c,onChange:f=>u(f.target.checked)}),t(S,{children:d("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),t("hr",{className:"bg-dark m-0"}),l(w,{center:!0,gap:2,children:[t(L,{className:"info-icon"}),l(T,{gap:1,children:[t(L,{dangerouslySetInnerHTML:{__html:d("guide.help.guide.tool.guidesonduty",["amount"],[m.toString()])}}),t(L,{dangerouslySetInnerHTML:{__html:d("guide.help.guide.tool.helpersonduty",["amount"],[p.toString()])}}),t(L,{dangerouslySetInnerHTML:{__html:d("guide.help.guide.tool.guardiansonduty",["amount"],[g.toString()])}})]})]}),t("hr",{className:"bg-dark m-0"}),l(w,{justifyContent:"between",gap:2,children:[t(M,{disabled:!0,onClick:f=>h("forum_link"),children:d("guide.help.guide.tool.forum.link")}),t(M,{disabled:!0,children:d("guide.help.guide.tool.skill.link")})]})]})},Qv=o=>{const e=i.exports.useRef(null),{isGuide:r=!1,userId:n=0,userName:a=null,userFigure:s=null,isTyping:c=!1,messageGroups:u=[]}=o,[m,p]=i.exports.useState("");i.exports.useEffect(()=>{var E;(E=e.current)==null||E.scrollIntoView({block:"end",behavior:"smooth"})},[u]);const g=i.exports.useCallback(()=>{D(new lE)},[]),h=i.exports.useCallback(()=>{D(new cE)},[]),f=i.exports.useCallback(()=>{D(new uE)},[]);U(dE,E=>{const b=E.getParser();Ir(b.requesterRoomId)});const _=i.exports.useCallback(()=>{!m||!m.length||(D(new mE(m)),p(""))},[m]),I=i.exports.useCallback(E=>{E.key==="Enter"&&_()},[_]),C=i.exports.useCallback(E=>E===H().userId,[]);return l(T,{fullHeight:!0,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[r&&l(Zr,{children:[t(M,{onClick:g,children:d("guide.help.request.guide.ongoing.visit.button")}),t(M,{onClick:h,children:d("guide.help.request.guide.ongoing.invite.button")})]}),!r&&l(T,{gap:0,children:[t(S,{bold:!0,children:a}),t(S,{children:d("guide.help.request.user.ongoing.guide.desc")})]}),t(M,{variant:"danger",disabled:!0,children:d("guide.help.common.report.link")})]}),t(T,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:l(T,{overflow:"auto",children:[u.map((E,b)=>l(w,{fullWidth:!0,justifyContent:C(E.userId)?"end":"start",gap:2,children:[t(L,{shrink:!0,className:"message-avatar",children:!C(E.userId)&&t(st,{figure:s,direction:2})}),l(L,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(C(E.userId)?"right":"left"),children:[l(S,{bold:!0,children:[C(E.userId)&&H().userName,!C(E.userId)&&a]}),E.messages.map((N,v)=>t(L,{pointer:!!N.roomId,className:N.roomId?"text-break text-underline":"text-break",onClick:()=>N.roomId?Ir(N.roomId):null,children:N.message},v))]}),C(E.userId)&&t(L,{className:"message-avatar flex-shrink-0",children:t(st,{figure:H().figure,direction:4})})]},b)),t("div",{ref:e})]})}),l(T,{gap:1,children:[l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("guide.help.request.guide.ongoing.input.empty",["name"],[a]),value:m,onChange:E=>p(E.target.value),onKeyDown:I}),t(M,{variant:"success",onClick:_,children:d("widgets.chatinput.say")})]}),c&&t(S,{variant:"muted",children:d("guide.help.common.typing")})]}),t(M,{fullWidth:!0,variant:"success",onClick:f,children:d("guide.help.request."+(r?"guide":"user")+".ongoing.close.link")})]})},Jv=15,Zv=o=>{const{userRequest:e="",setUserRequest:r=null}=o,[n,a]=i.exports.useState(!1),s=()=>{a(!0),D(new gE(1,e))};return l(T,{children:[t(S,{children:d("guide.help.request.user.create.help")}),t("textarea",{className:"request-message",maxLength:140,value:e,onChange:c=>r(c.target.value),placeholder:d("guide.help.request.user.create.input.help")}),t(M,{fullWidth:!0,variant:"success",disabled:e.length<Jv||n,onClick:s,children:d("guide.help.request.user.create.input.button")})]})},ew=o=>{const{userName:e=null}=o,r=n=>D(new pE(n));return l(T,{children:[l(w,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[l(T,{gap:0,children:[t(S,{bold:!0,children:e}),t(S,{children:d("guide.help.request.user.feedback.guide.desc")})]}),t(M,{variant:"danger",disabled:!0,children:d("guide.help.common.report.link")})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("guide.help.request.user.feedback.closed.title")}),t(S,{children:d("guide.help.request.user.feedback.closed.desc")})]}),e&&e.length>0&&l(V,{children:[t("hr",{className:"bg-dark m-0 mt-auto"}),l(T,{children:[t(S,{center:!0,bold:!0,children:d("guide.help.request.user.feedback.question")}),l(w,{gap:1,children:[t(M,{fullWidth:!0,variant:"success",onClick:n=>r(!0),children:d("guide.help.request.user.feedback.positive.button")}),t(M,{fullWidth:!0,variant:"danger",onClick:n=>r(!1),children:d("guide.help.request.user.feedback.negative.button")})]})]})]})]})},tw=o=>l(T,{gap:1,children:[t(S,{bold:!0,children:d("guide.help.request.no_tour_guides.title")}),t(S,{children:d("guide.help.request.no_tour_guides.message")})]}),rw=o=>{const{helpRequestDescription:e=null,helpRequestAverageTime:r=0}=o,n=()=>D(new hE);return l(T,{children:[l(T,{gap:0,className:"bg-muted rounded p-2",children:[t(S,{bold:!0,children:d("guide.help.request.guide.accept.request.title")}),t(S,{variant:"muted",children:d("guide.help.request.type.1")}),t(S,{wrap:!0,textBreak:!0,children:e})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("guide.help.request.user.pending.info.title")}),t(S,{children:d("guide.help.request.user.pending.info.message")}),t(S,{children:d("guide.help.request.user.pending.info.waiting",["waitingtime"],[r.toString()])})]}),t(M,{variant:"danger",onClick:n,children:d("guide.help.request.user.pending.cancel.button")})]})},nw=o=>t(T,{gap:1,children:t(S,{children:d("guide.help.request.user.guide.disconnected.error.desc")})}),sw=o=>l(T,{gap:1,children:[t(S,{bold:!0,children:d("guide.help.request.user.thanks.info.title")}),t(S,{children:d("guide.help.request.user.thanks.info.desc")})]}),ow=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(d("guide.help.guide.tool.title")),[s,c]=i.exports.useState(!1),[u,m]=i.exports.useState(ge.GUIDE_TOOL_MENU),[p,g]=i.exports.useState(!1),[h,f]=i.exports.useState(!1),[_,I]=i.exports.useState(!1),[C,E]=i.exports.useState(!1),[b,N]=i.exports.useState(0),[v,y]=i.exports.useState(0),[R,x]=i.exports.useState(0),[F,k]=i.exports.useState(""),[A,O]=i.exports.useState(null),[P,B]=i.exports.useState(0),[G,z]=i.exports.useState(0),[X,Y]=i.exports.useState(null),[Ee,le]=i.exports.useState(null),[Pe,Qe]=i.exports.useState(!1),[ht,Ze]=i.exports.useState([]),{simpleAlert:Gt=null}=Xe(),We=i.exports.useCallback((Fe,Ie)=>{switch(Fe){case ge.GUIDE_TOOL_MENU:a(d("guide.help.guide.tool.title")),c(!1);break;case ge.GUIDE_ACCEPT:a(d("guide.help.request.guide.accept.title")),c(!0);break;case ge.GUIDE_ONGOING:a(d("guide.help.request.guide.ongoing.title",["name"],[Ie])),c(!0);break;case ge.USER_CREATE:a(d("guide.help.request.user.create.title")),c(!1);break;case ge.USER_PENDING:a(d("guide.help.request.user.pending.title")),c(!0);break;case ge.USER_ONGOING:a(d("guide.help.request.user.ongoing.title",["name"],[Ie])),c(!0);break;case ge.USER_FEEDBACK:a(d("guide.help.request.user.feedback.title")),c(!0);break;case ge.USER_THANKS:a(d("guide.help.request.user.thanks.title")),c(!1);break;case ge.USER_NO_HELPERS:a(d("guide.help.request.no_tour_guides.heading")),c(!1);break;case ge.USER_SOMETHING_WRONG:a(d("guide.help.request.user.guide.disconnected.error.heading")),c(!1);break}m(Fe),r(!0)},[]),Yt=i.exports.useCallback(Fe=>{switch(Fe.type){case Ht.SHOW_GUIDE_TOOL:r(!0);return;case Ht.HIDE_GUIDE_TOOL:r(!1);return;case Ht.TOGGLE_GUIDE_TOOL:r(Ie=>!Ie);return;case Ht.CREATE_HELP_REQUEST:We(ge.USER_CREATE);return}},[We]);lt(Ht.SHOW_GUIDE_TOOL,Yt),lt(Ht.HIDE_GUIDE_TOOL,Yt),lt(Ht.TOGGLE_GUIDE_TOOL,Yt),lt(Ht.CREATE_HELP_REQUEST,Yt),U(Bu,Fe=>{!Fe.getParser().isAllowed(Gu.USE_GUIDE_TOOL)&&p&&(g(!1),D(new xl(!1,!1,!1,!1)))}),U(fE,Fe=>{const Ie=Fe.getParser();g(Ie.onDuty),y(Ie.guidesOnDuty),N(Ie.helpersOnDuty),x(Ie.guardiansOnDuty)}),U(IE,Fe=>{const Ie=Fe.getParser();O(Ie.helpRequestDescription),B(Ie.roleSpecificWaitTime),Ie.asGuide&&p&&We(ge.GUIDE_ACCEPT),Ie.asGuide||We(ge.USER_PENDING)}),U(EE,Fe=>{const Ie=Fe.getParser();p?(z(Ie.requesterUserId),Y(Ie.requesterName),le(Ie.requesterFigure),We(ge.GUIDE_ONGOING,Ie.requesterName)):(z(Ie.guideUserId),Y(Ie.guideName),le(Ie.guideFigure),We(ge.USER_ONGOING,Ie.guideName))}),U(_E,Fe=>{const Ie=Fe.getParser();Qe(Ie.isTyping)}),U(CE,Fe=>{const Ie=Fe.getParser(),ze=[...ht];let yt=ze[ze.length-1];(!yt||yt.userId!==Ie.senderId)&&(yt=new Kl(Ie.senderId),ze.push(yt)),yt.addChat(new $l(Ie.chatMessage)),Ze(ze)}),U(bE,Fe=>{const Ie=Fe.getParser();if(Ie.roomId!==0){const ze=[...ht];let yt=ze[ze.length-1];const me=p?H().userId:G;(!yt||yt.userId!==me)&&(yt=new Kl(me),ze.push(yt)),yt.addChat(new $l(Ie.roomName,Ie.roomId)),Ze(ze)}}),U(SE,Fe=>{p?(z(0),Y(null),le(null),Qe(!1),Ze([]),We(ge.GUIDE_TOOL_MENU)):We(ge.USER_FEEDBACK)}),U(NE,Fe=>{switch(Fe.getParser().errorCode){case 0:We(ge.USER_SOMETHING_WRONG);break;case 1:case 2:We(ge.USER_NO_HELPERS);break}}),U(TE,Fe=>{z(0),Y(null),le(null),Qe(!1),Ze([]),We(p?ge.GUIDE_TOOL_MENU:ge.USER_THANKS)}),i.exports.useEffect(()=>{const Fe={linkReceived:Ie=>{const ze=Ie.split("/");if(!(ze.length<2))switch(ze[1]){case"tour":return}},eventUrlPrefix:"help/"};return _t(Fe),()=>Ct(Fe)},[]);const Sr=i.exports.useCallback(Fe=>{switch(Fe){case"close":r(!1),k(""),m(ge.GUIDE_TOOL_MENU);return;case"toggle_duty":if(!h&&!_&&!C){Gt(d("guide.help.guide.tool.noqueueselected.message"),null,null,null,d("guide.help.guide.tool.noqueueselected.caption"),null);return}g(ze=>(D(new xl(!ze,ze?!1:_,ze?!1:C,ze?!1:h)),!ze));return;case"forum_link":const Ie=K("group.homepage.url","").replace("%groupid%",K("guide.help.alpha.groupid","0"));window.open(Ie);return}},[h,_,C,Gt]);return e?l(oe,{className:"nitro-guide-tool",theme:"primary-slim",children:[t(se,{headerText:n,onCloseClick:Fe=>Sr("close"),noCloseButton:s}),l(ne,{className:"text-black",children:[u===ge.GUIDE_TOOL_MENU&&t(Xv,{isOnDuty:p,isHandlingGuideRequests:_,setIsHandlingGuideRequests:I,isHandlingHelpRequests:C,setIsHandlingHelpRequests:E,isHandlingBullyReports:h,setIsHandlingBullyReports:f,guidesOnDuty:v,helpersOnDuty:b,guardiansOnDuty:R,processAction:Sr}),u===ge.GUIDE_ACCEPT&&t(Kv,{helpRequestDescription:A,helpRequestAverageTime:P}),[ge.GUIDE_ONGOING,ge.USER_ONGOING].includes(u)&&t(Qv,{isGuide:p,userId:G,userName:X,userFigure:Ee,isTyping:Pe,messageGroups:ht}),u===ge.USER_CREATE&&t(Zv,{userRequest:F,setUserRequest:k}),u===ge.USER_PENDING&&t(rw,{helpRequestDescription:A,helpRequestAverageTime:P}),u===ge.USER_FEEDBACK&&t(ew,{userName:X}),u===ge.USER_THANKS&&t(sw,{}),u===ge.USER_NO_HELPERS&&t(tw,{}),u===ge.USER_SOMETHING_WRONG&&t(nw,{})]})]}):null},aw=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(0),[u,m]=i.exports.useState(null),{userFigure:p=null}=_n(),{purse:g=null,clubStatus:h=null}=es(),{badgeCodes:f=[],activate:_=null,deactivate:I=null}=_a(),C=()=>g.clubDays<=0?d("purse.clubdays.zero.amount.text"):g.minutesUntilExpiration>-1&&g.minutesUntilExpiration<60*24?Vr.shortFormat(g.minutesUntilExpiration*60):Vr.shortFormat((g.clubPeriods*31+g.clubDays)*86400),E=()=>{switch(h){case Gr.ACTIVE:return d(`hccenter.status.${h}.info`,["timeleft","joindate","streakduration"],[C(),n==null?void 0:n.firstSubscriptionDate,Vr.shortFormat((n==null?void 0:n.currentHcStreak)*86400)]);case Gr.EXPIRED:return d(`hccenter.status.${h}.info`,["joindate"],[n==null?void 0:n.firstSubscriptionDate]);default:return d(`hccenter.status.${h}.info`)}},b=()=>!n||n.timeUntilPayday<60?d("hccenter.special.time.soon"):Vr.shortFormat(n.timeUntilPayday*60),N=()=>d("hccenter.special.sum",["credits"],[((n==null?void 0:n.creditRewardForStreakBonus)+(n==null?void 0:n.creditRewardForMonthlySpent)).toString()]);if(U(_u,y=>{const R=y.getParser();c(R.giftsAvailable)}),U(vE,y=>{const R=y.getParser();a(R.data)}),i.exports.useEffect(()=>{const y={linkReceived:R=>{const x=R.split("/");if(!(x.length<2))switch(x[1]){case"open":if(x.length>2)switch(x[2]){case"hccenter":r(!0);break}return}},eventUrlPrefix:"habboUI/"};return _t(y),()=>Ct(y)},[]),i.exports.useEffect(()=>{m(hb(f))},[f]),i.exports.useEffect(()=>{if(!e)return;const y=_();return()=>I(y)},[e,_,I]),i.exports.useEffect(()=>{D(new Cu),D(new wE)},[]),!e)return null;const v=t(Bo,{id:"popover-basic",children:l(Bo.Body,{className:"text-black py-2 px-3",children:[t("h5",{children:d("hccenter.breakdown.title")}),t("div",{children:d("hccenter.breakdown.creditsspent",["credits"],[n==null?void 0:n.totalCreditsSpent.toString()])}),t("div",{children:d("hccenter.breakdown.paydayfactor.percent",["percent"],[((n==null?void 0:n.kickbackPercentage)*100).toString()])}),t("div",{children:d("hccenter.breakdown.streakbonus",["credits"],[n==null?void 0:n.creditRewardForStreakBonus.toString()])}),t("hr",{className:"w-100 text-black my-1"}),t("div",{children:d("hccenter.breakdown.total",["credits","actual"],[N(),(((n==null?void 0:n.kickbackPercentage)*(n==null?void 0:n.totalCreditsSpent)+(n==null?void 0:n.creditRewardForStreakBonus))*100/100).toString()])}),t("div",{className:"btn btn-link text-primary p-0",onClick:()=>ee("habbopages/"+K("hc.center")["payday.habbopage"]),children:d("hccenter.special.infolink")})]})});return l(oe,{theme:"primary-slim",className:"nitro-hc-center",children:[t(se,{headerText:d("generic.hccenter"),onCloseClick:()=>r(!1)}),l(w,{position:"relative",className:"bg-muted p-2",children:[l(T,{gap:1,children:[t("div",{className:"hc-logo"}),t(w,{children:t(M,{variant:"success",onClick:y=>ee("catalog/open/"+K("catalog.links")["hc.buy_hc"]),children:d(h===Gr.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),t(L,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:t(st,{figure:p,direction:4,scale:2})})]}),l(ne,{children:[l(w,{gap:2,children:[t(je,{badgeCode:u,className:"align-self-center flex-shrink-0 me-1"}),l(T,{size:5,className:"streak-info",gap:0,children:[t(S,{children:d("hccenter.status."+h)}),t(S,{dangerouslySetInnerHTML:{__html:E()}})]})]}),K("hc.center")["payday.info"]&&l(w,{alignItems:"center",children:[l(T,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[t("h4",{className:"mb-1",children:d("hccenter.special.title")}),t("div",{children:d("hccenter.special.info")}),t("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:()=>ee("habbopages/"+K("hc.center")["payday.habbopage"]),children:d("hccenter.special.infolink")})]}),l("div",{className:"payday flex-shrink-0 p-2",children:[t("h5",{className:"mb-2 ms-2",children:d("hccenter.special.time.title")}),l("div",{className:"d-flex flex-row mb-2",children:[t("div",{className:"clock me-2"}),t("h6",{className:"mb-0 align-self-center",children:b()})]}),h===Gr.ACTIVE&&l("div",{className:"pe-3",children:[t("h5",{className:"ms-2 mb-1 bolder",children:d("hccenter.special.amount.title")}),l("div",{className:"d-flex flex-column",children:[t("div",{className:"w-100 text-center ms-4n",children:N()}),t(mu,{trigger:["hover","focus"],placement:"left",overlay:v,children:t("div",{className:"btn btn-link align-self-end text-primary",children:d("hccenter.breakdown.infolink")})})]})]})]})]}),K("hc.center")["gift.info"]&&l("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[l("div",{children:[t("h4",{className:"mb-1",children:d("hccenter.gift.title")}),t("div",{dangerouslySetInnerHTML:{__html:s>0?d("hccenter.unclaimedgifts",["unclaimedgifts"],[s.toString()]):d("hccenter.gift.info")}})]}),t("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:()=>ee("catalog/open/"+K("catalog.links")["hc.hc_gifts"]),children:d(h===Gr.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),K("hc.center")["benefits.info"]&&l("div",{className:"benefits text-black py-2",children:[t("h5",{className:"mb-1 text-primary",children:d("hccenter.general.title")}),t("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:d("hccenter.general.info")}}),t("button",{className:"btn btn-link p-0 text-primary",onClick:()=>ee("habbopages/"+K("hc.center")["benefits.habbopage"]),children:d("hccenter.general.infolink")})]})]})]})},iw=o=>{const[e,r]=i.exports.useState(""),{activeReport:n=null,setActiveReport:a=null}=Pr(),s=()=>{e.length<15||a(u=>{const m=At.REPORT_SUMMARY;return{...u,message:e,currentStep:m}})},c=()=>{a(u=>({...u,currentStep:u.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:d("help.emergency.chat_report.subtitle")}),t(S,{children:d("help.cfh.input.text")})]}),t("textarea",{className:"form-control h-100",value:e,onChange:u=>r(u.target.value)}),l(w,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",disabled:!(n.reportType===Ve.BULLY||n.reportType===Ve.EMERGENCY),onClick:c,children:d("generic.back")}),t(M,{disabled:e.length<15,onClick:s,children:d("help.emergency.main.submit.button")})]})]})},lw=o=>{const{setActiveReport:e=null}=Pr(),r=()=>{e(n=>{const a=At.SELECT_USER,s=Ve.BULLY;return{...n,currentStep:a,reportType:s}})};return l(V,{children:[l(T,{grow:!0,center:!0,gap:1,children:[t(S,{fontSize:3,children:d("help.main.frame.title")}),t(S,{children:d("help.main.self.description")})]}),l(T,{gap:1,children:[t(M,{onClick:r,children:d("help.main.bully.subtitle")}),t(M,{onClick:()=>St(new Ht(Ht.CREATE_HELP_REQUEST)),disabled:!K("guides.enabled"),children:d("help.main.help.title")}),t(M,{disabled:!0,children:d("help.main.self.tips.title")})]}),t(M,{variant:"link",textColor:"black",onClick:()=>D(new RE(!1)),children:d("help.main.my.sanction.status")})]})},cw=o=>{const{username:e="",onAction:r=null}=o,[n,a]=i.exports.useState(!1),s=()=>{n||(a(!0),D(new yE(e)))};return U(xE,c=>{const u=c.getParser();u&&u.webId===H().userId&&r("close")}),l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:d("tutorial.name_change.info.confirm")}),l("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[t("div",{children:d("tutorial.name_change.confirm")}),t("div",{className:"fw-bold",children:e})]}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:n,onClick:s,children:d("generic.ok")}),t("button",{className:"btn btn-primary w-100",onClick:()=>r("close"),children:d("cancel")})]})]})},uw=o=>{const{onAction:e=null}=o;return l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:d("tutorial.name_change.info.main")}),t("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:d("tutorial.name_change.current",["name"],[H().userName])}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",onClick:()=>e("start"),children:d("tutorial.name_change.change")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("confirmation",H().userName),children:d("tutorial.name_change.keep")})]})]})},dw=0,mw=2,gw=3,pw=4,hw=5,fw=6,Iw=o=>{const{onAction:e=null}=o,[r,n]=i.exports.useState(""),[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),[m,p]=i.exports.useState(null),[g,h]=i.exports.useState([]),f=()=>{r!==""&&(s(!1),h([]),p(null),u(!0),D(new AE(r)))},_=I=>{s(!1),h([]),p(null),n(I)};return U(OE,I=>{u(!1);const C=I.getParser();if(C)switch(C.resultCode){case dw:s(!0);break;case mw:p("short");break;case gw:p("long");break;case pw:p("invalid");break;case hw:h(C.nameSuggestions),p("taken");break;case fw:p("change_not_allowed")}}),l("div",{className:"d-flex flex-column gap-3 h-100",children:[t("div",{children:d("tutorial.name_change.info.select")}),l("div",{className:"d-flex gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",value:r,onChange:I=>_(I.target.value)}),t("button",{className:"btn btn-primary",disabled:r===""||c,onClick:f,children:d("tutorial.name_change.check")})]}),!m&&!a&&t("div",{className:"bg-muted rounded p-2 text-center",children:d("help.tutorial.name.info")}),m&&t("div",{className:"bg-danger rounded p-2 text-center text-white",children:d(`help.tutorial.name.${m}`,["name"],[r])}),a&&t("div",{className:"bg-success rounded p-2 text-center text-white",children:d("help.tutorial.name.available",["name"],[r])}),g&&t("div",{className:"d-flex flex-column gap-2",children:g.map((I,C)=>t("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>_(I),children:I},C))}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:!a,onClick:()=>e("confirmation",r),children:d("tutorial.name_change.pick")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("close"),children:d("cancel")})]})]})},yo="INIT",ja="INPUT",qa="CONFIRMATION",Ew=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(yo),[s,c]=i.exports.useState(""),u=(p,g)=>{switch(p){case"start":a(ja);break;case"confirmation":c(g),a(qa);break;case"close":c(""),r(!1);break}},m=i.exports.useMemo(()=>{switch(n){case yo:return"tutorial.name_change.title.main";case ja:return"tutorial.name_change.title.select";case qa:return"tutorial.name_change.title.confirm"}},[n]);return lt(ra.INIT,p=>{a(yo),r(!0)}),e?l(oe,{className:"nitro-change-username",theme:"primary-slim",children:[t(se,{headerText:d(m),onCloseClick:()=>u("close")}),l(ne,{className:"text-black",children:[n===yo&&t(uw,{onAction:u}),n===ja&&t(Iw,{onAction:u}),n===qa&&t(cw,{username:s,onAction:u})]})]}):null},_w=o=>{const{activeReport:e=null,setActiveReport:r=null}=Pr(),n=()=>{const a=[];switch(e.reportType){case Ve.BULLY:case Ve.EMERGENCY:case Ve.ROOM:{const s=e.roomId<=0?e.reportedChats[0].roomId:e.roomId;e.reportedChats.forEach(c=>a.push(c.webId,c.message)),D(new LE(e.message,e.cfhTopic,e.reportedUserId,s,a));break}case Ve.IM:e.reportedChats.forEach(s=>a.push(s.webId,s.message)),D(new ME(e.message,e.cfhTopic,e.reportedUserId,a));break;case Ve.THREAD:D(new DE(e.groupId,e.threadId,e.cfhTopic,e.message));break;case Ve.MESSAGE:D(new PE(e.groupId,e.threadId,e.messageId,e.cfhTopic,e.message));break;case Ve.PHOTO:D(new kE(e.extraData,e.roomId,e.reportedUserId,e.cfhTopic,e.roomObjectId));break}r(null)};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:d("help.cfh.button.send")}),t(S,{children:d("help.main.summary")})]}),t(M,{variant:"success",onClick:n,children:d("guide.help.request.emergency.submit.button")})]})},Cw=o=>{const{sanctionInfo:e=null,setSanctionInfo:r=null}=Pr(),n=(a,s,c)=>{let u=`help.sanction.${a}`;switch(s){case"ALERT":u=u+".alert";break;case"MUTE":u=u+".mute";break;case"BAN_PERMANENT":u=u+".permban";break;default:if(u=u+".ban",c>24)return u=u+".days",d(u,["days"],[(c/24).toString()])}return d(u,["hours"],[c.toString()])};return e?l(oe,{className:"nitro-help",theme:"primary-slim",children:[t(se,{headerText:d("help.sanction.info.title"),onCloseClick:()=>r(null)}),t(ne,{className:"text-black",children:l(re,{children:[t(T,{center:!0,size:5,overflow:"hidden",children:t(L,{className:"index-image"})}),l(T,{justifyContent:"between",size:7,overflow:"hidden",children:[e.sanctionReason==="cfh.reason.EMPTY"?t("div",{className:"col-12 fw-bold",children:d("help.sanction.current.none")}):l(V,{children:[(e.probationHoursLeft>0||e.isSanctionActive)&&t("div",{className:"col-12 fw-bold",children:d("help.sanction.probation.reminder")}),l("div",{className:`col-12 fw-bold ${e.isSanctionNew?"text-danger":""}`,children:[d("help.sanction.last.sanction")," ",n("current",e.sanctionName,e.sanctionLengthHours)]}),l("div",{className:"col-12",children:[d("generic.start.time")," ",e.sanctionCreationTime]}),l("div",{className:"col-12",children:[d("generic.reason")," ",e.sanctionReason]}),l("div",{className:"col-12",children:[d("help.sanction.probation.days.left")," ",Math.trunc(e.probationHoursLeft/24)+1]})]}),e.hasCustomMute&&!e.isSanctionActive&&t("div",{className:"col-12 fw-bold",children:d("help.sanction.custom.mute")}),e.tradeLockExpiryTime&&e.tradeLockExpiryTime.length>0&&l("div",{className:"col-12 fw-bold",children:[d("trade.locked.until")," ",e.tradeLockExpiryTime]}),t("div",{className:"col-12",children:n("next",e.nextSanctionName,e.nextSanctionLengthHours)}),t(M,{variant:"success",onClick:a=>r(null),children:d("habbo.way.ok.button")})]})]})})]}):null},bw=o=>{const[e,r]=i.exports.useState([]),{activeReport:n=null,setActiveReport:a=null}=Pr(),{chatHistory:s=[],messengerHistory:c=[]}=fa(),u=i.exports.useMemo(()=>{switch(n.reportType){case Ve.BULLY:case Ve.EMERGENCY:return s.filter(h=>h.type===Ar.TYPE_CHAT&&h.webId===n.reportedUserId&&h.entityType===pt.USER);case Ve.IM:return c.filter(h=>h.webId===n.reportedUserId&&h.type===Ar.TYPE_IM)}return[]},[n,s,c]),m=h=>{r(f=>{const _=[...f],I=_.indexOf(h);return I>=0?_.splice(I,1):_.push(h),_})},p=()=>{!e||e.length<=0||a(h=>({...h,reportedChats:e,currentStep:At.SELECT_TOPICS}))},g=()=>{a(h=>({...h,currentStep:h.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:d("help.emergency.chat_report.subtitle")}),t(S,{children:d("help.emergency.chat_report.description")})]}),l(T,{gap:1,overflow:"hidden",children:[!u||!u.length&&t(S,{children:d("help.cfh.error.no_user_data")}),u.length>0&&t(Le,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:u.map((h,f)=>t(be,{onClick:_=>m(h),itemActive:e.indexOf(h)>=0,children:t(S,{children:h.message})},h.id))})]}),l(w,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",onClick:g,disabled:n.reportType===Ve.IM,children:d("generic.back")}),t(M,{disabled:e.length<=0,onClick:p,children:d("help.emergency.main.submit.button")})]})]})},Sw=o=>{const[e,r]=i.exports.useState(-1),{chatHistory:n=[]}=fa(),{activeReport:a=null,setActiveReport:s=null}=Pr(),c=i.exports.useMemo(()=>{const g=new Map;return n.forEach(h=>{h.type===Ar.TYPE_CHAT&&h.entityType===pt.USER&&h.webId!==H().userId&&!g.has(h.webId)&&g.set(h.webId,{id:h.webId,username:h.name})}),Array.from(g.values())},[n]),u=g=>{g<=0||s(h=>({...h,reportedUserId:g,currentStep:At.SELECT_CHATS}))},m=g=>{r(h=>g===h?-1:g)},p=()=>{s(g=>({...g,currentStep:g.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:d("help.emergency.main.step.two.title")}),c.length>0&&t(S,{children:d("report.user.pick.user")})]}),l(T,{gap:1,overflow:"hidden",children:[!c.length&&t(S,{children:d("report.user.error.nolist")}),c.length>0&&t(Le,{columnCount:1,columnMinHeight:25,gap:1,children:c.map((g,h)=>t(be,{onClick:f=>m(g.id),itemActive:e===g.id,children:t("span",{dangerouslySetInnerHTML:{__html:g.username}})},g.id))})]}),l(w,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",onClick:p,children:d("generic.back")}),t(M,{disabled:e<=0,onClick:()=>u(e),children:d("help.emergency.main.submit.button")})]})]})},Nw=o=>{const[e,r]=i.exports.useState(-1),[n,a]=i.exports.useState(-1),{setActiveReport:s=null}=Pr(),{cfhCategories:c=[]}=vs(),u=()=>{e<0||n<0||s(p=>({...p,cfhCategory:e,cfhTopic:c[e].topics[n].id,currentStep:At.INPUT_REPORT_MESSAGE}))},m=()=>{s(p=>({...p,currentStep:p.currentStep-1}))};return l(V,{children:[l(T,{gap:1,children:[t(S,{fontSize:4,children:d("help.emergency.chat_report.subtitle")}),t(S,{children:d("help.cfh.pick.topic")})]}),l(T,{gap:1,overflow:"auto",children:[e<0&&c.map((p,g)=>t(M,{variant:"danger",onClick:h=>r(g),children:d(`help.cfh.reason.${p.name}`)},g)),e>=0&&c[e].topics.map((p,g)=>t(M,{variant:"danger",onClick:h=>a(g),active:n===g,children:d(`help.cfh.topic.${p.id}`)},g))]}),l(w,{gap:2,justifyContent:"between",children:[t(M,{variant:"secondary",onClick:m,children:d("generic.back")}),t(M,{disabled:n<0,onClick:u,children:d("help.emergency.main.submit.button")})]})]})},Tw=o=>{const[e,r]=i.exports.useState(!1),{activeReport:n=null,setActiveReport:a=null,report:s=null}=Pr(),c=()=>{a(null),r(!1)};i.exports.useEffect(()=>{const m={linkReceived:p=>{const g=p.split("/");if(!(g.length<2))switch(g[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(h=>!h);return;case"tour":return;case"report":g.length>=5&&g[2]==="room"&&(parseInt(g[3]),unescape(g.splice(4).join("/")));return}},eventUrlPrefix:"help/"};return _t(m),()=>Ct(m)},[]),i.exports.useEffect(()=>{n&&r(!0)},[n]);const u=()=>{if(n)switch(n.currentStep){case At.SELECT_USER:return t(Sw,{});case At.SELECT_CHATS:return t(bw,{});case At.SELECT_TOPICS:return t(Nw,{});case At.INPUT_REPORT_MESSAGE:return t(iw,{});case At.REPORT_SUMMARY:return t(_w,{})}return t(lw,{})};return l(V,{children:[e&&l(oe,{className:"nitro-help",theme:"primary-slim",children:[t(se,{headerText:d("help.button.cfh"),onCloseClick:c}),t(ne,{className:"text-black",children:l(re,{children:[t(T,{center:!0,size:5,overflow:"hidden",children:t(L,{className:"index-image"})}),t(T,{justifyContent:"between",size:7,overflow:"hidden",children:t(u,{})})]})})]}),t(Cw,{}),t(Ew,{})]})},vw=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null);return U(UE,p=>{const g=p.getParser();r(g.productType),a(g.productClassId),c(g.totalCoinsForBonus),m(g.coinsStillRequiredToBuy)}),i.exports.useEffect(()=>{D(new FE)},[]),e?l("div",{className:"bonus-rare widget d-flex",children:[e,l("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[t("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:s-u+"/"+s}),t("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(s-u)/s*100+"%"}})]})]}):null},ww=o=>{const{data:e=null,level:r=0}=o;return l("div",{className:"hof-user-container",children:[l("div",{className:"hof-tooltip",children:[l("div",{className:"hof-header",children:[r,". ",e.userName," ",t(Er,{userId:e.userId})]}),t("div",{className:"small text-center text-white",children:d("landing.view.competition.hof.points",["points"],[zo(e.currentScore).toString()])})]}),t(st,{figure:e.figure,direction:2})]})},Rw=o=>{const{slot:e=-1,conf:r=null}=o,[n,a]=i.exports.useState(null);return U(GE,s=>{const c=s.getParser();a(c.data)}),i.exports.useEffect(()=>{const s=r?r.campaign:"";D(new BE(s))},[r]),n?t("div",{className:"hall-of-fame d-flex",children:n.hof&&n.hof.length>0&&n.hof.map((s,c)=>t(ww,{data:s,level:c+1},c))}):null},xw=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(0);return U(VE,s=>{const c=s.getParser();r(c.articles)}),i.exports.useEffect(()=>{D(new HE)},[]),e?l("div",{className:"promo-articles widget mb-2",children:[l("div",{className:"d-flex flex-row align-items-center w-100 mb-1",children:[t("small",{className:"flex-shrink-0 pe-1",children:d("landing.view.promo.article.header")}),t("hr",{className:"w-100 my-0"})]}),t("div",{className:"d-flex flex-row mb-1",children:e&&e.length>0&&e.map((s,c)=>t("div",{className:"promo-articles-bullet cursor-pointer "+(s===e[n]?"promo-articles-bullet-active":""),onClick:u=>a(c)},s.id))}),e&&e[n]&&l("div",{className:"promo-article d-flex flex-row row mx-0",children:[t("div",{className:"promo-article-image",style:{backgroundImage:`url(${e[n].imageUrl})`}}),l("div",{className:"col-3 d-flex flex-column h-100",children:[t("h3",{className:"my-0",children:e[n].title}),t("b",{children:e[n].bodyText}),t("button",{className:"btn btn-sm mt-auto btn-gainsboro",onClick:s=>Xn(e[n].linkContent),children:e[n].buttonText})]})]})]}):null},yw=o=>{const{conf:e=null}=o,r=n=>{const a=e[n];if(!a)return null;switch(n){case"image":return un.interpolate(a)}return a};return l("div",{className:"widgetcontainer widget d-flex flex-row overflow-hidden",children:[t("div",{className:"widgetcontainer-image flex-shrink-0",style:{backgroundImage:`url(${r("image")})`}}),l("div",{className:"d-flex flex-column align-self-center",children:[t("h3",{className:"my-0",children:d(`landing.view.${r("texts")}.header`)}),t("i",{children:d(`landing.view.${r("texts")}.body`)}),t("button",{className:"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto",onClick:n=>Xn(r("btnLink")),children:d(`landing.view.${r("texts")}.button`)})]})]})},Ow=o=>{switch(o.widgetType){case"promoarticle":return t(xw,{});case"achievementcompetition_hall_of_fame":return t(Rw,{slot:o.slot,conf:o.widgetConf});case"bonusrare":return t(vw,{});case"widgetcontainer":return t(yw,{conf:o.widgetConf});default:return null}},Bn=o=>{const{widgetType:e=null,widgetSlot:r=0,widgetConf:n=null,className:a="",...s}=o;return t("div",{className:`widget-slot slot-${r} ${a||""}`,...s,children:t(Ow,{widgetType:e,slot:r,widgetConf:n})})},Aw=o=>{const[e,r]=i.exports.useState(!0),{userFigure:n=null}=_n();if(Ye([qt.CREATED,qt.ENDED],h=>{switch(h.type){case qt.CREATED:r(!1);return;case qt.ENDED:r(h.openLandingView);return}}),!e)return null;const a=K("hotelview").images["background.colour"],s=un.interpolate(K("hotelview").images.background),c=un.interpolate(K("hotelview").images.sun),u=un.interpolate(K("hotelview").images.drape),m=un.interpolate(K("hotelview").images.left),p=un.interpolate(K("hotelview").images["right.repeat"]),g=un.interpolate(K("hotelview").images.right);return l("div",{className:"nitro-hotel-view",style:a&&a?{background:a}:{},children:[t("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:l("div",{className:"row h-100",children:[l("div",{className:"col-9 h-100 d-flex flex-column",children:[t(Bn,{widgetSlot:1,widgetType:K("hotelview").widgets["slot."+1+".widget"],widgetConf:K("hotelview").widgets["slot."+1+".conf"],className:"col-6"}),l("div",{className:"col-12 row mx-0",children:[t(Bn,{widgetSlot:2,widgetType:K("hotelview").widgets["slot."+2+".widget"],widgetConf:K("hotelview").widgets["slot."+2+".conf"],className:"col-7"}),t(Bn,{widgetSlot:3,widgetType:K("hotelview").widgets["slot."+3+".widget"],widgetConf:K("hotelview").widgets["slot."+3+".conf"],className:"col-5"}),t(Bn,{widgetSlot:4,widgetType:K("hotelview").widgets["slot."+4+".widget"],widgetConf:K("hotelview").widgets["slot."+4+".conf"],className:"col-7"}),t(Bn,{widgetSlot:5,widgetType:K("hotelview").widgets["slot."+5+".widget"],widgetConf:K("hotelview").widgets["slot."+5+".conf"],className:"col-5"})]}),t(Bn,{widgetSlot:6,widgetType:K("hotelview").widgets["slot."+6+".widget"],widgetConf:K("hotelview").widgets["slot."+6+".conf"],className:"mt-auto"})]}),t("div",{className:"col-3 h-100",children:t(Bn,{widgetSlot:7,widgetType:K("hotelview").widgets["slot."+7+".widget"],widgetConf:K("hotelview").widgets["slot."+7+".conf"]})})]})}),t("div",{className:"background position-absolute",style:s&&s.length?{backgroundImage:`url(${s})`}:{}}),t("div",{className:"sun position-absolute",style:c&&c.length?{backgroundImage:`url(${c})`}:{}}),t("div",{className:"drape position-absolute",style:u&&u.length?{backgroundImage:`url(${u})`}:{}}),t("div",{className:"left position-absolute",style:m&&m.length?{backgroundImage:`url(${m})`}:{}}),t("div",{className:"right-repeat position-absolute",style:p&&p.length?{backgroundImage:`url(${p})`}:{}}),t("div",{className:"right position-absolute",style:g&&g.length?{backgroundImage:`url(${g})`}:{}}),K("hotelview")["show.avatar"]&&t("div",{className:"avatar-image",children:t(st,{figure:n,direction:2})})]})},Ic=o=>{const{badgeCode:e=null,children:r=null,...n}=o,{selectedBadgeCode:a=null,setSelectedBadgeCode:s=null,toggleBadge:c=null,getBadgeId:u=null}=_a(),{isUnseen:m=null}=Cr(),p=m(qe.BADGE,u(e));return l(be,{itemActive:a===e,itemUnseen:p,onMouseDown:g=>s(e),onDoubleClick:g=>c(a),...n,children:[t(je,{badgeCode:e}),r]})},kw=o=>{const[e,r]=i.exports.useState(!1),{badgeCodes:n=[],activeBadgeCodes:a=[],selectedBadgeCode:s=null,isWearingBadge:c=null,canWearBadges:u=null,toggleBadge:m=null,getBadgeId:p=null,activate:g=null,deactivate:h=null}=_a(),{isUnseen:f=null,removeUnseen:_=null}=Cr();return i.exports.useEffect(()=>{!s||!f(qe.BADGE,p(s))||_(qe.BADGE,p(s))},[s,f,_,p]),i.exports.useEffect(()=>{if(!e)return;const I=g();return()=>h(I)},[e,g,h]),i.exports.useEffect(()=>(r(!0),()=>r(!1)),[]),l(re,{children:[t(T,{size:7,overflow:"hidden",children:t(Le,{columnCount:4,children:n&&n.length>0&&n.map((I,C)=>c(I)?null:t(Ic,{badgeCode:I},C))})}),l(T,{className:"justify-content-between",size:5,overflow:"auto",children:[l(T,{overflow:"hidden",gap:2,children:[t(S,{children:d("inventory.badges.activebadges")}),t(Le,{columnCount:3,children:a&&a.length>0&&a.map((I,C)=>t(Ic,{badgeCode:I},C))})]}),!!s&&l(T,{grow:!0,justifyContent:"end",gap:2,children:[l(w,{alignItems:"center",gap:2,children:[t(je,{shrink:!0,badgeCode:s}),t(S,{children:Qs(s)})]}),t(M,{variant:c(s)?"danger":"success",disabled:!c(s)&&!u(),onClick:I=>m(s),children:d(c(s)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},ll=o=>{const{title:e="",desc:r="",children:n=null,...a}=o;return l(re,{...a,children:[t(T,{center:!0,size:5,overflow:"hidden",children:t("div",{className:"empty-image"})}),l(T,{justifyContent:"center",size:7,overflow:"hidden",children:[t(S,{fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:e}),t(S,{overflow:"auto",children:r})]}),n]})},Pw=o=>{const{botItem:e=null,children:r=null,...n}=o,[a,s]=i.exports.useState(!1),{selectedBot:c=null,setSelectedBot:u=null}=Hd(),{isUnseen:m=null}=Cr(),p=m(qe.BOT,e.botData.id),g=h=>{switch(h.type){case xe.MOUSE_DOWN:u(e),s(!0);return;case xe.MOUSE_UP:s(!1);return;case xe.ROLL_OUT:if(!a||c!==e)return;_i(e);return;case"dblclick":_i(e);return}};return l(be,{itemActive:c===e,itemUnseen:p,onMouseDown:g,onMouseUp:g,onMouseOut:g,onDoubleClick:g,...n,children:[t(st,{figure:e.botData.figure,direction:3,headOnly:!0}),r]})},Dw=o=>{const{roomSession:e=null,roomPreviewer:r=null}=o,[n,a]=i.exports.useState(!1),{botItems:s=[],selectedBot:c=null,activate:u=null,deactivate:m=null}=Hd(),{isUnseen:p=null,removeUnseen:g=null}=Cr();return i.exports.useEffect(()=>{if(!c||!r)return;const h=c.botData,f=q();let _=f.getRoomInstanceVariable(f.activeRoomId,te.ROOM_WALL_TYPE),I=f.getRoomInstanceVariable(f.activeRoomId,te.ROOM_FLOOR_TYPE),C=f.getRoomInstanceVariable(f.activeRoomId,te.ROOM_LANDSCAPE_TYPE);_=_&&_.length?_:"101",I=I&&I.length?I:"101",C=C&&C.length?C:"1.1",r.reset(!1),r.updateRoomWallsAndFloorVisibility(!0,!0),r.updateObjectRoom(I,_,C),r.addAvatarIntoRoom(h.figure,0)},[r,c]),i.exports.useEffect(()=>{!c||!p(qe.BOT,c.botData.id)||g(qe.BOT,c.botData.id)},[c,p,g]),i.exports.useEffect(()=>{if(!n)return;const h=u();return()=>m(h)},[n,u,m]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),!s||!s.length?t(ll,{title:d("inventory.empty.bots.title"),desc:d("inventory.empty.bots.desc")}):l(re,{children:[t(T,{size:7,overflow:"hidden",children:t(Le,{columnCount:5,children:s&&s.length>0&&s.map(h=>t(Pw,{botItem:h},h.botData.id))})}),l(T,{size:5,overflow:"auto",children:[t(T,{overflow:"hidden",position:"relative",children:t(da,{roomPreviewer:r,height:140})}),c&&l(T,{grow:!0,justifyContent:"between",gap:2,children:[t(S,{grow:!0,truncate:!0,children:c.botData.name}),!!e&&t(M,{variant:"success",onClick:h=>_i(c),children:d("inventory.furni.placetoroom")})]})]})]})},Mw=o=>{const{groupItem:e=null,...r}=o,[n,a]=i.exports.useState(!1),{selectedItem:s=null,setSelectedItem:c=null}=Zn(),u=p=>{switch(p.type){case xe.MOUSE_DOWN:c(e),a(!0);return;case xe.MOUSE_UP:a(!1);return;case xe.ROLL_OUT:if(!n||e!==s)return;_s(e);return;case"dblclick":_s(e);return}},m=e.getUnlockedCount();return t(be,{className:m?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:e.getUnlockedCount(),itemActive:e===s,itemUniqueNumber:e.stuffData.uniqueNumber,itemUnseen:e.hasUnseenItems,onMouseDown:u,onMouseUp:u,onMouseOut:u,onDoubleClick:u,...r})},mm=o=>{const{groupItems:e=[],setGroupItems:r=null}=o,[n,a]=i.exports.useState("");return i.exports.useEffect(()=>{let s=[...e];if(n&&n.length){const c=n.toLocaleLowerCase();s=e.filter(u=>c&&c.length&&u.name.toLocaleLowerCase().includes(c)?u:null)}r(s)},[e,r,n]),l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("generic.search"),value:n,onChange:s=>a(s.target.value)}),t(M,{variant:"primary",children:t(Pi,{className:"fa-icon"})})]})},Lw=o=>{const e=o.getLastItem();if(!e||!e.sellable)return!1;St(new rl(e))},Uw=o=>{const{roomSession:e=null,roomPreviewer:r=null}=o,[n,a]=i.exports.useState(!1),[s,c]=i.exports.useState([]),{groupItems:u=[],selectedItem:m=null,activate:p=null,deactivate:g=null}=Zn(),{resetItems:h=null}=Cr();return i.exports.useEffect(()=>{if(!m||!r)return;const f=m.getLastItem();if(!f)return;const _=q();let I=_.getRoomInstanceVariable(_.activeRoomId,te.ROOM_WALL_TYPE),C=_.getRoomInstanceVariable(_.activeRoomId,te.ROOM_FLOOR_TYPE),E=_.getRoomInstanceVariable(_.activeRoomId,te.ROOM_LANDSCAPE_TYPE);if(I=I&&I.length?I:"101",C=C&&C.length?C:"101",E=E&&E.length?E:"1.1",r.reset(!1),r.updateObjectRoom(C,I,E),r.updateRoomWallsAndFloorVisibility(!0,!0),f.category===Z.WALL_PAPER||f.category===Z.FLOOR||f.category===Z.LANDSCAPE){if(C=f.category===Z.FLOOR?m.stuffData.getLegacyString():C,I=f.category===Z.WALL_PAPER?m.stuffData.getLegacyString():I,E=f.category===Z.LANDSCAPE?m.stuffData.getLegacyString():E,r.updateObjectRoom(C,I,E),f.category===Z.LANDSCAPE){const b=H().getWallItemDataByName("window_double_default");b&&r.addWallItemIntoRoom(b.id,new Rt(90,0,0),b.customParams)}}else m.isWallItem?r.addWallItemIntoRoom(m.type,new Rt(90),f.stuffData.getLegacyString()):r.addFurnitureIntoRoom(m.type,new Rt(90),m.stuffData,f.extra.toString())},[r,m]),i.exports.useEffect(()=>{!m||!m.hasUnseenItems||(h(qe.FURNI,m.items.map(f=>f.id)),m.hasUnseenItems=!1)},[m,h]),i.exports.useEffect(()=>{if(!n)return;const f=p();return()=>g(f)},[n,p,g]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),!u||!u.length?t(ll,{title:d("inventory.empty.title"),desc:d("inventory.empty.desc")}):l(re,{children:[l(T,{size:7,overflow:"hidden",children:[t(mm,{groupItems:u,setGroupItems:c}),t(Le,{columnCount:5,children:s&&s.length>0&&s.map((f,_)=>t(Mw,{groupItem:f},_))})]}),l(T,{size:5,overflow:"auto",children:[l(T,{overflow:"hidden",position:"relative",children:[t(da,{roomPreviewer:r,height:140}),m&&m.stuffData.isUnique&&t(yd,{className:"top-2 end-2",position:"absolute",uniqueNumber:m.stuffData.uniqueNumber,uniqueSeries:m.stuffData.uniqueSeries}),m&&m.stuffData.rarityLevel>-1&&t(tl,{className:"top-2 end-2",position:"absolute",level:m.stuffData.rarityLevel})]}),m&&l(T,{grow:!0,justifyContent:"between",gap:2,children:[t(S,{grow:!0,truncate:!0,children:m.name}),l(T,{gap:1,children:[!!e&&t(M,{variant:"success",onClick:f=>_s(m),children:d("inventory.furni.placetoroom")}),m&&m.isSellable&&t(M,{onClick:f=>Lw(m),children:d("inventory.marketplace.sell")})]})]})]})]})},Ya=9,Fw=o=>{const{cancelTrade:e=null}=o,[r,n]=i.exports.useState(null),[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(null),[m,p]=i.exports.useState(null),[g,h]=i.exports.useState(3),[f,_]=i.exports.useState(1),{ownUser:I=null,otherUser:C=null,groupItems:E=[],tradeState:b=rt.TRADING_STATE_READY,progressTrade:N=null,removeItem:v=null,setTradeState:y=null}=jd(),{simpleAlert:R=null}=Xe(),x=(P,B,G,z,X)=>{if(!I||I.accepts||!I.userItems)return!1;if(I.userItems.length<Ya)return!0;if(!z)return!1;let Y=B.toString();return G===Z.POSTER?Y=Y+"poster"+X.getLegacyString():G===Z.GUILD_FURNI?Y=KC(B,X):Y=(P?"I":"S")+Y,!!I.userItems.getValue(Y)},F=P=>{if(!r)return;const B=r.getTradeItems(P);if(!B||!B.length)return;let G=null;const z=[];for(const Y of B)z.push(Y.id),G||(G=Y);if(I.userItems.length+z.length<=1500)if(!G.isGroupable&&z.length)D(new yl(z.pop()));else{const Y=[];for(const Ee of z)x(G.isWallItem,G.type,G.category,G.isGroupable,G.stuffData)&&Y.push(Ee);Y.length&&(Y.length===1?D(new yl(Y.pop())):D(new WE(...Y)))}else R(d("trading.items.too_many_items.desc"),de.DEFAULT,null,null,d("trading.items.too_many_items.title"))},k=P=>P?t(au,{className:"text-success fa-icon"}):t(Dm,{className:"text-danger fa-icon"}),A=(P,B)=>{(isNaN(Number(P))||Number(P)<0||!P)&&(P=1),P=Math.max(Number(P),1),P=Math.min(Number(P),B),P!==f&&_(P)},O=P=>{A(f,P),F(f)};return i.exports.useEffect(()=>{_(1)},[r]),i.exports.useEffect(()=>{if(b!==rt.TRADING_STATE_COUNTDOWN)return;h(3);const P=setInterval(()=>{h(B=>{const G=B-1;return G===0&&clearInterval(P),G})},1e3);return()=>clearInterval(P)},[b,y]),i.exports.useEffect(()=>{g===0&&y(rt.TRADING_STATE_CONFIRMING)},[g,y]),b===rt.TRADING_STATE_READY||!I||!C?null:l(re,{children:[l(T,{size:4,overflow:"hidden",children:[t(mm,{groupItems:E,setGroupItems:p}),l(w,{column:!0,fullHeight:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[t(Le,{columnCount:3,children:m&&m.length>0&&m.map((P,B)=>{const G=P.getUnlockedCount();return t(be,{className:G?"":"opacity-0-5 ",itemImage:P.iconUrl,itemCount:G,itemActive:r===P,itemUniqueNumber:P.stuffData.uniqueNumber,onClick:z=>G&&n(P),onDoubleClick:z=>F(1),children:G>0&&r===P&&t(M,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:z=>F(1),children:t(or,{className:"fa-icon"})})},B)})}),l(T,{gap:1,alignItems:"end",children:[l(re,{overflow:"hidden",children:[t(T,{size:6,overflow:"hidden",children:t("input",{type:"number",className:"form-control form-control-sm quantity-input",placeholder:d("catalog.bundlewidget.spinner.select.amount"),disabled:!r,value:f,onChange:P=>_(P.target.valueAsNumber)})}),t(T,{size:6,overflow:"hidden",children:t(M,{variant:"secondary",disabled:!r,onClick:P=>O(r.getUnlockedCount()),children:d("inventory.trading.areoffering")})})]}),t(L,{fullWidth:!0,className:"badge bg-muted",children:r?r.name:d("catalog_selectproduct")})]})]})]}),l(T,{size:8,overflow:"hidden",children:[l(re,{overflow:"hidden",children:[l(T,{size:6,overflow:"hidden",children:[l(w,{justifyContent:"between",alignItems:"center",children:[l(S,{children:[d("inventory.trading.you")," ",d("inventory.trading.areoffering"),":"]}),k(I.accepts)]}),t(Le,{columnCount:3,children:Array.from(Array(Ya),(P,B)=>{const G=I.userItems.getWithIndex(B)||null;return G?t(be,{itemActive:a===G,itemImage:G.iconUrl,itemCount:G.getTotalCount(),itemUniqueNumber:G.stuffData.uniqueNumber,onClick:z=>s(G),onDoubleClick:z=>v(G),children:a===G&&t(M,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:z=>v(G),children:t(sr,{className:"fa-icon"})})},B):t(be,{},B)})}),t(L,{fullWidth:!0,className:"badge bg-muted",children:a?a.name:d("catalog_selectproduct")})]}),l(T,{size:6,overflow:"hidden",children:[l(w,{justifyContent:"between",alignItems:"center",children:[l(S,{children:[C.userName," ",d("inventory.trading.isoffering"),":"]}),k(C.accepts)]}),t(Le,{columnCount:3,children:Array.from(Array(Ya),(P,B)=>{const G=C.userItems.getWithIndex(B)||null;return G?t(be,{itemActive:c===G,itemImage:G.iconUrl,itemCount:G.getTotalCount(),itemUniqueNumber:G.stuffData.uniqueNumber,onClick:z=>u(G)},B):t(be,{},B)})}),t(L,{fullWidth:!0,className:"badge bg-muted w-100",children:c?c.name:d("catalog_selectproduct")})]})]}),l(w,{grow:!0,justifyContent:"between",children:[t(M,{variant:"danger",onClick:e,children:d("generic.cancel")}),b===rt.TRADING_STATE_READY&&t(M,{variant:"secondary",disabled:!I.itemCount&&!C.itemCount,onClick:N,children:d("inventory.trading.accept")}),b===rt.TRADING_STATE_RUNNING&&t(M,{variant:"secondary",disabled:!I.itemCount&&!C.itemCount,onClick:N,children:d(I.accepts?"inventory.trading.modify":"inventory.trading.accept")}),b===rt.TRADING_STATE_COUNTDOWN&&t(M,{variant:"secondary",disabled:!0,children:d("inventory.trading.countdown",["counter"],[g.toString()])}),b===rt.TRADING_STATE_CONFIRMING&&t(M,{variant:"secondary",onClick:N,children:d("inventory.trading.button.restore")}),b===rt.TRADING_STATE_CONFIRMED&&t(M,{variant:"secondary",children:d("inventory.trading.info.waiting")})]})]})]})},Gw=o=>{const{petItem:e=null,children:r=null,...n}=o,[a,s]=i.exports.useState(!1),{selectedPet:c=null,setSelectedPet:u=null}=Wd(),{isUnseen:m}=Cr(),p=m(qe.PET,e.petData.id),g=h=>{switch(h.type){case xe.MOUSE_DOWN:u(e),s(!0);return;case xe.MOUSE_UP:s(!1);return;case xe.ROLL_OUT:if(!a||e!==c)return;Ei(e);return;case"dblclick":Ei(e);return}};return l(be,{itemActive:e===c,itemUnseen:p,onMouseDown:g,onMouseUp:g,onMouseOut:g,onDoubleClick:g,...n,children:[t(Jr,{figure:e.petData.figureData.figuredata,direction:3,headOnly:!0}),r]})},Bw=o=>{const{roomSession:e=null,roomPreviewer:r=null}=o,[n,a]=i.exports.useState(!1),{petItems:s=null,selectedPet:c=null,activate:u=null,deactivate:m=null}=Wd(),{isUnseen:p=null,removeUnseen:g=null}=Cr();return i.exports.useEffect(()=>{if(!c||!r)return;const h=c.petData,f=q();let _=f.getRoomInstanceVariable(f.activeRoomId,te.ROOM_WALL_TYPE),I=f.getRoomInstanceVariable(f.activeRoomId,te.ROOM_FLOOR_TYPE),C=f.getRoomInstanceVariable(f.activeRoomId,te.ROOM_LANDSCAPE_TYPE);_=_&&_.length?_:"101",I=I&&I.length?I:"101",C=C&&C.length?C:"1.1",r.reset(!1),r.updateRoomWallsAndFloorVisibility(!0,!0),r.updateObjectRoom(I,_,C),r.addPetIntoRoom(h.figureString)},[r,c]),i.exports.useEffect(()=>{!c||!p(qe.PET,c.petData.id)||g(qe.PET,c.petData.id)},[c,p,g]),i.exports.useEffect(()=>{if(!n)return;const h=u();return()=>m(h)},[n,u,m]),i.exports.useEffect(()=>(a(!0),()=>a(!1)),[]),!s||!s.length?t(ll,{title:d("inventory.empty.pets.title"),desc:d("inventory.empty.pets.desc")}):l(re,{children:[t(T,{size:7,overflow:"hidden",children:t(Le,{columnCount:5,children:s&&s.length>0&&s.map(h=>t(Gw,{petItem:h},h.petData.id))})}),l(T,{size:5,overflow:"auto",children:[t(T,{overflow:"hidden",position:"relative",children:t(da,{roomPreviewer:r,height:140})}),c&&c.petData&&l(T,{grow:!0,justifyContent:"between",gap:2,children:[t(S,{grow:!0,truncate:!0,children:c.petData.name}),!!e&&t(M,{variant:"success",onClick:h=>Ei(c),children:d("inventory.furni.placetoroom")})]})]})]})},gm="inventory.furni",pm="inventory.bots",hm="inventory.furni.tab.pets",fm="inventory.badges",Ec=[gm,pm,hm,fm],Vw=[qe.FURNI,qe.BOT,qe.PET,qe.BADGE],Hw=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(Ec[0]),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null),{isTrading:p=!1,stopTrading:g=null}=jd(),{getCount:h=null,resetCategory:f=null}=Cr(),_=()=>{p&&g(),r(!1)};return Te(ft.PLACED,I=>{qC()&&(Zs(!1),I.placedInRoom||r(!0))}),Ye([qt.CREATED,qt.ENDED],I=>{switch(I.type){case qt.CREATED:c(I.session);return;case qt.ENDED:c(null),r(!1);return}}),U(jE,I=>{const C=I.getParser();for(const E of C.data)Xu().setBadgePointLimit(E.badgeId,E.limit)}),i.exports.useEffect(()=>{const I={linkReceived:C=>{const E=C.split("/");if(!(E.length<2))switch(E[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(b=>!b);return}},eventUrlPrefix:"inventory/"};return _t(I),()=>Ct(I)},[]),i.exports.useEffect(()=>(m(new jo(q(),++jo.PREVIEW_COUNTER)),()=>{m(I=>(I.dispose(),null))}),[]),i.exports.useEffect(()=>{!e&&p&&r(!0)},[e,p]),e?l(oe,{uniqueKey:"inventory",className:"nitro-inventory",theme:p?"primary-slim":"",children:[t(se,{headerText:d("inventory.title"),onCloseClick:_}),!p&&l(V,{children:[t(In,{children:Ec.map((I,C)=>t(jr,{isActive:n===I,onClick:E=>a(I),count:h(Vw[C]),children:d(I)},C))}),l(ne,{children:[n===gm&&t(Uw,{roomSession:s,roomPreviewer:u}),n===pm&&t(Dw,{roomSession:s,roomPreviewer:u}),n===hm&&t(Bw,{roomSession:s,roomPreviewer:u}),n===fm&&t(kw,{})]})]}),p&&t(ne,{children:t(Fw,{cancelTrade:_})})]}):null},cl=o=>{const{records:e=null}=o,{openRoomInfo:r=null}=vs(),n=i.exports.useMemo(()=>{const s=[];return e.forEach(c=>{s.push({isRoomInfo:!0,roomId:c.roomId,roomName:c.roomName}),c.chatlog.forEach(u=>{s.push({timestamp:u.timestamp,habboId:u.userId,username:u.userName,hasHighlighting:u.hasHighlighting,message:u.message,isRoomInfo:!1})})}),s},[e]),a=s=>l(w,{gap:2,alignItems:"center",justifyContent:"between",className:"bg-muted rounded p-1",children:[l(w,{gap:1,children:[t(S,{bold:!0,children:"Room name:"}),t(S,{children:s.roomName})]}),l(w,{gap:1,children:[t(M,{onClick:c=>Ir(s.roomId),children:"Visit Room"}),t(M,{onClick:c=>r(s.roomId),children:"Room Tools"})]})]});return t(V,{children:l(T,{fit:!0,gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Time"}),t(L,{className:"g-col-3",children:"User"}),t(L,{className:"g-col-7",children:"Message"})]})}),e&&e.length>0&&t(ga,{rows:n,rowRender:s=>l(V,{children:[s.isRoomInfo&&t(a,{roomId:s.roomId,roomName:s.roomName}),!s.isRoomInfo&&l(re,{fullHeight:!1,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[t(S,{className:"g-col-2",children:s.timestamp}),t(S,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:c=>ee(`mod-tools/open-user-info/${s.habboId}`),children:s.username}),t(S,{textBreak:!0,wrap:!0,className:"g-col-7",children:s.message})]})]})})]})})},Ww=o=>{const{roomId:e=null,onCloseClick:r=null}=o,[n,a]=i.exports.useState(null);return U(qE,s=>{const c=s.getParser();!c||c.data.roomId!==e||a(c.data)}),i.exports.useEffect(()=>{D(new YE(e))},[e]),n?l(oe,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:kt.TOP_LEFT,children:[t(se,{headerText:`Room Chatlog ${n.roomName}`,onCloseClick:r}),t(ne,{className:"text-black",overflow:"hidden",children:n&&t(cl,{records:[n]})})]}):null},jw=o=>{const{roomId:e=null,onCloseClick:r=null}=o,[n,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(null),[_,I]=i.exports.useState(!1),[C,E]=i.exports.useState(0),[b,N]=i.exports.useState(!1),[v,y]=i.exports.useState(!1),[R,x]=i.exports.useState(!1),[F,k]=i.exports.useState(""),A=(O,P)=>{if(O)switch(O){case"alert_only":if(F.trim().length===0)return;D(new uo(uo.ACTION_ALERT,F,"")),D(new Ol(e,v?1:0,R?1:0,b?1:0));return;case"send_message":if(F.trim().length===0)return;D(new uo(uo.ACTION_MESSAGE,F,"")),D(new Ol(e,v?1:0,R?1:0,b?1:0));return}};return U(zE,O=>{const P=O.getParser();!P||P.data.flatId!==e||(c(P.data.flatId),m(P.data.room.name),g(P.data.ownerId),f(P.data.ownerName),I(P.data.ownerInRoom),E(P.data.userCount))}),i.exports.useEffect(()=>{n||(D(new $E(e)),a(!0))},[e,n,a]),l(oe,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:kt.TOP_LEFT,children:[t(se,{headerText:"Room Info"+(u?": "+u:""),onCloseClick:O=>r()}),l(ne,{className:"text-black",children:[l(w,{gap:2,children:[l(T,{justifyContent:"center",grow:!0,gap:1,children:[l(w,{alignItems:"center",gap:2,children:[t(S,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),t(S,{underline:!0,pointer:!0,truncate:!0,children:h})]}),l(w,{alignItems:"center",gap:2,children:[t(S,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),t(S,{children:C})]}),l(w,{alignItems:"center",gap:2,children:[t(S,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),t(S,{children:_?"Yes":"No"})]})]}),l(T,{gap:1,children:[t(M,{onClick:O=>Ir(e),children:"Visit Room"}),t(M,{onClick:O=>ee(`mod-tools/open-room-chatlog/${e}`),children:"Chatlog"})]})]}),l(T,{className:"bg-muted rounded p-2",gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:b,onChange:O=>N(O.target.checked)}),t(S,{small:!0,children:"Kick everyone out"})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:v,onChange:O=>y(O.target.checked)}),t(S,{small:!0,children:"Enable the doorbell"})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:R,onChange:O=>x(O.target.checked)}),t(S,{small:!0,children:"Change room name"})]})]}),t("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:F,onChange:O=>k(O.target.value)}),l(w,{justifyContent:"between",children:[t(M,{variant:"danger",onClick:O=>A("send_message"),children:"Send Caution"}),t(M,{onClick:O=>A("alert_only"),children:"Send Alert only"})]})]})]})},qw=o=>{const{onCloseClick:e=null,issueId:r=null}=o,[n,a]=i.exports.useState(null);return U(KE,s=>{const c=s.getParser();!c||c.data.issueId!==r||a(c.data)}),i.exports.useEffect(()=>{D(new XE(r))},[r]),l(oe,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[t(se,{headerText:"Issue Chatlog",onCloseClick:e}),t(ne,{className:"text-black",children:n&&t(cl,{records:[n.chatRecord]})})]})},Yw=o=>{const{issueId:e=null,onIssueInfoClosed:r=null}=o,[n,a]=i.exports.useState(!1),{tickets:s=[],openUserInfo:c=null}=vs(),u=s.find(g=>g.issueId===e),m=g=>{D(new Vu([g])),r(g)},p=g=>{D(new mo([e],g)),r(e)};return l(V,{children:[l(oe,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[t(se,{headerText:"Resolving issue "+e,onCloseClick:()=>r(e)}),l(ne,{className:"text-black",children:[t(S,{fontSize:4,children:"Issue Information"}),l(re,{overflow:"auto",children:[t(T,{size:8,children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:l("tbody",{children:[l("tr",{children:[t("th",{children:"Source"}),t("td",{children:Ib(u.categoryId)})]}),l("tr",{children:[t("th",{children:"Category"}),t("td",{className:"text-break",children:d("help.cfh.topic."+u.reportedCategoryId)})]}),l("tr",{children:[t("th",{children:"Description"}),t("td",{className:"text-break",children:u.message})]}),l("tr",{children:[t("th",{children:"Caller"}),t("td",{children:t(S,{bold:!0,underline:!0,pointer:!0,onClick:g=>c(u.reporterUserId),children:u.reporterUserName})})]}),l("tr",{children:[t("th",{children:"Reported User"}),t("td",{children:t(S,{bold:!0,underline:!0,pointer:!0,onClick:g=>c(u.reportedUserId),children:u.reportedUserName})})]})]})})}),l(T,{size:4,gap:1,children:[t(M,{variant:"secondary",onClick:()=>a(!n),children:"Chatlog"}),t(M,{onClick:g=>p(mo.RESOLUTION_USELESS),children:"Close as useless"}),t(M,{variant:"danger",onClick:g=>p(mo.RESOLUTION_ABUSIVE),children:"Close as abusive"}),t(M,{variant:"success",onClick:g=>p(mo.RESOLUTION_RESOLVED),children:"Close as resolved"}),t(M,{variant:"secondary",onClick:g=>m(e),children:"Release"})]})]})]})]}),n&&t(qw,{issueId:e,onCloseClick:()=>a(!1)})]})},zw=o=>{const{myIssues:e=null,handleIssue:r=null}=o;return l(T,{gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Type"}),t(L,{className:"g-col-3",children:"Room/Player"}),t(L,{className:"g-col-3",children:"Opened"}),t(L,{className:"g-col-2"}),t(L,{className:"g-col-2"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(n=>l(re,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(L,{className:"g-col-2",children:n.categoryId}),t(L,{className:"g-col-3",children:n.reportedUserName}),t(L,{className:"g-col-3",children:new Date(Date.now()-n.issueAgeInMilliseconds).toLocaleTimeString()}),t(L,{className:"g-col-2",children:t(M,{variant:"primary",onClick:a=>r(n.issueId),children:"Handle"})}),t(L,{className:"g-col-2",children:t(M,{variant:"danger",onClick:a=>D(new Vu([n.issueId])),children:"Release"})})]},n.issueId))})]})},$w=o=>{const{openIssues:e=null}=o;return l(T,{gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Type"}),t(L,{className:"g-col-3",children:"Room/Player"}),t(L,{className:"g-col-4",children:"Opened"}),t(L,{className:"g-col-3"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(r=>l(re,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(L,{className:"g-col-2",children:r.categoryId}),t(L,{className:"g-col-3",children:r.reportedUserName}),t(L,{className:"g-col-4",children:new Date(Date.now()-r.issueAgeInMilliseconds).toLocaleTimeString()}),t(L,{className:"g-col-3",children:t(M,{variant:"success",onClick:n=>D(new QE([r.issueId],!1,0,"pick issue button")),children:"Pick Issue"})})]},r.issueId))})]})},Kw=o=>{const{pickedIssues:e=null}=o;return l(T,{gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Type"}),t(L,{className:"g-col-3",children:"Room/Player"}),t(L,{className:"g-col-4",children:"Opened"}),t(L,{className:"g-col-3",children:"Picker"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(r=>l(re,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(L,{className:"g-col-2",children:r.categoryId}),t(L,{className:"g-col-3",children:r.reportedUserName}),t(L,{className:"g-col-4",children:new Date(Date.now()-r.issueAgeInMilliseconds).toLocaleTimeString()}),t(L,{className:"g-col-3",children:r.pickerUserName})]},r.issueId))})]})},Xw=["Open Issues","My Issues","Picked Issues"],Qw=o=>{const{onCloseClick:e=null}=o,[r,n]=i.exports.useState(0),[a,s]=i.exports.useState([]),{tickets:c=[]}=vs(),u=c.filter(_=>_.state===Ma.STATE_OPEN),m=c.filter(_=>_.state===Ma.STATE_PICKED&&_.pickerUserId===H().userId),p=c.filter(_=>_.state===Ma.STATE_PICKED),g=_=>{s(I=>{const C=[...I],E=C.indexOf(_);return E>=0&&C.splice(E,1),C})},h=_=>{s(I=>{const C=[...I],E=C.indexOf(_);return E===-1?C.push(_):C.splice(E,1),C})},f=()=>{switch(r){case 0:return t($w,{openIssues:u});case 1:return t(zw,{myIssues:m,handleIssue:h});case 2:return t(Kw,{pickedIssues:p})}return null};return l(V,{children:[l(oe,{className:"nitro-mod-tools-tickets",children:[t(se,{headerText:"Tickets",onCloseClick:e}),t(In,{children:Xw.map((_,I)=>t(jr,{isActive:r===I,onClick:C=>n(I),children:_},I))}),t(ne,{gap:1,children:t(f,{})})]}),a&&a.length>0&&a.map(_=>t(Yw,{issueId:_,onIssueInfoClosed:g},_))]})},Jw=o=>{const{userId:e=null,onCloseClick:r=null}=o,[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(null);return U(JE,u=>{const m=u.getParser();!m||m.data.userId!==e||(c(m.data.username),a(m.data.roomChatlogs))}),i.exports.useEffect(()=>{D(new ZE(e))},[e]),l(oe,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:kt.TOP_LEFT,children:[t(se,{headerText:`User Chatlog: ${s||""}`,onCloseClick:r}),t(ne,{className:"text-black h-100",children:n&&t(cl,{records:n})})]})},_c=[new Me(1,"Alert",Me.ALERT,1,0),new Me(2,"Mute 1h",Me.MUTE,2,0),new Me(3,"Ban 18h",Me.BAN,3,0),new Me(4,"Ban 7 days",Me.BAN,4,0),new Me(5,"Ban 30 days (step 1)",Me.BAN,5,0),new Me(7,"Ban 30 days (step 2)",Me.BAN,7,0),new Me(6,"Ban 100 years",Me.BAN,6,0),new Me(106,"Ban avatar-only 100 years",Me.BAN,6,0),new Me(101,"Kick",Me.KICK,0,0),new Me(102,"Lock trade 1 week",Me.TRADE_LOCK,0,168),new Me(104,"Lock trade permanent",Me.TRADE_LOCK,0,876e3),new Me(105,"Message",Me.MESSAGE,0,0)],Zw=o=>{const{user:e=null,onCloseClick:r=null}=o,[n,a]=i.exports.useState(-1),[s,c]=i.exports.useState(-1),[u,m]=i.exports.useState(""),{cfhCategories:p=null,settings:g=null}=vs(),{simpleAlert:h=null}=Xe(),f=i.exports.useMemo(()=>{const E=[];if(p&&p.length)for(const b of p)for(const N of b.topics)E.push(N);return E},[p]),_=E=>h(E,de.DEFAULT,null,null,"Error"),I=()=>{let E=null;const b=f[n];if(n===-1&&(E="You must select a CFH topic"),E)return _(E);const N=u.trim().length===0?d(`help.cfh.topic.${b.id}`):u;D(new e_(e.userId,n,N)),r()},C=()=>{let E=null;const b=f[n],N=_c[s];if(n===-1||s===-1?E="You must select a CFH topic and Sanction":!g||!g.cfhPermission?E="You do not have permission to do this":b?N||(E="You must select a sanction"):E="You must select a CFH topic",E){_(E);return}const v=u.trim().length===0?d(`help.cfh.topic.${b.id}`):u;switch(N.actionType){case Me.ALERT:{if(!g.alertPermission){_("You have insufficient permissions");return}D(new o_(e.userId,v,b.id));break}case Me.MUTE:D(new s_(e.userId,v,b.id));break;case Me.BAN:{if(!g.banPermission){_("You have insufficient permissions");return}D(new n_(e.userId,v,b.id,s,N.actionId===106));break}case Me.KICK:{if(!g.kickPermission){_("You have insufficient permissions");return}D(new r_(e.userId,v,b.id));break}case Me.TRADE_LOCK:{const y=N.actionLengthHours*60;D(new t_(e.userId,v,y,b.id));break}case Me.MESSAGE:{if(u.trim().length===0){_("Please write a message to user");return}D(new Hu(e.userId,u,b.id));break}}r()};return e?l(oe,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:kt.TOP_LEFT,children:[t(se,{headerText:"Mod Action: "+(e?e.username:""),onCloseClick:()=>r()}),l(ne,{className:"text-black",children:[l("select",{className:"form-select form-select-sm",value:n,onChange:E=>a(parseInt(E.target.value)),children:[t("option",{value:-1,disabled:!0,children:"CFH Topic"}),f.map((E,b)=>t("option",{value:b,children:d("help.cfh.topic."+E.id)},b))]}),l("select",{className:"form-select form-select-sm",value:s,onChange:E=>c(parseInt(E.target.value)),children:[t("option",{value:-1,disabled:!0,children:"Sanction Type"}),_c.map((E,b)=>t("option",{value:b,children:E.name},b))]}),l(T,{gap:1,children:[t(S,{small:!0,children:"Optional message type, overrides default"}),t("textarea",{className:"form-control",value:u,onChange:E=>m(E.target.value)})]}),l(w,{justifyContent:"between",gap:1,children:[t(M,{variant:"primary",onClick:I,children:"Default Sanction"}),t(M,{variant:"success",onClick:C,children:"Sanction"})]})]})]}):null},eR=o=>{const{userId:e=null,onCloseClick:r=null}=o,[n,a]=i.exports.useState(null);return U(a_,s=>{const c=s.getParser();c.data.userId===e&&a(c.data)}),i.exports.useEffect(()=>{D(new i_(e))},[e]),e?l(oe,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:kt.TOP_LEFT,children:[t(se,{headerText:"User Visits",onCloseClick:r}),t(ne,{className:"text-black",gap:1,children:l(T,{fullHeight:!0,gap:0,overflow:"hidden",children:[t(T,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(L,{className:"g-col-2",children:"Time"}),t(L,{className:"g-col-7",children:"Room name"}),t(L,{className:"g-col-3",children:"Visit"})]})}),t(ga,{rows:(n==null?void 0:n.rooms)??[],rowRender:s=>l(re,{fullHeight:!1,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[l(S,{className:"g-col-2",children:[s.enterHour.toString().padStart(2,"0"),": ",s.enterMinute.toString().padStart(2,"0")]}),t(S,{className:"g-col-7",children:s.roomName}),t(S,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:c=>Ir(s.roomId),children:"Visit Room"})]})})]})})]}):null},tR=o=>{const{user:e=null,onCloseClick:r=null}=o,[n,a]=i.exports.useState(""),{simpleAlert:s=null}=Xe();if(!e)return null;const c=()=>{if(n.trim().length===0){s("Please write a message to user.",null,null,null,"Error",null);return}D(new Hu(e.userId,n,-999)),r()};return l(oe,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:kt.TOP_LEFT,children:[t(se,{headerText:"Send Message",onCloseClick:()=>r()}),l(ne,{className:"text-black",children:[l(S,{children:["Message To: ",e.username]}),t("textarea",{className:"form-control",value:n,onChange:u=>a(u.target.value)}),t(M,{fullWidth:!0,onClick:c,children:"Send message"})]})]})},rR=o=>{const{onCloseClick:e=null,userId:r=null}=o,[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(!1),[u,m]=i.exports.useState(!1),[p,g]=i.exports.useState(!1),h=i.exports.useMemo(()=>n?[{localeKey:"modtools.userinfo.userName",value:n.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:n.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:n.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:n.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:n.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:n.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:n.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:n.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:Vr.format(n.minutesSinceLastLogin*60,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:n.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:n.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:n.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:Vr.format(n.registrationAgeInMinutes*60,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:n.userClassification}]:null,[n]);return U(l_,f=>{const _=f.getParser();!_||_.data.userId!==r||a(_.data)}),i.exports.useEffect(()=>{D(new c_(r))},[r]),n?l(V,{children:[l(oe,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:kt.TOP_LEFT,children:[t(se,{headerText:d("modtools.userinfo.title",["username"],[n.userName]),onCloseClick:()=>e()}),t(ne,{className:"text-black",children:l(re,{overflow:"hidden",children:[t(T,{size:8,overflow:"auto",children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:t("tbody",{children:h.map((f,_)=>l("tr",{children:[t("th",{scope:"row",children:d(f.localeKey)}),l("td",{children:[f.value,f.showOnline&&t("i",{className:`icon icon-pf-${n.online?"online":"offline"} ms-2`})]})]},_))})})}),l(T,{size:4,gap:1,children:[t(M,{onClick:f=>ee(`mod-tools/open-user-chatlog/${r}`),children:"Room Chat"}),t(M,{onClick:f=>c(!s),children:"Send Message"}),t(M,{onClick:f=>g(!p),children:"Room Visits"}),t(M,{onClick:f=>m(!u),children:"Mod Action"})]})]})})]}),s&&t(tR,{user:{userId:r,username:n.userName},onCloseClick:()=>c(!1)}),u&&t(Zw,{user:{userId:r,username:n.userName},onCloseClick:()=>m(!1)}),p&&t(eR,{userId:r,onCloseClick:()=>g(!1)})]}):null},nR=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(-1),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(!1),{openRooms:p=[],openRoomChatlogs:g=[],openUserChatlogs:h=[],openUserInfos:f=[],openRoomInfo:_=null,closeRoomInfo:I=null,toggleRoomInfo:C=null,openRoomChatlog:E=null,closeRoomChatlog:b=null,toggleRoomChatlog:N=null,openUserInfo:v=null,closeUserInfo:y=null,toggleUserInfo:R=null,openUserChatlog:x=null,closeUserChatlog:F=null,toggleUserChatlog:k=null}=vs(),A=i.exports.useRef(null);return Te([hr.INITIALIZED,hr.DISPOSED],O=>{if(!Wn.isRoomPreviewerId(O.roomId))switch(O.type){case hr.INITIALIZED:a(O.roomId);return;case hr.DISPOSED:a(-1);return}}),nl(O=>{if(O.category!==Q.UNIT)return;const P=ye();if(!P)return;const B=P.userDataManager.getUserDataByIndex(O.id);!B||B.type!==pt.USER||c({userId:B.webID,username:B.name})}),i.exports.useEffect(()=>{const O={linkReceived:P=>{const B=P.split("/");if(!(B.length<2))switch(B[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(G=>!G);return;case"open-room-info":_(Number(B[2]));return;case"close-room-info":I(Number(B[2]));return;case"toggle-room-info":C(Number(B[2]));return;case"open-room-chatlog":E(Number(B[2]));return;case"close-room-chatlog":b(Number(B[2]));return;case"toggle-room-chatlog":N(Number(B[2]));return;case"open-user-info":v(Number(B[2]));return;case"close-user-info":y(Number(B[2]));return;case"toggle-user-info":R(Number(B[2]));return;case"open-user-chatlog":x(Number(B[2]));return;case"close-user-chatlog":F(Number(B[2]));return;case"toggle-user-chatlog":k(Number(B[2]));return}},eventUrlPrefix:"mod-tools/"};return _t(O),()=>Ct(O)},[_,I,C,E,b,N,v,y,R,x,F,k]),l(V,{children:[e&&l(oe,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:kt.TOP_LEFT,theme:"primary-slim",children:[t(se,{headerText:"Mod Tools",onCloseClick:O=>r(!1)}),l(ne,{className:"text-black",gap:1,children:[l(M,{gap:1,onClick:O=>ee(`mod-tools/toggle-room-info/${n}`),disabled:n<=0,className:"position-relative",children:[t(L,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),l(M,{innerRef:A,gap:1,onClick:O=>ee(`mod-tools/toggle-room-chatlog/${n}`),disabled:n<=0,className:"position-relative",children:[t(L,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),l(M,{gap:1,onClick:()=>ee(`mod-tools/toggle-user-info/${s.userId}`),disabled:!s,className:"position-relative",children:[t(L,{className:"icon icon-user position-absolute start-1"})," User: ",s?s.username:""]}),l(M,{gap:1,onClick:()=>m(O=>!O),className:"position-relative",children:[t(L,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),p.length>0&&p.map(O=>t(jw,{roomId:O,onCloseClick:()=>ee(`mod-tools/close-room-info/${O}`)},O)),g.length>0&&g.map(O=>t(Ww,{roomId:O,onCloseClick:()=>ee(`mod-tools/close-room-chatlog/${O}`)},O)),f.length>0&&f.map(O=>t(rR,{userId:O,onCloseClick:()=>ee(`mod-tools/close-user-info/${O}`)},O)),h.length>0&&h.map(O=>t(Jw,{userId:O,onCloseClick:()=>ee(`mod-tools/close-user-chatlog/${O}`)},O)),u&&t(Qw,{onCloseClick:()=>m(!1)})]})},sR=[ke.START_DOORBELL,ke.STATE_WAITING,ke.STATE_NO_ANSWER,ke.START_PASSWORD,ke.STATE_WRONG_PASSWORD],oR=[ke.START_DOORBELL,ke.STATE_WAITING,ke.STATE_NO_ANSWER],aR=o=>{const[e,r]=i.exports.useState(""),{doorData:n=null,setDoorData:a=null}=Dr(),s=()=>{n&&n.state===ke.STATE_WAITING&&fi(),a(null)},c=()=>{!n||!n.roomInfo||(jn(n.roomInfo.roomId),a(p=>{const g={...p};return g.state=ke.STATE_PENDING_SERVER,g}))},u=()=>{!n||!n.roomInfo||(jn(n.roomInfo.roomId,e),a(p=>{const g={...p};return g.state=ke.STATE_PENDING_SERVER,g}))};if(i.exports.useEffect(()=>{!n||n.state!==ke.STATE_NO_ANSWER||fi()},[n]),!n||n.state===ke.NONE||sR.indexOf(n.state)===-1)return null;const m=oR.indexOf(n.state)>=0;return l(oe,{className:"nitro-navigator-doorbell",theme:"primary-slim",children:[t(se,{headerText:d(m?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:s}),l(ne,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:n&&n.roomInfo&&n.roomInfo.roomName}),n.state===ke.START_DOORBELL&&t(S,{children:d("navigator.doorbell.info")}),n.state===ke.STATE_WAITING&&t(S,{children:d("navigator.doorbell.waiting")}),n.state===ke.STATE_NO_ANSWER&&t(S,{children:d("navigator.doorbell.no.answer")}),n.state===ke.START_PASSWORD&&t(S,{children:d("navigator.password.info")}),n.state===ke.STATE_WRONG_PASSWORD&&t(S,{children:d("navigator.password.retryinfo")})]}),m&&l(T,{gap:1,children:[n.state===ke.START_DOORBELL&&t(M,{variant:"success",onClick:c,children:d("navigator.doorbell.button.ring")}),t(M,{variant:"danger",onClick:s,children:d("generic.cancel")})]}),!m&&l(V,{children:[l(T,{gap:1,children:[t(S,{children:d("navigator.password.enter")}),t("input",{type:"password",className:"form-control form-control-sm",onChange:p=>r(p.target.value)})]}),l(T,{gap:1,children:[t(M,{variant:"success",onClick:u,children:d("navigator.password.button.try")}),t(M,{variant:"danger",onClick:s,children:d("generic.cancel")})]})]})]})]})},iR=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(0),[_,I]=i.exports.useState([]),[C,E]=i.exports.useState(""),{categories:b=null}=Dr(),N=K("hc.disabled",!1),v=x=>K("images.url")+`/navigator/models/model_${x}.png`,y=(x,F)=>{!x||x.clubLevel>fr()||E(_[F].name)},R=()=>{D(new u_(n,s,"model_"+C,Number(u),Number(p),h))};return i.exports.useEffect(()=>{if(!e){const x=[];for(let F=10;F<=100;F=F+10)x.push(F);r(x),g(x[0])}},[e]),i.exports.useEffect(()=>{b&&b.length&&m(b[0].id)},[b]),i.exports.useEffect(()=>{const x=K("navigator.room.models");x&&x.length&&(I(x),E(x[0].name))},[]),l(T,{overflow:"hidden",children:[l(re,{overflow:"hidden",children:[l(T,{size:6,gap:1,overflow:"auto",children:[l(T,{gap:1,children:[t(S,{children:d("navigator.createroom.roomnameinfo")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:60,onChange:x=>a(x.target.value),placeholder:d("navigator.createroom.roomnameinfo")})]}),l(T,{grow:!0,gap:1,children:[t(S,{children:d("navigator.createroom.roomdescinfo")}),t("textarea",{className:"flex-grow-1 form-control form-control-sm w-100",maxLength:255,onChange:x=>c(x.target.value),placeholder:d("navigator.createroom.roomdescinfo")})]}),l(T,{gap:1,children:[t(S,{children:d("navigator.category")}),t("select",{className:"form-select form-select-sm",onChange:x=>m(Number(x.target.value)),children:b&&b.length>0&&b.map(x=>t("option",{value:x.id,children:d(x.name)},x.id))})]}),l(T,{gap:1,children:[t(S,{children:d("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",onChange:x=>g(Number(x.target.value)),children:e&&e.map(x=>t("option",{value:x,children:x},x))})]}),l(T,{gap:1,children:[t(S,{children:d("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",onChange:x=>f(Number(x.target.value)),children:[t("option",{value:"0",children:d("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:d("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:d("navigator.roomsettings.trade_allowed")})]})]})]}),t(T,{size:6,gap:1,overflow:"auto",children:_.map((x,F)=>l(be,{fullHeight:!0,onClick:()=>y(x,F),itemActive:C===x.name,overflow:"unset",gap:0,className:"p-1",disabled:fr()<x.clubLevel,children:[t(w,{fullHeight:!0,center:!0,overflow:"hidden",children:t("img",{alt:"",src:v(x.name)})}),l(S,{bold:!0,children:[x.tileSize," ",d("navigator.createroom.tilesize")]}),!N&&x.clubLevel>cr.NO_CLUB&&t(it,{position:"absolute",className:"top-1 end-1",type:"hc"})]},x.name))})]}),t(M,{fullWidth:!0,variant:!n||n.length<3?"danger":"success",onClick:R,disabled:!n||n.length<3,children:d("navigator.createroom.create")})]})},lR=o=>{const{onCloseClick:e=null}=o,[r,n]=i.exports.useState(!1),[a,s]=i.exports.useState(!1),{report:c=null}=Pr(),{navigatorData:u=null}=Dr(),m=g=>{switch(g){case"settings":return H().userId===u.enteredGuestRoom.ownerId||H().isModerator;case"staff_pick":return H().securityLevel>=qo.COMMUNITY;default:return!1}},p=(g,h)=>{if(!(!u||!u.enteredGuestRoom))switch(g){case"set_home_room":let f=-1;u.homeRoomId!==u.enteredGuestRoom.roomId&&(f=u.enteredGuestRoom.roomId),f>0&&D(new p_(f));return;case"navigator_search_tag":ee(`navigator/search/${h}`),D(new Is("hotel_view",`tag:${h}`));return;case"open_room_thumbnail_camera":St(new Ur(Ur.TOGGLE_THUMBNAIL));return;case"open_group_info":eo(u.enteredGuestRoom.habboGroupId);return;case"toggle_room_link":ee("navigator/toggle-room-link");return;case"open_room_settings":D(new Pu(u.enteredGuestRoom.roomId));return;case"toggle_pick":n(_=>!_),D(new g_(u.enteredGuestRoom.roomId));return;case"toggle_mute":s(_=>!_),D(new m_);return;case"room_filter":D(new d_(u.enteredGuestRoom.roomId));return;case"open_floorplan_editor":ee("floor-editor/toggle");return;case"report_room":c(Ve.ROOM,{roomId:u.enteredGuestRoom.roomId,roomName:u.enteredGuestRoom.roomName});return;case"close":e();return}};return i.exports.useEffect(()=>{u&&(n(u.currentRoomIsStaffPick),u.enteredGuestRoom&&s(u.enteredGuestRoom.allInRoomMuted))},[u]),u.enteredGuestRoom?l(oe,{className:"nitro-room-info",theme:"primary-slim",children:[t(se,{headerText:d("navigator.roomsettings.roominfo"),onCloseClick:()=>p("close")}),t(ne,{className:"text-black",children:u.enteredGuestRoom&&l(V,{children:[l(w,{gap:2,overflow:"hidden",children:[t(ma,{roomId:u.enteredGuestRoom.roomId,customUrl:u.enteredGuestRoom.officialRoomPicRef,children:m("settings")&&t("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:()=>p("open_room_thumbnail_camera")})}),l(T,{grow:!0,gap:1,overflow:"hidden",children:[l(w,{gap:1,children:[l(T,{grow:!0,gap:1,children:[l(w,{gap:1,children:[t("i",{onClick:()=>p("set_home_room"),className:Vt("flex-shrink-0 icon icon-house-small cursor-pointer",u.homeRoomId!==u.enteredGuestRoom.roomId&&"gray")}),t(S,{bold:!0,children:u.enteredGuestRoom.roomName})]}),u.enteredGuestRoom.showOwner&&l(w,{alignItems:"center",gap:1,children:[t(S,{variant:"muted",children:d("navigator.roomownercaption")}),l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:u.enteredGuestRoom.ownerId}),t(S,{children:u.enteredGuestRoom.ownerName})]})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{variant:"muted",children:d("navigator.roomrating")}),t(S,{children:u.currentRoomRating})]}),u.enteredGuestRoom.tags.length>0&&t(w,{alignItems:"center",gap:1,children:u.enteredGuestRoom.tags.map(g=>l(S,{pointer:!0,className:"bg-muted rounded p-1",onClick:h=>p("navigator_search_tag",g),children:["#",g]},g))})]}),l(T,{alignItems:"center",gap:1,children:[m("settings")&&t("i",{className:"icon icon-cog cursor-pointer",title:d("navigator.room.popup.info.room.settings"),onClick:g=>p("open_room_settings")}),t(Mm,{title:d("navigator.embed.caption"),className:"cursor-pointer fa-icon",onClick:g=>ee("navigator/toggle-room-link")})]})]}),t(S,{overflow:"auto",style:{maxHeight:50},children:u.enteredGuestRoom.description}),u.enteredGuestRoom.habboGroupId>0&&l(w,{pointer:!0,alignItems:"center",gap:1,onClick:()=>p("open_group_info"),children:[t(je,{className:"flex-none",badgeCode:u.enteredGuestRoom.groupBadgeCode,isGroup:!0}),t(S,{underline:!0,children:d("navigator.guildbase",["groupName"],[u.enteredGuestRoom.groupName])})]})]})]}),l(T,{gap:1,children:[m("staff_pick")&&t(M,{onClick:()=>p("toggle_pick"),children:d(r?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),t(M,{variant:"danger",onClick:()=>p("report_room"),children:d("help.emergency.main.report.room")}),m("settings")&&l(V,{children:[t(M,{onClick:()=>p("toggle_mute"),children:d(a?"navigator.muteall_on":"navigator.muteall_off")}),t(M,{onClick:()=>p("room_filter"),children:d("navigator.roomsettings.roomfilter")}),t(M,{onClick:()=>p("open_floorplan_editor"),children:d("open.floor.plan.editor")})]})]})]})})]}):null},cR=o=>{const{onCloseClick:e=null}=o,{navigatorData:r=null}=Dr();return r.enteredGuestRoom?l(oe,{className:"nitro-room-link",theme:"primary-slim",children:[t(se,{headerText:d("navigator.embed.title"),onCloseClick:e}),t(ne,{className:"text-black d-flex align-items-center",children:l(w,{gap:2,children:[t(ma,{roomId:r.enteredGuestRoom.roomId,customUrl:r.enteredGuestRoom.officialRoomPicRef}),l(T,{children:[t(S,{bold:!0,fontSize:5,children:d("navigator.embed.headline")}),t(S,{children:d("navigator.embed.info")}),t("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:d("navigator.embed.src",["roomId"],[r.enteredGuestRoom.roomId.toString()]).replace("${url.prefix}",K("url.prefix",""))})]})]})})]}):null},uR=o=>{const{roomData:e=null,handleChange:r=null}=o,[n,a]=i.exports.useState(""),[s,c]=i.exports.useState(""),[u,m]=i.exports.useState(!1),p=()=>{!u||n.length<=0||s.length<=0||n!==s||r("password",n)};return i.exports.useEffect(()=>{a(""),c(""),m(!1)},[e]),l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.roomaccess.caption")}),t(S,{children:d("navigator.roomsettings.roomaccess.info")})]}),l(T,{overflow:"auto",children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.doormode")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.OPEN_STATE&&!u,onChange:g=>r("lock_state",nt.OPEN_STATE)}),t(S,{children:d("navigator.roomsettings.doormode.open")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.DOORBELL_STATE&&!u,onChange:g=>r("lock_state",nt.DOORBELL_STATE)}),t(S,{children:d("navigator.roomsettings.doormode.doorbell")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.INVISIBLE_STATE&&!u,onChange:g=>r("lock_state",nt.INVISIBLE_STATE)}),t(S,{children:d("navigator.roomsettings.doormode.invisible")})]}),l(w,{fullWidth:!0,gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===nt.PASSWORD_STATE||u,onChange:g=>m(g.target.checked)}),!u&&e.lockState!==nt.PASSWORD_STATE&&t(S,{children:d("navigator.roomsettings.doormode.password")}),(u||e.lockState===nt.PASSWORD_STATE)&&l(T,{gap:1,children:[t(S,{children:d("navigator.roomsettings.doormode.password")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:n,onChange:g=>a(g.target.value),placeholder:d("navigator.roomsettings.password"),onFocus:g=>m(!0)}),u&&n.length<=0&&t(S,{bold:!0,small:!0,variant:"danger",children:d("navigator.roomsettings.passwordismandatory")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:s,onChange:g=>c(g.target.value),onBlur:p,placeholder:d("navigator.roomsettings.passwordconfirm")}),u&&n.length>0&&n!==s&&t(S,{bold:!0,small:!0,variant:"danger",children:d("navigator.roomsettings.invalidconfirm")})]})]})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.pets")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPets,onChange:g=>r("allow_pets",g.target.checked)}),t(S,{children:d("navigator.roomsettings.allowpets")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPetsEat,onChange:g=>r("allow_pets_eat",g.target.checked)}),t(S,{children:d("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},Cc=3,bc=60,Sc=255,Oo=15,dR=o=>{const{roomData:e=null,handleChange:r=null,onClose:n=null}=o,[a,s]=i.exports.useState(""),[c,u]=i.exports.useState(""),[m,p]=i.exports.useState(""),[g,h]=i.exports.useState(""),[f,_]=i.exports.useState(0),[I,C]=i.exports.useState(""),{showConfirm:E=null}=Xe(),{categories:b=null}=Dr();U(h_,x=>{const F=x.getParser();if(F)switch(F.code){case Al.ERROR_INVALID_TAG:C("navigator.roomsettings.unacceptablewords");case Al.ERROR_NON_USER_CHOOSABLE_TAG:C("navigator.roomsettings.nonuserchoosabletag");break;default:C("");break}});const N=()=>{E(d("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[e.roomName]),()=>{D(new f_(e.roomId)),n&&n(),ee("navigator/search/myworld_view")},null,null,null,d("navigator.roomsettings.deleteroom.confirm.title"))},v=()=>{a===e.roomName||a.length<Cc||a.length>bc||r("name",a)},y=()=>{c===e.roomDescription||c.length>Sc||r("description",c)},R=x=>{x===0&&m===e.tags[0]||m.length>Oo||x===1&&g===e.tags[1]||g.length>Oo||(m===""&&g!==""&&h(""),C(""),_(x),r("tags",m===""&&g!==""?[g]:[m,g]))};return i.exports.useEffect(()=>{s(e.roomName),u(e.roomDescription),p(e.tags.length>0&&e.tags[0]?e.tags[0]:""),h(e.tags.length>0&&e.tags[1]?e.tags[1]:"")},[e]),l(V,{children:[l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("navigator.roomname")}),l(T,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:a,maxLength:bc,onChange:x=>s(x.target.value),onBlur:v}),a.length<Cc&&t(S,{bold:!0,small:!0,variant:"danger",children:d("navigator.roomsettings.roomnameismandatory")})]})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("navigator.roomsettings.desc")}),t("textarea",{className:"form-control form-control-sm",value:c,maxLength:Sc,onChange:x=>u(x.target.value),onBlur:y})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("navigator.category")}),t("select",{className:"form-select form-select-sm",value:e.categoryId,onChange:x=>r("category",x.target.value),children:b&&b.map(x=>t("option",{value:x.id,children:d(x.name)},x.id))})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",value:e.userCount,onChange:x=>r("max_visitors",x.target.value),children:Xl&&Xl.map(x=>t("option",{value:x,children:x},x))})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",value:e.tradeState,onChange:x=>r("trade_state",x.target.value),children:[t("option",{value:"0",children:d("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:d("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:d("navigator.roomsettings.trade_allowed")})]})]}),l(w,{alignItems:"center",gap:1,children:[t(S,{className:"col-3",children:d("navigator.tags")}),l(T,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:m,onChange:x=>p(x.target.value),onBlur:()=>R(0)}),m.length>Oo&&t(S,{bold:!0,small:!0,variant:"danger",children:d("navigator.roomsettings.toomanycharacters")}),f===0&&I!=""&&t(S,{bold:!0,small:!0,variant:"danger",children:d(I)})]}),l(T,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:g,onChange:x=>h(x.target.value),onBlur:()=>R(1)}),g.length>Oo&&t(S,{bold:!0,small:!0,variant:"danger",children:d("navigator.roomsettings.toomanycharacters")}),f===1&&I!=""&&t(S,{bold:!0,small:!0,variant:"danger",children:d(I)})]})]}),l(w,{alignItems:"center",gap:1,children:[t(L,{className:"col-3"}),t("input",{className:"form-check-input",type:"checkbox",checked:e.allowWalkthrough,onChange:x=>r("allow_walkthrough",x.target.checked)}),t(S,{children:d("navigator.roomsettings.allow_walk_through")})]}),l(S,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:N,children:[t(_r,{className:"fa-icon"}),d("navigator.roomsettings.delete")]})]})},mR=o=>{var m;const{roomData:e=null,handleChange:r=null}=o,[n,a]=i.exports.useState(-1),[s,c]=i.exports.useState([]),u=p=>{c(g=>{const h=[...g],f=h.findIndex(_=>_.userId===p);return f>=0&&h.splice(f,1),h}),D(new E_(p,e.roomId)),a(-1)};return U(I_,p=>{const g=p.getParser();!e||e.roomId!==g.roomId||c(g.bannedUsers)}),i.exports.useEffect(()=>{D(new Wu(e.roomId))},[e.roomId]),l(re,{overflow:"auto",children:[l(T,{size:6,children:[l(S,{bold:!0,children:[d("navigator.roomsettings.moderation.banned.users")," (",s.length,")"]}),t(w,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(T,{fullWidth:!0,overflow:"auto",gap:1,children:s&&s.length>0&&s.map((p,g)=>l(w,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(Er,{userName:p.userName}),l(S,{pointer:!0,grow:!0,onClick:h=>a(p.userId),children:[" ",p.userName]})]},g))})}),l(M,{disabled:n<=0,onClick:p=>u(n),children:[d("navigator.roomsettings.moderation.unban")," ",n>0&&((m=s.find(p=>p.userId===n))==null?void 0:m.userName)]})]}),l(T,{size:6,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.moderation.mute.header")}),t(w,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowMute,onChange:p=>r("moderation_mute",p.target.value),children:[t("option",{value:Mr.MODERATION_LEVEL_NONE,children:d("navigator.roomsettings.moderation.none")}),t("option",{value:Mr.MODERATION_LEVEL_USER_WITH_RIGHTS,children:d("navigator.roomsettings.moderation.rights")})]})})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.moderation.kick.header")}),t(w,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowKick,onChange:p=>r("moderation_kick",p.target.value),children:[t("option",{value:Mr.MODERATION_LEVEL_NONE,children:d("navigator.roomsettings.moderation.none")}),t("option",{value:Mr.MODERATION_LEVEL_USER_WITH_RIGHTS,children:d("navigator.roomsettings.moderation.rights")}),t("option",{value:Mr.MODERATION_LEVEL_ALL,children:d("navigator.roomsettings.moderation.all")})]})})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.moderation.ban.header")}),t(w,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowBan,onChange:p=>r("moderation_ban",p.target.value),children:[t("option",{value:Mr.MODERATION_LEVEL_NONE,children:d("navigator.roomsettings.moderation.none")}),t("option",{value:Mr.MODERATION_LEVEL_USER_WITH_RIGHTS,children:d("navigator.roomsettings.moderation.rights")})]})})]})]})]})},gR=o=>{const{roomData:e=null}=o,[r,n]=i.exports.useState(new Map);return U(__,a=>{const s=a.getParser();!e||e.roomId!==s.roomId||n(s.users)}),U(C_,a=>{const s=a.getParser();!e||e.roomId!==s.roomId||n(c=>{const u=new Map(c);return u.set(s.data.userId,s.data.userName),u})}),U(b_,a=>{const s=a.getParser();!e||e.roomId!==s.roomId||n(c=>{const u=new Map(c);return u.delete(s.userId),u})}),i.exports.useEffect(()=>{D(new S_(e.roomId))},[e.roomId]),l(re,{children:[l(T,{size:6,children:[t(S,{bold:!0,children:d("navigator.flatctrls.userswithrights",["displayed","total"],[r.size.toString(),r.size.toString()])}),t(w,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(T,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(r.entries()).map(([a,s],c)=>l(w,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(Er,{userName:s}),l(S,{pointer:!0,grow:!0,onClick:u=>D(new N_(a)),children:[" ",s]})]},c))})})]}),t(T,{size:6,justifyContent:"end",children:t(M,{variant:"danger",disabled:!r.size,onClick:a=>D(new T_(e.roomId)),children:d("navigator.flatctrls.clear")})})]})},pR=o=>{const{roomData:e=null,handleChange:r=null}=o,[n,a]=i.exports.useState(0);return i.exports.useEffect(()=>{a(e.chatSettings.distance)},[e.chatSettings]),l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.vip.caption")}),t(S,{children:d("navigator.roomsettings.vip.info")})]}),l(re,{overflow:"auto",children:[l(T,{size:6,gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.chat_settings")}),t(S,{children:d("navigator.roomsettings.chat_settings.info")}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.mode,onChange:s=>r("bubble_mode",s.target.value),children:[t("option",{value:It.CHAT_MODE_FREE_FLOW,children:d("navigator.roomsettings.chat.mode.free.flow")}),t("option",{value:It.CHAT_MODE_LINE_BY_LINE,children:d("navigator.roomsettings.chat.mode.line.by.line")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.weight,onChange:s=>r("chat_weight",s.target.value),children:[t("option",{value:It.CHAT_BUBBLE_WIDTH_NORMAL,children:d("navigator.roomsettings.chat.bubbles.width.normal")}),t("option",{value:It.CHAT_BUBBLE_WIDTH_THIN,children:d("navigator.roomsettings.chat.bubbles.width.thin")}),t("option",{value:It.CHAT_BUBBLE_WIDTH_WIDE,children:d("navigator.roomsettings.chat.bubbles.width.wide")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.speed,onChange:s=>r("bubble_speed",s.target.value),children:[t("option",{value:It.CHAT_SCROLL_SPEED_FAST,children:d("navigator.roomsettings.chat.speed.fast")}),t("option",{value:It.CHAT_SCROLL_SPEED_NORMAL,children:d("navigator.roomsettings.chat.speed.normal")}),t("option",{value:It.CHAT_SCROLL_SPEED_SLOW,children:d("navigator.roomsettings.chat.speed.slow")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.protection,onChange:s=>r("flood_protection",s.target.value),children:[t("option",{value:It.FLOOD_FILTER_LOOSE,children:d("navigator.roomsettings.chat.flood.loose")}),t("option",{value:It.FLOOD_FILTER_NORMAL,children:d("navigator.roomsettings.chat.flood.normal")}),t("option",{value:It.FLOOD_FILTER_STRICT,children:d("navigator.roomsettings.chat.flood.strict")})]}),t(S,{children:d("navigator.roomsettings.chat_settings.hearing.distance")}),t("input",{type:"number",min:"0",className:"form-control form-control-sm",value:n,onChange:s=>a(s.target.valueAsNumber),onBlur:s=>r("chat_distance",n)})]}),l(T,{size:6,gap:1,children:[t(S,{bold:!0,children:d("navigator.roomsettings.vip_settings")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.hideWalls,onChange:s=>r("hide_walls",s.target.checked)}),t(S,{children:d("navigator.roomsettings.hide_walls")})]}),l("select",{className:"form-select form-select-sm",value:e.wallThickness,onChange:s=>r("wall_thickness",s.target.value),children:[t("option",{value:"0",children:d("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:"1",children:d("navigator.roomsettings.wall_thickness.thick")}),t("option",{value:"-1",children:d("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:"-2",children:d("navigator.roomsettings.wall_thickness.thinnest")})]}),l("select",{className:"form-select form-select-sm",value:e.floorThickness,onChange:s=>r("floor_thickness",s.target.value),children:[t("option",{value:"0",children:d("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:"1",children:d("navigator.roomsettings.floor_thickness.thick")}),t("option",{value:"-1",children:d("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:"-2",children:d("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},Nn=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],hR=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(Nn[0]);U(v_,u=>{const m=u.getParser();if(!m)return;const p=m.data;r({roomId:p.roomId,roomName:p.name,roomDescription:p.description,categoryId:p.categoryId,userCount:p.maximumVisitorsLimit,tags:p.tags,tradeState:p.tradeMode,allowWalkthrough:p.allowWalkThrough,lockState:p.doorMode,password:null,allowPets:p.allowPets,allowPetsEat:p.allowFoodConsume,hideWalls:p.hideWalls,wallThickness:p.wallThickness,floorThickness:p.floorThickness,chatSettings:{mode:p.chatSettings.mode,weight:p.chatSettings.weight,speed:p.chatSettings.speed,distance:p.chatSettings.distance,protection:p.chatSettings.protection},moderationSettings:{allowMute:p.roomModerationSettings.allowMute,allowKick:p.roomModerationSettings.allowKick,allowBan:p.roomModerationSettings.allowBan}}),D(new Wu(p.roomId))});const s=()=>{r(null),a(Nn[0])},c=(u,m)=>{r(p=>{const g={...p};switch(u){case"name":g.roomName=String(m);break;case"description":g.roomDescription=String(m);break;case"category":g.categoryId=Number(m);break;case"max_visitors":g.userCount=Number(m);break;case"trade_state":g.tradeState=Number(m);break;case"tags":g.tags=m;break;case"allow_walkthrough":g.allowWalkthrough=Boolean(m);break;case"allow_pets":g.allowPets=Boolean(m);break;case"allow_pets_eat":g.allowPetsEat=Boolean(m);break;case"hide_walls":g.hideWalls=Boolean(m);break;case"wall_thickness":g.wallThickness=Number(m);break;case"floor_thickness":g.floorThickness=Number(m);break;case"lock_state":g.lockState=Number(m);break;case"password":g.lockState=nt.PASSWORD_STATE,g.password=String(m);break;case"moderation_mute":g.moderationSettings.allowMute=Number(m);break;case"moderation_kick":g.moderationSettings.allowKick=Number(m);break;case"moderation_ban":g.moderationSettings.allowBan=Number(m);break;case"bubble_mode":g.chatSettings.mode=Number(m);break;case"chat_weight":g.chatSettings.weight=Number(m);break;case"bubble_speed":g.chatSettings.speed=Number(m);break;case"flood_protection":g.chatSettings.protection=Number(m);break;case"chat_distance":g.chatSettings.distance=Number(m);break}return D(new w_(g.roomId,g.roomName,g.roomDescription,g.lockState,g.password,g.userCount,g.categoryId,g.tags.length,g.tags,g.tradeState,g.allowPets,g.allowPetsEat,g.allowWalkthrough,g.hideWalls,g.wallThickness,g.floorThickness,g.moderationSettings.allowMute,g.moderationSettings.allowKick,g.moderationSettings.allowBan,g.chatSettings.mode,g.chatSettings.weight,g.chatSettings.speed,g.chatSettings.distance,g.chatSettings.protection)),g})};return e?l(oe,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[t(se,{headerText:d("navigator.roomsettings"),onCloseClick:s}),t(In,{children:Nn.map(u=>t(jr,{isActive:n===u,onClick:m=>a(u),children:d(u)},u))}),l(ne,{children:[n===Nn[0]&&t(dR,{roomData:e,handleChange:c,onClose:s}),n===Nn[1]&&t(uR,{roomData:e,handleChange:c}),n===Nn[2]&&t(gR,{roomData:e,handleChange:c}),n===Nn[3]&&t(pR,{roomData:e,handleChange:c}),n===Nn[4]&&t(mR,{roomData:e,handleChange:c})]})]}):null},Nc=o=>{const{roomData:e=null}=o,[r,n]=i.exports.useState(!1),a=i.exports.useRef(),s=()=>{const c=100*(e.userCount/e.maxUserCount);let u="bg-primary";return c>=92?u="bg-danger":c>=50?u="bg-warning":c>0&&(u="bg-success"),u};return l(V,{children:[t(L,{pointer:!0,innerRef:a,className:"icon icon-navigator-info",onMouseOver:c=>n(!0),onMouseLeave:c=>n(!1)}),t(gu,{show:r,target:a.current,placement:"right",children:t(Bo,{children:t(ne,{overflow:"hidden",className:"room-info image-rendering-pixelated bg-transparent",children:l(w,{gap:2,overflow:"hidden",children:[l(ma,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(je,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),e.doorMode!==nt.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===nt.DOORBELL_STATE?"locked":e.doorMode===nt.PASSWORD_STATE?"password":e.doorMode===nt.INVISIBLE_STATE?"invisible":"")})]}),l(T,{gap:1,children:[t(S,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:e.roomName}),l(w,{gap:2,children:[t(S,{italics:!0,variant:"muted",children:d("navigator.roomownercaption")}),l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:e.ownerId}),t(S,{italics:!0,children:e.ownerName})]})]}),t(S,{className:"flex-grow-1",children:e.description}),l(w,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+s(),gap:1,children:[t(li,{className:"fa-icon"}),e.userCount]})]})]})})})})]})},Tc=o=>{const{roomData:e=null,children:r=null,thumbnail:n=!1,...a}=o,{setDoorData:s=null}=Dr(),c=()=>{const m=100*(e.userCount/e.maxUserCount);let p="bg-primary";return m>=92?p="bg-danger":m>=50?p="bg-warning":m>0&&(p="bg-success"),p},u=m=>{if(e.ownerId!==H().userId){if(e.habboGroupId!==0){Ir(e.roomId);return}switch(e.doorMode){case nt.DOORBELL_STATE:s(p=>{const g={...p};return g.roomInfo=e,g.state=ke.START_DOORBELL,g});return;case nt.PASSWORD_STATE:s(p=>{const g={...p};return g.roomInfo=e,g.state=ke.START_PASSWORD,g});return}}jn(e.roomId)};return n?l(T,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:0,className:"navigator-item p-1 bg-light rounded-3 small mb-1 flex-column border border-muted",...a,children:[l(ma,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(je,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),l(w,{center:!0,className:"badge p-1 position-absolute m-1 "+c(),gap:1,children:[t(li,{className:"fa-icon"}),e.userCount]}),e.doorMode!==nt.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===nt.DOORBELL_STATE?"locked":e.doorMode===nt.PASSWORD_STATE?"password":e.doorMode===nt.INVISIBLE_STATE?"invisible":"")})]}),l(w,{className:"w-100",children:[t(S,{truncate:!0,className:"flex-grow-1",children:e.roomName}),t(w,{reverse:!0,alignItems:"center",gap:1,children:t(Nc,{roomData:e})}),r]})]}):l(w,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:2,className:"navigator-item px-2 py-1 small",...a,children:[l(w,{center:!0,className:"badge p-1 "+c(),gap:1,children:[t(li,{className:"fa-icon"}),e.userCount]}),t(S,{truncate:!0,grow:!0,children:e.roomName}),l(w,{reverse:!0,alignItems:"center",gap:1,children:[t(Nc,{roomData:e}),e.habboGroupId>0&&t("i",{className:"icon icon-navigator-room-group"}),e.doorMode!==nt.OPEN_STATE&&t("i",{className:"icon icon-navigator-room-"+(e.doorMode===nt.DOORBELL_STATE?"locked":e.doorMode===nt.PASSWORD_STATE?"password":e.doorMode===nt.INVISIBLE_STATE?"invisible":"")})]}),r]})},fR=o=>{const{searchResult:e=null,...r}=o,[n,a]=i.exports.useState(!0),[s,c]=i.exports.useState(0),{topLevelContext:u=null}=Dr(),m=()=>{let f=e.code;return!f||!f.length||d("navigator.searchcode.title."+f)=="navigator.searchcode.title."+f?e.data:f.startsWith("${")?f.slice(2,f.length-1):"navigator.searchcode.title."+f},p=()=>{c(f=>f===dn.LIST?dn.THUMBNAILS:dn.LIST)},g=()=>{e.action==1?D(new Is(e.code,"")):e.action==2&&u&&D(new Is(u.code,""))};i.exports.useEffect(()=>{e&&(a(!e.closed),c(e.mode))},[e]);const h=s>=dn.THUMBNAILS;return l(T,{className:"bg-white rounded border border-muted",gap:0,children:[l(w,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[l(w,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:f=>a(_=>!_),children:[n&&t(Lm,{className:"text-secondary fa-icon"}),!n&&t(Ys,{className:"text-secondary fa-icon"}),t(S,{children:d(m())})]}),l(w,{gap:2,children:[s===dn.LIST&&t(Um,{className:"text-secondary fa-icon",onClick:p}),s>=dn.THUMBNAILS&&t(Fm,{className:"text-secondary fa-icon",onClick:p}),e.action>0&&e.action===1&&t(Gm,{className:"text-secondary fa-icon",onClick:g}),e.action>0&&e.action!==1&&t(Bm,{className:"text-secondary fa-icon",onClick:g})]})]})," ",n&&t(V,{children:h?t(Le,{columnCount:3,...r,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:e.rooms.length>0&&e.rooms.map((f,_)=>t(Tc,{roomData:f,thumbnail:!0},_))}):t(re,{columnCount:1,className:"navigator-grid",gap:0,children:e.rooms.length>0&&e.rooms.map((f,_)=>t(Tc,{roomData:f},_))})})]})},IR=o=>{const{sendSearch:e=null}=o,[r,n]=i.exports.useState(0),[a,s]=i.exports.useState(""),{topLevelContext:c=null,searchResult:u=null}=Dr(),m=()=>{if(!c)return;let g=ns[r];g||(g=ns[0]);const h=(g.query?g.query+":":"")+a;e(h||"",c.code)},p=g=>{g.key==="Enter"&&m()};return i.exports.useEffect(()=>{if(!u)return;const g=u.data.split(":");let h=null,f="";if(g.length>=2){const[_,...I]=g;h=ns.find(C=>C.query===_),f=I.join(":")}else f=u.data;h||(h=ns[0]),n(ns.findIndex(_=>_===h)),s(f)},[u]),l(w,{fullWidth:!0,gap:1,children:[t(w,{shrink:!0,children:t("select",{className:"form-select form-select-sm",value:r,onChange:g=>n(parseInt(g.target.value)),children:ns.map((g,h)=>t("option",{value:h,children:d("navigator.filter."+g.name)},h))})}),l(w,{fullWidth:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("navigator.filter.input.placeholder"),value:a,onChange:g=>s(g.target.value),onKeyDown:g=>p(g)}),t(M,{variant:"primary",onClick:m,children:t(Pi,{className:"fa-icon"})})]})]})},ER=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(!1),[s,c]=i.exports.useState(!1),[u,m]=i.exports.useState(!1),[p,g]=i.exports.useState(!1),[h,f]=i.exports.useState(!1),[_,I]=i.exports.useState(!0),[C,E]=i.exports.useState(!1),{searchResult:b=null,topLevelContext:N=null,topLevelContexts:v=null,navigatorData:y=null}=Dr(),R=i.exports.useRef(null),x=i.exports.useRef();Ye(qt.CREATED,A=>{r(!1),c(!1)});const F=i.exports.useCallback((A,O)=>{c(!1),D(new Is(O,A)),f(!0)},[]),k=i.exports.useCallback(()=>{if(!n){E(!0);return}if(R.current){F(R.current.value,R.current.code),R.current=null;return}if(b){F(b.data,b.code);return}N&&F("",N.code)},[n,b,N,F]);return i.exports.useEffect(()=>{const A={linkReceived:O=>{const P=O.split("/");if(!(P.length<2))switch(P[1]){case"show":{r(!0),E(!0);return}case"hide":r(!1);return;case"toggle":{if(e){r(!1);return}r(!0),E(!0);return}case"toggle-room-info":m(B=>!B);return;case"toggle-room-link":g(B=>!B);return;case"goto":if(P.length<=2)return;switch(P[2]){case"home":if(y.homeRoomId<=0)return;Ir(y.homeRoomId);break;default:{const B=parseInt(P[2]);Ir(B)}}return;case"create":r(!0),c(!0);return;case"search":if(P.length>2){const B=P[2];let G="";P.length>3&&(G=P[3]),R.current={value:G,code:B},r(!0),E(!0)}return}},eventUrlPrefix:"navigator/"};return _t(A),()=>Ct(A)},[e,y]),i.exports.useEffect(()=>{b&&(f(!1),x&&x.current&&(x.current.scrollTop=0))},[b]),i.exports.useEffect(()=>{!e||!n||!C||(k(),E(!1))},[e,n,C,k]),i.exports.useEffect(()=>{n||!N||a(!0)},[n,N]),i.exports.useEffect(()=>{!e||!_||(D(new R_),I(!1))},[e,_]),i.exports.useEffect(()=>{Fs.addCallback(zs.OPENROOM,(A,O=!1,P=null)=>D(new x_(A)))},[]),l(V,{children:[e&&l(oe,{uniqueKey:"navigator",className:"nitro-navigator",children:[t(se,{headerText:d(s?"navigator.createroom.title":"navigator.title"),onCloseClick:A=>r(!1)}),l(In,{children:[v&&v.length>0&&v.map((A,O)=>t(jr,{isActive:N===A&&!s,onClick:P=>F("",A.code),children:d("navigator.toplevelview."+A.code)},O)),t(jr,{isActive:s,onClick:A=>c(!0),children:t(Ys,{className:"fa-icon"})})]}),l(ne,{position:"relative",children:[h&&t(L,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),!s&&l(V,{children:[t(IR,{sendSearch:F}),t(T,{innerRef:x,overflow:"auto",children:b&&b.results.map((A,O)=>t(fR,{searchResult:A},O))})]}),s&&t(iR,{})]})]}),t(aR,{}),u&&t(lR,{onCloseClick:()=>m(!1)}),p&&t(cR,{onCloseClick:()=>g(!1)}),t(hR,{})]})},_R=/\n\r|\n|\r/mg,CR=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(""),[s,c]=i.exports.useState(null),u=i.exports.useRef(null);return i.exports.useEffect(()=>{const m=async g=>{try{const h=await fetch(g);if(!h)return;const _=(await h.text()).split(_R),I=_.shift().split("|");a(I[0]),c(C=>I[1]&&I[1].split(";").length===2?{width:parseInt(I[1].split(";")[0]),height:parseInt(I[1].split(";")[1])}:null),r(_.join(""))}catch{Eu.error(`Failed to fetch ${g}`)}},p={linkReceived:g=>{const h=g.split("/");h.length<2||(h.shift(),m(K("habbopages.url")+h.join("/")))},eventUrlPrefix:"habbopages/"};return _t(p),()=>Ct(p)},[]),i.exports.useEffect(()=>{const m=p=>{if(!(p.target instanceof HTMLAnchorElement))return;p.preventDefault();const g=p.target.href;!g||!g.length||Xn(g)};return document.addEventListener("click",m),()=>{document.removeEventListener("click",m)}},[]),e?l(oe,{className:"nitropedia",theme:"primary-slim",style:s?{width:s.width,height:s.height}:{},children:[t(se,{headerText:n,onCloseClick:()=>r(null)}),t(ne,{children:t(L,{fit:!0,innerRef:u,className:"text-black",dangerouslySetInnerHTML:{__html:e}})})]}):null},bR=o=>{const{offer:e=null,setOpen:r=null}=o;if(e)return l(Zi,{fadesOut:!1,onClose:null,onClick:n=>r(!0),gap:2,children:[t(L,{className:"nitro-targeted-offer-icon",style:{backgroundImage:`url(${K("image.library.url")+e.iconImageUrl})`}}),t(S,{variant:"light",className:"ubuntu-bold",children:e.title})]})},SR=o=>{const{offer:e=null,setOpen:r=null}=o,{getCurrencyAmount:n}=es(),[a,s]=i.exports.useState(1),c=i.exports.useMemo(()=>{let p=!1,g=!1,h=!1;return e.priceInCredits>0&&(p=n(-1)>=e.priceInCredits),e.priceInActivityPoints>0?g=n(e.activityPointType)>=e.priceInActivityPoints:g=!0,e.purchaseLimit>0&&(h=!0),p&&g&&h},[e,n]),u=()=>{let p=Math.max(0,(e.expirationTime-Date.now())/1e3);return Vr.format(p)},m=()=>{D(new y_(e.id,a)),D(new ju)};if(e)return l(oe,{theme:"primary-slim",uniqueKey:"targeted-offer",className:"nitro-targeted-offer",children:[t(se,{headerText:d(e.title),onCloseClick:p=>r(!1)}),t(wd,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",variant:"danger",gap:3,children:d("targeted.offer.timeleft",["timeleft"],[u()])}),l(ne,{gap:1,children:[l(w,{gap:1,fullHeight:!0,children:[l(w,{gap:1,column:!0,className:"w-75 text-black",children:[l(T,{className:"bg-warning p-2",fullHeight:!0,children:[t("h4",{children:d(e.title)}),t(L,{dangerouslySetInnerHTML:{__html:e.description}})]}),l(w,{alignSelf:"center",alignItems:"center",justifyContent:"center",gap:2,children:[e.purchaseLimit>1&&l(w,{gap:1,children:[t(S,{variant:"muted",children:d("catalog.bundlewidget.quantity")}),t("input",{type:"number",value:a,onChange:p=>s(parseInt(p.target.value)),min:1,max:e.purchaseLimit})]}),t(M,{variant:"primary",disabled:!c,onClick:()=>m(),children:d("targeted.offer.button.buy")})]})]}),t(L,{className:"w-50",fullHeight:!0,style:{background:`url(${K("image.library.url")+e.imageUrl}) no-repeat center`}})]}),l(w,{className:"price-ray position-absolute",alignItems:"center",justifyContent:"center",column:!0,children:[t(S,{children:d("targeted.offer.price.label")}),e.priceInCredits>0&&l(w,{gap:1,children:[t(S,{variant:"light",children:e.priceInCredits}),t(it,{type:-1})]}),e.priceInActivityPoints>0&&l(w,{gap:1,children:[l(S,{className:"ubuntu-bold",variant:"light",children:["+",e.priceInActivityPoints]})," ",t(it,{type:e.activityPointType})]})]})]})]})},NR=()=>{const[o,e]=i.exports.useState(null),[r,n]=i.exports.useState(!1);if(U(O_,a=>{let s=a.getParser();s&&e(s.data)}),Kd(()=>{D(new ju)}),!!o)return t(V,{children:r?t(SR,{offer:o,setOpen:n}):t(bR,{offer:o,setOpen:n})})},TR=o=>{const[e,r]=i.exports.useState(0),[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(!0),{showConfirm:u=null}=Xe();U(qu,f=>{r(0),a(null)}),U(xu,f=>{r(0),a(null)}),U(Ts,f=>{const _=f.getParser();_.roomEnter&&(_.data.habboGroupId>0?(r(_.data.habboGroupId),D(new Us(_.data.habboGroupId,!1))):(r(0),a(null)))}),U(A_,f=>{const _=f.getParser();!n||_.groupId!==n.id&&_.groupId!==e||(r(0),a(null))}),U(Ks,f=>{const _=f.getParser();_.id===e&&a(_)});const m=()=>{u(d("group.leaveconfirm.desc"),()=>{D(new Fi(n.id,H().userId))},null)},p=n&&n.ownerName===H().userName,g=()=>{if(p)return"group.manage";if(n.type===ar.PRIVATE)return"";if(n.membershipType===vt.MEMBER)return"group.leave";if(n.membershipType===vt.NOT_MEMBER&&n.type===ar.REGULAR)return"group.join";if(n.membershipType===vt.REQUEST_PENDING)return"group.membershippending";if(n.membershipType===vt.NOT_MEMBER&&n.type===ar.EXCLUSIVE)return"group.requestmembership"},h=()=>{if(p)return gd(n.id);if(!(n.type===ar.PRIVATE&&n.membershipType===vt.NOT_MEMBER)){if(n.membershipType===vt.MEMBER){m();return}$i(n.id)}};return n?t(L,{className:"nitro-notification-bubble rounded",children:l(T,{children:[l(w,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:f=>c(_=>!_),children:[t(S,{variant:"white",children:d("group.homeroominfo.title")}),s&&t(Di,{className:"fa-icon"}),!s&&t(Mi,{className:"fa-icon"})]}),s&&l(V,{children:[l(w,{pointer:!0,alignItems:"center",gap:2,onClick:f=>eo(n.id),children:[t(L,{className:"group-badge",children:t(je,{badgeCode:n.badge,isGroup:!0})}),t(S,{variant:"white",children:n.title})]}),(n.type!==ar.PRIVATE||p)&&t(M,{fullWidth:!0,variant:"success",disabled:n.membershipType===vt.REQUEST_PENDING,onClick:h,children:d(g())})]})]})}):null},vR=o=>{const{title:e="Nitro",onClose:r=null,...n}=o;return t(ua,{title:e,onClose:r,...n,children:l(re,{children:[t(T,{center:!0,size:5,children:t("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:""})}),l(T,{size:7,children:[l(T,{alignItems:"center",gap:0,children:[t(S,{bold:!0,fontSize:4,children:"Nitro React"}),l(S,{children:["v",md()]})]}),l(T,{alignItems:"center",children:[l(S,{children:[t("b",{children:"Renderer:"})," v",db()]}),l(T,{fullWidth:!0,gap:1,children:[t(M,{fullWidth:!0,variant:"success",onClick:a=>window.open("https://discord.nitrodev.co"),children:"Discord"}),l(w,{gap:1,children:[t(M,{fullWidth:!0,onClick:a=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Git"}),t(M,{fullWidth:!0,onClick:a=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Bug Report"})]})]})]})]})]})})},wR=o=>{const{item:e=null,title:r=o.item&&o.item.title||"",onClose:n=null,...a}=o,[s,c]=i.exports.useState(!1),u=()=>{Xn(e.clickUrl),n()},m=e.alertType===de.DEFAULT;return l(ua,{title:r,onClose:n,...a,type:m?de.DEFAULT:e.alertType,children:[l(w,{fullHeight:!0,overflow:"auto",gap:m||e.imageUrl&&!s?2:0,children:[m&&!e.imageUrl&&t(L,{className:"notification-frank flex-shrink-0"}),e.imageUrl&&!s&&t("img",{src:e.imageUrl,alt:e.title,onError:()=>{c(!0)},className:"align-self-baseline"}),l(L,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",e.clickUrl&&!m?"justify-content-center":""],children:[e.messages.length>0&&e.messages.map((p,g)=>{const h=p.replace(/\r\n|\r|\n/g,"<br />");return t(L,{dangerouslySetInnerHTML:{__html:h}},g)}),e.clickUrl&&e.clickUrl.length>0&&e.imageUrl&&!s&&l(V,{children:[t("hr",{className:"my-2 w-100"}),t(M,{onClick:u,className:"align-self-center px-3",children:d(e.clickUrlText)})]})]})]}),(!e.imageUrl||e.imageUrl&&s)&&t(V,{children:l(T,{alignItems:"center",center:!0,gap:0,children:[t("hr",{className:"my-2 w-100"}),!e.clickUrl&&t(M,{onClick:n,children:d("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(M,{onClick:u,children:d(e.clickUrlText)})]})})]})},RR=o=>{const{item:e=null,title:r=o.item&&o.item.title||"",onClose:n=null,...a}=o,[s,c]=i.exports.useState(""),[u,m]=i.exports.useState([]),p=()=>{Xn(e.clickUrl),n()},g=f=>{let _=JSON.parse(e.messages[0]);m(_.filter(I=>I.includes(f))),c(f)};i.exports.useEffect(()=>{m(JSON.parse(e.messages[0]))},[e]);const h=e.clickUrl&&e.clickUrl.startsWith("event:");return l(ua,{title:r,onClose:n,...a,children:[t(w,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("generic.search"),value:s,onChange:f=>g(f.target.value)})}),t(T,{fullHeight:!0,className:"py-1",overflow:"hidden",children:t(Le,{gap:1,columnCount:1,children:u&&u.map((f,_)=>t("span",{children:f},_))})}),t("hr",{className:"my-2"}),l(T,{alignItems:"center",center:!0,gap:1,children:[!h&&!e.clickUrl&&t(M,{onClick:n,children:d("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(M,{onClick:p,children:d(e.clickUrlText)})]})]})},xR=(o,e)=>{if(!o)return null;const r={key:o.id,item:o,onClose:e};switch(o.alertType){case de.NITRO:return t(vR,{...r});case de.SEARCH:return t(RR,{...r});default:return t(wR,{...r})}},yR=o=>{const{item:e=null,onClose:r=null,...n}=o;return l(Zi,{fadesOut:!1,className:"flex-column club-gift",onClose:r,...n,children:[l("div",{className:"d-flex align-items-center gap-2 mb-2",children:[t(it,{type:"hc",className:"flex-shrink-0"}),t("span",{className:"ms-1",children:d("notifications.text.club_gift")})]}),l("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[t("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:()=>Xn(e.linkUrl),children:d("notifications.button.show_gift_list")}),t("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:r,children:d("notifications.button.later")})]})]})},OR=o=>{const{item:e=null,onClose:r=null,...n}=o,a=e.message.replace(/\r\n|\r|\n/g,"<br />");return l(Zi,{onClose:r,gap:2,alignItems:"center",onClick:s=>e.linkUrl&&e.linkUrl.length&&Xn(e.linkUrl),...n,children:[t(w,{center:!0,className:"bubble-image-container",children:e.iconUrl&&e.iconUrl.length&&t("img",{className:"no-select",src:e.iconUrl,alt:""})}),t(S,{wrap:!0,variant:"white",dangerouslySetInnerHTML:{__html:a}})]})},AR=(o,e)=>{if(!o)return null;const r={key:o.id,item:o,onClose:e};switch(o.notificationType){case $e.CLUBGIFT:return t(yR,{...r});default:return t(OR,{...r})}},kR=o=>{const{item:e=null,onClose:r=null,...n}=o,{message:a=null,onConfirm:s=null,onCancel:c=null,confirmText:u=null,cancelText:m=null,title:p=null}=e,g=()=>{s&&s(),r()},h=()=>{c&&c(),r()};return l(ua,{title:p,onClose:r,...n,type:de.ALERT,children:[t(w,{grow:!0,center:!0,children:t(S,{children:a})}),l(w,{gap:1,children:[t(M,{fullWidth:!0,variant:"danger",onClick:h,children:m}),t(M,{fullWidth:!0,onClick:g,children:u})]})]})},PR=(o,e)=>{if(!o)return null;const r={key:o.id,item:o,onClose:e};switch(o.confirmType){default:return t(kR,{...r})}},DR=o=>{const{alerts:e=[],bubbleAlerts:r=[],confirms:n=[],closeAlert:a=null,closeBubbleAlert:s=null,closeConfirm:c=null}=Xe(),u=i.exports.useMemo(()=>{if(!e||!e.length)return null;const g=[];for(const h of e){const f=xR(h,()=>a(h));g.push(f)}return g},[e,a]),m=i.exports.useMemo(()=>{if(!r||!r.length)return null;const g=[];for(const h of r){const f=AR(h,()=>s(h));if(h.notificationType===$e.CLUBGIFT){g.unshift(f);continue}g.push(f)}return g},[r,s]),p=i.exports.useMemo(()=>{if(!n||!n.length)return null;const g=[];for(const h of n){const f=PR(h,()=>c(h));g.push(f)}return g},[n,c]);return l(V,{children:[t(T,{gap:1,children:m}),p,u]})},vc=o=>{const{type:e=-1,amount:r=-1,short:n=!1}=o,a=i.exports.useMemo(()=>l(w,{justifyContent:"end",pointer:!0,gap:1,className:"nitro-purse-button rounded",children:[t(S,{truncate:!0,textEnd:!0,variant:"white",grow:!0,children:n?GC(r):zo(r)}),t(it,{type:e})]}),[r,n,e]);return n?t(mu,{placement:"left",overlay:t(Vm,{id:`tooltip-${e}`,children:zo(r)}),children:a}):a},MR=o=>{const{type:e=-1,amount:r=-1}=o;return l(w,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency p-2 rounded",children:[t(S,{variant:"white",children:d(`purse.seasonal.currency.${e}`)}),l(w,{gap:1,children:[t(S,{variant:"white",children:zo(r)}),t(it,{type:e})]})]})},LR=o=>{const{purse:e=null,hcDisabled:r=!1}=es(),n=i.exports.useMemo(()=>K("system.currency.types",[]),[]),a=i.exports.useMemo(()=>K("currency.display.number.short",!1),[]),s=(()=>{if(!e)return null;const u=e.clubPeriods*31+e.clubDays,m=e.minutesUntilExpiration;return e.clubLevel===cr.NO_CLUB?d("purse.clubdays.zero.amount.text"):m>-1&&m<60*24?Vr.shortFormat(m*60):Vr.shortFormat(u*86400)})(),c=(u,m=-1,p=!1)=>{if(!e||!e.activityPoints||!e.activityPoints.size)return null;const g=Array.from(e.activityPoints.keys()).filter(_=>n.indexOf(_)>=0);let h=0;for(;h<u;)g.shift(),h++;h=0;const f=[];for(const _ of g){if(m>-1&&h===m)break;p?f.push(t(MR,{type:_,amount:e.activityPoints.get(_)},_)):f.push(t(vc,{type:_,amount:e.activityPoints.get(_),short:a},_)),h++}return f};return e?l(T,{alignItems:"end",className:"nitro-purse-container",gap:1,children:[t(w,{className:"nitro-purse rounded-bottom p-1",children:l(re,{fullWidth:!0,gap:1,children:[l(T,{justifyContent:"center",size:r?10:6,gap:0,children:[t(vc,{type:-1,amount:e.credits,short:a}),c(0,2)]}),!r&&l(T,{center:!0,pointer:!0,size:4,gap:1,className:"nitro-purse-subscription rounded",onClick:u=>ee("habboUI/open/hccenter"),children:[t(it,{type:"hc"}),t(S,{variant:"white",children:s})]}),l(T,{justifyContent:"center",size:2,gap:0,children:[t(w,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded",onClick:u=>ee("help/show"),children:t("i",{className:"icon icon-help"})}),t(w,{center:!0,pointer:!0,fullHeight:!0,className:"nitro-purse-button p-1 rounded",onClick:u=>ee("user-settings/toggle"),children:t("i",{className:"icon icon-cog"})})]})]})}),c(2,-1,!0)]}):null},UR={purple:9452386,blue:3891856,green:6459451,yellow:10658089,lilac:6897548,orange:10841125,turquoise:2661026,red:10104881},FR=o=>{const[e,r]=i.exports.useState(!0),[n,a]=i.exports.useState(""),[s,c]=i.exports.useState("");Yb(k_.MYSTERY_BOX_KEYS_UPDATE,m=>{a(m.keyColor),c(m.boxColor)});const u=m=>{const p=UR[m];return Qt.int2rgb(p)};return n===""&&s===""?null:t(L,{className:"nitro-notification-bubble rounded mysterybox-extension",children:l(T,{children:[l(w,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:m=>r(p=>!p),children:[t(S,{variant:"white",children:d("mysterybox.tracker.title")}),e&&t(Di,{className:"fa-icon"}),!e&&t(Mi,{className:"fa-icon"})]}),e&&l(V,{children:[t(S,{variant:"white",children:d("mysterybox.tracker.description")}),l(w,{justifyContent:"center",alignItems:"center",gap:2,children:[t(be,{className:"mysterybox-container",children:t("div",{className:"box-image flex-shrink-0",style:{backgroundColor:u(s)},children:t("div",{className:"chain-overlay-image"})})}),t(be,{className:"mysterybox-container",children:t("div",{className:"key-image flex-shrink-0",style:{backgroundColor:u(n)},children:t("div",{className:"key-overlay-image"})})})]})]})]})})},GR=o=>{const{eventId:e=-1,eventName:r="",eventDescription:n="",setIsEditingPromote:a=null}=o,[s,c]=i.exports.useState(r),[u,m]=i.exports.useState(n),p=()=>{D(new P_(e,s,u)),a(!1)};return l(oe,{className:"nitro-guide-tool",theme:"primary-slim",children:[t(se,{headerText:d("navigator.eventsettings.editcaption"),onCloseClick:()=>a(!1)}),l(ne,{className:"text-black",children:[l(T,{children:[t(S,{bold:!0,children:d("navigator.eventsettings.name")}),t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("navigator.eventsettings.name"),maxLength:64,value:s,onChange:g=>c(g.target.value)})]}),l(T,{children:[t(S,{bold:!0,children:d("navigator.eventsettings.desc")}),t("textarea",{className:"form-control form-control-sm",placeholder:d("navigator.eventsettings.desc"),maxLength:64,value:u,onChange:g=>m(g.target.value)})]}),t(T,{children:t(M,{fullWidth:!0,disabled:!s||!u,variant:!s||!u?"danger":"success",onClick:g=>p(),children:d("navigator.eventsettings.edit")})})]})]})},BR=o=>{const{eventDescription:e="",setIsEditingPromote:r=null}=o,{setIsExtended:n}=sl(),a=()=>{n(!0),ee("catalog/open/room_event")};return l(V,{children:[t(w,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(S,{variant:"white",children:e})}),t("br",{}),t("br",{}),l(re,{className:"d-flex align-items-center justify-content-end gap-2",children:[t(M,{className:"btn btn-primary w-100 btn-sm",onClick:s=>r(!0),children:d("navigator.roominfo.editevent")}),t(M,{className:"btn btn-success w-100 btn-sm",onClick:s=>a(),children:d("roomad.extend.event")})]})]})},VR=o=>{const{eventDescription:e=""}=o;return l(V,{children:[t(w,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(S,{variant:"white",children:e})}),t("br",{}),t("br",{}),t(T,{alignItems:"center",gap:1,children:l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",center:!0,children:d("navigator.eventinprogress")})}),t(S,{children:""})]})})]})},HR=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(!0),{promoteInformation:s,setPromoteInformation:c}=sl();return U(qu,u=>{c(null)}),s?t(V,{children:s.data.adId!==-1&&t(L,{className:"nitro-notification-bubble rounded",children:l(T,{children:[l(w,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:u=>a(m=>!m),children:[t(S,{variant:"white",overflow:"hidden",children:s.data.eventName}),n&&t(Di,{className:"fa-icon"}),!n&&t(Mi,{className:"fa-icon"})]}),n&&H().userId!==s.data.ownerAvatarId&&t(VR,{eventDescription:s.data.eventDescription}),n&&H().userId===s.data.ownerAvatarId&&t(BR,{eventDescription:s.data.eventDescription,setIsEditingPromote:()=>r(!0)}),e&&t(GR,{eventId:s.data.adId,eventName:s.data.eventName,eventDescription:s.data.eventDescription,setIsEditingPromote:()=>r(!1)})]})})}):null},WR=o=>t("div",{className:"nitro-right-side",children:l(T,{position:"relative",gap:1,children:[t(LR,{}),t(TR,{}),t(FR,{}),t(NR,{}),t(HR,{}),t(DR,{})]})}),jR=o=>t("div",{className:"room-spectator"}),qR=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(null),{chatStyleId:s=0}=_n(),{roomSession:c=null}=Ge();U(D_,m=>{const p=m.getParser();if(!p)return;const g=c.userDataManager.getPetData(p.petId);g&&(r(g),a(p))});const u=(m,p)=>{!m||!p||c==null||c.sendChatMessage(`${m} ${p}`,s)};return!e||!n?null:l(oe,{uniqueKey:"user-settings",className:"user-settings-window no-resize",theme:"primary-slim",children:[t(se,{headerText:d("widgets.pet.commands.title"),onCloseClick:()=>a(null)}),l(ne,{className:"text-black",children:[t(w,{alignItems:"center",justifyContent:"center",gap:2,children:l(re,{columnCount:2,children:[t(T,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(Jr,{figure:e.figure,posture:"std",direction:2})}),t(S,{variant:"black",small:!0,wrap:!0,children:e.name})]})}),t(re,{columnCount:2,children:n.commands&&n.commands.length>0&&n.commands.map((m,p)=>t(M,{disabled:!n.enabledCommands.includes(m),onClick:()=>u(e.name,d(`pet.command.${m}`)),children:d(`pet.command.${m}`)},p))})]})]})},$t=o=>{const{justifyContent:e="center",alignItems:r="center",classNames:n=[],...a}=o,s=i.exports.useMemo(()=>{const c=["menu-header","p-1"];return n.length&&c.push(...n),c},[n]);return t(w,{justifyContent:e,alignItems:r,classNames:s,...a})},YR=o=>{const{chatEvent:e=null,onClose:r=null}=o,[n,a]=i.exports.useState(e.chat==="${bot.skill.chatter.configuration.text.placeholder}"?"":e.chat),[s,c]=i.exports.useState(e.automaticChat),[u,m]=i.exports.useState(e.mixSentences),[p,g]=i.exports.useState(e.chatDelay),h=i.exports.useMemo(()=>Hi(ye().roomId,e.objectId,e.category,1),[e]),f=I=>I.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r"),_=()=>{const I=f(n)+";#;"+s+";#;"+p+";#;"+u;D(new ln(e.botId,Ne.SETUP_CHAT,I)),r()};return t(On,{windowPosition:kt.NOTHING,handleSelector:".drag-handler",dragStyle:{top:h.y,left:h.x},children:l(L,{className:"nitro-context-menu bot-chat",children:[t($t,{className:"drag-handler",children:d("bot.skill.chatter.configuration.title")}),l(T,{className:"p-1",children:[l(T,{gap:1,children:[t(S,{variant:"white",children:d("bot.skill.chatter.configuration.chat.text")}),t("textarea",{className:"form-control form-control-sm",placeholder:d("bot.skill.chatter.configuration.text.placeholder"),value:n,rows:7,onChange:I=>a(I.target.value)})]}),l(T,{gap:1,children:[l(w,{gap:1,alignItems:"center",justifyContent:"between",children:[t(S,{fullWidth:!0,variant:"white",children:d("bot.skill.chatter.configuration.automatic.chat")}),t("input",{type:"checkbox",className:"form-check-input",checked:s,onChange:I=>c(I.target.checked)})]}),l(w,{gap:1,alignItems:"center",justifyContent:"between",children:[t(S,{fullWidth:!0,variant:"white",children:d("bot.skill.chatter.configuration.markov")}),t("input",{type:"checkbox",className:"form-check-input",checked:u,onChange:I=>m(I.target.checked)})]}),l(w,{gap:1,alignItems:"center",justifyContent:"between",children:[t(S,{fullWidth:!0,variant:"white",children:d("bot.skill.chatter.configuration.chat.delay")}),t("input",{type:"number",className:"form-control form-control-sm",value:p,onChange:I=>g(I.target.valueAsNumber)})]})]}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(M,{fullWidth:!0,variant:"primary",onClick:r,children:d("cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:_,children:d("save")})]})]})]})})},wc=-1,Rc=0,xc=1,yc=2,Oc=3,Ac=4,kc=5,Pc=6,zR=o=>{const{item:e=null,onClose:r=null}=o,[n,a]=i.exports.useState(wc),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null),{roomSession:p=null}=Ge(),g=()=>{s&&q().selectRoomObject(p.roomId,s.roomIndex,Q.UNIT)},h=()=>{p.usePetProduct(e.requestRoomObjectId,s.webID),r()},f=i.exports.useMemo(()=>{if(!s||!u)return null;const _=new fs(s.figure),I=u.customParams.split(" "),C=parseInt(I[0]);switch(u.specialType){case Z.PET_SHAMPOO:{if(I.length<2)return null;const E=q().getPetColorResult(C,_.paletteId),b=q().getPetColorResultsForTag(C,I[1]);let N=-1;for(const v of b)if(v.breed===E.breed){N=parseInt(v.id);break}return t(Jr,{typeId:_.typeId,paletteId:N,petColor:_.color,customParts:_.customParts,direction:2})}case Z.PET_CUSTOM_PART:{if(I.length<4)return null;const E=[],b=I[1].split(",").map(R=>parseInt(R)),N=I[2].split(",").map(R=>parseInt(R)),v=I[3].split(",").map(R=>parseInt(R));let y=0;for(;y<b.length;){const R=b[y],x=_.getCustomPart(R);let F=v[y];x!=null&&(F=x.paletteId),E.push(new La(R,N[y],F)),y++}return t(Jr,{typeId:_.typeId,paletteId:_.paletteId,petColor:_.color,customParts:E,direction:2})}case Z.PET_CUSTOM_PART_SHAMPOO:{if(I.length<3)return null;const E=[],b=I[1].split(",").map(y=>parseInt(y)),N=I[2].split(",").map(y=>parseInt(y));let v=0;for(;v<b.length;){const y=b[v],R=_.getCustomPart(y);let x=-1;R!=null&&(x=R.partId),E.push(new La(b[v],x,N[v])),v++}return t(Jr,{typeId:_.typeId,paletteId:_.paletteId,petColor:_.color,customParts:E,direction:2})}case Z.PET_SADDLE:{if(I.length<4)return null;const E=[],b=I[1].split(",").map(R=>parseInt(R)),N=I[2].split(",").map(R=>parseInt(R)),v=I[3].split(",").map(R=>parseInt(R));let y=0;for(;y<b.length;)E.push(new La(b[y],N[y],v[y])),y++;for(const R of _.customParts)b.indexOf(R.layerId)===-1&&E.push(R);return t(Jr,{typeId:_.typeId,paletteId:_.paletteId,petColor:_.color,customParts:E,direction:2})}case Z.MONSTERPLANT_REBREED:case Z.MONSTERPLANT_REVIVAL:case Z.MONSTERPLANT_FERTILIZE:{let E="rip";const b=q().getRoomObject(p.roomId,s.roomIndex,Q.UNIT);if(b&&(E=b.model.getValue(te.FIGURE_POSTURE),E==="rip")){const N=s.petLevel;N<7?E=`grw${N}`:E="std"}return t(Jr,{typeId:_.typeId,paletteId:_.paletteId,petColor:_.color,customParts:_.customParts,posture:E,direction:2})}}},[s,u,p]);return i.exports.useEffect(()=>{const _=p.userDataManager.getUserDataByIndex(e.id);c(_);const I=aa(p.roomId,e.requestRoomObjectId,Q.FLOOR);if(!I)return;m(I);let C=wc;switch(I.specialType){case Z.PET_SHAMPOO:C=Rc;break;case Z.PET_CUSTOM_PART:C=xc;break;case Z.PET_CUSTOM_PART_SHAMPOO:C=yc;break;case Z.PET_SADDLE:C=Oc;break;case Z.MONSTERPLANT_REVIVAL:C=Ac;break;case Z.MONSTERPLANT_REBREED:C=kc;break;case Z.MONSTERPLANT_FERTILIZE:C=Pc;break}a(C)},[p,e]),s?l(oe,{className:"nitro-use-product-confirmation",children:[t(se,{headerText:d("useproduct.widget.title",["name"],[s.name]),onCloseClick:r}),t(ne,{center:!0,children:l(w,{gap:2,overflow:"hidden",children:[t(T,{children:t(L,{pointer:!0,className:"product-preview",onClick:g,children:f})}),l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:2,children:[n===Rc&&l(V,{children:[t(S,{children:d("useproduct.widget.text.shampoo",["productName"],[u.name])}),t(S,{children:d("useproduct.widget.info.shampoo")})]}),n===xc&&l(V,{children:[t(S,{children:d("useproduct.widget.text.custompart",["productName"],[u.name])}),t(S,{children:d("useproduct.widget.info.custompart")})]}),n===yc&&l(V,{children:[t(S,{children:d("useproduct.widget.text.custompartshampoo",["productName"],[u.name])}),t(S,{children:d("useproduct.widget.info.custompartshampoo")})]}),n===Oc&&l(V,{children:[t(S,{children:d("useproduct.widget.text.saddle",["productName"],[u.name])}),t(S,{children:d("useproduct.widget.info.saddle")})]}),n===Ac&&l(V,{children:[t(S,{children:d("useproduct.widget.text.revive_monsterplant",["productName"],[u.name])}),t(S,{children:d("useproduct.widget.info.revive_monsterplant")})]}),n===kc&&l(V,{children:[t(S,{children:d("useproduct.widget.text.rebreed_monsterplant",["productName"],[u.name])}),t(S,{children:d("useproduct.widget.info.rebreed_monsterplant")})]}),n===Pc&&l(V,{children:[t(S,{children:d("useproduct.widget.text.fertilize_monsterplant",["productName"],[u.name])}),t(S,{children:d("useproduct.widget.info.fertilize_monsterplant")})]})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:r,children:d("useproduct.widget.cancel")}),t(M,{variant:"success",onClick:h,children:d("useproduct.widget.use")})]})]})]})})]}):null},j=o=>{const{disabled:e=!1,fullWidth:r=!0,justifyContent:n="center",alignItems:a="center",classNames:s=[],onClick:c=null,...u}=o,m=g=>{e||c&&c(g)},p=i.exports.useMemo(()=>{const g=["menu-item","list-item"];return e&&g.push("disabled"),s.length&&g.push(...s),g},[e,s]);return t(w,{fullWidth:r,justifyContent:n,alignItems:a,classNames:p,onClick:m,...u})},$R=o=>{const{justifyContent:e="center",alignItems:r="center",classNames:n=[],collapsed:a=!0,...s}=o,c=i.exports.useMemo(()=>{const u=["menu-footer"];return n.length&&u.push(...n),u},[n]);return l(w,{justifyContent:e,alignItems:r,classNames:c,...s,children:[!a&&t(Oi,{className:"fa-icon align-self-center"}),a&&t(yi,{className:"fa-icon align-self-center"})]})},KR=25,Dc=3,XR=5e3,QR=75,as=10;let za=!1,Ao=null,ko=-1e6,$a=1;const sn=o=>{const{objectId:e=-1,category:r=-1,userType:n=-1,fades:a=!1,onClose:s=null,position:c="absolute",classNames:u=[],style:m={},children:p=null,collapsable:g=!1,...h}=o,[f,_]=i.exports.useState({x:null,y:null}),[I,C]=i.exports.useState(1),[E,b]=i.exports.useState(!1),[N,v]=i.exports.useState(za),y=i.exports.useRef(),R=i.exports.useCallback(A=>{if(!E)return;$a+=A;let O=(1-$a/QR)*1;if(O<=0)return s(),!1;C(O)},[E,s]),x=i.exports.useCallback((A,O)=>{if(!A||!O||!Ao)return;let P=-y.current.offsetHeight;n>-1&&(n===pt.USER||n===pt.BOT||n===pt.RENTABLE_BOT)?P=P+(A.height>50?15:0):P=P-14,Ao.addValue(O.y-A.top);let B=Ao.getMax();B<ko-Dc&&(B=ko-Dc),ko=B;const G=O.y-B;let z=~~(O.x-y.current.offsetWidth/2),X=~~(G+P);const Y=_e().width-y.current.offsetWidth-as,Ee=_e().height-y.current.offsetHeight-as;z<as?z=as:z>Y&&(z=Y),X<as?X=as:X>Ee&&(X=Ee),_({x:z,y:X})},[n]),F=i.exports.useMemo(()=>{const A=["nitro-context-menu"];return N&&A.push("menu-hidden"),A.push(f.x!==null?"visible":"invisible"),u.length&&A.push(...u),A},[f,u,N]),k=i.exports.useMemo(()=>{let A={};return A.left=f.x||0,A.top=f.y||0,A.opacity=I,Object.keys(m).length&&(A={...A,...m}),A},[f,I,m]);return i.exports.useEffect(()=>{if(!y.current)return;const A=O=>{if(!y.current)return;R(O);const P=Hi(ye().roomId,e,r),B=td(ye().roomId,e,r);x(P,B)};return hn().add(A),()=>{hn().remove(A)}},[e,r,R,x]),i.exports.useEffect(()=>{if(!a)return;const A=setTimeout(()=>b(!0),XR);return()=>clearTimeout(A)},[a]),i.exports.useEffect(()=>{za=N},[N]),i.exports.useEffect(()=>{Ao=new M_(KR),ko=-1e6,$a=1},[]),l(L,{innerRef:y,position:c,classNames:F,style:k,...h,children:[!(g&&za)&&p,g&&t($R,{onClick:()=>v(!N),collapsed:N})]})},Mc=0,Lc=1,Uc=2,Fc=3,Gc=4,Bc=5,Vc=6,Hc=7,JR=o=>{const{item:e=null,updateConfirmingProduct:r=null,onClose:n=null}=o,[a,s]=i.exports.useState(0),{roomSession:c=null}=Ge(),u=m=>{if(m)switch(m){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":r(e);break}};return i.exports.useEffect(()=>{if(!e)return;const m=aa(c.roomId,e.requestRoomObjectId,Q.FLOOR);if(!m)return;let p=Mc;switch(m.specialType){case Z.PET_SHAMPOO:p=Lc;break;case Z.PET_CUSTOM_PART:p=Uc;break;case Z.PET_CUSTOM_PART_SHAMPOO:p=Fc;break;case Z.PET_SADDLE:p=Gc;break;case Z.MONSTERPLANT_REVIVAL:p=Bc;break;case Z.MONSTERPLANT_REBREED:p=Vc;break;case Z.MONSTERPLANT_FERTILIZE:p=Hc;break}s(p)},[c,e]),l(sn,{objectId:e.id,category:Q.UNIT,userType:pt.PET,onClose:n,collapsable:!0,children:[t($t,{children:e.name}),a===Mc&&t(j,{onClick:m=>u("use_product"),children:d("infostand.button.useproduct")}),a===Lc&&t(j,{onClick:m=>u("use_product_shampoo"),children:d("infostand.button.useproduct_shampoo")}),a===Uc&&t(j,{onClick:m=>u("use_product_custom_part"),children:d("infostand.button.useproduct_custom_part")}),a===Fc&&t(j,{onClick:m=>u("use_product_custom_part_shampoo"),children:d("infostand.button.useproduct_custom_part_shampoo")}),a===Gc&&l(V,{children:[e.replace&&t(j,{onClick:m=>u("replace_product_saddle"),children:d("infostand.button.replaceproduct_saddle")}),!e.replace&&t(j,{onClick:m=>u("use_product_saddle"),children:d("infostand.button.useproduct_saddle")})]}),a===Bc&&t(j,{onClick:m=>u("revive_monsterplant"),children:d("infostand.button.revive_monsterplant")}),a===Vc&&t(j,{onClick:m=>u("rebreed_monsterplant"),children:d("infostand.button.rebreed_monsterplant")}),a===Hc&&t(j,{onClick:m=>u("fertilize_monsterplant"),children:d("infostand.button.fertilize_monsterplant")})]})},ZR=o=>{const{avatarInfo:e=null,onClose:r=null}=o;return e?t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_r,{className:"cursor-pointer fa-icon",onClick:r})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(w,{gap:1,children:[t(T,{fullWidth:!0,className:"body-image bot",children:t(st,{figure:e.figure,direction:4})}),t(T,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(n=>t(je,{badgeCode:n,showInfo:!0},n))})]}),t("hr",{className:"m-0"})]}),t(w,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(S,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:e.motto})}),e.carryItem>0&&l(T,{gap:1,children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.text.handitem",["item"],[d("handitem"+e.carryItem)])})]})]})}):null},Ka=0,Wc=1,jc=2,ex=o=>{const{avatarInfo:e=null,onClose:r=null}=o,{roomSession:n=null}=Ge(),[a,s]=i.exports.useState(0),[c,u]=i.exports.useState(!1),[m,p]=i.exports.useState(!1),[g,h]=i.exports.useState(!1),[f,_]=i.exports.useState([]),[I,C]=i.exports.useState([]),[E,b]=i.exports.useState([]),[N,v]=i.exports.useState([]),[y,R]=i.exports.useState(!1),[x,F]=i.exports.useState(0),[k,A]=i.exports.useState(0),[O,P]=i.exports.useState(!1),[B,G]=i.exports.useState(!1),[z,X]=i.exports.useState(null),[Y,Ee]=i.exports.useState(!1),[le,Pe]=i.exports.useState(!1),[Qe,ht]=i.exports.useState(-1),[Ze,Gt]=i.exports.useState(""),[We,Yt]=i.exports.useState("");Hn(yu.NPE_SONG_CHANGED,me=>{ht(me.id)},Y||le),Hn(U_.SIR_TRAX_SONG_INFO_RECEIVED,me=>{if(me.id!==Qe)return;const Oe=_e().soundManager.musicController.getSongInfo(me.id);Oe&&(Gt(Oe.name),Yt(Oe.creator))},Y||le),i.exports.useEffect(()=>{let me=Ka,Oe=!1,ot=!1,er=!1,fe=[],De=[],Nr=[],kn=[],tr=!1,ao=0,ws=0,Pn=!1,Dn=!1,ts=!1,Rs=!1,bn=-1;const Mn=e.roomControllerLevel>=tt.GUEST;if((Mn||e.isOwner||e.isRoomOwner||e.isAnyRoomController)&&(Oe=!0,ot=!e.isWallItem,e.roomControllerLevel>=tt.MODERATOR&&(Pn=!0)),e.isAnyRoomController&&(Dn=!0),(e.usagePolicy===kl.EVERYBODY||e.usagePolicy===kl.CONTROLLER&&Mn||e.extraParam===cn.JUKEBOX&&Mn||e.extraParam===cn.USABLE_PRODUCT&&Mn)&&(er=!0),e.extraParam){if(e.extraParam===cn.CRACKABLE_FURNI){const Bt=e.stuffData;er=!0,tr=!0,ao=Bt.hits,ws=Bt.target}else if(e.extraParam===cn.JUKEBOX){const Bt=_e().soundManager.musicController.getRoomItemPlaylist();Bt&&(bn=Bt.nowPlayingSongId),ts=!0}else e.extraParam.indexOf(cn.SONGDISK)===0&&(bn=parseInt(e.extraParam.substr(cn.SONGDISK.length)),Rs=!0);if(Pn){const Bt=e.extraParam.substr(cn.BRANDING_OPTIONS.length);if(Bt){const Yr=Bt.split("	");for(const rs of Yr){const zr=rs.split("=");zr&&zr.length===2&&(fe.push(zr[0]),De.push(zr[1]))}}}}if(Pn){const Bt=q().getRoomObject(n.roomId,e.id,e.isWallItem?Q.WALL:Q.FLOOR);if(Bt){const Yr=Bt.model.getValue(te.FURNITURE_CUSTOM_VARIABLES),rs=Bt.model.getValue(te.FURNITURE_DATA);if(Yr&&Yr.length)for(const zr of Yr)Nr.push(zr),kn.push(rs[zr]||"")}}e.isOwner||e.isAnyRoomController?me=jc:(e.isRoomOwner||e.roomControllerLevel>=tt.GUILD_ADMIN)&&(me=Wc),e.isStickie&&(me=Ka),s(me),u(Oe),p(ot),h(er),_(fe),C(De),b(Nr),v(kn),R(tr),F(ao),A(ws),P(Pn),G(Dn),X(null),Ee(ts),Pe(Rs),ht(bn),e.groupId&&D(new Us(e.groupId,!1))},[n,e]),U(Ks,me=>{const Oe=me.getParser();!e||e.groupId!==Oe.id||Oe.flag||(z&&X(null),X(Oe.title))}),i.exports.useEffect(()=>{const me=_e().soundManager.musicController.getSongInfo(Qe);Gt((me==null?void 0:me.name)??""),Yt((me==null?void 0:me.creator)??"")},[Qe]);const Sr=i.exports.useCallback((me,Oe)=>{const ot=Array.from(I);ot[me]=Oe,C(ot)},[I]),Fe=i.exports.useCallback((me,Oe)=>{const ot=Array.from(N);ot[me]=Oe,v(ot)},[N]),Ie=i.exports.useCallback(()=>{if(f.length===0||I.length===0)return"";let me="",Oe=0;for(;Oe<f.length;){const ot=f[Oe],er=I[Oe];me=me+(ot+"="+er+"	"),Oe++}return me},[f,I]),ze=i.exports.useCallback(me=>{if(!(!me||me===""))switch(me){case"buy_one":ee(`catalog/open/offerId/${e.purchaseOfferId}`);return;case"move":q().processRoomObjectOperation(e.id,e.category,Fr.OBJECT_MOVE);break;case"rotate":q().processRoomObjectOperation(e.id,e.category,Fr.OBJECT_ROTATE_POSITIVE);break;case"pickup":a===jc?q().processRoomObjectOperation(e.id,e.category,Fr.OBJECT_PICKUP):q().processRoomObjectOperation(e.id,e.category,Fr.OBJECT_EJECT);break;case"use":q().useRoomObject(e.id,e.category);break;case"save_branding_configuration":{const Oe=new Map,ot=Ie().split("	");if(ot)for(const er of ot){const[fe,De]=er.split("=",2);Oe.set(fe,De)}q().modifyRoomObjectDataWithMap(e.id,e.category,Fr.OBJECT_SAVE_STUFF_DATA,Oe);break}case"save_custom_variables":{const Oe=new Map;for(let ot=0;ot<E.length;ot++){const er=E[ot],fe=N[ot];er&&er.length&&fe&&fe.length&&Oe.set(er,fe)}D(new L_(e.id,Oe));break}}},[e,a,E,N,Ie]),yt=i.exports.useCallback(()=>{const me=e.stuffData;return!me||!(me instanceof $s)?null:me.getValue(2)},[e]);return e?l(T,{gap:1,alignItems:"end",children:[t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_r,{className:"cursor-pointer fa-icon",onClick:r})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(w,{position:"relative",gap:1,children:[e.stuffData.isUnique&&t("div",{className:"position-absolute end-0",children:t(yd,{uniqueNumber:e.stuffData.uniqueNumber,uniqueSeries:e.stuffData.uniqueSeries})}),e.stuffData.rarityLevel>-1&&t("div",{className:"position-absolute end-0",children:t(tl,{level:e.stuffData.rarityLevel})}),e.image&&e.image.src.length&&t("img",{className:"d-block mx-auto",src:e.image.src,alt:""})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(S,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,children:e.description}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:e.ownerId}),t(S,{variant:"white",small:!0,wrap:!0,children:d("furni.owner",["name"],[e.ownerName])})]}),e.purchaseOfferId>0&&t(w,{children:t(S,{variant:"white",small:!0,underline:!0,pointer:!0,onClick:me=>ze("buy_one"),children:d("infostand.button.buy")})})]}),(Y||le)&&l(T,{gap:1,children:[t("hr",{className:"m-0"}),Qe===-1&&t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.jukebox.text.not.playing")}),!!Ze.length&&l(w,{alignItems:"center",gap:1,children:[t(L,{className:"icon disk-icon"}),t(S,{variant:"white",small:!0,wrap:!0,children:Ze})]}),!!We.length&&l(w,{alignItems:"center",gap:1,children:[t(L,{className:"icon disk-creator"}),t(S,{variant:"white",small:!0,wrap:!0,children:We})]})]}),l(T,{gap:1,children:[y&&l(V,{children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.crackable_furni.hits_remaining",["hits","target"],[x.toString(),k.toString()])})]}),e.groupId>0&&l(V,{children:[t("hr",{className:"m-0"}),l(w,{pointer:!0,alignItems:"center",gap:2,onClick:()=>eo(e.groupId),children:[t(je,{badgeCode:yt(),isGroup:!0}),t(S,{variant:"white",underline:!0,children:z})]})]}),O&&l(V,{children:[t("hr",{className:"m-0"}),B&&l(S,{small:!0,wrap:!0,variant:"white",children:["ID: ",e.id]}),f.length>0&&l(V,{children:[t("hr",{className:"m-0"}),t(T,{gap:1,children:f.map((me,Oe)=>l(w,{alignItems:"center",gap:1,children:[t(S,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:me}),t("input",{type:"text",className:"form-control form-control-sm",value:I[Oe],onChange:ot=>Sr(Oe,ot.target.value)})]},Oe))})]})]}),E.length>0&&l(V,{children:[t("hr",{className:"m-0 my-1"}),t(T,{gap:1,children:E.map((me,Oe)=>l(w,{alignItems:"center",gap:1,children:[t(S,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:me}),t("input",{type:"text",className:"form-control form-control-sm",value:N[Oe],onChange:ot=>Fe(Oe,ot.target.value)})]},Oe))})]})]})]})}),l(w,{gap:1,justifyContent:"end",children:[c&&t(M,{variant:"dark",onClick:me=>ze("move"),children:d("infostand.button.move")}),m&&t(M,{variant:"dark",onClick:me=>ze("rotate"),children:d("infostand.button.rotate")}),a!==Ka&&t(M,{variant:"dark",onClick:me=>ze("pickup"),children:d(a===Wc?"infostand.button.eject":"infostand.button.pickup")}),g&&t(M,{variant:"dark",onClick:me=>ze("use"),children:d("infostand.button.use")}),f.length>0&&I.length>0&&f.length===I.length&&t(M,{variant:"dark",onClick:()=>ze("save_branding_configuration"),children:d("save")}),E.length>0&&N.length>0&&E.length===N.length&&t(M,{variant:"dark",onClick:()=>ze("save_custom_variables"),children:d("save")})]})]}):null},tx=o=>{const{avatarInfo:e=null,onClose:r=null}=o,[n,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),{roomSession:u=null}=Ge(),{petRespectRemaining:m=0,respectPet:p=null}=_n();if(i.exports.useEffect(()=>{a(e.remainingGrowTime),c(e.remainingTimeToLive)},[e]),i.exports.useEffect(()=>{if(e.petType!==Ut.MONSTERPLANT||e.dead)return;const h=setInterval(()=>{a(f=>f-1),c(f=>f-1)},1e3);return()=>clearInterval(h)},[e]),!e)return null;const g=h=>{let f=!0;if(!(!h||h=="")){switch(h){case"respect":p(e.id),m-1>=1&&(f=!1);break;case"buyfood":ee("catalog/open/"+K("catalog.links")["pets.buy_food"]);break;case"train":u==null||u.requestPetCommands(e.id);break;case"treat":D(new Gi(e.id));break;case"compost":u==null||u.compostPlant(e.id);break;case"pick_up":u==null||u.pickupPet(e.id);break}f&&r()}};return l(T,{gap:1,alignItems:"end",children:[t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_r,{className:"cursor-pointer fa-icon",onClick:r})]}),t(S,{variant:"white",small:!0,wrap:!0,children:d(`pet.breed.${e.petType}.${e.petBreed}`)}),t("hr",{className:"m-0"})]}),e.petType===Ut.MONSTERPLANT&&l(V,{children:[l(T,{center:!0,gap:1,children:[t(Jr,{figure:e.petFigure,posture:e.posture,direction:4}),t("hr",{className:"m-0"})]}),l(T,{gap:2,children:[!e.dead&&t(T,{alignItems:"center",gap:1,children:t(S,{variant:"white",center:!0,small:!0,wrap:!0,children:d("pet.level",["level","maxlevel"],[e.level.toString(),e.maximumLevel.toString()])})}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:d("infostand.pet.text.wellbeing")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.dead?"00:00:00":Un(s==0?e.remainingTimeToLive:s).split(":")[1]+":"+Un(s==null||s==null?0:s).split(":")[2]+":"+Un(s==null||s==null?0:s).split(":")[3]})}),t(L,{className:"bg-success rounded pet-stats",style:{width:e.dead?"0":Math.round(e.maximumTimeToLive*100/s).toString()}})]})]}),n!=0&&n>0&&l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:d("infostand.pet.text.growth")}),t(Ub,{className:"top-2 end-2",day:Un(n).split(":")[0],hour:Un(n).split(":")[1],minutes:Un(n).split(":")[2],seconds:Un(n).split(":")[3]})]}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:d("infostand.pet.text.raritylevel",["level"],[d(`infostand.pet.raritylevel.${e.rarityLevel}`)])}),t(tl,{className:"top-2 end-2",level:e.rarityLevel})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:d("pet.age",["age"],[e.age.toString()])}),t("hr",{className:"m-0"})]})]}),e.petType!==Ut.MONSTERPLANT&&l(V,{children:[l(T,{gap:1,children:[l(w,{gap:1,children:[t(T,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(Jr,{figure:e.petFigure,posture:e.posture,direction:4})}),l(T,{grow:!0,gap:1,children:[t(S,{variant:"white",center:!0,small:!0,wrap:!0,children:d("pet.level",["level","maxlevel"],[e.level.toString(),e.maximumLevel.toString()])}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:d("infostand.pet.text.happiness")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.happyness+"/"+e.maximumHappyness})}),t(L,{className:"bg-info rounded pet-stats",style:{width:e.happyness/e.maximumHappyness*100+"%"}})]})]}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:d("infostand.pet.text.experience")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.experience+"/"+e.levelExperienceGoal})}),t(L,{className:"bg-purple rounded pet-stats",style:{width:e.experience/e.levelExperienceGoal*100+"%"}})]})]}),l(T,{alignItems:"center",gap:1,children:[t(S,{variant:"white",small:!0,truncate:!0,children:d("infostand.pet.text.energy")}),l(L,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(S,{variant:"white",small:!0,children:e.energy+"/"+e.maximumEnergy})}),t(L,{className:"bg-success rounded pet-stats",style:{width:e.energy/e.maximumEnergy*100+"%"}})]})]})]})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[e.petType!==Ut.MONSTERPLANT&&t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.text.petrespect",["count"],[e.respect.toString()])}),t(S,{variant:"white",small:!0,wrap:!0,children:d("pet.age",["age"],[e.age.toString()])}),t("hr",{className:"m-0"})]})]}),t(T,{gap:1,children:l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:e.ownerId}),t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.text.petowner",["name"],[e.ownerName])})]})})]})}),l(w,{gap:1,justifyContent:"end",children:[e.petType!==Ut.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("buyfood"),children:d("infostand.button.buyfood")}),e.isOwner&&e.petType!==Ut.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("train"),children:d("infostand.button.train")}),!e.dead&&e.energy/e.maximumEnergy<.98&&e.petType===Ut.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("treat"),children:d("infostand.button.pettreat")}),(u==null?void 0:u.isRoomOwner)&&e.petType===Ut.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("compost"),children:d("infostand.button.compost")}),e.isOwner&&t(M,{variant:"dark",onClick:h=>g("pick_up"),children:d("inventory.pets.pickup")}),m>0&&e.petType!==Ut.MONSTERPLANT&&t(M,{variant:"dark",onClick:h=>g("respect"),children:d("infostand.button.petrespect",["count"],[m.toString()])})]})]})},rx=o=>{const{avatarInfo:e=null,onClose:r=null}=o,n=i.exports.useMemo(()=>!(e.botSkills.indexOf(Ne.NO_PICK_UP)>=0||!e.amIOwner&&!e.amIAnyRoomController),[e]),a=()=>D(new Yu(e.webID));if(e)return l(T,{gap:1,children:[t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:e.name}),t(_r,{className:"cursor-pointer fa-icon",onClick:r})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(w,{gap:1,children:[t(T,{fullWidth:!0,className:"body-image bot",children:t(st,{figure:e.figure,direction:4})}),t(T,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(s=>t(je,{badgeCode:s,showInfo:!0},s))})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(w,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(S,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:e.motto})}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:e.ownerId}),t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.text.botowner",["name"],[e.ownerName])})]}),e.carryItem>0&&l(V,{children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.text.handitem",["item"],[d("handitem"+e.carryItem)])})]})]})]})}),n&&t(w,{justifyContent:"end",children:t(M,{variant:"dark",onClick:a,children:d("infostand.button.pickup")})})]})},Xa=o=>{const{type:e=-1,relationship:r=null}=o;if(!r)return null;const n=Lr.RELATIONSHIP_NAMES[e].toLocaleLowerCase();return l(w,{alignItems:"center",gap:1,children:[t("i",{className:`nitro-friends-spritesheet icon-${n}`}),t(w,{alignItems:"center",gap:0,children:l(S,{small:!0,variant:"white",onClick:a=>Jt(r.randomFriendId),children:[t("u",{children:r.randomFriendName}),r.friendCount>1&&" "+d(`extendedprofile.relstatus.others.${n}`,["count"],[(r.friendCount-1).toString()])]})})]})},nx=o=>{const{relationships:e=null}=o;return!e||!e.relationshipStatusMap.length?null:l(V,{children:[t(Xa,{type:Lr.HEART,relationship:e.relationshipStatusMap.getValue(Lr.HEART)}),t(Xa,{type:Lr.SMILE,relationship:e.relationshipStatusMap.getValue(Lr.SMILE)}),t(Xa,{type:Lr.BOBBA,relationship:e.relationshipStatusMap.getValue(Lr.BOBBA)})]})},sx=o=>{ee(`navigator/search/${o}`),D(new Is("hotel_view",`tag:${o}`))},ox=o=>{const{tags:e=null}=o;return!e||!e.length?null:l(V,{children:[t("hr",{className:"m-0"}),t(w,{className:"flex-tags",children:e&&e.length>0&&e.map((r,n)=>t(S,{variant:"white",className:"text-tags",onClick:a=>sx(r),children:r},n))})]})},ax=o=>{const{avatarInfo:e=null,setAvatarInfo:r=null,onClose:n=null}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(!1),[m,p]=i.exports.useState(null),{roomSession:g=null}=Ge(),h=I=>{!c||I.length>K("motto.max.length",38)||(g.sendMottoMessage(I),u(!1))},f=I=>h(I.target.value),_=I=>{switch(I.stopPropagation(),I.key){case"Enter":h(I.target.value);return}};return Ye(F_.RSUBE_BADGES,I=>{!e||e.webID!==I.userId||e.badges.join("")===I.badges.join("")||r(E=>{const b=Kt(E);return b.badges=I.badges,b})}),Ye(G_.USER_FIGURE,I=>{!e||e.roomIndex!==I.roomIndex||r(C=>{const E=Kt(C);return E.figure=I.figure,E.motto=I.customInfo,E.achievementScore=I.activityPoints,E})}),Ye(B_.FAVOURITE_GROUP_UPDATE,I=>{!e||e.roomIndex!==I.roomIndex||r(C=>{const E=Kt(C),b=I.status===-1||I.habboGroupId<=0;return E.groupId=b?-1:I.habboGroupId,E.groupName=b?null:I.habboGroupName,E.groupBadgeId=b?null:H().getGroupBadge(I.habboGroupId),E})}),U(zu,I=>{const C=I.getParser();!e||e.webID!==C.userId||p(C)}),i.exports.useEffect(()=>(u(!1),s(e.motto),D(new $u(e.webID)),()=>{u(!1),s(null),p(null)}),[e]),e?t(T,{className:"nitro-infostand rounded",children:l(T,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(T,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",children:[l(w,{alignItems:"center",gap:1,children:[t(Er,{userId:e.webID}),t(S,{variant:"white",small:!0,wrap:!0,children:e.name})]}),t(_r,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(w,{gap:1,children:[t(T,{fullWidth:!0,className:"body-image",onClick:I=>Jt(e.webID),children:t(st,{figure:e.figure,direction:4})}),l(T,{grow:!0,alignItems:"center",gap:0,children:[l(w,{gap:1,children:[t(w,{center:!0,className:"badge-image",children:e.badges[0]&&t(je,{badgeCode:e.badges[0],showInfo:!0})}),t(w,{center:!0,pointer:e.groupId>0,className:"badge-image",onClick:I=>eo(e.groupId),children:e.groupId>0&&t(je,{badgeCode:e.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:e.groupName})})]}),l(w,{center:!0,gap:1,children:[t(w,{center:!0,className:"badge-image",children:e.badges[1]&&t(je,{badgeCode:e.badges[1],showInfo:!0})}),t(w,{center:!0,className:"badge-image",children:e.badges[2]&&t(je,{badgeCode:e.badges[2],showInfo:!0})})]}),l(w,{center:!0,gap:1,children:[t(w,{center:!0,className:"badge-image",children:e.badges[3]&&t(je,{badgeCode:e.badges[3],showInfo:!0})}),t(w,{center:!0,className:"badge-image",children:e.badges[4]&&t(je,{badgeCode:e.badges[4],showInfo:!0})})]})]})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[l(w,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:[e.type!==et.OWN_USER&&t(w,{grow:!0,alignItems:"center",className:"motto-content",children:t(S,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:a})}),e.type===et.OWN_USER&&l(w,{grow:!0,alignItems:"center",gap:2,children:[t(Hm,{className:"small fa-icon"}),l(w,{grow:!0,alignItems:"center",className:"motto-content",children:[!c&&l(S,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:I=>u(!0),children:[a,""]}),c&&t("input",{type:"text",className:"motto-input",maxLength:K("motto.max.length",38),value:a,onChange:I=>s(I.target.value),onBlur:f,onKeyDown:_,autoFocus:!0})]})]})]}),t("hr",{className:"m-0"})]}),l(T,{gap:1,children:[t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.text.achievement_score")+" "+e.achievementScore}),e.carryItem>0&&l(V,{children:[t("hr",{className:"m-0"}),t(S,{variant:"white",small:!0,wrap:!0,children:d("infostand.text.handitem",["item"],[d("handitem"+e.carryItem)])})]})]}),t(T,{gap:1,children:t(nx,{relationships:m})}),K("user.tags.enabled")&&t(T,{gap:1,className:"mt-1",children:t(ox,{tags:H().tags})})]})}):null},Po=0,Qa=1,qc=2,Yc=3,Ja=4,zc=5,$c=6,ix=o=>{const{avatarInfo:e=null,onClose:r=null}=o,[n,a]=i.exports.useState(Po),{canRequestFriend:s=null}=mr(),{report:c=null}=Pr(),{roomSession:u=null}=Ge(),{userRespectRemaining:m=0,respectUser:p=null}=_n(),g=i.exports.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel<tt.GUEST&&!e.isGuildRoom,[e]),h=i.exports.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel===tt.GUEST&&!e.isGuildRoom,[e]),f=i.exports.useMemo(()=>e.canBeKicked||e.canBeBanned||e.canBeMuted||g||h,[g,h,e]),_=i.exports.useMemo(()=>{let C=!1;const E=Jn();if(E){const b=E.model.getValue(te.FIGURE_CARRY_OBJECT);b>0&&b<999999&&(C=!0)}return C},[]),I=C=>{let E=!0;if(C)switch(C){case"moderate":E=!1,a(Qa);break;case"ban":E=!1,a(qc);break;case"mute":E=!1,a(Yc);break;case"ambassador":E=!1,a(Ja);break;case"ambassador_mute":E=!1,a(zc);break;case"back_moderate":E=!1,a(Qa);break;case"back_ambassador":E=!1,a(Ja);break;case"back":E=!1,a(Po);break;case"whisper":St(new wn(wn.WHISPER,e.name));break;case"friend":ee(`friends/request/${e.webID}/${e.name}`);break;case"relationship":E=!1,a($c);break;case"respect":{p(e.webID),m-1>=1&&(E=!1);break}case"ignore":H().ignoreUser(e.name);break;case"unignore":H().unignoreUser(e.name);break;case"kick":u.sendKickMessage(e.webID);break;case"ban_hour":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_HOUR");break;case"ban_day":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_DAY");break;case"perm_ban":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_PERM");break;case"mute_2min":u.sendMuteMessage(e.webID,2);break;case"mute_5min":u.sendMuteMessage(e.webID,5);break;case"mute_10min":u.sendMuteMessage(e.webID,10);break;case"give_rights":u.sendGiveRightsMessage(e.webID);break;case"remove_rights":u.sendTakeRightsMessage(e.webID);break;case"trade":D(new H_(e.roomIndex));break;case"report":c(Ve.BULLY,{reportedUserId:e.webID});break;case"pass_hand_item":D(new V_(e.webID));break;case"ambassador_alert":u.sendAmbassadorAlertMessage(e.webID);break;case"ambassador_kick":u.sendKickMessage(e.webID);break;case"ambassador_mute_2min":u.sendMuteMessage(e.webID,2);break;case"ambassador_mute_10min":u.sendMuteMessage(e.webID,10);break;case"ambassador_mute_60min":u.sendMuteMessage(e.webID,60);break;case"ambassador_mute_18hour":u.sendMuteMessage(e.webID,1080);break;case"rship_heart":D(new As(e.webID,jt.RELATIONSHIP_HEART));break;case"rship_smile":D(new As(e.webID,jt.RELATIONSHIP_SMILE));break;case"rship_bobba":D(new As(e.webID,jt.RELATIONSHIP_BOBBA));break;case"rship_none":D(new As(e.webID,jt.RELATIONSHIP_NONE));break}E&&r()};return i.exports.useEffect(()=>{a(Po)},[e]),l(sn,{objectId:e.roomIndex,category:Q.UNIT,userType:e.userType,onClose:r,collapsable:!0,children:[t($t,{className:"cursor-pointer",onClick:C=>Jt(e.webID),children:e.name}),n===Po&&l(V,{children:[s(e.webID)&&t(j,{onClick:C=>I("friend"),children:d("infostand.button.friend")}),t(j,{onClick:C=>I("trade"),children:d("infostand.button.trade")}),t(j,{onClick:C=>I("whisper"),children:d("infostand.button.whisper")}),m>0&&t(j,{onClick:C=>I("respect"),children:d("infostand.button.respect",["count"],[m.toString()])}),!s(e.webID)&&l(j,{onClick:C=>I("relationship"),children:[d("infostand.link.relationship"),t(or,{className:"right fa-icon"})]}),!e.isIgnored&&t(j,{onClick:C=>I("ignore"),children:d("infostand.button.ignore")}),e.isIgnored&&t(j,{onClick:C=>I("unignore"),children:d("infostand.button.unignore")}),t(j,{onClick:C=>I("report"),children:d("infostand.button.report")}),f&&l(j,{onClick:C=>I("moderate"),children:[t(or,{className:"right fa-icon"}),d("infostand.link.moderate")]}),e.isAmbassador&&l(j,{onClick:C=>I("ambassador"),children:[t(or,{className:"right fa-icon"}),d("infostand.link.ambassador")]}),_&&t(j,{onClick:C=>I("pass_hand_item"),children:d("avatar.widget.pass_hand_item")})]}),n===Qa&&l(V,{children:[t(j,{onClick:C=>I("kick"),children:d("infostand.button.kick")}),l(j,{onClick:C=>I("mute"),children:[t(or,{className:"right fa-icon"}),d("infostand.button.mute")]}),l(j,{onClick:C=>I("ban"),children:[t(or,{className:"right fa-icon"}),d("infostand.button.ban")]}),g&&t(j,{onClick:C=>I("give_rights"),children:d("infostand.button.giverights")}),h&&t(j,{onClick:C=>I("remove_rights"),children:d("infostand.button.removerights")}),l(j,{onClick:C=>I("back"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]}),n===qc&&l(V,{children:[t(j,{onClick:C=>I("ban_hour"),children:d("infostand.button.ban_hour")}),t(j,{onClick:C=>I("ban_day"),children:d("infostand.button.ban_day")}),t(j,{onClick:C=>I("perm_ban"),children:d("infostand.button.perm_ban")}),l(j,{onClick:C=>I("back_moderate"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]}),n===Yc&&l(V,{children:[t(j,{onClick:C=>I("mute_2min"),children:d("infostand.button.mute_2min")}),t(j,{onClick:C=>I("mute_5min"),children:d("infostand.button.mute_5min")}),t(j,{onClick:C=>I("mute_10min"),children:d("infostand.button.mute_10min")}),l(j,{onClick:C=>I("back_moderate"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]}),n===Ja&&l(V,{children:[t(j,{onClick:C=>I("ambassador_alert"),children:d("infostand.button.alert")}),t(j,{onClick:C=>I("ambassador_kick"),children:d("infostand.button.kick")}),l(j,{onClick:C=>I("ambassador_mute"),children:[d("infostand.button.mute"),t(or,{className:"right fa-icon"})]}),l(j,{onClick:C=>I("back"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]}),n===zc&&l(V,{children:[t(j,{onClick:C=>I("ambassador_mute_2min"),children:d("infostand.button.mute_2min")}),t(j,{onClick:C=>I("ambassador_mute_10min"),children:d("infostand.button.mute_10min")}),t(j,{onClick:C=>I("ambassador_mute_60min"),children:d("infostand.button.mute_60min")}),t(j,{onClick:C=>I("ambassador_mute_18hr"),children:d("infostand.button.mute_18hour")}),l(j,{onClick:C=>I("back_ambassador"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]}),n===$c&&l(V,{children:[l(w,{className:"menu-list-split-3",children:[t(j,{onClick:C=>I("rship_heart"),children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),t(j,{onClick:C=>I("rship_smile"),children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),t(j,{onClick:C=>I("rship_bobba"),children:t(L,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),t(j,{onClick:C=>I("rship_none"),children:d("avatar.widget.clear_relationship")}),l(j,{onClick:C=>I("back"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]})]})},Im=o=>{const{classNames:e=[],...r}=o,n=i.exports.useMemo(()=>{const a=["menu-list"];return e.length&&a.push(...e),a},[e]);return t(T,{classNames:n,...r})},lx=o=>{const{userId:e=-1,userName:r="",roomIndex:n=-1,setIsDecorating:a=null}=o;return t(sn,{objectId:n,category:Q.UNIT,onClose:null,children:t(Im,{children:t(j,{onClick:s=>a(!1),children:d("widget.avatar.stop_decorating")})})})},cx=o=>{const{avatarInfo:e=null,onClose:r=null}=o,n=a=>{if(a)switch(a){case"move":us(e.id,e.category,Fr.OBJECT_MOVE);break;case"rotate":us(e.id,e.category,Fr.OBJECT_ROTATE_POSITIVE);break;case"pickup":us(e.id,e.category,Fr.OBJECT_PICKUP);break;case"eject":us(e.id,e.category,Fr.OBJECT_EJECT);break}};return l(sn,{objectId:e.id,category:e.category,onClose:r,collapsable:!0,children:[t($t,{children:e.name}),l(w,{className:"menu-list-split-3",children:[t(j,{onClick:a=>n("move"),children:t(Wm,{className:"center fa-icon"})}),t(j,{onClick:a=>n("rotate"),disabled:e.isWallItem,children:t(jm,{className:"center fa-icon"})}),(e.isOwner||e.isAnyRoomController)&&t(j,{onClick:a=>n("pickup"),children:t(gl,{className:"center fa-icon"})}),!e.isOwner&&!e.isAnyRoomController&&(e.isRoomOwner||e.roomControllerLevel>=tt.GUILD_ADMIN)&&t(j,{onClick:a=>n("eject"),children:t(gl,{className:"center fa-icon"})})]})]})},Kc=o=>{const{nameInfo:e=null,onClose:r=null}=o,n=i.exports.useMemo(()=>{const a=["name-only"];return e.isFriend&&a.push("is-friend"),a},[e]);return t(sn,{objectId:e.roomIndex,category:e.category,userType:e.userType,fades:e.id!==H().userId,classNames:n,onClose:r,children:t("div",{className:"text-shadow",children:e.name})})},Za=0,ei=1,Xc=3,Qc=4,ux=o=>{const{avatarInfo:e=null,isDancing:r=!1,setIsDecorating:n=null,onClose:a=null}=o,[s,c]=i.exports.useState(r&&qn()?ei:Za),{roomSession:u=null}=Ge(),m=h=>{let f=!0;if(h)if(h.startsWith("sign_")){const _=parseInt(h.split("_")[1]);u.sendSignMessage(_)}else switch(h){case"decorate":n(!0);break;case"change_name":St(new ra(ra.INIT));break;case"change_looks":ee("avatar-editor/show");break;case"expressions":f=!1,c(Xc);break;case"sit":u.sendPostureMessage(Xo.POSTURE_SIT);break;case"stand":u.sendPostureMessage(Xo.POSTURE_STAND);break;case"wave":u.sendExpressionMessage(Qr.WAVE.ordinal);break;case"blow":u.sendExpressionMessage(Qr.BLOW.ordinal);break;case"laugh":u.sendExpressionMessage(Qr.LAUGH.ordinal);break;case"idle":u.sendExpressionMessage(Qr.IDLE.ordinal);break;case"dance_menu":f=!1,c(ei);break;case"dance":u.sendDanceMessage(1);break;case"dance_stop":u.sendDanceMessage(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":u.sendDanceMessage(parseInt(h.charAt(h.length-1)));break;case"signs":f=!1,c(Qc);break;case"back":f=!1,c(Za);break;case"drop_carry_item":D(new W_);break}f&&a()},p=()=>e.amIOwner||e.amIAnyRoomController||e.roomControllerLevel>tt.GUEST,g=PC();return l(sn,{objectId:e.roomIndex,category:Q.UNIT,userType:e.userType,onClose:a,collapsable:!0,children:[t($t,{className:"cursor-pointer",onClick:h=>Jt(e.webID),children:e.name}),s===Za&&l(V,{children:[e.allowNameChange&&t(j,{onClick:h=>m("change_name"),children:d("widget.avatar.change_name")}),p()&&t(j,{onClick:h=>m("decorate"),children:d("widget.avatar.decorate")}),t(j,{onClick:h=>m("change_looks"),children:d("widget.memenu.myclothes")}),qn()&&!g&&l(j,{onClick:h=>m("dance_menu"),children:[t(or,{className:"right fa-icon"}),d("widget.memenu.dance")]}),!r&&!qn()&&!g&&t(j,{onClick:h=>m("dance"),children:d("widget.memenu.dance")}),r&&!qn()&&!g&&t(j,{onClick:h=>m("dance_stop"),children:d("widget.memenu.dance.stop")}),l(j,{onClick:h=>m("expressions"),children:[t(or,{className:"right fa-icon"}),d("infostand.link.expressions")]}),l(j,{onClick:h=>m("signs"),children:[t(or,{className:"right fa-icon"}),d("infostand.show.signs")]}),e.carryItem>0&&t(j,{onClick:h=>m("drop_carry_item"),children:d("avatar.widget.drop_hand_item")})]}),s===ei&&l(V,{children:[r&&t(j,{onClick:h=>m("dance_stop"),children:d("widget.memenu.dance.stop")}),t(j,{onClick:h=>m("dance_1"),children:d("widget.memenu.dance1")}),t(j,{onClick:h=>m("dance_2"),children:d("widget.memenu.dance2")}),t(j,{onClick:h=>m("dance_3"),children:d("widget.memenu.dance3")}),t(j,{onClick:h=>m("dance_4"),children:d("widget.memenu.dance4")}),l(j,{onClick:h=>m("back"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]}),s===Xc&&l(V,{children:[AC()===ms.POSTURE_STAND&&t(j,{onClick:h=>m("sit"),children:d("widget.memenu.sit")}),_C()&&t(j,{onClick:h=>m("stand"),children:d("widget.memenu.stand")}),Ba()&&t(j,{onClick:h=>m("wave"),children:d("widget.memenu.wave")}),Ba()&&l(j,{disabled:!bo(),onClick:h=>m("laugh"),children:[!bo()&&t(it,{type:"hc"}),d("widget.memenu.laugh")]}),Ba()&&l(j,{disabled:!bo(),onClick:h=>m("blow"),children:[!bo()&&t(it,{type:"hc"}),d("widget.memenu.blow")]}),t(j,{onClick:h=>m("idle"),children:d("widget.memenu.idle")}),l(j,{onClick:h=>m("back"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]}),s===Qc&&l(V,{children:[l(w,{className:"menu-list-split-3",children:[t(j,{onClick:h=>m("sign_1"),children:"1"}),t(j,{onClick:h=>m("sign_2"),children:"2"}),t(j,{onClick:h=>m("sign_3"),children:"3"})]}),l(w,{className:"menu-list-split-3",children:[t(j,{onClick:h=>m("sign_4"),children:"4"}),t(j,{onClick:h=>m("sign_5"),children:"5"}),t(j,{onClick:h=>m("sign_6"),children:"6"})]}),l(w,{className:"menu-list-split-3",children:[t(j,{onClick:h=>m("sign_7"),children:"7"}),t(j,{onClick:h=>m("sign_8"),children:"8"}),t(j,{onClick:h=>m("sign_9"),children:"9"})]}),l(w,{className:"menu-list-split-3",children:[t(j,{onClick:h=>m("sign_10"),children:"10"}),t(j,{onClick:h=>m("sign_11"),children:t("i",{className:"icon icon-sign-heart"})}),t(j,{onClick:h=>m("sign_12"),children:t("i",{className:"icon icon-sign-skull"})})]}),l(w,{className:"menu-list-split-3",children:[t(j,{onClick:h=>m("sign_0"),children:"0"}),t(j,{onClick:h=>m("sign_13"),children:t("i",{className:"icon icon-sign-exclamation"})}),t(j,{onClick:h=>m("sign_15"),children:t("i",{className:"icon icon-sign-smile"})})]}),l(w,{className:"menu-list-split-3",children:[t(j,{onClick:h=>m("sign_14"),children:t("i",{className:"icon icon-sign-soccer"})}),t(j,{onClick:h=>m("sign_17"),children:t("i",{className:"icon icon-sign-yellow"})}),t(j,{onClick:h=>m("sign_16"),children:t("i",{className:"icon icon-sign-red"})})]}),l(j,{onClick:h=>m("back"),children:[t(sr,{className:"left fa-icon"}),d("generic.back")]})]})]})},ti=0,Jc=1,Zc=2,eu=3,dx=o=>{const{avatarInfo:e=null,onClose:r=null}=o,[n,a]=i.exports.useState(ti),{roomSession:s=null}=Ge(),{petRespectRemaining:c=0,respectPet:u=null}=_n(),m=i.exports.useMemo(()=>{let g=!1;const h=Jn();if(h){const f=h.model.getValue(te.FIGURE_CARRY_OBJECT);f>0&&f<999999&&(g=!0)}return g},[]),p=g=>{let h=!0;if(g)switch(g){case"respect":u(e.id),c-1>=1&&(h=!1);break;case"treat":D(new Gi(e.id));break;case"pass_handitem":D(new Ku(e.id));break;case"train":s.requestPetCommands(e.id);break;case"pick_up":s.pickupPet(e.id);break;case"mount":s.mountPet(e.id);break;case"toggle_riding_permission":s.togglePetRiding(e.id);break;case"toggle_breeding_permission":s.togglePetBreeding(e.id);break;case"dismount":s.dismountPet(e.id);break;case"saddle_off":s.removePetSaddle(e.id);break;case"breed":break;case"harvest":s.harvestPet(e.id);break;case"revive":break;case"compost":s.compostPlant(e.id);break;case"buy_saddle":ee("catalog/open/"+K("catalog.links")["pets.buy_saddle"]);break}h&&r()};return i.exports.useEffect(()=>{a(g=>e.petType===Ut.MONSTERPLANT?eu:e.saddle&&!e.rider?Jc:e.rider?Zc:ti)},[e]),l(sn,{objectId:e.roomIndex,category:Q.UNIT,userType:pt.PET,onClose:r,collapsable:!0,children:[t($t,{children:e.name}),n===ti&&l(V,{children:[c>0&&t(j,{onClick:g=>p("respect"),children:d("infostand.button.petrespect",["count"],[c.toString()])}),t(j,{onClick:g=>p("train"),children:d("infostand.button.train")}),t(j,{onClick:g=>p("pick_up"),children:d("infostand.button.pickup")}),e.petType===Ut.HORSE&&t(j,{onClick:g=>p("buy_saddle"),children:d("infostand.button.buy_saddle")}),[Ut.BEAR,Ut.TERRIER,Ut.CAT,Ut.DOG,Ut.PIG].indexOf(e.petType)>-1&&t(j,{onClick:g=>p("breed"),children:d("infostand.button.breed")})]}),n===Jc&&l(V,{children:[t(j,{onClick:g=>p("mount"),children:d("infostand.button.mount")}),l(j,{onClick:g=>p("toggle_riding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:!!e.publiclyRideable,readOnly:!0}),d("infostand.button.toggle_riding_permission")]}),c>0&&t(j,{onClick:g=>p("respect"),children:d("infostand.button.petrespect",["count"],[c.toString()])}),t(j,{onClick:g=>p("train"),children:d("infostand.button.train")}),t(j,{onClick:g=>p("pick_up"),children:d("infostand.button.pickup")}),t(j,{onClick:g=>p("saddle_off"),children:d("infostand.button.saddleoff")})]}),n===Zc&&l(V,{children:[t(j,{onClick:g=>p("dismount"),children:d("infostand.button.dismount")}),c>0&&t(j,{onClick:g=>p("respect"),children:d("infostand.button.petrespect",["count"],[c.toString()])})]}),n===eu&&l(V,{children:[t(j,{onClick:g=>p("pick_up"),children:d("infostand.button.pickup")}),e.dead&&t(j,{onClick:g=>p("revive"),children:d("infostand.button.revive")}),s.isRoomOwner&&t(j,{onClick:g=>p("compost"),children:d("infostand.button.compost")}),!e.dead&&e.energy/e.maximumEnergy<.98&&t(j,{onClick:g=>p("treat"),children:d("infostand.button.pettreat")}),!e.dead&&e.level===e.maximumLevel&&e.breedable&&l(V,{children:[l(j,{onClick:g=>p("toggle_breeding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:e.publiclyBreedable,readOnly:!0}),d("infostand.button.toggle_breeding_permission")]}),t(j,{onClick:g=>p("breed"),children:d("infostand.button.breed")})]})]}),m&&t(j,{onClick:g=>p("pass_hand_item"),children:d("infostand.button.pass_hand_item")})]})},ri=0,tu=1,ru=2,nu=3,mx=o=>{const{avatarInfo:e=null,onClose:r=null}=o,[n,a]=i.exports.useState(ri),{roomSession:s=null}=Ge(),{petRespectRemaining:c=0,respectPet:u=null}=_n(),m=i.exports.useMemo(()=>s.isRoomOwner||s.controllerLevel>=tt.GUEST||H().isModerator,[s]),p=i.exports.useMemo(()=>{let h=!1;const f=Jn();if(f){const _=f.model.getValue(te.FIGURE_CARRY_OBJECT);_>0&&_<999999&&(h=!0)}return h},[]),g=h=>{let f=!0;if(h)switch(h){case"respect":u(e.id),c-1>=1&&(f=!1);break;case"treat":D(new Gi(e.id));break;case"pass_handitem":D(new Ku(e.id));break;case"pick_up":s.pickupPet(e.id);break;case"mount":s.mountPet(e.id);break;case"dismount":s.dismountPet(e.id);break}f&&r()};return i.exports.useEffect(()=>{a(h=>e.petType===Ut.MONSTERPLANT?nu:e.saddle&&!e.rider?tu:e.rider?ru:ri)},[e]),l(sn,{objectId:e.roomIndex,category:Q.UNIT,userType:pt.PET,onClose:r,collapsable:!0,children:[t($t,{children:e.name}),n===ri&&c>0&&t(j,{onClick:h=>g("respect"),children:d("infostand.button.petrespect",["count"],[c.toString()])}),n===tu&&l(V,{children:[!!e.publiclyRideable&&t(j,{onClick:h=>g("mount"),children:d("infostand.button.mount")}),c>0&&t(j,{onClick:h=>g("respect"),children:d("infostand.button.petrespect",["count"],[c.toString()])})]}),n===ru&&l(V,{children:[t(j,{onClick:h=>g("dismount"),children:d("infostand.button.dismount")}),c>0&&t(j,{onClick:h=>g("respect"),children:d("infostand.button.petrespect",["count"],[c.toString()])})]}),n===nu&&!e.dead&&e.energy/e.maximumEnergy<.98&&t(j,{onClick:h=>g("treat"),children:d("infostand.button.pettreat")}),m&&t(j,{onClick:h=>g("pick_up"),children:d("infostand.button.pickup")}),p&&t(j,{onClick:h=>g("pass_hand_item"),children:d("infostand.button.pass_hand_item")})]})},ni=0,su=1,ou=2,gx=o=>{const{avatarInfo:e=null,onClose:r=null}=o,[n,a]=i.exports.useState(ni),[s,c]=i.exports.useState(""),[u,m]=i.exports.useState("");U(j_,f=>{const _=f.getParser();if(_.botId===e.webID)switch(_.commandId){case Ne.CHANGE_BOT_NAME:c(_.data),a(su);return;case Ne.CHANGE_BOT_MOTTO:m(_.data),a(ou);return;case Ne.SETUP_CHAT:{const I=_.data,C=I.split(I.indexOf(";#;")===-1?";":";#;");(C.length===3||C.length===4)&&(St(new Xi(e.roomIndex,Q.UNIT,e.webID,C[0],C[1].toLowerCase()==="true"||C[1]==="1",parseInt(C[2]),C[3]?C[3].toLowerCase()==="true"||C[3]==="1":!1)),r());return}}});const p=f=>D(new q_(e.webID,f)),g=f=>{let _=!0;if(f)switch(f){case"donate_to_all":p(Ne.DONATE_TO_ALL),D(new ln(e.webID,Ne.DONATE_TO_ALL,""));break;case"donate_to_user":p(Ne.DONATE_TO_USER),D(new ln(e.webID,Ne.DONATE_TO_USER,""));break;case"change_bot_name":p(Ne.CHANGE_BOT_NAME),_=!1;break;case"save_bot_name":D(new ln(e.webID,Ne.CHANGE_BOT_NAME,s));break;case"change_bot_motto":p(Ne.CHANGE_BOT_MOTTO),_=!1;break;case"save_bot_motto":D(new ln(e.webID,Ne.CHANGE_BOT_MOTTO,u));break;case"dress_up":D(new ln(e.webID,Ne.DRESS_UP,""));break;case"random_walk":D(new ln(e.webID,Ne.RANDOM_WALK,""));break;case"setup_chat":p(Ne.SETUP_CHAT),_=!1;break;case"dance":D(new ln(e.webID,Ne.DANCE,""));break;case"nux_take_tour":_e().createLinkEvent("help/tour"),D(new ln(e.webID,Ne.NUX_TAKE_TOUR,""));break;case"pick":D(new Yu(e.webID));break}_&&r()};i.exports.useEffect(()=>{a(ni)},[e]);const h=e.amIOwner||e.amIAnyRoomController;return l(sn,{objectId:e.roomIndex,category:Q.UNIT,userType:pt.RENTABLE_BOT,onClose:r,collapsable:!0,children:[t($t,{children:e.name}),n===ni&&h&&l(V,{children:[e.botSkills.indexOf(Ne.DONATE_TO_ALL)>=0&&t(j,{onClick:f=>g("donate_to_all"),children:d("avatar.widget.donate_to_all")}),e.botSkills.indexOf(Ne.DONATE_TO_USER)>=0&&t(j,{onClick:f=>g("donate_to_user"),children:d("avatar.widget.donate_to_user")}),e.botSkills.indexOf(Ne.CHANGE_BOT_NAME)>=0&&t(j,{onClick:f=>g("change_bot_name"),children:d("avatar.widget.change_bot_name")}),e.botSkills.indexOf(Ne.CHANGE_BOT_MOTTO)>=0&&t(j,{onClick:f=>g("change_bot_motto"),children:d("avatar.widget.change_bot_motto")}),e.botSkills.indexOf(Ne.DRESS_UP)>=0&&t(j,{onClick:f=>g("dress_up"),children:d("avatar.widget.dress_up")}),e.botSkills.indexOf(Ne.RANDOM_WALK)>=0&&t(j,{onClick:f=>g("random_walk"),children:d("avatar.widget.random_walk")}),e.botSkills.indexOf(Ne.SETUP_CHAT)>=0&&t(j,{onClick:f=>g("setup_chat"),children:d("avatar.widget.setup_chat")}),e.botSkills.indexOf(Ne.DANCE)>=0&&t(j,{onClick:f=>g("dance"),children:d("avatar.widget.dance")}),e.botSkills.indexOf(Ne.NO_PICK_UP)===-1&&t(j,{onClick:f=>g("pick"),children:d("avatar.widget.pick_up")})]}),n===su&&l(T,{className:"menu-item",onClick:null,gap:1,children:[t(S,{variant:"white",children:d("bot.skill.name.configuration.new.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:s,maxLength:K("bot.name.max.length",15),onChange:f=>c(f.target.value)}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(M,{fullWidth:!0,variant:"secondary",onClick:f=>g(null),children:d("cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:f=>g("save_bot_name"),children:d("save")})]})]}),n===ou&&l(T,{className:"menu-item",onClick:null,gap:1,children:[t(S,{variant:"white",children:d("bot.skill.name.configuration.new.motto")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:K("motto.max.length",38),onChange:f=>m(f.target.value)}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(M,{fullWidth:!0,variant:"secondary",onClick:f=>g(null),children:d("cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:f=>g("save_bot_motto"),children:d("save")})]})]})]})},px=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(!1),[s,c]=i.exports.useState(null),{avatarInfo:u=null,setAvatarInfo:m=null,activeNameBubble:p=null,setActiveNameBubble:g=null,nameBubbles:h=[],removeNameBubble:f=null,productBubbles:_=[],confirmingProduct:I=null,updateConfirmingProduct:C=null,removeProductBubble:E=null,isDecorating:b=!1,setIsDecorating:N=null}=RN(),{roomSession:v=null}=Ge();Te(hr.NORMAL_MODE,x=>{e&&r(!1)}),Te(hr.GAME_MODE,x=>{e||r(!0)}),Ye(Y_.RSDE_DANCE,x=>{x.roomIndex===v.ownRoomIndex&&a(x.danceId!==0)}),lt(Xi.UPDATE_CHAT,x=>c(x));const y=()=>{if(!v||e)return null;if(p)return t(Kc,{nameInfo:p,onClose:()=>g(null)});if(u)switch(u.type){case Cs.FURNI:{const x=u;return b?t(cx,{avatarInfo:x,onClose:()=>m(null)}):null}case et.OWN_USER:case et.PEER:{const x=u;return K("user.tags.enabled")&&H().getUserTags(x.roomIndex),x.isSpectatorMode?null:x.isOwnUser?ci.isRunning()?null:t(ux,{avatarInfo:x,isDancing:n,setIsDecorating:N,onClose:()=>m(null)}):t(ix,{avatarInfo:x,onClose:()=>m(null)})}case bs.PET_INFO:{const x=u;return x.isOwner?t(dx,{avatarInfo:x,onClose:()=>m(null)}):t(mx,{avatarInfo:x,onClose:()=>m(null)})}case Ss.RENTABLE_BOT:return t(gx,{avatarInfo:u,onClose:()=>m(null)})}return null},R=()=>{if(!u)return null;switch(u.type){case Cs.FURNI:return t(ex,{avatarInfo:u,onClose:()=>m(null)});case et.OWN_USER:case et.PEER:return t(ax,{avatarInfo:u,setAvatarInfo:m,onClose:()=>m(null)});case et.BOT:return t(ZR,{avatarInfo:u,onClose:()=>m(null)});case Ss.RENTABLE_BOT:return t(rx,{avatarInfo:u,onClose:()=>m(null)});case bs.PET_INFO:return t(tx,{avatarInfo:u,onClose:()=>m(null)})}};return l(V,{children:[b&&t(lx,{userId:H().userId,userName:H().userName,roomIndex:v.ownRoomIndex,setIsDecorating:N}),y(),u&&t(T,{alignItems:"end",className:"nitro-infostand-container",children:R()}),h.length>0&&h.map((x,F)=>t(Kc,{nameInfo:x,onClose:()=>f(F)},F)),_.length>0&&_.map((x,F)=>t(JR,{item:x,updateConfirmingProduct:C,onClose:()=>E(F)},x.id)),s&&t(YR,{chatEvent:s,onClose:()=>c(null)}),I&&t(zR,{item:I,onClose:()=>C(null)}),t(qR,{})]})},hx=o=>{const{chatStyleId:e=0,chatStyleIds:r=null,selectChatStyleId:n=null}=o,[a,s]=i.exports.useState(null),[c,u]=i.exports.useState(!1),m=g=>{n(g),u(!1)},p=g=>{let h=!1;u(f=>(h=!f,h)),h&&s(g.target)};return i.exports.useEffect(()=>{c||s(null)},[c]),l(V,{children:[t(L,{pointer:!0,className:"icon chatstyles-icon",onClick:p}),t(gu,{show:c,target:a,placement:"top",children:t(Bo,{className:"nitro-chat-style-selector-container image-rendering-pixelated",children:t(ne,{overflow:"hidden",className:"bg-transparent",children:t(re,{columnCount:3,overflow:"auto",children:r&&r.length>0&&r.map(g=>t(w,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:h=>m(g),children:t(L,{className:"bubble-container",children:t(L,{className:`chat-bubble bubble-${g}`,children:""})},g)},g))})})})})]})},fx=o=>{const[e,r]=i.exports.useState(""),{chatStyleId:n=0,updateChatStyleId:a=null}=_n(),{selectedUsername:s="",floodBlocked:c=!1,floodBlockedSeconds:u=0,setIsTyping:m=null,setIsIdle:p=null,sendChat:g=null}=yN(),{roomSession:h=null}=Ge(),f=i.exports.useRef(),_=i.exports.useMemo(()=>d("widgets.chatinput.mode.whisper"),[]),I=i.exports.useMemo(()=>d("widgets.chatinput.mode.shout"),[]),C=i.exports.useMemo(()=>d("widgets.chatinput.mode.speak"),[]),E=i.exports.useMemo(()=>K("chat.input.maxlength",100),[]),b=i.exports.useCallback(()=>{const k=document.activeElement;return!(!k||f&&f.current===k||!(k instanceof HTMLInputElement)&&!(k instanceof HTMLTextAreaElement))},[f]),N=i.exports.useCallback(()=>{f.current.focus(),f.current.setSelectionRange(f.current.value.length*2,f.current.value.length*2)},[f]),v=i.exports.useCallback(()=>{r(k=>k!==_||!s.length?k:`${k} ${s}`)},[s,_]),y=i.exports.useCallback((k,A=!1)=>{if(!k||k==="")return;let O=A?Br.CHAT_SHOUT:Br.CHAT_DEFAULT,P=k;const B=P.split(" ");let G="",z="";switch(B[0]){case _:O=Br.CHAT_WHISPER,G=B[1],z=_+" "+G+" ",B.shift(),B.shift();break;case I:O=Br.CHAT_SHOUT,B.shift();break;case C:O=Br.CHAT_DEFAULT,B.shift();break}P=B.join(" "),m(!1),p(!1),P.length<=E&&(/%CC%/g.test(encodeURIComponent(P))?r(""):(r(""),g(P,O,G,n))),r(z)},[_,I,C,E,n,m,p,g]),R=i.exports.useCallback(k=>{!k||!k.length?m(!1):(m(!0),p(!0)),r(k)},[m,p]),x=i.exports.useCallback(k=>{if(c||!f.current||b())return;document.activeElement!==f.current&&N();const A=k.target.value;switch(k.key){case" ":case"Space":v();return;case"NumpadEnter":case"Enter":y(A,k.shiftKey);return;case"Backspace":if(A){const O=A.split(" ");O[0]===_&&O.length===3&&O[2]===""&&r("")}return}},[c,f,_,b,N,v,y]);lt(wn.CHAT_INPUT_CONTENT,k=>{switch(k.chatMode){case wn.WHISPER:{r(`${_} ${k.userName} `);return}case wn.SHOUT:return}});const F=i.exports.useMemo(()=>{let k=[];const A=K("chat.styles");for(const O of A)if(O){if(O.minRank>0){H().hasSecurity(O.minRank)&&k.push(O.styleId);continue}if(O.isSystemStyle&&H().hasSecurity(tt.MODERATOR)){k.push(O.styleId);continue}if(!(K("chat.styles.disabled").indexOf(O.styleId)>=0)){if(O.isHcOnly&&fr()>=cr.CLUB){k.push(O.styleId);continue}if(O.isAmbassadorOnly&&H().isAmbassador){k.push(O.styleId);continue}!O.isHcOnly&&!O.isAmbassadorOnly&&k.push(O.styleId)}}return k},[]);return i.exports.useEffect(()=>(document.body.addEventListener("keydown",x),()=>{document.body.removeEventListener("keydown",x)}),[x]),i.exports.useEffect(()=>{f.current&&(f.current.parentElement.dataset.value=e)},[e]),!h||h.isSpectator?null:Ai.exports.createPortal(l("div",{className:"nitro-chat-input-container",children:[l("div",{className:"input-sizer align-items-center",children:[!c&&t("input",{ref:f,type:"text",className:"chat-input",placeholder:d("widgets.chatinput.default"),value:e,maxLength:E,onChange:k=>R(k.target.value),onMouseDown:k=>N()}),c&&l(S,{variant:"danger",children:[d("chat.input.alert.flood",["time"],[u.toString()])," "]})]}),t(hx,{chatStyleId:n,chatStyleIds:F,selectChatStyleId:a})]}),document.getElementById("toolbar-chat-input-container"))},Ix=()=>{let o=null;self.onmessage=e=>{if(!e)return;const r=e.data;switch(r.action){case"START":o=setInterval(()=>postMessage(null),r.content);break;case"STOP":o&&(clearInterval(o),o=null);break}}};class Ex extends Worker{constructor(e){const r=e.toString(),n=new Blob([`(${r})()`]);super(URL.createObjectURL(n))}}const _x=o=>{const{chat:e=null,makeRoom:r=null,bubbleWidth:n=It.CHAT_BUBBLE_WIDTH_NORMAL}=o,[a,s]=i.exports.useState(!1),[c,u]=i.exports.useState(!1),m=i.exports.useRef(),p=i.exports.useMemo(()=>{switch(n){case It.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case It.CHAT_BUBBLE_WIDTH_THIN:return 240;case It.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}},[n]);return i.exports.useEffect(()=>{s(!1);const g=m.current;if(!g)return;const h=g.offsetWidth,f=g.offsetHeight;e.width=h,e.height=f,e.elementRef=g;let _=e.left,I=e.top;return!_&&!I&&(_=e.location.x-h/2,I=g.parentElement.offsetHeight-f,e.left=_,e.top=I),u(!0),()=>{e.elementRef=null,u(!1)}},[e]),i.exports.useEffect(()=>{!c||!e||a||(r&&r(e),s(!0))},[e,c,a,r]),l("div",{ref:m,className:`bubble-container ${a?"visible":"invisible"}`,onClick:g=>q().selectRoomObject(e.roomId,e.senderId,Q.UNIT),children:[e.styleId===0&&t("div",{className:"user-container-bg",style:{backgroundColor:e.color}}),l("div",{className:`chat-bubble bubble-${e.styleId} type-${e.type}`,style:{maxWidth:p},children:[t("div",{className:"user-container",children:e.imageUrl&&e.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${e.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${e.username}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${e.formattedText}`}})]}),t("div",{className:"pointer"})]})]})},Cx=o=>{const{chatMessages:e=[],setChatMessages:r=null,chatSettings:n=null,getScrollSpeed:a=6e3}=AN(),s=i.exports.useRef(),c=i.exports.useCallback(()=>{r(p=>{if(p){const g=p.filter(h=>h.top>-h.height*2);if(g.length!==p.length)return g}return p})},[r]),u=i.exports.useCallback((p,g,h)=>{for(let f=e.indexOf(p)-1;f>=0;f--){const _=e[f];if(!(!_||p===_||h.indexOf(_)>=0||_.top+_.height-g>p.top+p.height)&&_b(p,_,-g,0)){const I=Math.abs(_.top+_.height-p.top);h.push(_),_.top-=I,_.skipMovement=!0,u(_,I,h)}}},[e]),m=i.exports.useCallback(p=>{if(n.mode===It.CHAT_MODE_FREE_FLOW)p.skipMovement=!0,u(p,0,[p]),c();else{const g=p.top+p.height,h=p.height,f=s.current.offsetHeight-g,_=h-f;f<h&&(r(I=>(I.forEach(C=>{C!==p&&(C.top-=_)}),I)),c())}},[n,u,c,r]);return i.exports.useEffect(()=>{const p=(g=null)=>{if(!s||!s.current)return;const h=s.current.offsetHeight,f=Math.round(document.body.offsetHeight*K("chat.viewer.height.percentage"));s.current.style.height=`${f}px`,r(_=>(_&&_.forEach(I=>I.top-=h-f),_))};return window.addEventListener("resize",p),p(),()=>{window.removeEventListener("resize",p)}},[r]),i.exports.useEffect(()=>{const p=h=>{r(f=>(f.forEach(_=>{if(_.skipMovement){_.skipMovement=!1;return}_.top-=h}),f)),c()},g=new Ex(Ix);return g.onmessage=()=>p(15),g.postMessage({action:"START",content:a}),()=>{g.postMessage({action:"STOP"})}},[a,c,r]),t("div",{ref:s,className:"nitro-chat-widget",children:e.map(p=>t(_x,{chat:p,makeRoom:m,bubbleWidth:n.weight},p.id))})},Em=o=>{const{title:e=null,items:r=[],selectItem:n=null,onClose:a=null}=o,[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(""),p=H().isModerator,g=i.exports.useMemo(()=>{const h=u.toLocaleLowerCase();return r.filter(f=>{var _;return(_=f.name)==null?void 0:_.toLocaleLowerCase().includes(h)})},[r,u]);return i.exports.useEffect(()=>{s&&n(s)},[s,n]),l(oe,{className:"nitro-chooser-widget",theme:"primary-slim",children:[t(se,{headerText:e,onCloseClick:a}),l(ne,{overflow:"hidden",gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:d("generic.search"),value:u,onChange:h=>m(h.target.value)}),t(ga,{rows:g,rowRender:h=>t(w,{alignItems:"center",className:Vt("rounded p-1",s===h&&"bg-muted"),pointer:!0,onClick:f=>c(h),children:l(S,{truncate:!0,children:[h.name," ",p&&" - "+h.id]})})})]})]})},bx=o=>{const{items:e=null,onClose:r=null,selectItem:n=null,populateChooser:a=null}=GN();return i.exports.useEffect(()=>{const s={linkReceived:c=>{c.split("/"),a()},eventUrlPrefix:"furni-chooser/"};return _t(s),()=>Ct(s)},[a]),e?t(Em,{title:d("widget.chooser.furni.title"),items:e,selectItem:n,onClose:r}):null},Sx=o=>{const{items:e=null,onClose:r=null,selectItem:n=null,populateChooser:a=null}=qN();return i.exports.useEffect(()=>{const s={linkReceived:c=>{c.split("/"),a()},eventUrlPrefix:"user-chooser/"};return _t(s),()=>Ct(s)},[a]),e?t(Em,{title:d("widget.chooser.user.title"),items:e,selectItem:n,onClose:r}):null},Nx=o=>{const[e,r]=i.exports.useState(!1),{users:n=[],answer:a=null}=PN();return i.exports.useEffect(()=>{r(!!n.length)},[n]),e?l(oe,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[t(se,{headerText:d("navigator.doorbell.title"),onCloseClick:s=>r(!1)}),l(ne,{overflow:"hidden",gap:0,children:[t(T,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[t(L,{className:"g-col-6",children:d("generic.username")}),t(L,{className:"g-col-6"})]})}),t(T,{overflow:"auto",className:"striped-children",gap:0,children:n&&n.length>0&&n.map(s=>l(re,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[t(L,{className:"g-col-6",children:s}),t(L,{className:"g-col-6",children:l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(M,{variant:"success",onClick:()=>a(s,!0),children:d("generic.accept")}),t(M,{variant:"danger",onClick:()=>a(s,!1),children:d("generic.deny")})]})})]},s))})]})]}):null},ul=o=>{const{objectId:e=-1,category:r=-1,noFollow:n=!1,position:a="absolute",...s}=o,[c,u]=i.exports.useState({x:-1,y:-1}),m=i.exports.useRef();return i.exports.useEffect(()=>{let p=!1;const g=()=>{const f=ye();return Hi(f.roomId,e,r,1)},h=()=>{const f=g();!f||!m.current||u({x:Math.round(f.left+f.width/2-m.current.offsetWidth/2),y:Math.round(f.top-m.current.offsetHeight+10)})};return n?h():(p=!0,hn().add(h)),()=>{p&&hn().remove(h)}},[e,r,n]),t(L,{innerRef:m,position:a,visible:c.x+(m.current?m.current.offsetWidth:0)>-1,className:"object-location",style:{left:c.x,top:c.y},...s})},Tx=o=>{const{roomIndex:e=-1,request:r=null,hideFriendRequest:n=null,requestResponse:a=null}=o;return t(ul,{objectId:e,category:Q.UNIT,children:t(L,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:l(T,{children:[l(w,{alignItems:"center",justifyContent:"between",gap:2,children:[t(S,{variant:"white",fontSize:6,children:d("widget.friendrequest.from",["username"],[r.name])}),t(_r,{className:"cursor-pointer fa-icon",onClick:s=>n(r.requesterUserId)})]}),l(w,{justifyContent:"end",gap:1,children:[t(M,{variant:"danger",onClick:s=>a(r.requesterUserId,!1),children:d("widget.friendrequest.decline")}),t(M,{variant:"success",onClick:s=>a(r.requesterUserId,!0),children:d("widget.friendrequest.accept")})]})]})})})},vx=o=>{const{displayedRequests:e=[],hideFriendRequest:r=null}=UN(),{requestResponse:n=null}=mr();return e.length?t(V,{children:e.map((a,s)=>t(Tx,{roomIndex:a.roomIndex,request:a.request,hideFriendRequest:r,requestResponse:n},s))}):null},wx=o=>{const{productType:e=ue.FLOOR,classId:r=-1,extraParam:n=void 0}=o;switch(e){case ue.WALL:case ue.FLOOR:return t(Qi,{productType:e,productClassId:r});case ue.BADGE:return t(je,{badgeCode:n});case ue.HABBO_CLUB:return t(it,{type:"hc"})}return null},Rx=o=>{const{ownerId:e=-1}=o,[r,n]=i.exports.useState(0),[a,s]=i.exports.useState(void 0),c=()=>{r===1&&D(new X_(e)),n(0),s(void 0)};U(z_,m=>{n(1)}),U($_,m=>{n(0),s(void 0)}),U(K_,m=>{const p=m.getParser();s({contentType:p.contentType,classId:p.classId}),n(2)});const u=H().userId===e;return r===0?null:l(oe,{className:"nitro-mysterybox-dialog",theme:"primary-slim",children:[t(se,{headerText:d(r===1?`mysterybox.dialog.${u?"owner":"other"}.title`:"mysterybox.reward.title"),onCloseClick:c}),l(ne,{children:[r===1&&l(V,{children:[l(S,{variant:"primary",children:[" ",d(`mysterybox.dialog.${u?"owner":"other"}.subtitle`)," "]}),l(S,{children:[" ",d(`mysterybox.dialog.${u?"owner":"other"}.description`)," "]}),l(S,{children:[" ",d(`mysterybox.dialog.${u?"owner":"other"}.waiting`)]}),l(M,{variant:"danger",onClick:c,className:"mt-auto",children:[" ",d(`mysterybox.dialog.${u?"owner":"other"}.cancel`)," "]})]}),r===2&&a&&l(V,{children:[l(S,{variant:"black",children:[" ",d("mysterybox.reward.text")," "]}),t(w,{className:"prize-container justify-content-center mx-auto",children:t(wx,{classId:a.classId,productType:a.contentType})}),l(M,{variant:"success",onClick:c,className:"mt-auto",children:[" ",d("mysterybox.reward.close")," "]})]})]})]})},xx=o=>{const{objectId:e=-1,onClose:r=null}=o,[n,a]=i.exports.useState(""),s=()=>{D(new Q_(e,n)),r()};return e===-1?null:l(oe,{className:"nitro-mysterytrophy-dialog no-resize",theme:"primary-slim",children:[t(se,{center:!0,headerText:d("mysterytrophy.header.title"),onCloseClick:r}),l(ne,{children:[l(w,{className:"mysterytrophy-dialog-top p-3",children:[t("div",{className:"mysterytrophy-image flex-shrink-0"}),t("div",{className:"m-2",children:t(S,{variant:"white",className:"mysterytrophy-text-big",children:d("mysterytrophy.header.description")})})]}),t(w,{className:"mysterytrophy-dialog-bottom p-2",children:l(T,{gap:1,children:[l(w,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-mysterytrophy-dialog",children:[t("textarea",{className:"form-control form-control-sm input-mysterytrophy",value:n,onChange:c=>a(c.target.value)}),t("div",{className:"mysterytrophy-pencil-image flex-shrink-0 small fa-icon"})]}),l(w,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(S,{pointer:!0,className:"text-decoration",onClick:()=>r(),children:d("cancel")}),t(M,{variant:"success",onClick:()=>s(),children:d("generic.ok")})]})]})})]})]})},yx=o=>{const{objectId:e=-1,onClose:r=null}=o,{roomSession:n=null}=Ge(),a=()=>{n.useMultistateItem(e),r()};return l(oe,{className:"nitro-use-product-confirmation",children:[t(se,{headerText:d("effectbox.header.title"),onCloseClick:r}),t(ne,{center:!0,children:t(w,{gap:2,children:l(T,{justifyContent:"between",children:[t(S,{children:d("effectbox.header.description")}),l(w,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:r,children:d("generic.cancel")}),t(M,{variant:"success",onClick:a,children:d("generic.ok")})]})]})})})]})},Do=-1,Ox=0,Ax=o=>{const{objectId:e=-1,onClose:r=null}=o,[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(Do),{roomSession:u=null}=Ge(),m=()=>{u.useMultistateItem(e),r()};return i.exports.useEffect(()=>{if(!u||e===-1)return;const p=aa(u.roomId,e,Q.FLOOR);if(!p)return;a(p);let g=Do;switch(p.specialType){case Z.MONSTERPLANT_SEED:g=Ox;break}if(g===Do){r();return}c(g)},[u,e,r]),s===Do?null:l(oe,{className:"nitro-use-product-confirmation",children:[t(se,{headerText:d("useproduct.widget.title.plant_seed",["name"],[n.name]),onCloseClick:r}),t(ne,{center:!0,children:l(w,{gap:2,overflow:"hidden",children:[t(T,{children:t(L,{className:"product-preview",children:t(L,{className:"monsterplant-image"})})}),l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:2,children:[t(S,{children:d("useproduct.widget.text.plant_seed",["productName"],[n.name])}),t(S,{children:d("useproduct.widget.info.plant_seed")})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:r,children:d("useproduct.widget.cancel")}),t(M,{variant:"success",onClick:m,children:d("widget.monsterplant_seed.button.use")})]})]})]})})]})},Mo=-1,kx=0,Px=o=>{const{objectId:e=-1,onClose:r=null}=o,[n,a]=i.exports.useState(Mo),[s,c]=i.exports.useState(ce.MALE),[u,m]=i.exports.useState(null),{roomSession:p=null}=Ge(),g=()=>{pi().send(new J_(e)),pi().send(new Mu(s,u)),r()};return i.exports.useEffect(()=>{let h=Mo;const f=H().figure,_=H().gender,I=[];if(p&&e>=0){const C=aa(p.roomId,e,Q.FLOOR);if(C)switch(C.specialType){case Z.FIGURE_PURCHASABLE_SET:h=kx;const E=C.customParams.split(",").map(b=>parseInt(b));for(const b of E)Nt().isValidFigureSetForGender(b,_)&&I.push(b);break}}if(h===Mo){r();return}c(_),m(Nt().getFigureStringWithFigureIds(f,_,I)),a(h)},[p,e,r]),n===Mo?null:l(oe,{className:"nitro-use-product-confirmation",children:[t(se,{headerText:d("useproduct.widget.title.bind_clothing"),onCloseClick:r}),t(ne,{center:!0,children:l(w,{gap:2,overflow:"hidden",children:[t(T,{children:t(L,{className:"mannequin-preview",children:t(st,{figure:u,direction:2})})}),l(T,{justifyContent:"between",overflow:"auto",children:[l(T,{gap:2,children:[t(S,{children:d("useproduct.widget.text.bind_clothing")}),t(S,{children:d("useproduct.widget.info.bind_clothing")})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(M,{variant:"danger",onClick:r,children:d("useproduct.widget.cancel")}),t(M,{variant:"success",onClick:g,children:d("useproduct.widget.bind_clothing")})]})]})]})})]})},Dx=o=>{const{closeConfirm:e=null,processAction:r=null,onClose:n=null,objectId:a=-1,mode:s=null,confirmMode:c=null,confirmingObjectId:u=-1,groupData:m=null,isGroupMember:p=!1,objectOwnerId:g=-1}=LS(),{simpleAlert:h=null}=Xe();U(Z_,_=>{const I=_.getParser();if(I)switch(I.count){case 1:h(d("costumehopper.costumerequired.bodytext"),null,"catalog/open/temporary_effects",d("costumehopper.costumerequired.buy"),d("costumehopper.costumerequired.header"),null);break;case 2:h(d("viphopper.viprequired.bodytext"),null,"catalog/open/habbo_club",d("viprequired.buy.vip"),d("viprequired.header"),null);break;case 3:h(d("gate.viprequired.bodytext"),null,"catalog/open/habbo_club",d("viprequired.buy.vip"),d("gate.viprequired.title"),null);break}});const f=H().userId===g;return l(V,{children:[c===vi&&t(Ax,{objectId:u,onClose:e}),c===wi&&t(Px,{objectId:u,onClose:e}),c===$d&&t(yx,{objectId:u,onClose:e}),c===Ri&&t(xx,{objectId:u,onClose:e}),t(Rx,{ownerId:g}),a>=0&&s&&l(sn,{objectId:a,category:Q.FLOOR,onClose:n,fades:!0,children:[s===Mt.FRIEND_FURNITURE&&l(V,{children:[t($t,{children:d("friendfurni.context.title")}),t(j,{onClick:_=>r("use_friend_furni"),children:d("friendfurni.context.use")})]}),s===Mt.MONSTERPLANT_SEED&&l(V,{children:[t($t,{children:d("furni.mnstr_seed.name")}),t(j,{onClick:_=>r("use_monsterplant_seed"),children:d("widget.monsterplant_seed.button.use")})]}),s===Mt.RANDOM_TELEPORT&&l(V,{children:[t($t,{children:d("furni.random_teleport.name")}),t(j,{onClick:_=>r("use_random_teleport"),children:d("widget.random_teleport.button.use")})]}),s===Mt.PURCHASABLE_CLOTHING&&l(V,{children:[t($t,{children:d("furni.generic_usable.name")}),t(j,{onClick:_=>r("use_purchaseable_clothing"),children:d("widget.generic_usable.button.use")})]}),s===Mt.MYSTERY_BOX&&l(V,{children:[t($t,{children:d("mysterybox.context.title")}),t(j,{onClick:_=>r("use_mystery_box"),children:d("mysterybox.context."+(f?"owner":"other")+".use")})]}),s===Mt.MYSTERY_TROPHY&&l(V,{children:[t($t,{children:d("mysterytrophy.header.title")}),t(j,{onClick:_=>r("use_mystery_trophy"),children:d("friendfurni.context.use")})]}),s===zd&&m&&l(V,{children:[t($t,{className:"cursor-pointer text-truncate",onClick:()=>eo(m.guildId),children:m.guildName}),!p&&t(j,{onClick:_=>r("join_group"),children:d("widget.furniture.button.join.group")}),t(j,{onClick:_=>r("go_to_group_homeroom"),children:d("widget.furniture.button.go.to.group.home.room")}),m.guildHasReadableForum&&t(j,{onClick:_=>r("open_forum"),children:d("widget.furniture.button.open_group_forum")})]})]})]})},Mx=o=>{const{objectId:e=-1,color:r=0,setColor:n=null,applyToner:a=null,toggleToner:s=null,onClose:c=null}=kS();return e===-1?null:l(oe,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[t(se,{headerText:d("widget.backgroundcolor.title"),onCloseClick:c}),l(ne,{overflow:"hidden",justifyContent:"between",children:[t(T,{overflow:"auto",gap:1,children:t("input",{type:"color",className:"form-control",value:Qt.makeColorNumberHex(r),onChange:u=>n(Qt.convertFromHex(u.target.value))})}),l(T,{gap:1,children:[t(M,{fullWidth:!0,variant:"primary",onClick:s,children:d("widget.backgroundcolor.button.on")}),t(M,{fullWidth:!0,variant:"primary",onClick:a,children:d("widget.backgroundcolor.button.apply")})]})]})]})},Lx=o=>{const{objectId:e=-1,color:r="1",badgeName:n="",badgeDesc:a="",date:s="",senderName:c="",onClose:u=null}=DS();return e===-1?null:t(Od,{color:r,message:a,date:s,senderName:c,customTitle:n,onCloseClick:u})},Ux=o=>{const{objectId:e=-1,recipes:r=[],ingredients:n=[],selectedRecipe:a=null,requiredIngredients:s=null,isCrafting:c=!1,craft:u=null,selectRecipe:m=null,onClose:p=null}=FS(),{roomSession:g=null}=Ge(),[h,f]=i.exports.useState(!1),_=i.exports.useMemo(()=>{const E=q().getRoomObject(g.roomId,e,Q.FLOOR);return Wt(E)},[e,g.roomId]),I=i.exports.useMemo(()=>{if(!s||!s.length)return!1;for(const E of s){const b=n.find(N=>N.name===E.itemName);if(!b||b.count<E.count)return!1}return!0},[n,s]),C=()=>{if(!h){f(!0);return}u(),f(!1)};return i.exports.useEffect(()=>{f(!1)},[a]),e===-1?null:l(oe,{className:"nitro-widget-crafting",theme:"primary-slim",children:[t(se,{headerText:d("crafting.title"),onCloseClick:p}),t(ne,{children:l(w,{grow:!0,overflow:"hidden",gap:2,children:[l(w,{column:!0,fullWidth:!0,gap:2,children:[l(T,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:d("crafting.title.products")}),t(Le,{columnCount:5,children:r.length>0&&r.map(E=>t(be,{itemImage:E.iconUrl,itemActive:a&&a.name===E.name,onClick:()=>m(E)},E.name))})]}),l(T,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:d("crafting.title.mixer")}),t(Le,{columnCount:5,children:n.length>0&&n.map(E=>t(be,{itemImage:E.iconUrl,itemCount:E.count,itemCountMinimum:0,className:(E.count?"":"opacity-0-5 ")+"cursor-default"},E.name))})]})]}),l(w,{column:!0,fullWidth:!0,gap:2,children:[!a&&t(T,{center:!0,fullHeight:!0,className:"text-black text-center",children:d("crafting.info.start")}),a&&l(V,{children:[l(T,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:d("crafting.current_recipe")}),t(Le,{columnCount:5,children:!!s&&s.length>0&&s.map(E=>{const b=n.find(v=>v.name===E.itemName),N=[];for(let v=0;v<E.count;v++)N.push(t(be,{itemImage:b.iconUrl,className:(b.count-v<=0?"opacity-0-5 ":"")+"cursor-default"},v));return N})})]}),l(w,{gap:2,column:!0,fullHeight:!0,children:[l(w,{gap:2,className:"bg-muted rounded",column:!0,fullHeight:!0,children:[t("div",{className:"py-1 text-center",children:d("crafting.result")}),l(w,{gap:1,center:!0,column:!0,fullHeight:!0,className:"pb-1",children:[t(T,{fullHeight:!0,children:t("img",{src:a.iconUrl})}),t("div",{className:"text-black",children:a.localizedName})]})]}),l(M,{variant:!_||!I?"danger":h?"warning":c?"primary":"success",disabled:!_||!I||c,onClick:C,children:[!c&&d(_?I?h?"generic.confirm":"crafting.btn.craft":"crafting.status.recipe.incomplete":"crafting.btn.notowner"),c&&t(Ji,{})]})]})]})]})]})})]})},Fx=o=>{const[e,r]=i.exports.useState(!1),{presets:n=[],dimmerState:a=0,selectedPresetId:s=0,color:c=16777215,brightness:u=255,effectId:m=0,selectedColor:p=0,setSelectedColor:g=null,selectedBrightness:h=0,setSelectedBrightness:f=null,selectedEffectId:_=0,setSelectedEffectId:I=null,selectPresetId:C=null,applyChanges:E}=BS(),b=()=>{rr.previewDimmer(c,u,m===2),r(!1)};Te(we.REMOVE_DIMMER,v=>r(!1)),i.exports.useEffect(()=>{!n||!n.length||r(!0)},[n]);const N=i.exports.useMemo(()=>K("widget.dimmer.colorwheel",!1),[]);return e?l(oe,{className:"nitro-room-widget-dimmer",children:[t(se,{headerText:d("widget.dimmer.title"),onCloseClick:b}),a===1&&t(In,{children:n.map(v=>t(jr,{isActive:s===v.id,onClick:y=>C(v.id),children:d(`widget.dimmer.tab.${v.id}`)},v.id))}),l(ne,{children:[a===0&&l(T,{alignItems:"center",children:[t(L,{className:"dimmer-banner"}),t(S,{center:!0,className:"bg-muted rounded p-1",children:d("widget.dimmer.info.off")}),t(M,{fullWidth:!0,variant:"success",onClick:()=>rr.changeState(),children:d("widget.dimmer.button.on")})]}),a===1&&l(V,{children:[l(T,{gap:1,children:[t(S,{fontWeight:"bold",children:d("widget.backgroundcolor.hue")}),N&&t("input",{type:"color",className:"form-control",value:Qt.makeColorNumberHex(p),onChange:v=>g(Qt.convertFromHex(v.target.value))}),!N&&t(re,{gap:1,columnCount:7,children:rr.AVAILABLE_COLORS.map((v,y)=>t(T,{fullWidth:!0,pointer:!0,className:Vt("color-swatch rounded",v===p&&"active"),onClick:()=>g(v),style:{backgroundColor:rr.HTML_COLORS[y]}},y))})]}),l(T,{gap:1,children:[t(S,{fontWeight:"bold",children:d("widget.backgroundcolor.lightness")}),t(Pt,{className:"nitro-slider",min:rr.MIN_BRIGHTNESS,max:rr.MAX_BRIGHTNESS,value:h,onChange:v=>f(v),thumbClassName:"thumb percent",renderThumb:(v,y)=>t("div",{...v,children:rr.scaleBrightness(y.valueNow)})})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:_===2,onChange:v=>I(v.target.checked?2:1)}),t(S,{children:d("widget.dimmer.type.checkbox")})]}),l(w,{gap:1,children:[t(M,{fullWidth:!0,variant:"danger",onClick:()=>rr.changeState(),children:d("widget.dimmer.button.off")}),t(M,{fullWidth:!0,variant:"success",onClick:E,children:d("widget.dimmer.button.apply")})]})]})]})]}):null},Gx=o=>{const{objectId:e=-1,value:r=0,onClose:n=null,redeem:a=null}=HS();return e===-1?null:l(oe,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[t(se,{headerText:d("catalog.redeem.dialog.title"),onCloseClick:n}),t(ne,{center:!0,children:l(w,{overflow:"hidden",gap:2,children:[t(T,{center:!0,children:t(L,{className:"exchange-image"})}),l(T,{grow:!0,justifyContent:"between",overflow:"hidden",children:[l(T,{gap:1,overflow:"auto",children:[t(S,{fontWeight:"bold",children:d("creditfurni.description",["credits"],[r.toString()])}),t(S,{children:d("creditfurni.prompt")})]}),t(M,{variant:"success",onClick:a,children:d("catalog.redeem.dialog.button.exchange")})]})]})})]})},Bx=o=>{const{currentIndex:e=-1,currentPhotos:r=null}=o,[n,a]=i.exports.useState(0),s=r&&r.length?r[n]:null,c=()=>{a(m=>{let p=m+1;return p>=r.length&&(p=0),p})},u=()=>{a(m=>{let p=m-1;return p<0&&(p=r.length-1),p})};return i.exports.useEffect(()=>{a(e)},[e]),s?l(re,{style:{display:"flex",flexDirection:"column"},children:[t(w,{center:!0,className:"picture-preview border border-black",style:s.w?{backgroundImage:"url("+s.w+")"}:{},children:!s.w&&t(S,{bold:!0,children:d("camera.loading")})}),s.m&&s.m.length&&t(S,{center:!0,children:s.m}),l(w,{alignItems:"center",justifyContent:"between",children:[t(S,{children:s.n||""}),t(S,{children:new Date(s.t*1e3).toLocaleDateString()})]}),r.length>1&&l(w,{className:"picture-preview-buttons",children:[t(uu,{className:"cursor-pointer picture-preview-buttons-previous fa-icon",onClick:u}),t(S,{underline:!0,className:"cursor-pointer",onClick:m=>Jt(s.oi),children:s.o}),t(du,{className:"cursor-pointer picture-preview-buttons-next fa-icon",onClick:c})]})]}):null},Vx=o=>{const{objectId:e=-1,currentPhotoIndex:r=-1,currentPhotos:n=null,onClose:a=null}=jS(),{report:s=null}=Pr();return e===-1||r===-1?null:l(oe,{className:"nitro-external-image-widget",theme:"primary-slim",children:[t(se,{headerText:"",isGalleryPhoto:!0,onReportPhoto:()=>s(Ve.PHOTO,{extraData:n[r].w,roomId:n[r].s,reportedUserId:H().userId,roomObjectId:Number(n[r].u)}),onCloseClick:a}),t(ne,{children:t(Bx,{currentIndex:r,currentPhotos:n})})]})},Hx=o=>{const{objectId:e=-1,type:r=0,stage:n=0,usernames:a=[],figures:s=[],date:c=null,onClose:u=null,respond:m=null}=YS();if(e===-1)return null;if(n>0)return l(oe,{className:"nitro-engraving-lock",theme:"primary-slim",children:[t(se,{headerText:d("friend.furniture.confirm.lock.caption"),onCloseClick:u}),l(ne,{children:[t("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:d("friend.furniture.confirm.lock.subtitle")}),t("div",{className:"d-flex justify-content-center mb-2",children:t("div",{className:`engraving-lock-stage-${n}`})}),n===2&&t("div",{className:"text-small text-black text-center mb-2",children:d("friend.furniture.confirm.lock.other.locked")}),l(w,{gap:1,children:[t(M,{fullWidth:!0,onClick:p=>m(!1),children:d("friend.furniture.confirm.lock.button.cancel")}),t(M,{fullWidth:!0,variant:"success",onClick:p=>m(!0),children:d("friend.furniture.confirm.lock.button.confirm")})]})]})]});if(a.length>0)return t(On,{handleSelector:".nitro-engraving-lock-view",children:l("div",{className:`nitro-engraving-lock-view engraving-lock-${r}`,children:[t("div",{className:"engraving-lock-close",onClick:u}),l(w,{justifyContent:"center",children:[t("div",{className:"engraving-lock-avatar",children:t(st,{figure:s[0],direction:2})}),t("div",{className:"engraving-lock-avatar",children:t(st,{figure:s[1],direction:4})})]}),l(T,{justifyContent:"between",className:"mt-1",children:[l(T,{alignItems:"center",justifyContent:"center",gap:1,children:[l("div",{children:[r===0&&d("lovelock.engraving.caption"),r===3&&d("wildwest.engraving.caption")]}),t("div",{children:c})]}),l(w,{justifyContent:"center",gap:4,children:[t("div",{children:a[0]}),t("div",{children:a[1]})]})]})]})})},Wx=o=>{const{objectId:e=-1,classId:r=-1,itemType:n=null,text:a=null,isOwnerOfFurniture:s=!1,senderName:c=null,senderFigure:u=null,placedItemId:m=-1,placedItemType:p=null,placedInRoom:g=!1,imageUrl:h=null,openPresent:f=null,onClose:_=null}=iN(),{groupItems:I=[]}=Zn();if(e===-1)return null;const C=E=>{const b=I.find(N=>{var v;return((v=N.getItemById(E))==null?void 0:v.id)===E});b&&_s(b),_()};return l(oe,{className:"nitro-gift-opening",theme:"primary-slim",children:[t(se,{headerText:d(c?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[c]),onCloseClick:_}),l(ne,{children:[m===-1&&l(T,{overflow:"hidden",children:[t(w,{center:!0,overflow:"auto",children:t(xd,{userName:c,figure:u,message:a})}),s&&l(w,{gap:1,children:[c&&t(M,{fullWidth:!0,onClick:E=>ee("catalog/open"),children:d("widget.furni.present.give_gift",["name"],[c])}),t(M,{fullWidth:!0,variant:"success",onClick:f,children:d("widget.furni.present.open_gift")})]})]}),m>-1&&l(w,{gap:2,overflow:"hidden",children:[t(T,{center:!0,className:"p-2",children:t(nn,{imageUrl:h})}),l(T,{grow:!0,children:[l(T,{center:!0,gap:1,children:[t(S,{wrap:!0,small:!0,children:d("widget.furni.present.message_opened")}),t(S,{bold:!0,fontSize:5,children:a})]}),l(T,{grow:!0,gap:1,children:[l(w,{gap:1,children:[g&&t(M,{fullWidth:!0,onClick:null,children:d("widget.furni.present.put_in_inventory")}),t(M,{fullWidth:!0,variant:"success",onClick:E=>C(m),children:d(g?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),c&&c.length&&t(M,{fullWidth:!0,onClick:E=>ee("catalog/open"),children:d("widget.furni.present.give_gift",["name"],[c])})]})]})]})]})]})},jx=o=>{const{stuffDatas:e=null,getScoreType:r=null,getClearType:n=null}=XS();return!e||!e.size?null:t(V,{children:Array.from(e.entries()).map(([a,s],c)=>t(ul,{objectId:a,category:Q.FLOOR,children:l(T,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[t($t,{children:d("high.score.display.caption",["scoretype","cleartype"],[d(`high.score.display.scoretype.${r(s.scoreType)}`),d(`high.score.display.cleartype.${n(s.clearType)}`)])}),l(Im,{overflow:"hidden",gap:1,className:"h-100",children:[l(T,{gap:1,children:[l(w,{alignItems:"center",children:[t(S,{center:!0,bold:!0,variant:"white",className:"col-8",children:d("high.score.display.users.header")}),t(S,{center:!0,bold:!0,variant:"white",className:"col-4",children:d("high.score.display.score.header")})]}),t("hr",{className:"m-0"})]}),t(T,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:s.entries.map((u,m)=>l(w,{alignItems:"center",children:[t(S,{center:!0,variant:"white",className:"col-8",children:u.users.join(", ")}),t(S,{center:!0,variant:"white",className:"col-4",children:u.score})]},m))})]})]})},c))})},qx=o=>(ZS(),null),Yx=-1,Lo=0,si=1,oi=2,ai=3,ii=4,zx=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState(Yx),{objectId:s=-1,figure:c=null,gender:u=null,clubLevel:m=cr.NO_CLUB,name:p=null,setName:g=null,saveFigure:h=null,wearFigure:f=null,saveName:_=null,onClose:I=null}=tN();return i.exports.useEffect(()=>{if(s===-1)return;const C=ye();if(C.isRoomOwner||C.controllerLevel>=tt.GUEST||H().isModerator){a(Lo);return}if(H().gender.toLowerCase()!==u.toLowerCase()){a(ii);return}if(fr()<m){a(ai);return}a(oi)},[s,u,m]),i.exports.useEffect(()=>{switch(n){case Lo:case ii:{const C=Nt().createFigureContainer(c);ps.transformAsMannequinFigure(C),r(C.getFigureString());break}case si:{const C=Nt().createFigureContainer(H().figure);ps.transformAsMannequinFigure(C),r(C.getFigureString());break}case oi:case ai:{const C=ps.getMergedMannequinFigureContainer(H().figure,c);r(C.getFigureString());break}}},[n,c,m]),s===-1?null:l(oe,{className:"nitro-mannequin no-resize",theme:"primary-slim",children:[t(se,{headerText:d("mannequin.widget.title"),onCloseClick:I}),t(ne,{center:!0,children:l(w,{fullWidth:!0,gap:2,overflow:"hidden",children:[t(T,{children:l(L,{position:"relative",className:"mannequin-preview",children:[t(st,{position:"absolute",figure:e,direction:2}),m>0&&t(it,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),l(T,{grow:!0,justifyContent:"between",overflow:"auto",children:[n===Lo&&l(V,{children:[t("input",{type:"text",className:"form-control form-control-sm",value:p,onChange:C=>g(C.target.value),onBlur:_}),l(T,{gap:1,children:[t(M,{variant:"success",onClick:C=>a(si),children:d("mannequin.widget.style")}),t(M,{variant:"success",onClick:f,children:d("mannequin.widget.wear")})]})]}),n===si&&l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:p}),t(S,{wrap:!0,children:d("mannequin.widget.savetext")})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(S,{underline:!0,pointer:!0,onClick:C=>a(Lo),children:d("mannequin.widget.back")}),t(M,{variant:"success",onClick:h,children:d("mannequin.widget.save")})]})]}),n===oi&&l(V,{children:[l(T,{gap:1,children:[t(S,{bold:!0,children:p}),t(S,{children:d("mannequin.widget.weartext")})]}),t(M,{variant:"success",onClick:f,children:d("mannequin.widget.wear")})]}),n===ai&&t(w,{center:!0,grow:!0,children:t(S,{children:d("mannequin.widget.clubnotification")})}),n===ii&&t(S,{children:d("mannequin.widget.wronggender")})]})]})})]})},$x=o=>(uN(),null),_m=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],Kx=["blue","pink","green","yellow"],Xx=o=>{let e=_m.indexOf(o);return e===-1&&(e=0),Kx[e]},Qx=o=>{const{objectId:e=-1,color:r="0",setColor:n=null,text:a="",setText:s=null,canModify:c=!1,onClose:u=null}=mN();return e===-1?null:t(On,{handleSelector:".drag-handler",windowPosition:kt.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+Xx(r),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:c&&l(V,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:u}),_m.map(m=>t("div",{className:"stickie-color ms-1",onClick:p=>n(m),style:{backgroundColor:Qt.makeColorHex(m)}},m))]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:u})]}),t("div",{className:"stickie-context",children:t("textarea",{className:"context-text",value:a,onChange:m=>s(m.target.value),tabIndex:0,autoFocus:!0})})]})})},Jx=o=>{const{objectId:e=-1,height:r=0,maxHeight:n=40,onClose:a=null,updateHeight:s=null}=pN(),[c,u]=i.exports.useState(""),m=p=>{u(p);const g=parseFloat(p);isNaN(g)||g===r||s(g)};return i.exports.useEffect(()=>{u(r.toString())},[r]),e===-1?null:l(oe,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[t(se,{headerText:d("widget.custom.stack.height.title"),onCloseClick:a}),l(ne,{justifyContent:"between",children:[t(S,{children:d("widget.custom.stack.height.text")}),l(w,{gap:2,children:[t(Pt,{className:"nitro-slider",min:0,max:n,step:.01,value:r,onChange:p=>s(p),renderThumb:(p,g)=>t("div",{...p,children:g.valueNow})}),t("input",{className:"show-number-arrows",style:{width:50},type:"number",min:0,max:n,value:c,onChange:p=>m(p.target.value)})]}),l(T,{gap:1,children:[t(M,{onClick:p=>D(new mi(e,-100)),children:d("furniture.above.stack")}),t(M,{onClick:p=>D(new mi(e,0)),children:d("furniture.floor.level")})]})]})]})},Cm=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],Zx=["blue","pink","green","yellow"],ey=["post_it","post_it_shakesp","post_it_dreams","post_it_xmas","post_it_vd","post_it_juninas"],ty=["post_it","shakesp","dreams","christmas","heart","juninas"],ry=o=>{let e=Cm.indexOf(o);return e===-1&&(e=0),Zx[e]},ny=o=>{let e=ey.indexOf(o);return e===-1&&(e=0),ty[e]},sy=o=>{const{objectId:e=-1,color:r="0",text:n="",type:a="",canModify:s=!1,updateColor:c=null,updateText:u=null,trash:m=null,onClose:p=null}=fN(),[g,h]=i.exports.useState(!1);return i.exports.useEffect(()=>{h(!1)},[e,r,n,a]),e===-1?null:t(On,{handleSelector:".drag-handler",windowPosition:kt.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+(a=="post_it"?ry(r):ny(a)),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:s&&l(V,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:m}),a=="post_it"&&t(V,{children:Cm.map(f=>t("div",{className:"stickie-color ms-1",onClick:_=>c(f),style:{backgroundColor:Qt.makeColorHex(f)}},f))})]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:p})]}),t("div",{className:"stickie-context",children:!g||!s?t("div",{className:"context-text",onClick:f=>s&&h(!0),children:n}):t("textarea",{className:"context-text",defaultValue:n,tabIndex:0,onBlur:f=>u(f.target.value),autoFocus:!0})})]})})},oy=o=>{const{objectId:e=-1,color:r="1",senderName:n="",date:a="",message:s="",onClose:c=null}=EN();return e===-1?null:t(Od,{color:r,message:s,date:a,senderName:n,onCloseClick:c})},ay=o=>{const[e,r]=i.exports.useState(null),{objectId:n=-1,videoId:a=null,videoStart:s=0,videoEnd:c=0,currentVideoState:u=null,selectedVideo:m=null,playlists:p=[],onClose:g=null,previous:h=null,next:f=null,pause:_=null,play:I=null,selectVideo:C=null}=TN(),E=N=>{if(r(N.target),n!==-1)switch(N.target.getPlayerState()){case-1:case 1:u!==1&&I();return;case 2:u!==2&&_()}};if(i.exports.useEffect(()=>{if(!(u===null||!e)){if(u===yr.PLAYING&&e.getPlayerState()!==yr.PLAYING){e.playVideo();return}if(u===yr.PAUSED&&e.getPlayerState()!==yr.PAUSED){e.pauseVideo();return}}},[u,e]),n===-1)return null;const b={height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:s,end:c}};return l(oe,{className:"youtube-tv-widget",children:[t(se,{headerText:d("catalog.page.youtube_tvs"),onCloseClick:g}),t(ne,{children:l("div",{className:"row w-100 h-100",children:[l("div",{className:"youtube-video-container col-9 overflow-hidden",children:[a&&a.length>0&&t(qm,{videoId:a,opts:b,onReady:N=>r(N.target),onStateChange:E,containerClassName:"youtubeContainer"}),(!a||a.length===0)&&t("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:d("widget.furni.video_viewer.no_videos")})]}),l("div",{className:"playlist-container col-3 d-flex flex-column",children:[l("span",{className:"playlist-controls justify-content-center d-flex",children:[t("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:h}),t("i",{className:"icon icon-youtube-next cursor-pointer",onClick:f})]}),t("div",{className:"mb-1",children:d("widget.furni.video_viewer.playlists")}),t(Le,{columnCount:1,columnMinWidth:80,columnMinHeight:100,className:"mb-1",overflow:"auto",children:p&&p.map((N,v)=>t(be,{onClick:y=>C(N.video),itemActive:N.video===m,children:t("b",{children:N.title})},v))})]})]})})]})},iy=o=>{const{diskInventory:e=null,addToPlaylist:r=null}=o,[n,a]=i.exports.useState(-1),[s,c]=i.exports.useState(-1),u=i.exports.useCallback((g,h)=>{g.stopPropagation(),c(f=>f===h?-1:h)},[]),m=i.exports.useCallback((g,h)=>{var f,_;g.stopPropagation(),r(h,(_=(f=_e().soundManager.musicController)==null?void 0:f.getRoomItemPlaylist())==null?void 0:_.length)},[r]),p=()=>{ee("catalog/open/"+ut.TRAX_SONGS)};return i.exports.useEffect(()=>{var g;if(s!==-1)return(g=_e().soundManager.musicController)==null||g.playSong(s,ks.PRIORITY_SONG_PLAY,0,0,0,0),()=>{var h;(h=_e().soundManager.musicController)==null||h.stop(ks.PRIORITY_SONG_PLAY)}},[s]),i.exports.useEffect(()=>()=>c(-1),[]),l(V,{children:[l("div",{className:"bg-success py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:K("image.library.url")+"playlist/title_mymusic.gif",className:"my-music"}),t("h2",{className:"ms-4",children:d("playlist.editor.my.music")})]}),t("div",{className:"h-100 overflow-y-scroll mt-4 py-2",children:t(Le,{columnCount:3,columnMinWidth:95,gap:1,children:e&&e.getKeys().map((g,h)=>{var C;const f=e.getKey(h),_=e.getWithIndex(h),I=(C=_e().soundManager.musicController)==null?void 0:C.getSongInfo(_);return l(be,{itemActive:n===h,onClick:()=>a(E=>E===h?-1:h),classNames:["text-black"],children:[t("div",{className:"disk-image flex-shrink-0 mb-n2",style:{backgroundColor:Sd(I==null?void 0:I.songData)}}),t(S,{truncate:!0,fullWidth:!0,className:"text-center",children:I==null?void 0:I.name}),n===h&&l(w,{position:"absolute",className:"bottom-0 mb-1 bg-secondary p-1 rounded",alignItems:"center",justifyContent:"center",gap:2,children:[t(M,{onClick:E=>u(E,_),variant:"light",children:t(L,{className:s===_?"pause-btn":"preview-song"})}),t(M,{onClick:E=>m(E,f),variant:"light",children:t(L,{className:"move-disk"})})]})]},h)})})}),l("div",{className:"playlist-bottom text-black p-1",children:[t("h5",{children:d("playlist.editor.text.get.more.music")}),t("div",{children:d("playlist.editor.text.you.have.no.songdisks.available")}),t("div",{children:d("playlist.editor.text.you.can.buy.some.from.the.catalogue")}),t("button",{className:"btn btn-primary btn-sm",onClick:()=>p(),children:d("playlist.editor.button.open.catalogue")})]}),t("img",{src:K("image.library.url")+"playlist/background_get_more_music.gif",className:"get-more"})]})},ly=o=>{var g,h;const{furniId:e=-1,playlist:r=null,currentPlayingIndex:n=-1,removeFromPlaylist:a=null,togglePlayPause:s=null}=o,[c,u]=i.exports.useState(-1),m=f=>{c===f&&a(f)},p=(f,_)=>{s(f,_!==-1?_:0)};return l(V,{children:[l("div",{className:"bg-primary py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:K("image.library.url")+"playlist/title_playlist.gif",className:"playlist-img"}),t("h2",{className:"ms-4",children:d("playlist.editor.playlist")})]}),t("div",{className:"h-100 overflow-y-scroll py-2",children:t(w,{column:!0,gap:2,children:r&&r.map((f,_)=>l(w,{gap:1,className:"text-black cursor-pointer "+(c===_?"border border-muted border-2 rounded":"border-2"),alignItems:"center",onClick:()=>u(I=>I===_?-1:_),children:[t(L,{onClick:()=>m(_),className:"disk-2 "+(c===_?"selected-song":""),style:{backgroundColor:c===_?"":Sd(f.songData)}}),f.name]},_))})}),(!r||r.length===0)&&l(V,{children:[l("div",{className:"playlist-bottom text-black p-1 ms-5",children:[t("h5",{children:d("playlist.editor.add.songs.to.your.playlist")}),t("div",{children:d("playlist.editor.text.click.song.to.choose.click.again.to.move")})]}),t("img",{src:K("image.library.url")+"playlist/background_add_songs.gif",className:"add-songs"})]}),r&&r.length>0&&l(V,{children:[n===-1&&t(M,{variant:"success",size:"lg",onClick:()=>p(e,c),children:d("playlist.editor.button.play.now")}),n!==-1&&l(w,{gap:1,children:[t(M,{variant:"danger",onClick:()=>p(e,c),children:t(L,{className:"pause-song"})}),l(w,{column:!0,children:[t(S,{bold:!0,display:"block",children:d("playlist.editor.text.now.playing.in.your.room")}),t(S,{children:((g=r[n])==null?void 0:g.name)+" - "+((h=r[n])==null?void 0:h.creator)})]})]})]})]})},cy=o=>{const{objectId:e=-1,currentPlayingIndex:r=-1,playlist:n=null,diskInventory:a=null,onClose:s=null,togglePlayPause:c=null,removeFromPlaylist:u=null,addToPlaylist:m=null}=nN();return e===-1?null:l(oe,{className:"nitro-playlist-editor-widget",theme:"primary-slim",children:[t(se,{headerText:d("playlist.editor.title"),onCloseClick:s}),t(ne,{children:l("div",{className:"d-flex flex-row gap-1 h-100",children:[t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(iy,{addToPlaylist:m,diskInventory:a})}),t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(ly,{furniId:e,removeFromPlaylist:u,playlist:n,togglePlayPause:c,currentPlayingIndex:r})})]})})]})},uy=o=>l(L,{fit:!0,position:"absolute",className:"nitro-room-widgets top-0 start-0",children:[t(Mx,{}),t(Lx,{}),t(Ux,{}),t(Fx,{}),t(Gx,{}),t(Vx,{}),t(Hx,{}),t(Wx,{}),t(jx,{}),t(qx,{}),t(zx,{}),t(cy,{}),t($x,{}),t(Qx,{}),t(Jx,{}),t(sy,{}),t(oy,{}),t(Dx,{}),t(ay,{})]}),dy=o=>{const{isVisible:e=!1,errorResult:r=null,petName:n=null,objectType:a=null,onChangePetName:s=null,onConfirm:c=null,onClose:u=null}=VN();return t(V,{children:e&&l(oe,{className:"nitro-pet-package no-resize",theme:"primary-slim",children:[t(se,{center:!0,headerText:d(a==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage.open"),onCloseClick:()=>u()}),l(ne,{children:[l(w,{className:"pet-package-container-top p-3",children:[t("div",{className:`package-image-${a} flex-shrink-0`}),t("div",{className:"m-2",children:t(S,{variant:"white",className:"package-text-big",children:d(a==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage")})})]}),t(w,{className:"pet-package-container-bottom p-2",children:l(T,{gap:1,children:[l(w,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-pet-package-container",children:[t("input",{type:"text",className:"form-control form-control-sm input-pet-package",maxLength:K("pet.package.name.max.length"),placeholder:d(a==="gnome_box"?"widgets.gnomepackage.name.select":"widgets.petpackage.name.title"),value:n,onChange:m=>s(m.target.value)}),t("div",{className:"package-pencil-image flex-shrink-0 small fa-icon"})]}),r.length>0&&t(L,{className:"invalid-feedback d-block m-0",children:r}),l(w,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(S,{pointer:!0,className:"text-decoration",onClick:()=>u(),children:d("cancel")}),t(Ym,{variant:n.length<3?"danger":"success",disabled:n.length<3,onClick:()=>c(),children:d(a==="gnome_box"?"widgets.gnomepackage.name.pick":"furni.petpackage.confirm")})]})]})})]})]})})},my=o=>{const[e,r]=i.exports.useState("bobba"),[n,a]=i.exports.useState(""),[s,c]=i.exports.useState(!1),{wordsFilter:u=[],isVisible:m=null,setWordsFilter:p,onClose:g=null}=MN(),{navigatorData:h=null}=Dr(),f=C=>{(s?!n:!e)||(D(new eC(h.enteredGuestRoom.roomId,C,s?n:e)),a(""),r("bobba"),c(!1),!(C&&u.includes(s?n:e))&&p(E=>{const b=[...E];return C?b.push(s?n:e):b.splice(b.indexOf(s?n:e),1),b}))},_=C=>{r(C),c(!1)},I=C=>{a(C),c(!0)};return m?l(oe,{className:"nitro-guide-tool no-resize",theme:"primary-slim",children:[t(se,{headerText:d("navigator.roomsettings.roomfilter"),onCloseClick:()=>g()}),l(ne,{className:"text-black",children:[l(re,{className:"d-flex align-items-center justify-content-end gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",maxLength:255,value:e,onChange:C=>_(C.target.value)}),t(M,{onClick:()=>f(!0),children:d("navigator.roomsettings.roomfilter.addword")})]}),t(T,{overflow:"auto",gap:0,className:"form-control form-control-sm",style:{height:"100px"},children:u&&u.length>0&&u.map((C,E)=>t(w,{alignItems:"center",className:Vt("rounded p-1",n===C&&"bg-muted"),pointer:!0,onClick:b=>I(C),children:t(S,{truncate:!0,children:C})},E))}),t(re,{className:"d-flex align-items-center justify-content-end gap-2",children:t(M,{variant:"danger",onClick:()=>f(!1),disabled:u.length===0||!s,children:d("navigator.roomsettings.roomfilter.removeword")})})]})]}):null},gy=o=>{const[e,r]=i.exports.useState(!1),{roomSession:n=null}=Ge();lt([Ur.SHOW_THUMBNAIL,Ur.HIDE_THUMBNAIL,Ur.TOGGLE_THUMBNAIL],s=>{switch(s.type){case Ur.SHOW_THUMBNAIL:r(!0);return;case Ur.HIDE_THUMBNAIL:r(!1);return;case Ur.TOGGLE_THUMBNAIL:r(c=>!c);return}});const a=s=>{q().saveTextureAsScreenshot(s,!0),r(!1)};return e?t(Gb,{roomId:n.roomId,textureReceiver:a,onClose:()=>r(!1)}):null},py=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(null),[s,c]=i.exports.useState(null),[u,m]=i.exports.useState(null),[p,g]=i.exports.useState(!1),{navigatorData:h=null}=Dr(),{roomSession:f=null}=Ge(),_=(I,C)=>{switch(I){case"settings":ee("navigator/toggle-room-info");return;case"zoom":r(E=>{let b=q().getRoomInstanceRenderingCanvasScale(f.roomId,1);return E?b*=2:b/=2,q().setRoomInstanceRenderingCanvasScale(f.roomId,1,b),!E});return;case"chat_history":ee("chat-history/toggle");return;case"like_room":D(new tC(1));return;case"toggle_room_link":ee("navigator/toggle-room-link");return;case"navigator_search_tag":ee(`navigator/search/${C}`),D(new Is("hotel_view",`tag:${C}`));return}};return U(Ts,I=>{const C=I.getParser();!C.roomEnter||C.data.roomId!==f.roomId||(n!==C.data.roomName&&a(C.data.roomName),s!==C.data.ownerName&&c(C.data.ownerName),u!==C.data.tags&&m(C.data.tags))}),i.exports.useEffect(()=>{g(!0);const I=setTimeout(()=>g(!1),5e3);return()=>clearTimeout(I)},[n,s,u]),l(w,{className:"nitro-room-tools-container",gap:2,children:[l(T,{center:!0,className:"nitro-room-tools p-2",children:[t(L,{pointer:!0,title:d("room.settings.button.text"),className:"icon icon-cog",onClick:()=>_("settings")}),t(L,{pointer:!0,title:d("room.zoom.button.text"),onClick:()=>_("zoom"),className:Vt("icon",!e&&"icon-zoom-less",e&&"icon-zoom-more")}),t(L,{pointer:!0,title:d("room.chathistory.button.text"),onClick:()=>_("chat_history"),className:"icon icon-chat-history"}),h.canRate&&t(L,{pointer:!0,title:d("room.like.button.text"),onClick:()=>_("like_room"),className:"icon icon-like-room"})]}),t(T,{justifyContent:"center",children:t(no,{type:wt.SLIDE_LEFT,inProp:p,timeout:300,children:t(T,{center:!0,children:l(T,{className:"nitro-room-tools-info rounded py-2 px-3",children:[l(T,{gap:1,children:[t(S,{wrap:!0,variant:"white",fontSize:4,children:n}),t(S,{variant:"muted",fontSize:5,children:s})]}),u&&u.length>0&&t(w,{gap:2,children:u.map((I,C)=>l(S,{small:!0,pointer:!0,variant:"white",className:"rounded bg-primary p-1",onClick:()=>_("navigator_search_tag",I),children:["#",I]},C))})]})})})})]})},hy=o=>{const{question:e=null,canVote:r=null,vote:n=null,noVotes:a=null,yesVotes:s=null}=o;return l(T,{gap:2,className:"wordquiz-question p-2",children:[!r&&l(w,{fullWidth:!0,alignItems:"center",gap:2,children:[t(w,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:t(S,{variant:"white",children:a})}),t(S,{variant:"white",center:!0,textBreak:!0,children:e}),t(w,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:t(S,{variant:"white",children:s})})]}),r&&l(T,{children:[t(S,{variant:"white",center:!0,textBreak:!0,children:e}),l(w,{fullWidth:!0,justifyContent:"center",gap:1,children:[t(w,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:c=>n(Qo),children:t(L,{className:"word-quiz-dislike"})}),t(w,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:c=>n(Nd),children:t(L,{className:"word-quiz-like"})})]})]})]})},fy=o=>{const{userIndex:e=null,vote:r=null,...n}=o;return t(ul,{objectId:e,category:Q.UNIT,...n,children:t(w,{center:!0,pointer:!0,className:`bg-${r===Qo?"danger":"success"} rounded p-1`,children:t(L,{className:`word-quiz-${r===Qo?"dislike":"like"}-sm`})})})},Iy=o=>{const{question:e=null,answerSent:r=!1,answerCounts:n=null,userAnswers:a=null,vote:s=null}=$N();return l(V,{children:[e&&t(hy,{question:e.content,canVote:!r,vote:s,noVotes:n.get(Qo)||0,yesVotes:n.get(Nd)||0}),a&&Array.from(a.entries()).map(([c,u],m)=>t(fy,{userIndex:c,vote:u.value},m))]})},Ey=o=>{const{roomSession:e=null}=Ge(),{simpleAlert:r=null}=Xe();return Te(gi.ROOM_ZOOM,n=>q().setRoomInstanceRenderingCanvasScale(n.roomId,1,n.level,null,null,!1,n.asDelta)),Te([we.REQUEST_TEASER,we.REQUEST_ECOTRONBOX,we.REQUEST_CLOTHING_CHANGE,we.REQUEST_PLAYLIST_EDITOR,we.OPEN_WIDGET,we.CLOSE_WIDGET,go.FURNI_CLICK,go.FURNI_DOUBLE_CLICK,go.TOOLTIP_SHOW,go.TOOLTIP_HIDE],n=>{if(e)switch(n.objectId,n.category,n.type){}}),Ye([mt.RSEME_KICKED,mt.RSEME_PETS_FORBIDDEN_IN_HOTEL,mt.RSEME_PETS_FORBIDDEN_IN_FLAT,mt.RSEME_MAX_PETS,mt.RSEME_MAX_NUMBER_OF_OWN_PETS,mt.RSEME_NO_FREE_TILES_FOR_PET,mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,mt.RSEME_BOTS_FORBIDDEN_IN_HOTEL,mt.RSEME_BOTS_FORBIDDEN_IN_FLAT,mt.RSEME_BOT_LIMIT_REACHED,mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,mt.RSEME_BOT_NAME_NOT_ACCEPTED],n=>{let a=d("error.title"),s="";switch(n.type){case mt.RSEME_MAX_PETS:s=d("room.error.max_pets");break;case mt.RSEME_MAX_NUMBER_OF_OWN_PETS:s=d("room.error.max_own_pets");break;case mt.RSEME_KICKED:s=d("room.error.kicked"),a=d("generic.alert.title");break;case mt.RSEME_PETS_FORBIDDEN_IN_HOTEL:s=d("room.error.pets.forbidden_in_hotel");break;case mt.RSEME_PETS_FORBIDDEN_IN_FLAT:s=d("room.error.pets.forbidden_in_flat");break;case mt.RSEME_NO_FREE_TILES_FOR_PET:s=d("room.error.pets.no_free_tiles");break;case mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:s=d("room.error.pets.selected_tile_not_free");break;case mt.RSEME_BOTS_FORBIDDEN_IN_HOTEL:s=d("room.error.bots.forbidden_in_hotel");break;case mt.RSEME_BOTS_FORBIDDEN_IN_FLAT:s=d("room.error.bots.forbidden_in_flat");break;case mt.RSEME_BOT_LIMIT_REACHED:s=d("room.error.max_bots");break;case mt.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:s=d("room.error.bots.selected_tile_not_free");break;case mt.RSEME_BOT_NAME_NOT_ACCEPTED:s=d("room.error.bots.name.not.accepted");break;default:return}r(s,de.DEFAULT,null,null,a)}),l(V,{children:[t(px,{}),t(Cx,{}),t(fx,{}),t(Nx,{}),t(uy,{}),t(py,{}),t(my,{}),t(gy,{}),t(bx,{}),t(dy,{}),t(Sx,{}),t(Iy,{}),t(vx,{})]})},_y=o=>{const{roomSession:e=null}=Ge(),r=i.exports.useRef();return i.exports.useEffect(()=>{const n=_e().application.renderer.view;if(!n)return;n.onclick=s=>Io(s),n.onmousemove=s=>Io(s),n.onmousedown=s=>Io(s),n.onmouseup=s=>Io(s),n.ontouchstart=s=>Co(s),n.ontouchmove=s=>Co(s),n.ontouchend=s=>Co(s),n.ontouchcancel=s=>Co(s);const a=r.current;a&&a.appendChild(n)},[]),t(L,{fit:!0,innerRef:r,className:!e&&"d-none",children:e&&l(V,{children:[t(Ey,{}),e.isSpectator&&t(jR,{})]})})},Cy=o=>{const{useGuideTool:e=!1,unseenAchievementCount:r=0,setMeExpanded:n=null,children:a=null,...s}=o,c=i.exports.useRef();return i.exports.useEffect(()=>{const u=ye();u&&q().selectRoomObject(u.roomId,u.ownRoomIndex,Q.UNIT)},[]),i.exports.useEffect(()=>{const u=m=>n(!1);return document.addEventListener("click",u),()=>document.removeEventListener(xe.MOUSE_CLICK,u)},[n]),l(w,{innerRef:c,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,children:[K("guides.enabled")&&e&&t(L,{pointer:!0,className:"navigation-item icon icon-me-helper-tool",onClick:u=>St(new Ht(Ht.TOGGLE_GUIDE_TOOL))}),t(L,{pointer:!0,className:"navigation-item icon icon-me-achievements",onClick:u=>ee("achievements/toggle"),children:r>0&&t(Rn,{count:r})}),t(L,{pointer:!0,className:"navigation-item icon icon-me-profile",onClick:u=>Jt(H().userId)}),t(L,{pointer:!0,className:"navigation-item icon icon-me-rooms",onClick:u=>ee("navigator/search/myworld_view")}),t(L,{pointer:!0,className:"navigation-item icon icon-me-clothing",onClick:u=>ee("avatar-editor/toggle")}),t(L,{pointer:!0,className:"navigation-item icon icon-me-settings",onClick:u=>ee("user-settings/toggle")}),a]})},by=o=>{const{isInRoom:e}=o,[r,n]=i.exports.useState(!1),[a,s]=i.exports.useState(!1),{userFigure:c=null}=_n(),{getFullCount:u=0}=Cr(),{getTotalUnseen:m=0}=pa(),{requests:p=[]}=mr(),{iconState:g=Hr.HIDDEN}=Vd(),h=H().isModerator;return U(Bu,f=>{const _=f.getParser();s(_.isAllowed(Gu.USE_GUIDE_TOOL))}),Te(rC.ANIMATE_ICON,f=>{((I,C,E,b)=>{const N=document.body.getElementsByClassName(I)[0];if(!N)return;C.className="toolbar-icon-animation",C.style.visibility="visible",C.style.left=E+"px",C.style.top=b+"px",document.body.append(C);const v=N.getBoundingClientRect(),y=C.getBoundingClientRect(),R=y.x-v.x,x=y.y-v.y,F=Math.sqrt(R*R+x*x),k=500-Math.abs(1/F*100*500*.5),A=20,O=`ToolbarBouncing[${I}]`;Ua.getMotionByTag(O)||(Ua.runMotion(new Pl(new nC(k+8),new sC(N,400,12))).tag=O);const P=new Pl(new oC(new aC(C,k,v.x-y.x+A,v.y-y.y,100,1),1),new iC(C));Ua.runMotion(P)})("icon-inventory",f.image,f.x,f.y)}),l(V,{children:[t(no,{type:wt.FADE_IN,inProp:r,timeout:300,children:t(Cy,{useGuideTool:a,unseenAchievementCount:m,setMeExpanded:n})}),l(w,{alignItems:"center",justifyContent:"between",gap:2,className:"nitro-toolbar py-1 px-3",children:[l(w,{gap:2,alignItems:"center",children:[l(w,{alignItems:"center",gap:2,children:[l(w,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(r?"active ":""),onClick:f=>n(!r),children:[t(st,{figure:c,direction:2,position:"absolute"}),m>0&&t(Rn,{count:m})]}),e&&t(L,{pointer:!0,className:"navigation-item icon icon-habbo",onClick:f=>Vi()}),!e&&t(L,{pointer:!0,className:"navigation-item icon icon-house",onClick:f=>ee("navigator/goto/home")}),t(L,{pointer:!0,className:"navigation-item icon icon-rooms",onClick:f=>ee("navigator/toggle")}),K("game.center.enabled")&&t(L,{pointer:!0,className:"navigation-item icon icon-game",onClick:f=>ee("games/toggle")}),t(L,{pointer:!0,className:"navigation-item icon icon-catalog",onClick:f=>ee("catalog/toggle")}),t(L,{pointer:!0,className:"navigation-item icon icon-inventory",onClick:f=>ee("inventory/toggle"),children:u>0&&t(Rn,{count:u})}),e&&t(L,{pointer:!0,className:"navigation-item icon icon-camera",onClick:f=>ee("camera/toggle")}),h&&t(L,{pointer:!0,className:"navigation-item icon icon-modtools",onClick:f=>ee("mod-tools/toggle")})]}),t(w,{alignItems:"center",id:"toolbar-chat-input-container"})]}),l(w,{alignItems:"center",gap:2,children:[l(w,{gap:2,children:[t(L,{pointer:!0,className:"navigation-item icon icon-friendall",onClick:f=>ee("friends/toggle"),children:p.length>0&&t(Rn,{count:p.length})}),(g===Hr.SHOW||g===Hr.UNREAD)&&t(L,{pointer:!0,className:`navigation-item icon icon-message ${g===Hr.UNREAD&&"is-unseen"}`,onClick:f=>ca()})]}),t(L,{id:"toolbar-friend-bar-container",className:"d-none d-lg-block"})]})]})]})},Sy=o=>{const{badges:e=null,gap:r=1,justifyContent:n="between",...a}=o;return t(V,{children:e&&e.length>0&&e.map((s,c)=>t(T,{center:!0,children:t(je,{badgeCode:s},s)},s))})},Ny=o=>{const{relationships:e=null}=o,r=({type:n})=>{const a=e&&e.relationshipStatusMap.hasKey(n)?e.relationshipStatusMap.getValue(n):null,s=Lr.RELATIONSHIP_NAMES[n].toLocaleLowerCase();return l(w,{fullWidth:!0,gap:1,children:[t(w,{center:!0,className:"user-relationship",children:t("i",{className:`nitro-friends-spritesheet icon-${s}`})}),l(T,{grow:!0,gap:0,children:[l(w,{alignItems:"center",justifyContent:"between",className:"bg-white rounded px-2 py-1 user-relationship",children:[l(S,{small:!0,underline:!0,pointer:!0,onClick:c=>a&&a.randomFriendId>=1&&Jt(a.randomFriendId),children:[(!a||a.friendCount===0)&&d("extendedprofile.add.friends"),a&&a.friendCount>=1&&a.randomFriendName]}),a&&a.friendCount>=1&&t(w,{center:!0,position:"relative",className:"avatar-image-container",children:t(st,{figure:a.randomFriendFigure,headOnly:!0,direction:4})})]}),l(S,{small:!0,italics:!0,className:"user-relationship-count",children:[(!a||a.friendCount===0)&&d("extendedprofile.no.friends.in.this.category"),a&&a.friendCount>1&&d(`extendedprofile.relstatus.others.${s}`,["count"],[(a.friendCount-1).toString()]),""]})]})]})};return l(V,{children:[t(r,{type:Lr.HEART}),t(r,{type:Lr.SMILE}),t(r,{type:Lr.BOBBA})]})},Ty=o=>{const{relationships:e=null,friendsCount:r=null}=o;return l(T,{gap:1,children:[l(S,{small:!0,children:[t("b",{children:d("extendedprofile.friends.count")})," ",r]}),t(S,{bold:!0,small:!0,children:d("extendedprofile.relstatus")}),t(T,{children:t(Ny,{relationships:e})})]})},vy=o=>{const{itsMe:e=null,groups:r=null,onLeaveGroup:n=null,overflow:a="hidden",gap:s=2,...c}=o,[u,m]=i.exports.useState(null),[p,g]=i.exports.useState(null);return U(Ks,h=>{const f=h.getParser();!u||u!==f.id||f.flag||g(f)}),i.exports.useEffect(()=>{u&&D(new Us(u,!1))},[u]),i.exports.useEffect(()=>{g(null),r.length>0&&m(h=>(h===r[0].groupId&&D(new Us(r[0].groupId,!1)),r[0].groupId))},[r]),!r||!r.length?t(T,{center:!0,fullHeight:!0,children:l(w,{justifyContent:"center",gap:2,children:[t(L,{className:"no-group-spritesheet image-1"}),t(L,{className:"no-group-spritesheet image-2"}),t(L,{className:"no-group-spritesheet image-3"})]})}):l(re,{overflow:a,gap:2,...c,children:[t(T,{alignItems:"center",size:2,overflow:"auto",children:t(Le,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:r.map((h,f)=>l(be,{overflow:"unset",itemActive:u===h.groupId,onClick:()=>m(h.groupId),className:"p-1",children:[e&&t("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(h.favourite?"favorite":"not-favorite"),onClick:()=>mb(h)}),t(je,{badgeCode:h.badgeCode,isGroup:!0})]},f))})}),t(T,{size:10,overflow:"hidden",children:p&&t(dm,{groupInformation:p,onClose:n})})]})},wy=o=>{const{userProfile:e=null}=o,[r,n]=i.exports.useState(e.requestSent),a=e.id===H().userId,s=!r&&!a&&!e.isMyFriend&&!e.requestSent,c=()=>{n(!0),D(new Nu(e.username))};return i.exports.useEffect(()=>{n(e.requestSent)},[e]),l(w,{gap:2,children:[t(T,{center:!0,className:"avatar-container",children:t(st,{figure:e.figure,direction:2})}),l(T,{children:[l(T,{gap:0,children:[t(S,{bold:!0,children:e.username}),l(S,{italics:!0,textBreak:!0,small:!0,children:[e.motto,""]})]}),l(T,{gap:1,children:[l(S,{small:!0,children:[t("b",{children:d("extendedprofile.created")})," ",e.registration]}),l(S,{small:!0,children:[t("b",{children:d("extendedprofile.last.login")})," ",Vr.format(e.secondsSinceLastVisit,".ago",2)]}),l(S,{small:!0,children:[t("b",{children:d("extendedprofile.achievementscore")})," ",e.achievementPoints]})]}),l(w,{gap:1,children:[e.isOnline&&t("i",{className:"icon icon-pf-online"}),!e.isOnline&&t("i",{className:"icon icon-pf-offline"}),l(w,{alignItems:"center",gap:1,children:[s&&t(S,{small:!0,underline:!0,pointer:!0,onClick:c,children:d("extendedprofile.addasafriend")}),!s&&l(V,{children:[t("i",{className:"icon icon-pf-tick"}),a&&t(S,{children:d("extendedprofile.me")}),e.isMyFriend&&t(S,{children:d("extendedprofile.friend")}),(r||e.requestSent)&&t(S,{children:d("extendedprofile.friendrequestsent")})]})]})]})]})]})},Ry=o=>{const[e,r]=i.exports.useState(null),[n,a]=i.exports.useState([]),[s,c]=i.exports.useState(null),u=()=>{r(null),a([]),c(null)},m=()=>{!e||e.id!==H().userId||Jt(e.id)};return U(lC,p=>{const g=p.getParser();!e||g.userId!==e.id||a(g.badges)}),U(zu,p=>{const g=p.getParser();!e||g.userId!==e.id||c(g)}),U(uC,p=>{const g=p.getParser();let h=!1;r(f=>(f&&f.id&&(h=f.id===g.id),g)),h||(a([]),c(null)),D(new cC(g.id)),D(new $u(g.id))}),U(dC,p=>{const g=p.getParser();g.userId==(e==null?void 0:e.id)&&Jt(g.userId)}),Te(ft.SELECTED,p=>{if(!e||p.category!==Q.UNIT)return;const g=ye().userDataManager.getUserDataByIndex(p.objectId);g.type===pt.USER&&Jt(g.webID)}),e?l(oe,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[t(se,{headerText:d("extendedprofile.caption"),onCloseClick:u}),l(ne,{overflow:"hidden",children:[l(re,{fullHeight:!1,gap:2,children:[l(T,{size:7,gap:1,className:"user-container pe-2",children:[t(wy,{userProfile:e}),t(re,{columnCount:5,fullHeight:!0,className:"bg-muted rounded px-2 py-1",children:t(Sy,{fullWidth:!0,center:!0,badges:n})})]}),t(T,{size:5,children:s&&t(Ty,{relationships:s,friendsCount:e.friendsCount})})]}),t(w,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:l(w,{alignItems:"center",gap:1,onClick:p=>ee(`navigator/search/hotel_view/owner:${e.username}`),children:[t("i",{className:"icon icon-rooms"}),t(S,{bold:!0,underline:!0,pointer:!0,children:d("extendedprofile.rooms")})]})}),t(vy,{fullWidth:!0,itsMe:e.id===H().userId,groups:e.groups,onLeaveGroup:m})]})]}):null},xy=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(null),[s,c]=Gd(),[u,m]=Bd(),p=(h,f)=>{let _=!0;const I=n.clone();switch(h){case"close_view":r(!1),_=!1;return;case"oldchat":I.oldChat=f,D(new pC(I.oldChat));break;case"room_invites":I.roomInvites=f,D(new gC(I.roomInvites));break;case"camera_follow":I.cameraFollow=f,D(new mC(I.cameraFollow));break;case"system_volume":I.volumeSystem=f,I.volumeSystem=Math.max(0,I.volumeSystem),I.volumeSystem=Math.min(100,I.volumeSystem);break;case"furni_volume":I.volumeFurni=f,I.volumeFurni=Math.max(0,I.volumeFurni),I.volumeFurni=Math.min(100,I.volumeFurni);break;case"trax_volume":I.volumeTrax=f,I.volumeTrax=Math.max(0,I.volumeTrax),I.volumeTrax=Math.min(100,I.volumeTrax);break}_&&a(I),Ii(I)},g=h=>{switch(h){case"volume":D(new hC(Math.round(n.volumeSystem),Math.round(n.volumeFurni),Math.round(n.volumeTrax)));break}};return U(Du,h=>{const f=h.getParser(),_=new fC;_.volumeSystem=f.volumeSystem,_.volumeFurni=f.volumeFurni,_.volumeTrax=f.volumeTrax,_.oldChat=f.oldChat,_.roomInvites=f.roomInvites,_.cameraFollow=f.cameraFollow,_.flags=f.flags,_.chatType=f.chatType,a(_),Ii(_)}),i.exports.useEffect(()=>{const h={linkReceived:f=>{const _=f.split("/");if(!(_.length<2))switch(_[1]){case"show":r(!0);return;case"hide":r(!1);return;case"toggle":r(I=>!I);return}},eventUrlPrefix:"user-settings/"};return _t(h),()=>Ct(h)},[]),i.exports.useEffect(()=>{n&&St(n)},[n]),!e||!n?null:l(oe,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[t(se,{headerText:d("widget.memenu.settings.title"),onCloseClick:h=>p("close_view")}),l(ne,{className:"text-black",children:[l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:n.oldChat,onChange:h=>p("oldchat",h.target.checked)}),t(S,{children:d("memenu.settings.chat.prefer.old.chat")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:n.roomInvites,onChange:h=>p("room_invites",h.target.checked)}),t(S,{children:d("memenu.settings.other.ignore.room.invites")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:n.cameraFollow,onChange:h=>p("camera_follow",h.target.checked)}),t(S,{children:d("memenu.settings.other.disable.room.camera.follow")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:s,onChange:h=>c(h.target.checked)}),t(S,{children:d("memenu.settings.other.place.multiple.objects")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:u,onChange:h=>m(h.target.checked)}),t(S,{children:d("memenu.settings.other.skip.purchase.confirmation")})]})]}),l(T,{children:[t(S,{bold:!0,children:d("widget.memenu.settings.volume")}),l(T,{gap:1,children:[t(S,{children:d("widget.memenu.settings.volume.ui")}),l(w,{alignItems:"center",gap:1,children:[n.volumeSystem===0&&t(Ta,{className:Vt(n.volumeSystem>=50&&"text-muted","fa-icon")}),n.volumeSystem>0&&t(va,{className:Vt(n.volumeSystem>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:n.volumeSystem,onChange:h=>p("system_volume",h.target.value),onMouseUp:()=>g("volume")}),t(wa,{className:Vt(n.volumeSystem<50&&"text-muted","fa-icon")})]})]}),l(T,{gap:1,children:[t(S,{children:d("widget.memenu.settings.volume.furni")}),l(w,{alignItems:"center",gap:1,children:[n.volumeFurni===0&&t(Ta,{className:Vt(n.volumeFurni>=50&&"text-muted","fa-icon")}),n.volumeFurni>0&&t(va,{className:Vt(n.volumeFurni>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:n.volumeFurni,onChange:h=>p("furni_volume",h.target.value),onMouseUp:()=>g("volume")}),t(wa,{className:Vt(n.volumeFurni<50&&"text-muted","fa-icon")})]})]}),l(T,{gap:1,children:[t(S,{children:d("widget.memenu.settings.volume.trax")}),l(w,{alignItems:"center",gap:1,children:[n.volumeTrax===0&&t(Ta,{className:Vt(n.volumeTrax>=50&&"text-muted","fa-icon")}),n.volumeTrax>0&&t(va,{className:Vt(n.volumeTrax>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:n.volumeTrax,onChange:h=>p("trax_volume",h.target.value),onMouseUp:()=>g("volume")}),t(wa,{className:Vt(n.volumeTrax<50&&"text-muted","fa-icon")})]})]})]})]})]})},yy=o=>{const{trigger:e=null,furniIds:r=[]}=ve();return l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.pickfurnis.caption",["count","limit"],[r.length.toString(),e.maximumItemSelectionCount.toString()])}),t(S,{small:!0,children:d("wiredfurni.pickfurnis.desc")})]})},dl=o=>{const{wiredType:e="",requiresFurni:r=ie.STUFF_SELECTION_OPTION_NONE,save:n=null,validate:a=null,children:s=null,hasSpecialInput:c=!1}=o,[u,m]=i.exports.useState(null),[p,g]=i.exports.useState(null),[h,f]=i.exports.useState(!1),{trigger:_=null,setTrigger:I=null,setIntParams:C=null,setStringParam:E=null,setFurniIds:b=null,setAllowsFurni:N=null,saveWired:v=null}=ve(),y=()=>I(null),R=()=>{a&&!a()||(n&&n(),f(!0))};return i.exports.useEffect(()=>{h&&(v(),f(!1))},[h,v]),i.exports.useEffect(()=>{if(!_)return;const x=_.spriteId||-1,F=H().getFloorItemData(x);F?(m(F.name),g(F.description)):(m("NAME: "+x),g("NAME: "+x)),c&&(C(_.intData),E(_.stringData)),r>ie.STUFF_SELECTION_OPTION_NONE&&b(k=>(k&&k.length&&hs.clearSelectionShaderFromFurni(k),_.selectedItems&&_.selectedItems.length?(hs.applySelectionShaderToFurni(_.selectedItems),_.selectedItems):[])),N(r)},[_,c,r,C,E,b,N]),l(oe,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[t(se,{headerText:d("wiredfurni.title"),onCloseClick:y}),l(ne,{children:[l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("i",{className:`icon icon-wired-${e}`}),t(S,{bold:!0,children:u})]}),t(S,{small:!0,children:p})]}),!!s&&t("hr",{className:"m-0 bg-dark"}),s,r>ie.STUFF_SELECTION_OPTION_NONE&&l(V,{children:[t("hr",{className:"m-0 bg-dark"}),t(yy,{})]}),l(w,{alignItems:"center",gap:1,children:[t(M,{fullWidth:!0,variant:"success",onClick:R,children:d("wiredfurni.ready")}),t(M,{fullWidth:!0,variant:"secondary",onClick:y,children:d("cancel")})]})]})]})},dt=o=>{const{requiresFurni:e=ie.STUFF_SELECTION_OPTION_NONE,save:r=null,hasSpecialInput:n=!1,children:a=null}=o,{trigger:s=null,actionDelay:c=0,setActionDelay:u=null}=ve();return i.exports.useEffect(()=>{u(s.delayInPulses)},[s,u]),l(dl,{wiredType:"action",requiresFurni:e,save:r,hasSpecialInput:n,children:[a,!!a&&t("hr",{className:"m-0 bg-dark"}),l(T,{children:[t(S,{bold:!0,children:d("wiredfurni.params.delay",["seconds"],[ro(c)])}),t(Pt,{className:"nitro-slider",min:0,max:20,value:c,onChange:m=>u(m)})]})]})},Oy="hd-180-1.ch-210-66.lg-270-82.sh-290-81",Ay=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(""),{trigger:s=null,setStringParam:c=null}=ve(),u=()=>c(e+Ns+n);return i.exports.useEffect(()=>{const m=s.stringData.split(Ns);m.length>0&&r(m[0]),m.length>1&&a(m[1].length>0?m[1]:Oy)},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:m=>r(m.target.value)})]}),l(w,{center:!0,children:[t(st,{figure:n,direction:4}),t(M,{onClick:m=>a(H().figure),children:d("wiredfurni.params.capture.figure")})]})]})},ky=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(-1),{trigger:s=null,setStringParam:c=null,setIntParams:u=null}=ve(),m=()=>{c(e),u([n])};return i.exports.useEffect(()=>{r(s.stringData),a(s.intData.length>0?s.intData[0]:0)},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:p=>r(p.target.value)})]}),l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:n===1,onChange:p=>a(1)}),t(S,{children:d("wiredfurni.params.start.following")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:n===0,onChange:p=>a(0)}),t(S,{children:d("wiredfurni.params.stop.following")})]})]})]})},Py=[2,5,7,8,9,10,27],Dy=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(-1),{trigger:s=null,setStringParam:c=null,setIntParams:u=null}=ve(),m=()=>{c(e),u([n])};return i.exports.useEffect(()=>{r(s.stringData),a(s.intData.length>0?s.intData[0]:0)},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:p=>r(p.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.handitem")}),l("select",{className:"form-select form-select-sm",value:n,onChange:p=>a(parseInt(p.target.value)),children:[t("option",{value:"0",children:"------"}),Py.map(p=>t("option",{value:p,children:d(`handitem${p}`)},p))]})]})]})},My=o=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:a=null}=ve(),s=()=>a(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},Ly=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(""),[s,c]=i.exports.useState(-1),{trigger:u=null,setStringParam:m=null,setIntParams:p=null}=ve(),g=()=>{m(e+Ns+n),p([s])};return i.exports.useEffect(()=>{const h=u.stringData.split(Ns);h.length>0&&r(h[0]),h.length>1&&a(h[1].length>0?h[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:h=>r(h.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:K("wired.action.bot.talk.to.avatar.max.length",64),value:n,onChange:h=>a(h.target.value)})]}),l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:s===0,onChange:h=>c(0)}),t(S,{children:d("wiredfurni.params.talk")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:s===1,onChange:h=>c(1)}),t(S,{children:d("wiredfurni.params.whisper")})]})]})]})},Uy=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(""),[s,c]=i.exports.useState(-1),{trigger:u=null,setStringParam:m=null,setIntParams:p=null}=ve(),g=()=>{m(e+Ns+n),p([s])};return i.exports.useEffect(()=>{const h=u.stringData.split(Ns);h.length>0&&r(h[0]),h.length>1&&a(h[1].length>0?h[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:h=>r(h.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:K("wired.action.bot.talk.max.length",64),value:n,onChange:h=>a(h.target.value)})]}),l(T,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:s===0,onChange:h=>c(0)}),t(S,{children:d("wiredfurni.params.talk")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:s===1,onChange:h=>c(1)}),t(S,{children:d("wiredfurni.params.shout")})]})]})]})},Fy=o=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:a=null}=ve(),s=()=>a(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},Gy=o=>t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),By=o=>t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Vy=o=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:a=null}=ve(),s=()=>a(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>r(c.target.value),maxLength:K("wired.action.chat.max.length",100)})]})})},Hy=o=>t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Wy=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(1),[s,c]=i.exports.useState(!1),[u,m]=i.exports.useState(1),[p,g]=i.exports.useState(1),[h,f]=i.exports.useState([]),{trigger:_=null,setIntParams:I=null,setStringParam:C=null}=ve(),E=()=>f(y=>[...y,{isBadge:!1,itemCode:"",probability:null}]),b=y=>{f(R=>{const x=Array.from(R);return x.splice(y,1),x})},N=(y,R,x,F)=>{const k=Array.from(h),A=k[y];A&&(A.isBadge=R,A.itemCode=x,A.probability=F,f(k))},v=()=>{let y=[];for(const R of h){if(!R.itemCode)continue;const x=[R.isBadge?"0":"1",R.itemCode,R.probability.toString()];y.push(x.join(","))}y.length>0&&(C(y.join(";")),I([n,s?1:0,u,p]))};return i.exports.useEffect(()=>{const y=[];if(_.stringData.length>0&&_.stringData.includes(";")){const R=_.stringData.split(";");for(const x of R){const F=x.split(",");F.length===3&&y.push({isBadge:F[0]==="0",itemCode:F[1],probability:Number(F[2])})}}y.length===0&&y.push({isBadge:!1,itemCode:"",probability:null}),a(_.intData.length>0?_.intData[0]:0),c(_.intData.length>1?_.intData[1]===1:!1),m(_.intData.length>2?_.intData[2]:0),g(_.intData.length>3?_.intData[3]:0),r(_.intData.length>3?_.intData[3]>0:!1),f(y)},[_]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:v,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:y=>r(y.target.checked)}),t(S,{children:d("wiredfurni.params.prizelimit",["amount"],[e?u.toString():""])})]}),!e&&t(S,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),e&&t(Pt,{className:"nitro-slider",min:1,max:1e3,value:u,onChange:y=>m(y)}),t("hr",{className:"m-0 bg-dark"}),l(T,{gap:1,children:[t(S,{bold:!0,children:"How often can a user be rewarded?"}),l(w,{gap:1,children:[l("select",{className:"form-select form-select-sm w-100",value:n,onChange:y=>a(Number(y.target.value)),children:[t("option",{value:"0",children:"Once"}),l("option",{value:"3",children:["Once every ",p," minutes"]}),l("option",{value:"2",children:["Once every ",p," hours"]}),l("option",{value:"1",children:["Once every ",p," days"]})]}),n>0&&t("input",{type:"number",className:"form-control form-control-sm",value:p,onChange:y=>g(Number(y.target.value))})]})]}),t("hr",{className:"m-0 bg-dark"}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:s,onChange:y=>c(y.target.checked)}),t(S,{children:"Unique rewards"})]}),t(S,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),t("hr",{className:"m-0 bg-dark"}),l(w,{justifyContent:"between",alignItems:"center",children:[t(S,{bold:!0,children:"Rewards"}),t(M,{variant:"success",onClick:E,children:t(Ys,{className:"fa-icon"})})]}),t(T,{gap:1,children:h&&h.map((y,R)=>l(w,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:y.isBadge,onChange:x=>N(R,x.target.checked,y.itemCode,y.probability)}),t(S,{small:!0,children:"Badge?"})]}),t("input",{type:"text",className:"form-control form-control-sm",value:y.itemCode,onChange:x=>N(R,y.isBadge,x.target.value,y.probability),placeholder:"Item Code"}),t("input",{type:"number",className:"form-control form-control-sm",value:y.probability,onChange:x=>N(R,y.isBadge,y.itemCode,Number(x.target.value)),placeholder:"Probability"}),R>0&&t(M,{variant:"danger",onClick:x=>b(R),children:t(ki,{className:"fa-icon"})})]},R))})]})},jy=o=>{const[e,r]=i.exports.useState(1),[n,a]=i.exports.useState(1),[s,c]=i.exports.useState(1),{trigger:u=null,setIntParams:m=null}=ve(),p=()=>m([e,n,s]);return i.exports.useEffect(()=>{u.intData.length>=2?(r(u.intData[0]),a(u.intData[1]),c(u.intData[2])):(r(1),a(1),c(1))},[u]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:p,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:100,value:e,onChange:g=>r(g)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.settimesingame",["times"],[n.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:10,value:n,onChange:g=>a(g)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.team")}),[1,2,3,4].map(g=>l(w,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${g}`,checked:s===g,onChange:h=>c(g)}),t(S,{children:d("wiredfurni.params.team."+g)})]},g))]})]})},qy=o=>{const[e,r]=i.exports.useState(1),[n,a]=i.exports.useState(1),{trigger:s=null,setIntParams:c=null}=ve(),u=()=>c([e,n]);return i.exports.useEffect(()=>{s.intData.length>=2?(r(s.intData[0]),a(s.intData[1])):(r(1),a(1))},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:100,value:e,onChange:m=>r(m)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.settimesingame",["times"],[n.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:10,value:n,onChange:m=>a(m)})]})]})},Yy=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.team")}),[1,2,3,4].map(c=>l(w,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>r(c)}),t(S,{children:d(`wiredfurni.params.team.${c}`)})]},c))]})})},zy=o=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:a=null}=ve(),s=()=>a(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>r(c.target.value),maxLength:K("wired.action.kick.from.room.max.length",100)})]})})},$y=o=>t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Ky=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],Xy=[0,1,2,3,4,5,6],Qy=o=>{const[e,r]=i.exports.useState(-1),[n,a]=i.exports.useState(-1),{trigger:s=null,setIntParams:c=null}=ve(),u=()=>c([e,n]);return i.exports.useEffect(()=>{s.intData.length>=2?(r(s.intData[0]),a(s.intData[1])):(r(-1),a(-1))},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.startdir")}),t(w,{gap:1,children:Ky.map(m=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${m.value}`,checked:e===m.value,onChange:p=>r(m.value)}),t(S,{children:t("i",{className:`icon icon-${m.icon}`})})]},m.value))})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.turn")}),Xy.map(m=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${m}`,checked:n===m,onChange:p=>a(m)}),t(S,{children:d(`wiredfurni.params.turn.${m}`)})]},m))]})]})},Jy=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],Zy=o=>{const[e,r]=i.exports.useState(-1),[n,a]=i.exports.useState(-1),{trigger:s=null,setIntParams:c=null}=ve(),u=()=>c([n,e]);return i.exports.useEffect(()=>{s.intData.length>=2?(r(s.intData[1]),a(s.intData[0])):(r(-1),a(-1))},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.emptytiles",["tiles"],[e.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:5,value:e,onChange:m=>r(m)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.startdir")}),t(w,{gap:1,children:Jy.map(m=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${m.value}`,checked:n===m.value,onChange:p=>a(m.value)}),t(S,{children:t("i",{className:`icon icon-${m.icon}`})})]},m.value))})]})]})},eO=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],tO=[0,1,2,3],rO=o=>{const[e,r]=i.exports.useState(-1),[n,a]=i.exports.useState(-1),{trigger:s=null,setIntParams:c=null}=ve(),u=()=>c([e,n]);return i.exports.useEffect(()=>{s.intData.length>=2?(r(s.intData[0]),a(s.intData[1])):(r(-1),a(-1))},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.movefurni")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:e===0,onChange:m=>r(0)}),t(S,{children:d("wiredfurni.params.movefurni.0")})]}),l(w,{gap:1,children:[eO.map(m=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${m.value}`,checked:e===m.value,onChange:p=>r(m.value)}),t("i",{className:`icon icon-${m.icon}`})]},m.value)),t("div",{className:"col"})]})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.rotatefurni")}),tO.map(m=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${m}`,checked:n===m,onChange:p=>a(m)}),l(S,{children:[[1,2].includes(m)&&t("i",{className:`icon icon-rot-${m}`}),d(`wiredfurni.params.rotatefurni.${m}`)]})]},m))]})]})},nO=o=>{const[e,r]=i.exports.useState(-1),[n,a]=i.exports.useState(""),{trigger:s=null,setIntParams:c=null,setStringParam:u=null}=ve(),m=()=>{c([e]),u(n)};return i.exports.useEffect(()=>{r(s.intData.length>0?s.intData[0]:0),a(s.stringData)},[s]),l(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.length.minutes",["minutes"],[e.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:10,value:e,onChange:p=>r(p)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:p=>a(p.target.value),maxLength:K("wired.action.mute.user.max.length",100)})]})]})},sO=o=>t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),oO=o=>{const[e,r]=i.exports.useState(0),[n,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),{trigger:u=null,setIntParams:m=null}=ve(),p=()=>m([e,n,s]);return i.exports.useEffect(()=>{r(u.getBoolean(0)?1:0),a(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:p,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.conditions")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:g=>r(g.target.checked?1:0)}),t(S,{children:d("wiredfurni.params.condition.state")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:g=>a(g.target.checked?1:0)}),t(S,{children:d("wiredfurni.params.condition.direction")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!s,onChange:g=>c(g.target.checked?1:0)}),t(S,{children:d("wiredfurni.params.condition.position")})]})]})})},aO=o=>t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),iO=o=>t(dt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),lO=o=>{switch(o){case pe.BOT_CHANGE_FIGURE:return t(Ay,{});case pe.BOT_FOLLOW_AVATAR:return t(ky,{});case pe.BOT_GIVE_HAND_ITEM:return t(Dy,{});case pe.BOT_MOVE:return t(My,{});case pe.BOT_TALK:return t(Uy,{});case pe.BOT_TALK_DIRECT_TO_AVTR:return t(Ly,{});case pe.BOT_TELEPORT:return t(Fy,{});case pe.CALL_ANOTHER_STACK:return t(Gy,{});case pe.CHASE:return t(By,{});case pe.CHAT:return t(Vy,{});case pe.FLEE:return t(Hy,{});case pe.GIVE_REWARD:return t(Wy,{});case pe.GIVE_SCORE:return t(qy,{});case pe.GIVE_SCORE_TO_PREDEFINED_TEAM:return t(jy,{});case pe.JOIN_TEAM:return t(Yy,{});case pe.KICK_FROM_ROOM:return t(zy,{});case pe.LEAVE_TEAM:return t($y,{});case pe.MOVE_FURNI:return t(rO,{});case pe.MOVE_AND_ROTATE_FURNI:return t(Qy,{});case pe.MOVE_FURNI_TO:return t(Zy,{});case pe.MUTE_USER:return t(nO,{});case pe.RESET:return t(sO,{});case pe.SET_FURNI_STATE:return t(oO,{});case pe.TELEPORT:return t(aO,{});case pe.TOGGLE_FURNI_STATE:return t(iO,{})}return null},Zt=o=>{const{requiresFurni:e=ie.STUFF_SELECTION_OPTION_NONE,save:r=null,hasSpecialInput:n=!1,children:a=null}=o;return t(dl,{wiredType:"condition",requiresFurni:e,hasSpecialInput:n,save:()=>r&&r(),children:a})},cO=[2,5,7,8,9,10,27],uO=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.handitem")}),t("select",{className:"form-select form-select-sm",value:e,onChange:c=>r(parseInt(c.target.value)),children:cO.map(c=>t("option",{value:c,children:d(`handitem${c}`)},c))})]})})},dO=o=>t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),mO=o=>t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),gO=[1,2,3,4],pO=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.team")}),gO.map(c=>l(w,{gap:1,alignItems:"center",children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>r(c)}),t(S,{children:d(`wiredfurni.params.team.${c}`)})]},c))]})})},hO=o=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:a=null}=ve(),s=()=>a(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.badgecode")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>r(c.target.value)})]})})},fO=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r((n==null?void 0:n.intData[0])??0)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.tooltip.effectid")}),t("input",{type:"number",className:"form-control form-control-sm",value:e,onChange:c=>r(parseInt(c.target.value))})]})})},IO=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(""),{trigger:s=null,setIntParams:c=null}=ve(),u=()=>{let m=0,p=0;const g=new Date(e),h=new Date(n);g&&h&&(m=g.getTime()/1e3,p=h.getTime()/1e3),c([m,p])};return i.exports.useEffect(()=>{if(s.intData.length>=2){let m=new Date,p=new Date;s.intData[0]>0&&(m=new Date(s.intData[0]*1e3)),s.intData[1]>0&&(p=new Date(s.intData[1]*1e3)),r(Jl(m)),a(Jl(p))}},[s]),l(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.startdate")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:m=>r(m.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.enddate")}),t("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:m=>a(m.target.value)})]})]})},EO=o=>t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),_O=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.requireall")}),[0,1].map(c=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>r(c)}),t(S,{children:d("wiredfurni.params.requireall."+c)})]},c))]})})},CO=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.not_requireall")}),[0,1].map(c=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>r(c)}),t(S,{children:d(`wiredfurni.params.not_requireall.${c}`)})]},c))]})})},bO=o=>t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),SO=o=>{const[e,r]=i.exports.useState(0),[n,a]=i.exports.useState(0),[s,c]=i.exports.useState(0),{trigger:u=null,setIntParams:m=null}=ve(),p=()=>m([e,n,s]);return i.exports.useEffect(()=>{r(u.getBoolean(0)?1:0),a(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:p,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.conditions")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:g=>r(g.target.checked?1:0)}),t(S,{children:d("wiredfurni.params.condition.state")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!n,onChange:g=>a(g.target.checked?1:0)}),t(S,{children:d("wiredfurni.params.condition.direction")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!s,onChange:g=>c(g.target.checked?1:0)}),t(S,{children:d("wiredfurni.params.condition.position")})]})]})})},NO=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.allowbefore",["seconds"],[ro(e)])}),t(Pt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>r(c)})]})})},TO=o=>{const[e,r]=i.exports.useState(-1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.allowafter",["seconds"],[ro(e)])}),t(Pt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>r(c)})]})})},vO=o=>{const[e,r]=i.exports.useState(1),[n,a]=i.exports.useState(1),{trigger:s=null,setIntParams:c=null}=ve(),u=()=>c([e,n]);return i.exports.useEffect(()=>{s.intData.length>=2?(r(s.intData[0]),a(s.intData[1])):(r(1),a(1))},[s]),l(Zt,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.usercountmin",["value"],[e.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:50,value:e,onChange:m=>r(m)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.usercountmax",["value"],[n.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:50,value:n,onChange:m=>a(m)})]})]})},wO=o=>{switch(o){case he.ACTOR_HAS_HANDITEM:return t(uO,{});case he.ACTOR_IS_GROUP_MEMBER:case he.NOT_ACTOR_IN_GROUP:return t(dO,{});case he.ACTOR_IS_ON_FURNI:case he.NOT_ACTOR_ON_FURNI:return t(mO,{});case he.ACTOR_IS_IN_TEAM:case he.NOT_ACTOR_IN_TEAM:return t(pO,{});case he.ACTOR_IS_WEARING_BADGE:case he.NOT_ACTOR_WEARS_BADGE:return t(hO,{});case he.ACTOR_IS_WEARING_EFFECT:case he.NOT_ACTOR_WEARING_EFFECT:return t(fO,{});case he.DATE_RANGE_ACTIVE:return t(IO,{});case he.FURNIS_HAVE_AVATARS:case he.FURNI_NOT_HAVE_HABBO:return t(EO,{});case he.HAS_STACKED_FURNIS:return t(_O,{});case he.NOT_HAS_STACKED_FURNIS:return t(CO,{});case he.STUFF_TYPE_MATCHES:case he.NOT_FURNI_IS_OF_TYPE:return t(bO,{});case he.STATES_MATCH:case he.NOT_STATES_MATCH:return t(SO,{});case he.TIME_ELAPSED_LESS:return t(NO,{});case he.TIME_ELAPSED_MORE:return t(TO,{});case he.USER_COUNT_IN:case he.NOT_USER_COUNT_IN:return t(vO,{})}return null},gr=o=>{const{requiresFurni:e=ie.STUFF_SELECTION_OPTION_NONE,save:r=null,hasSpecialInput:n=!1,children:a=null}=o;return t(dl,{wiredType:"trigger",requiresFurni:e,hasSpecialInput:n,save:()=>r&&r(),children:a})},RO=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(0),{trigger:s=null,setStringParam:c=null}=ve(),u=()=>c(n===1?e:"");return i.exports.useEffect(()=>{r(s.stringData),a(s.stringData?1:0)},[s]),t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.picktriggerer")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:n===0,onChange:m=>a(0)}),t(S,{children:d("wiredfurni.params.anyavatar")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:n===1,onChange:m=>a(1)}),t(S,{children:d("wiredfurni.params.certainavatar")})]}),n===1&&t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:m=>r(m.target.value)})]})})},xO=o=>{const[e,r]=i.exports.useState(""),[n,a]=i.exports.useState(-1),{trigger:s=null,setStringParam:c=null,setIntParams:u=null}=ve(),m=()=>{c(e),u([n])};return i.exports.useEffect(()=>{r(s.stringData),a(s.intData.length>0?s.intData[0]:0)},[s]),l(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.whatissaid")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:p=>r(p.target.value)})]}),l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.picktriggerer")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:n===0,onChange:p=>a(0)}),t(S,{children:d("wiredfurni.params.anyavatar")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:n===1,onChange:p=>a(1)}),t(S,{children:H().userName})]})]})]})},yO=o=>t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),OO=o=>t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),AO=o=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:a=null}=ve(),s=()=>a(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},kO=o=>{const[e,r]=i.exports.useState(""),{trigger:n=null,setStringParam:a=null}=ve(),s=()=>a(e);return i.exports.useEffect(()=>{r(n.stringData)},[n]),t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>r(c.target.value)})]})})},PO=o=>t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),DO=o=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.settime",["seconds"],[ro(e)])}),t(Pt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>r(c)})]})})},MO=o=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.setlongtime",["time"],[Vr.format(e*5).toString()])}),t(Pt,{className:"nitro-slider",min:1,max:120,value:e,onChange:c=>r(c)})]})})},LO=o=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.settime",["seconds"],[ro(e)])}),t(Pt,{className:"nitro-slider",min:1,max:60,value:e,onChange:c=>r(c)})]})})},UO=o=>t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),FO=o=>t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),GO=o=>{const[e,r]=i.exports.useState(1),{trigger:n=null,setIntParams:a=null}=ve(),s=()=>a([e]);return i.exports.useEffect(()=>{r(n.intData.length>0?n.intData[0]:0)},[n]),t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:s,children:l(T,{gap:1,children:[t(S,{bold:!0,children:d("wiredfurni.params.setscore",["points"],[e.toString()])}),t(Pt,{className:"nitro-slider",min:1,max:1e3,value:e,onChange:c=>r(c)})]})})},BO=o=>t(gr,{requiresFurni:ie.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),VO=o=>{switch(o){case Je.AVATAR_ENTERS_ROOM:return t(RO,{});case Je.AVATAR_SAYS_SOMETHING:return t(xO,{});case Je.AVATAR_WALKS_OFF_FURNI:return t(yO,{});case Je.AVATAR_WALKS_ON_FURNI:return t(OO,{});case Je.BOT_REACHED_AVATAR:return t(AO,{});case Je.BOT_REACHED_STUFF:return t(kO,{});case Je.COLLISION:return t(PO,{});case Je.EXECUTE_ONCE:return t(DO,{});case Je.EXECUTE_PERIODICALLY:return t(LO,{});case Je.EXECUTE_PERIODICALLY_LONG:return t(MO,{});case Je.GAME_ENDS:return t(UO,{});case Je.GAME_STARTS:return t(FO,{});case Je.SCORE_ACHIEVED:return t(GO,{});case Je.TOGGLE_FURNI:return t(BO,{})}return null},HO=o=>{const{trigger:e=null}=ve();return e?e instanceof Ou?lO(e.code):e instanceof Au?VO(e.code):e instanceof ku?wO(e.code):null:null},WO=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(!0);return Ye(qt.CREATED,s=>a(!1)),Ye(qt.ENDED,s=>a(s.openLandingView)),i.exports.useEffect(()=>{r(!0),Gs().connection.onReady()},[]),i.exports.useEffect(()=>{const s={linkReceived:c=>{const u=c.split("/");if(!(u.length<2))switch(u[1]){case"open":if(u.length>2)switch(u[2]){case"credits":break;default:{const m=u[2];zs.openHabblet(m)}}return}},eventUrlPrefix:"habblet/"};return _t(s),()=>Ct(s)},[]),l(L,{fit:!0,children:[t(no,{type:wt.FADE_IN,inProp:n,timeout:300,children:t(Aw,{})}),t(by,{isInRoom:!n}),t(nR,{}),t(_y,{}),t(iv,{}),t(HO,{}),t(mT,{}),t(nT,{}),t(ER,{}),t(Hw,{}),t(av,{}),t(Av,{}),t(WR,{}),t(xy,{}),t(Ry,{}),t($v,{}),t(_T,{}),t(Tw,{}),t(CR,{}),t(ow,{}),t(aw,{}),t(ST,{}),t(Mv,{}),t(Ev,{})]})};pu.UI_VERSION=md();const jO=o=>{const[e,r]=i.exports.useState(!1),[n,a]=i.exports.useState(!1),[s,c]=i.exports.useState("Getting Ready"),[u,m]=i.exports.useState(0),[p,g]=i.exports.useState(!0);if(!_e()){if(!NitroConfig)throw new Error("NitroConfig is not defined!");is.bootstrap()}const h=i.exports.useCallback(async f=>{switch(f.type){case po.LOADED:_e().localization.init(),m(_=>_+20);return;case po.FAILED:a(!0),c("Configuration Failed");return;case is.WEBGL_UNAVAILABLE:a(!0),c("WebGL Required");return;case is.WEBGL_CONTEXT_LOST:a(!0),c("WebGL Context Lost - Reloading"),setTimeout(()=>window.location.reload(),1500);return;case $r.CONNECTION_HANDSHAKING:m(_=>_+20);return;case $r.CONNECTION_HANDSHAKE_FAILED:a(!0),c("Handshake Failed");return;case $r.CONNECTION_AUTHENTICATED:m(_=>_+20),_e().init(),Fs.available&&Fs.call("legacyTrack","authentication","authok",[]);return;case $r.CONNECTION_ERROR:a(!0),c("Connection Error");return;case $r.CONNECTION_CLOSED:c("Connection Error"),zs.send(-1,"client.init.handshake.fail");return;case hr.ENGINE_INITIALIZED:m(_=>_+20),setTimeout(()=>r(!0),300);return;case Dl.LOADED:{const _=K("preload.assets.urls"),I=[];if(_&&_.length)for(const E of _)I.push(un.interpolate(E));await Uu().downloadAssets(I)?(Gs().init(),m(E=>E+20)):(a(!0),c("Assets Failed"));return}}},[]);return Fn(is.WEBGL_UNAVAILABLE,h),Fn(is.WEBGL_CONTEXT_LOST,h),Fn($r.CONNECTION_HANDSHAKING,h),Fn($r.CONNECTION_HANDSHAKE_FAILED,h),Fn($r.CONNECTION_AUTHENTICATED,h),Fn($r.CONNECTION_ERROR,h),Fn($r.CONNECTION_CLOSED,h),Te(hr.ENGINE_INITIALIZED,h),qb(Dl.LOADED,h),tc(po.LOADED,h),tc(po.FAILED,h),i.exports.useEffect(()=>{_e().core.configuration.init();const f=_=>g(!(window.devicePixelRatio%1));return window.addEventListener("resize",f),f(),()=>{window.removeEventListener("resize",f)}},[]),l(L,{fit:!0,overflow:"hidden",className:p&&"image-rendering-pixelated",children:[(!e||n)&&t(Wb,{isError:n,message:s,percent:u}),t(no,{type:wt.FADE_IN,inProp:e,children:t(WO,{})}),t(L,{id:"draggable-windows-container"})]})};zm(document.getElementById("root")).render(t(jO,{}));
